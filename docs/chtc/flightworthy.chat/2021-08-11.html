<!DOCTYPE html>
<html>
<head>
<title>Wed Aug 11, 2021 : #flightworthy (chtc)</title>
</head>
<body>
<h3>Wed Aug 11, 2021 : #flightworthy (chtc)</h3>
<span style="color: #4cc091"><span style="font-size: small">(08:50:50)</span> <b>blin:</b></span> @tim @jfrey @johnkn let me know the condor tarball RC I should test after you guys are through with it<br/>
<span style="color: #4cc091"><span style="font-size: small">(08:54:43)</span> <b>blin:</b></span> did we ever get around to figuring out a way to publish the manual on demand instead of tying it to the release?<br/>
<blockquote>
<span style="color: #4cc091"><span style="font-size: small">(08:55:19)</span> <b>blin:</b></span> i was just looking through the 9.1 manual version history and the last 9.0 version referenced is 9.0.1 <a href="https://htcondor.readthedocs.io/en/latest/version-history/stable-release-series-90.html">https://htcondor.readthedocs.io/en/latest/version-history/stable-release-series-90.html</a><br/>
<span style="color: #4cc091"><span style="font-size: small">(08:57:05)</span> <b>blin:</b></span> though instead of doing live-ish updates, we could just have that page redirect to the 9.0 manual version history<br/>
<span style="color: #99a949"><span style="font-size: small">(09:25:36)</span> <b>matyas:</b></span> Apparently Stuart noticed the same thing.<br/>
<span style="color: #bb86b7"><span style="font-size: small">(09:59:28)</span> <b>tim:</b></span> Yes, that is expected, The 9.1.[12] security releases were based on 9.1.0 and as such do not contain any of the 9.0.2 fixes.<br/>
<span style="color: #99a949"><span style="font-size: small">(10:03:25)</span> <b>matyas:</b></span> If X goes into both 9.0 and 9.1, will both release series pages contain a line about X? Or will the 9.1 page just refer to the 9.0 release?<br/>
<span style="color: #99a949"><span style="font-size: small">(10:05:15)</span> <b>matyas:</b></span> if it's the former, it might be worth saying that 9.0 and 9.1 are independent(-ish) release series and people shouldn't expect any specific 9.1 release to correspond to any 9.0 release<br/>
<span style="color: #99a949"><span style="font-size: small">(10:06:19)</span> <b>matyas:</b></span> and/or do the redirect thing that Brian suggested (except maybe make it a link instead of a redirect because I can see a redirect to a different version of the same doc being annoying)<br/>
<span style="color: #99a949"><span style="font-size: small">(10:08:55)</span> <b>matyas:</b></span> of course the simplest thing is to add a note saying that 9.1.[12] were based on 9.1.0<br/>
<span style="color: #99a949"><span style="font-size: small">(10:09:27)</span> <b>matyas:</b></span> but yeah don't just omit them or people will get confused<br/>
<span style="color: #bb86b7"><span style="font-size: small">(10:24:09)</span> <b>tim:</b></span> I can add a note. When 9.1.3 goes out the door. Then the world aligns again.<br/>
<span style="color: #99a949"><span style="font-size: small">(10:24:21)</span> <b>matyas:</b></span> ok<br/>
<span style="color: #99a949"><span style="font-size: small">(10:24:51)</span> <b>matyas:</b></span> I don't like how the manual is tied to the release but that's a separate issue<br/>
<span style="color: #bb86b7"><span style="font-size: small">(10:27:51)</span> <b>tim:</b></span> We things are a lot different between the V8_8, V9_0, and V9_1. How could we make it better?<br/>
<span style="color: #bb86b7"><span style="font-size: small">(10:28:42)</span> <b>tim:</b></span> Those tags always point to the latest version of that series. And they will exist in the long term and should be used in any documentation.<br/>
<span style="color: #99a949"><span style="font-size: small">(10:28:53)</span> <b>matyas:</b></span> release series is fine<br/>
<span style="color: #99a949"><span style="font-size: small">(10:29:02)</span> <b>matyas:</b></span> specific release is not<br/>
<span style="color: #99a949"><span style="font-size: small">(10:31:31)</span> <b>matyas:</b></span> the contents of the manual aren't specifically tied to the code<br/>
<span style="color: #99a949"><span style="font-size: small">(10:32:21)</span> <b>matyas:</b></span> suppose there is a typo in the manual, like one version says the default value of FOO is 10 and then, say, when master is 9.1.5, you find out it's 20<br/>
<span style="color: #99a949"><span style="font-size: small">(10:32:53)</span> <b>matyas:</b></span> that change is retroactive<br/>
<span style="color: #99a949"><span style="font-size: small">(10:33:21)</span> <b>matyas:</b></span> it didn't become 20 in 9.1.5, it was always 20. It was 20 in 9.1.0, 9.1.1, 9.1.2, etc.<br/>
<span style="color: #99a949"><span style="font-size: small">(10:34:19)</span> <b>matyas:</b></span> why should we wait for 9.1.5 to say otherwise?<br/>
<span style="color: #4cc091"><span style="font-size: small">(10:35:18)</span> <b>blin:</b></span> it would be nice to separate the docs from the source<br/>
<span style="color: #99a949"><span style="font-size: small">(10:35:26)</span> <b>matyas:</b></span> yep<br/>
<span style="color: #4cc091"><span style="font-size: small">(10:35:32)</span> <b>blin:</b></span> but i imagine it's non-trivial<br/>
<span style="color: #4cc091"><span style="font-size: small">(10:36:04)</span> <b>blin:</b></span> it would be really nice to stop using readthedocs, though. that way we're not tied to tags<br/>
<span style="color: #99a949"><span style="font-size: small">(10:36:15)</span> <b>matyas:</b></span> can we regularly build from a branch?<br/>
<span style="color: #99a949"><span style="font-size: small">(10:36:43)</span> <b>matyas:</b></span> like every night build the 9.1 manual from master, 9.0 manual from V9_0-branch, etc.<br/>
<span style="color: #4cc091"><span style="font-size: small">(10:39:42)</span> <b>blin:</b></span> i think it can but you do want to allow folks to work on their doc changes that are tied to the next release<br/>
<span style="color: #4cc091"><span style="font-size: small">(10:39:53)</span> <b>blin:</b></span> i think it'd take process changes by the dev team<br/>
<span style="color: #99a949"><span style="font-size: small">(10:40:38)</span> <b>matyas:</b></span> mmm. yeah I guess<br/>
</blockquote>
<span style="color: #4cc091"><span style="font-size: small">(09:32:19)</span> <b>blin:</b></span> where can i find the condor supported platforms list?<br/>
<span style="color: #bb86b7"><span style="font-size: small">(10:02:30)</span> <b>tim:</b></span> It used to be in the manual and on the downloads page. <a href="https://htcondor.readthedocs.io/en/v8_8/overview/availability.html">https://htcondor.readthedocs.io/en/v8_8/overview/availability.html</a>  Now, I guess it is in the gethtcondor script.<br/>
<blockquote>
<span style="color: #9e3997"><span style="font-size: small">(2021-08-16 10:37:32)</span> <b>tlmiller:</b></span> As far as I know, except for Mac, all the platforms we support are listed on the front page.  (Mac wasn't listed until just recently because the documentation wasn't available.)<br/>
<span style="color: #bb86b7"><span style="font-size: small">(2021-08-16 10:46:23)</span> <b>tim:</b></span> Well, ToddT stated that we support Scientific Linux 7 and promised to update gethtcondor to handle that. Also, can we build on CentOS7 and run tests on that build on RHEL7 and SL7 as well?<br/>
<span style="color: #bb86b7"><span style="font-size: small">(2021-08-16 10:46:43)</span> <b>tim:</b></span> @tlmiller<br/>
<span style="color: #9e3997"><span style="font-size: small">(2021-08-16 10:50:16)</span> <b>tlmiller:</b></span> I wasn't here when ToddT declared that we support SL7.  And yes, Metronome can do cross-platform tests; the HTCondor glue might already even know how.<br/>
</blockquote>
<span style="color: #5a4592"><span style="font-size: small">(10:10:30)</span> <b>tannenba:</b></span> @ckoch5 There is a growing list of areas to improve either the current 'Getting HTCondor' documentation and/or the "Download" , like :point_up:.   Could you start to collect these ideas into a Jira ticket?  While a couple of them are more major (couple days), several are likely 30 min max to knock off....<br/>
<span style="color: #e7392d"><span style="font-size: small">(10:20:51)</span> <b>ckoch5:</b></span> I can tryâ€¦<br/>
<span style="color: #5a4592"><span style="font-size: small">(10:23:11)</span> <b>tannenba:</b></span> Thanks!  Please add me a watcher on the ticket... I can add a few items there as well....<br/>
<span style="color: #4cc091"><span style="font-size: small">(11:20:11)</span> <b>blin:</b></span> when <tt>CERTIFICATE_MAPFILE_ASSUME_HASH_KEYS = True</tt> , do the regular expressions in the mapfile have to be exact matches?<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:21:43)</span> <b>johnkn:</b></span> they aren't any different from the old regexes it's just that un-delimited strings are not assumed to be regexes<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:22:38)</span> <b>johnkn:</b></span> non-regexes are exact matches<br/>
<span style="color: #4cc091"><span style="font-size: small">(11:25:44)</span> <b>blin:</b></span> actually now that i think about it...i'm pretty sure i remember <tt>CERTIFICATE_MAPFILE_ASSUME_HASH_KEYS = False</tt> with this worked:<br/><pre>SCITOKENS "<a href="https://wlcg.cloud.cnaf.infn.it">https://wlcg.cloud.cnaf.infn.it</a>" osgtest</pre><br/>but when we moved to <tt>CERTIFICATE_MAPFILE_ASSUME_HASH_KEYS = True</tt>, I had to change it to this:<br/><pre>SCITOKENS /^https:\/\/wlcg.cloud.cnaf.infn.it,.*/ osgtest</pre><br/>which would mean that the regex would have to match the entire string<br/>
<span style="color: #4cc091"><span style="font-size: small">(11:26:20)</span> <b>blin:</b></span> instead of allowing partial matches, i.e. implied bookended <tt>.*</tt><br/>
<span style="color: #235e5b"><span style="font-size: small">(11:37:48)</span> <b>johnkn:</b></span> nope.  non-hash entries are the same when that knob is true and when it is false<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:38:44)</span> <b>johnkn:</b></span> the only thing that changes is whether the parser only allows "", and makes everything inside a regex, or if it allows both "" and // and uses the quote character to decide what it is<br/>
<span style="color: #4cc091"><span style="font-size: small">(11:39:19)</span> <b>blin:</b></span> i'm 90% sure that <tt>CERTIFICATE_MAPFILE_ASSUME_HASH_KEYS = True</tt> caused the following to start failing<br/><pre>SCITOKENS /^https:\/\/wlcg.cloud.cnaf.infn.it/ osgtest</pre><br/>but i'll try to repro<br/>
<span style="color: #4cc091"><span style="font-size: small">(11:39:29)</span> <b>blin:</b></span> oh wait, that should be easy with the CE dev container!<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:40:13)</span> <b>johnkn:</b></span> you *would* need to start escaping the / characters<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:40:48)</span> <b>johnkn:</b></span> I don't think you would have needed to do that before<br/>
<span style="color: #4cc091"><span style="font-size: small">(11:40:53)</span> <b>blin:</b></span> yeah, and i did?<br/>
<span style="color: #4cc091"><span style="font-size: small">(11:56:39)</span> <b>blin:</b></span> looks like it works like you said so i'm a dummy<br/>
<span style="color: #5a4592"><span style="font-size: small">(12:17:30)</span> <b>tannenba:</b></span> @tim @coatsworth Mark, Tim - The HTCondor manual currently on ReadTheDocs is completely borked with regards to our Python bindings docs.  Not just the tutorials, but all the API documentation is missing!  For example see <a href="https://htcondor.readthedocs.io/en/latest/apis/python-bindings/api/htcondor.html#interacting-with-collectors">https://htcondor.readthedocs.io/en/latest/apis/python-bindings/api/htcondor.html#interacting-with-collectors</a><br/>Note when I build the manual myself in a container with sphinx-autobuild, everthing is just dandy....<br/>
<span style="color: #2b6836"><span style="font-size: small">(12:18:13)</span> <b>jcpatton:</b></span> Latest bindings might not have been up on PyPI at time of build? Might just need a rebuild?<br/>
<span style="color: #bb86b7"><span style="font-size: small">(12:21:10)</span> <b>tim:</b></span> I'll look at it after lunch.<br/>
<span style="color: #bb86b7"><span style="font-size: small">(13:11:59)</span> <b>tim:</b></span> Kicked off a rebuild.<br/>
<span style="color: #5a4592"><span style="font-size: small">(13:24:33)</span> <b>tannenba:</b></span> @tim @jcpatton So do I understand correctly from Jason's comment that if I want to build Version X of the Manual, the Python Bindings for HTCondor Version X must be in PyPI before I build the Manual.  Did I get that right?  If yes, is that ordering reflected in the release punchlist?  Tim, by what date will the Release Punchlist be available to me on condor-wiki (we discussed this Monday) ?<br/>
<span style="color: #bb86b7"><span style="font-size: small">(13:26:21)</span> <b>tim:</b></span> Yes, the Python wheels must be uploaded to Pypi before the manual can be built and the release process reflects this fact.<br/>
<span style="color: #bb86b7"><span style="font-size: small">(13:29:12)</span> <b>tim:</b></span> So, I kicked off the manual build immediately after uploading the wheels. So, perhaps something was cached somewhere? This probably hit the security release because of the quick sequence of events. Normally, we build the wheels off of the RC tag first (required for CHTC). So, even if the steps are quick succession, we might pick up the RC wheel from a week or three before.<br/>
<span style="color: #bb86b7"><span style="font-size: small">(13:30:48)</span> <b>tim:</b></span> In any case, I just pushed the rebuild button on the manual and it looks good now. You'll may have to do a hard reload to see the update.<br/>
<span style="color: #2b6836"><span style="font-size: small">(13:30:52)</span> <b>jcpatton:</b></span> Yeah, I was going to guess that in a normal release cycle, we usually have a prerelease in PyPI that works as a sort of a backup for the RTD build if the release version isnâ€™t uploaded (or available) for some reason<br/>
<span style="color: #2b6836"><span style="font-size: small">(13:31:09)</span> <b>jcpatton:</b></span> but for a security release, we donâ€™t have prerelease wheels up<br/>
<span style="color: #2b6836"><span style="font-size: small">(13:32:26)</span> <b>jcpatton:</b></span> Maybe worth noting at the end of the release punchlist (when you have a chance) to check the python API docs and kick off a rebuild if needed<br/>
<span style="color: #674b1b"><span style="font-size: small">(13:38:15)</span> <b>coatsworth:</b></span> Thanks @tim Tim, I just took a look and the API looks fine. However it seems like the Python bindings tutorials are still hidden? These should be working now if you want to re-enable them.<br/>
<span style="color: #674b1b"><span style="font-size: small">(13:51:48)</span> <b>coatsworth:</b></span> Does anybody have a minute to code review HTCONDOR-635? It's just a purge of dead code, almost entirely deletions. The only additions are newlines, indentation changes, etc.<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:14:06)</span> <b>johnkn:</b></span> not right now, but I will probably have time later today.<br/>
<span style="color: #4cc091"><span style="font-size: small">(15:07:57)</span> <b>blin:</b></span> is there a way to set/interact with private job attrs with the python bindings?<br/>
<span style="color: #684b6c"><span style="font-size: small">(15:08:44)</span> <b>bbockelman:</b></span> I've been able to query private job attrs in the past -- make sure you authenticate with the right authorization level.<br/>
<span style="color: #4cc091"><span style="font-size: small">(15:11:44)</span> <b>blin:</b></span> how about setting them?<br/>
<span style="color: #684b6c"><span style="font-size: small">(15:14:07)</span> <b>bbockelman:</b></span> never tried that before.  And, in recent releases, we've been requiring folks to be more "explicit" about asking for private attributes.  It's possible that the 'feature' was lost.<br/>
<span style="color: #5a4592"><span style="font-size: small">(15:18:06)</span> <b>tannenba:</b></span> @tim I found a bug in ornithology that should fixed in both 9.0.x and 9.1.3.  Should I commit it to V9_0_5-branch, and merge that branch to V9_1_3-branch ?  In other words, is is safe to merge V9_0_5-branch to V9_1_3-branch ?  Please advise....  thanks.<br/>
<span style="color: #5a4592"><span style="font-size: small">(15:18:58)</span> <b>tannenba:</b></span> (to others on devteam - the problems with <tt>test_num_holds</tt> test was actually a bug in ornothology!)<br/>
<blockquote>
<span style="color: #9e3997"><span style="font-size: small">(2021-08-16 10:39:22)</span> <b>tlmiller:</b></span> Could you point me to a commit for this?<br/>
</blockquote>
<span style="color: #bb86b7"><span style="font-size: small">(15:19:10)</span> <b>tim:</b></span> You may commit to V9_0_5-branch. Merging to V9_1_3-branch should be seamless.<br/>
<span style="color: #2b6836"><span style="font-size: small">(16:00:09)</span> <b>jcpatton:</b></span> how does the <tt>[slice]</tt> option for <tt>queue [vars] from [slice] [filename]</tt> work? It says it should be like Python, but OSGVS student says <tt>[1:]</tt> doesnâ€™t work for skipping just the first row<br/>
<span style="color: #9b3b45"><span style="font-size: small">(16:00:28)</span> <b>jfrey:</b></span> @blin To my knowledge, thereâ€™s no way to access private job attributes from outside of the schedd.<br/>
<span style="color: #2b6836"><span style="font-size: small">(16:08:47)</span> <b>jcpatton:</b></span> Does <tt>[slice]</tt> work on rows or columns (or both)?<br/>
<span style="color: #235e5b"><span style="font-size: small">(17:19:19)</span> <b>johnkn:</b></span> [slice] works on rows<br/>
</body>
</html>
