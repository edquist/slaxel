<!DOCTYPE html>
<html>
<head>
<title>Mon Aug 30, 2021 : #operations (chtc)</title>
</head>
<body>
<h3>Mon Aug 30, 2021 : #operations (chtc)</h3>
<span style="color: #2b6836"><span style="font-size: small">(09:37:28)</span> <b>jcpatton:</b></span> Seeing docker pull errors on <a href="http://e2435.chtc.wisc.edu">e2435.chtc.wisc.edu</a><br/>
<span style="color: #2b6836"><span style="font-size: small">(09:37:33)</span> <b>jcpatton:</b></span> <a href="https://crt.cs.wisc.edu/rt/Ticket/Display.html?id=104063">https://crt.cs.wisc.edu/rt/Ticket/Display.html?id=104063</a><br/>
<span style="color: #3c989f"><span style="font-size: small">(09:55:01)</span> <b>wiscmoate:</b></span> @jbart, take a shot at this one :arrow_up:<br/>
<blockquote>
<span style="color: #2b6836"><span style="font-size: small">(13:34:31)</span> <b>jcpatton:</b></span> Has e2435 had its Docker cache cleaned up?<br/>
<span style="color: #73769d"><span style="font-size: small">(2021-08-31 10:13:22)</span> <b>jbart:</b></span> I believe we cleaned it up as we sent that message.<br/>
</blockquote>
<span style="color: #3c989f"><span style="font-size: small">(10:21:41)</span> <b>wiscmoate:</b></span> @gthain we'd recently done a <tt>condor_restart -fast -startd</tt> on <a href="http://e2435.chtc.wisc.edu">e2435.chtc.wisc.edu</a> to clear out full FS partitions;  it looks like the startd didn't purge docker images, and thus <tt>/var/lib/docker</tt> is still nearly full.  <tt>.startd_docker_images</tt> looks like:<br/><pre>[moate@e2435 ~]$ cat /var/log/condor/.startd_docker_images<br/>krisrs1128/alignment:081001<br/>aflatoxing/maker3<br/>nathanlazarus/pythonnumpycasadi:v4<br/>eebrandell/geo-tidy:make<br/>jmleach/chtc:koutsakis-anaconda<br/>mjgerard2/calc_metrics:latest<br/>iaross/indra_chtc_b311d854e5ca<br/>nathanlazarus/pythonnumpycasadi:v5<br/>jmleach/chtc:cantera<br/>rshoefler/r-ver-openblas:2021-08-16<br/>inbobmk/rstable<br/>ginaoh16/gina_geo:3.6.3<br/>kosugitti/rstan-env<br/>jbalis/rlutils:latest<br/>davidpadam/rapid:latest<br/><a href="http://dockerreg.chtc.wisc.edu/prall/bonito_cpu:v1">dockerreg.chtc.wisc.edu/prall/bonito_cpu:v1</a><br/>mfrayer/perl-stats</pre><br/>
<span style="color: #3c989f"><span style="font-size: small">(10:21:47)</span> <b>wiscmoate:</b></span> Expected behaviour?<br/>Either way, I'm going to manually clean up<br/>
<span style="color: #e7392d"><span style="font-size: small">(10:23:49)</span> <b>ckoch5:</b></span> where are we at with the COBA server configuration - does <tt>accounting_group = COBA</tt> work to access the server, or are we still using a user-specific allow list?<br/>
<blockquote>
<span style="color: #e7392d"><span style="font-size: small">(10:33:48)</span> <b>ckoch5:</b></span> ^^ @bbockelman @wiscmoate<br/>
<span style="color: #3c989f"><span style="font-size: small">(10:41:29)</span> <b>wiscmoate:</b></span> @ckoch5 the latter<br/>
<span style="color: #e7392d"><span style="font-size: small">(10:54:51)</span> <b>ckoch5:</b></span> :cry: okay<br/>
<span style="color: #684b6c"><span style="font-size: small">(11:02:01)</span> <b>bbockelman:</b></span> (aren't we technically doing both?)<br/>
<span style="color: #e7392d"><span style="font-size: small">(11:53:15)</span> <b>ckoch5:</b></span> are we?<br/>
<span style="color: #3c989f"><span style="font-size: small">(12:04:26)</span> <b>wiscmoate:</b></span> ah -<br/>
<span style="color: #3c989f"><span style="font-size: small">(12:04:48)</span> <b>wiscmoate:</b></span> I guess we are:<br/><pre>  # This section came from and undocumented entry in<br/>  # /etc/condor_config.flightworthy_testing on<br/>  # <a href="http://coba2000.chtc.wisc.edu">coba2000.chtc.wisc.edu</a>:<br/>  COBA_SLOT_TYPE_1_START_WHITELIST = split(TARGET.AccountingGroup, ".")[0] =?= "COBA"<br/>  COBA_SLOT_TYPE_1_START_WHITELIST = $(COBA_SLOT_TYPE_1_START_WHITELIST) || TARGET.AcctGroupUser =?= "elbrandt"<br/>  COBA_SLOT_TYPE_1_START_WHITELIST = $(COBA_SLOT_TYPE_1_START_WHITELIST) || TARGET.AcctGroupUser =?= "ckoch5"<br/>  COBA_SLOT_TYPE_1_START_WHITELIST = $(COBA_SLOT_TYPE_1_START_WHITELIST) || TARGET.AcctGroupUser =?= "bbockelm"<br/>  # VESTIGAL: The Target.AcctGroupUser =?= "agitter" section below was<br/>  # added to help troubleshoot GPU-related tensor flow issues on<br/>  # <a href="http://coba2000.chtc.wisc.edu">coba2000.chtc.wisc.edu</a>.  Ticket #102940: failure to execute<br/>  # TensorFlow on <a href="http://gpulab2004.chtc.wisc.edu">gpulab2004.chtc.wisc.edu</a><br/>  COBA_SLOT_TYPE_1_START_WHITELIST = $(COBA_SLOT_TYPE_1_START_WHITELIST) || TARGET.AcctGroupUser =?= "agitter"<br/>  # ssingh273 from COBA_BroadSingh project, ticket #103460:<br/>  # Temporarily add netids to COBA START expression<br/>  # <a href="https://crt.cs.wisc.edu/rt/Ticket/Display.html?id=103460">https://crt.cs.wisc.edu/rt/Ticket/Display.html?id=103460</a><br/>  COBA_SLOT_TYPE_1_START_WHITELIST = $(COBA_SLOT_TYPE_1_START_WHITELIST) || TARGET.AcctGroupUser =?= "ssingh273"<br/>  # jcaicedo from COBA_BroadSingh project, ticket #103460:<br/>  # Temporarily add netids to COBA START expression<br/>  # <a href="https://crt.cs.wisc.edu/rt/Ticket/Display.html?id=103460">https://crt.cs.wisc.edu/rt/Ticket/Display.html?id=103460</a><br/>  COBA_SLOT_TYPE_1_START_WHITELIST = $(COBA_SLOT_TYPE_1_START_WHITELIST) || TARGET.AcctGroupUser =?= "jcaicedo"<br/>  # mbornholdt from COBA_BroadSingh project, ticket #103460:<br/>  # Temporarily add netids to COBA START expression<br/>  # <a href="https://crt.cs.wisc.edu/rt/Ticket/Display.html?id=103460">https://crt.cs.wisc.edu/rt/Ticket/Display.html?id=103460</a><br/>  COBA_SLOT_TYPE_1_START_WHITELIST = $(COBA_SLOT_TYPE_1_START_WHITELIST) || TARGET.AcctGroupUser =?= "mbornholdt"<br/>  # mhaghighi from COBA_BroadSingh project, ticket #103460:<br/>  # Temporarily add netids to COBA START expression<br/>  # <a href="https://crt.cs.wisc.edu/rt/Ticket/Display.html?id=103460">https://crt.cs.wisc.edu/rt/Ticket/Display.html?id=103460</a><br/>  COBA_SLOT_TYPE_1_START_WHITELIST = $(COBA_SLOT_TYPE_1_START_WHITELIST) || TARGET.AcctGroupUser =?= "mhaghighi"<br/>  # jje from COBA_BroadCimini project, ticket #103460:<br/>  # Temporarily add netids to COBA START expression<br/>  # <a href="https://crt.cs.wisc.edu/rt/Ticket/Display.html?id=103460">https://crt.cs.wisc.edu/rt/Ticket/Display.html?id=103460</a><br/>  COBA_SLOT_TYPE_1_START_WHITELIST = $(COBA_SLOT_TYPE_1_START_WHITELIST) || TARGET.AcctGroupUser =?= "jje"<br/>  # amlucas3 from COBA_BroadCimini project, ticket #103460:<br/>  # Temporarily add netids to COBA START expression<br/>  # <a href="https://crt.cs.wisc.edu/rt/Ticket/Display.html?id=103460">https://crt.cs.wisc.edu/rt/Ticket/Display.html?id=103460</a><br/>  COBA_SLOT_TYPE_1_START_WHITELIST = $(COBA_SLOT_TYPE_1_START_WHITELIST) || TARGET.AcctGroupUser =?= "amlucas3"<br/>  SLOT_TYPE_1_START = ($(START)) &amp;&amp; ($(COBA_SLOT_TYPE_1_START_WHITELIST))</pre><br/>
<span style="color: #e7392d"><span style="font-size: small">(13:48:12)</span> <b>ckoch5:</b></span> Okay, so EITHER <tt>accounting_group = COBA</tt> or being one of the chosen few.<br/>
<span style="color: #3c989f"><span style="font-size: small">(13:52:19)</span> <b>wiscmoate:</b></span> Looks like it<br/>
</blockquote>
<span style="color: #3c989f"><span style="font-size: small">(10:32:05)</span> <b>wiscmoate:</b></span> @gthain maybe the startd took too long removing docker images and the master killed it?<br/><pre>08/30/21 09:56:32 (D_ALWAYS) Sent SIGHUP to STARTD (pid 3297)<br/>08/30/21 09:57:35 (D_ALWAYS) SECMAN: Succesfully sent DC_SEC_QUERY classad to &lt;128.105.245.235:46307&gt;!<br/>AuthorizationSucceeded = true<br/>08/30/21 09:59:41 (D_ALWAYS) DefaultReaper unexpectedly called on pid 3297, status 0.<br/>08/30/21 09:59:41 (D_ALWAYS|D_FAILURE) The STARTD (pid 3297) exited with status 0<br/>08/30/21 09:59:42 (D_ALWAYS) restarting /usr/sbin/condor_startd in 10 seconds<br/>08/30/21 09:59:52 (D_ALWAYS) Started DaemonCore process "/usr/sbin/condor_startd", pid and pgroup = 15268<br/>08/30/21 09:59:56 (D_ALWAYS) Setting ready state 'Ready' for STARTD</pre><br/>
<span style="color: #d58247"><span style="font-size: small">(10:32:50)</span> <b>gthain:</b></span> That could be -- I'll look at it<br/>
</body>
</html>
