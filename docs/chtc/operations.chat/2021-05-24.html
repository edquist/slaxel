<!DOCTYPE html>
<html>
<head>
<title>Mon May 24, 2021 : #operations (chtc)</title>
</head>
<body>
<h3>Mon May 24, 2021 : #operations (chtc)</h3>
<span style="color: #4cc091"><span style="font-size: small">(14:20:34)</span> <b>blin:</b></span> <a href="https://opensciencegrid.atlassian.net/browse/HTCONDOR-520">https://opensciencegrid.atlassian.net/browse/HTCONDOR-520</a><br/>
<span style="color: #99a949"><span style="font-size: small">(14:14:57)</span> <b>matyas:</b></span> in the meantime, we should check our other hosted CEs<br/>
<span style="color: #9b3b45"><span style="font-size: small">(14:13:31)</span> <b>jfrey:</b></span> And understand better when those files are born and supposed to die.<br/>
<span style="color: #9b3b45"><span style="font-size: small">(14:13:07)</span> <b>jfrey:</b></span> We should add that to the condor_ft-gahp.<br/>
<span style="color: #9b3b45"><span style="font-size: small">(14:12:57)</span> <b>jfrey:</b></span> But that doesn’t work in a bosco setup.<br/>
<span style="color: #9b3b45"><span style="font-size: small">(14:12:47)</span> <b>jfrey:</b></span> We added some code in the gridmanager long ago to remove them as a backstop because the blahp often leaked them.<br/>
<span style="color: #9b3b45"><span style="font-size: small">(14:12:21)</span> <b>jfrey:</b></span> I forget where those proxy symlinks are supposed to be cleaned up.<br/>
<span style="color: #3c989f"><span style="font-size: small">(14:10:24)</span> <b>wiscmoate:</b></span> For productivity<br/>
<span style="color: #3c989f"><span style="font-size: small">(14:10:05)</span> <b>wiscmoate:</b></span> I'll pretend that's why I do it<br/>
<span style="color: #99a949"><span style="font-size: small">(14:09:07)</span> <b>matyas:</b></span> fail early, fail often :slightly_smiling_face:<br/>
<span style="color: #3c989f"><span style="font-size: small">(14:08:33)</span> <b>wiscmoate:</b></span> Oh, well, that's not something I often hear<br/>
<span style="color: #99a949"><span style="font-size: small">(14:08:20)</span> <b>matyas:</b></span> no, I'm glad this broke<br/>
<span style="color: #3c989f"><span style="font-size: small">(14:07:59)</span> <b>wiscmoate:</b></span> Increase *items* to 100k?<br/>
<span style="color: #e7392d"><span style="font-size: small">(14:06:53)</span> <b>ckoch5:</b></span> @lmichael I’m looking at eric’s usage in kibana<br/>
<span style="color: #99a949"><span style="font-size: small">(14:06:22)</span> <b>matyas:</b></span> example:<br/><pre>lrwxrwxrwx 1 osgvopilot osgvopilot 189 May 19 11:17 30618.proxy -&gt; /home/osgvopilot/bosco_slate/sandbox/59b4/59b4785b/itb-slurm-ce.osgdev.chtc.io_9619_itb-slurm-ce.osgdev.chtc.io_630.0_1621441062/credential_osg-flock-grid-iu-edu_OSG_gWMSFrontend.itb_357657</pre><br/><br/>
<span style="color: #4cc091"><span style="font-size: small">(14:05:54)</span> <b>blin:</b></span> hrm @jfrey when is that dir supposed to be cleaned up?<br/>
<span style="color: #99a949"><span style="font-size: small">(14:05:42)</span> <b>matyas:</b></span> thanks! Wouldn't have figured this one out myself<br/>
<span style="color: #99a949"><span style="font-size: small">(14:04:52)</span> <b>matyas:</b></span> ~osgvopilot; looks like the culprit is .blah_jobproxy_dir whihch contains like 10000 XXXX.proxy files that are all broken symlinks<br/>
<span style="color: #3c989f"><span style="font-size: small">(14:03:58)</span> <b>wiscmoate:</b></span> Which directory?<br/>
<span style="color: #99a949"><span style="font-size: small">(14:03:32)</span> <b>matyas:</b></span> welp, _that's_ what's full<br/>
<span style="color: #3c989f"><span style="font-size: small">(14:03:25)</span> <b>wiscmoate:</b></span> I don't know if it's inodes or not<br/>
<span style="color: #3c989f"><span style="font-size: small">(14:03:18)</span> <b>wiscmoate:</b></span> I mean, it's ceph<br/>
<span style="color: #99a949"><span style="font-size: small">(14:03:10)</span> <b>matyas:</b></span> we have an inode quota?<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:03:07)</span> <b>tlmiller:</b></span> "inodes" ;)<br/>
<span style="color: #3c989f"><span style="font-size: small">(14:03:04)</span> <b>wiscmoate:</b></span> number of files<br/>
<span style="color: #99a949"><span style="font-size: small">(14:02:49)</span> <b>matyas:</b></span> wait, what's Items_Usage?<br/>
<span style="color: #99a949"><span style="font-size: small">(14:02:17)</span> <b>matyas:</b></span> our CEs are failing to install; the rsync claims it's running out of quota<br/>
<span style="color: #3c989f"><span style="font-size: small">(14:01:46)</span> <b>wiscmoate:</b></span> <pre>[moate@hpclogin1 ~]$ /usr/local/bin/get_quotas /home/moate/<br/>Path          Quota(GB)  Items  Disk_Usage(GB)  Items_Usage<br/>/home/moate/  100        10000  1.02333         6397</pre><br/>
<span style="color: #3c989f"><span style="font-size: small">(14:01:06)</span> <b>wiscmoate:</b></span> I think Christina wrote a script for that....<br/>
<span style="color: #99a949"><span style="font-size: small">(14:00:28)</span> <b>matyas:</b></span> how can I check my user's quota?<br/>
<span style="color: #3c989f"><span style="font-size: small">(13:59:39)</span> <b>wiscmoate:</b></span> OK, I stand by my original answer<br/>
<span style="color: #3c989f"><span style="font-size: small">(13:59:30)</span> <b>wiscmoate:</b></span> <pre>[moate@hpclogin1 ~]$ df -h /tmp<br/>Filesystem      Size  Used Avail Use% Mounted on<br/>/dev/vda3       7.9G   19M  7.5G   1% /tmp</pre><br/>
<span style="color: #3c989f"><span style="font-size: small">(13:58:50)</span> <b>wiscmoate:</b></span> Well -<br/>
<span style="color: #3c989f"><span style="font-size: small">(13:58:23)</span> <b>wiscmoate:</b></span> That shouldn't be, no<br/>
<span style="color: #99a949"><span style="font-size: small">(13:58:07)</span> <b>matyas:</b></span> on hpclogin1, is stuff in /tmp part of the user's quota somehow?<br/>
<span style="color: #3c989f"><span style="font-size: small">(13:57:13)</span> <b>wiscmoate:</b></span> Look under "gpu metrics"<br/>
<span style="color: #3c989f"><span style="font-size: small">(13:56:49)</span> <b>wiscmoate:</b></span> Ganglia collects some actual GPU use metrics (not HTCondor-centric, I mean actual GPU use) if you care about that -&gt; <a href="https://ganglia.chtc.wisc.edu/?r=year&amp;cs=&amp;ce=&amp;m=cpu_report&amp;c=CHTC&amp;h=coba2000.chtc.wisc.edu&amp;tab=m&amp;vn=&amp;tz=&amp;hide-hf=false&amp;mc=2&amp;z=medium&amp;metric_group=NOGROUPS_%7C_gpu">https://ganglia.chtc.wisc.edu/?r=year&amp;cs=&amp;ce=&amp;m=cpu_report&amp;c=CHTC&amp;h=coba2000.chtc.wisc.edu&amp;tab=m&amp;vn=&amp;tz=&amp;hide-hf=false&amp;mc=2&amp;z=medium&amp;metric_group=NOGROUPS_%7C_gpu</a><br/>
<span style="color: #3c989f"><span style="font-size: small">(13:54:03)</span> <b>wiscmoate:</b></span> @lmichael <a href="http://grafana.chtc.wisc.edu">grafana.chtc.wisc.edu</a><br/>
<span style="color: #9f69e7"><span style="font-size: small">(13:53:06)</span> <b>lmichael:</b></span> @wiscmoate @tjslauson Where is our grafana dashboard, these days? Or, how might I see how busy a particular GPU server has been? (COBA, in particular)<br/>
<span style="color: #3c989f"><span style="font-size: small">(12:11:57)</span> <b>wiscmoate:</b></span> Good catch Tim<br/>
<span style="color: #4bbe2e"><span style="font-size: small">(11:59:18)</span> <b>tjslauson:</b></span> thanks Christina!<br/>
<span style="color: #4bbe2e"><span style="font-size: small">(11:59:12)</span> <b>tjslauson:</b></span> looks like network for submit-1 is back to normal<br/>
<span style="color: #9f69e7"><span style="font-size: small">(11:58:56)</span> <b>lmichael:</b></span> Yeah, Chris (crcox) knows better and is usually cares about being a good citizen, so this is likely an oops.<br/>
<span style="color: #e7392d"><span style="font-size: small">(11:36:10)</span> <b>ckoch5:</b></span> I’ll log in and put the job on hold and email Chris<br/>
<span style="color: #4bbe2e"><span style="font-size: small">(11:35:20)</span> <b>tjslauson:</b></span> another mole to whack: @ckoch5 @lmichael submit-1's network connection has been just about maxed out this morning, and I think that job cluster 14033071 from <tt>nu_crcox</tt> is responsible.  They're transferring a MATLAB R2018b runtime out from <tt>/squid</tt> (among other, smaller files) using regular condor file transfer, not HTTP.<br/>
<span style="color: #3c989f"><span style="font-size: small">(11:26:53)</span> <b>wiscmoate:</b></span> No, thank you<br/>
<span style="color: #9b3b45"><span style="font-size: small">(11:26:38)</span> <b>jfrey:</b></span> Thanks<br/>
<span style="color: #3c989f"><span style="font-size: small">(11:26:02)</span> <b>wiscmoate:</b></span> @jfrey @tim moles whacked<br/>
<span style="color: #bb86b7"><span style="font-size: small">(11:13:32)</span> <b>tim:</b></span> <pre>e466, e470, e471, e476, e1469, e1472</pre><br/><br/>
<span style="color: #9b3b45"><span style="font-size: small">(11:11:05)</span> <b>jfrey:</b></span> The condor_master has been killing the startds every hour.<br/>
<span style="color: #3c989f"><span style="font-size: small">(11:10:47)</span> <b>wiscmoate:</b></span> They're probably the ones that have been email spamming me<br/>
<span style="color: #3c989f"><span style="font-size: small">(11:10:30)</span> <b>wiscmoate:</b></span> Roger roger, I'll track them down<br/>
<span style="color: #9b3b45"><span style="font-size: small">(11:10:21)</span> <b>jfrey:</b></span> And they’re using the old debug procd binary, which started breaking when they were upgraded to 9.1.0.<br/>
<span style="color: #9b3b45"><span style="font-size: small">(11:09:54)</span> <b>jfrey:</b></span> Their condor git repo is cloned from <a href="http://gitmirror0.chtc.wisc.edu">gitmirror0.chtc.wisc.edu</a>, which doesn’t resolve.<br/>
<span style="color: #9b3b45"><span style="font-size: small">(11:09:38)</span> <b>jfrey:</b></span> @wiscmoate Some of the chtc execute machines are broken due to old condor config.<br/>
<span style="color: #e7392d"><span style="font-size: small">(10:44:11)</span> <b>ckoch5:</b></span> Okay, I guess that will be my project for the day. :stuck_out_tongue:<br/>
<span style="color: #3c989f"><span style="font-size: small">(10:35:15)</span> <b>wiscmoate:</b></span> I'm using a "slim" window manager, which isn't described in the wiki tutorial I linked<br/>
<span style="color: #3c989f"><span style="font-size: small">(10:34:38)</span> <b>wiscmoate:</b></span> I actually got rid of my CS desktop and run graphical applications on a virtual machine instead using said methods<br/>
<span style="color: #3c989f"><span style="font-size: small">(10:33:14)</span> <b>wiscmoate:</b></span> @ckoch5 it works fine -&gt; <a href="https://wiki.chtc.wisc.edu/wiki/How_to_create_a_remote_VNC_virtual_desktop">https://wiki.chtc.wisc.edu/wiki/How_to_create_a_remote_VNC_virtual_desktop</a><br/>
<span style="color: #e7392d"><span style="font-size: small">(10:26:01)</span> <b>ckoch5:</b></span> what’s the status of X11 support on the cluster / running a GUI from (say) the head node?<br/>
<span style="color: #3c989f"><span style="font-size: small">(09:58:17)</span> <b>wiscmoate:</b></span> Sure;  Puppet probably doesn't have that package set to <tt>latest</tt><br/>
<span style="color: #4cc091"><span style="font-size: small">(09:53:05)</span> <b>blin:</b></span> @wiscmoate @tjslauson i was hoping to get HTCondor-CE updated to 5.1.1 this week (it's in the 9.1 RC repo): I thought puppet auto-updated packages from RC? Would you guys be able to fit this in today? I can open a ticket<br/>
<blockquote>
<span style="color: #3c989f"><span style="font-size: small">(13:36:59)</span> <b>wiscmoate:</b></span> @blin the plot thickens -&gt;<br/><pre>  # htcondor-ce-condor from ticket #92747] Need a VM for an LHCb<br/>  # CE<br/>  # <a href="https://crt.cs.wisc.edu/rt/Ticket/Display.html?id=92747">https://crt.cs.wisc.edu/rt/Ticket/Display.html?id=92747</a><br/>  # set htcondor-ce-condor to latest from ticket #103037: On<br/>  # <a href="http://lhcb-ce.chtc.wisc.edu">lhcb-ce.chtc.wisc.edu</a> upgrade to htcondor-ce-5.0.0-0.rc3<br/>  # <a href="https://crt.cs.wisc.edu/rt/Ticket/Display.html?id=103037">https://crt.cs.wisc.edu/rt/Ticket/Display.html?id=103037</a><br/>  htcondor-ce-condor: latest</pre><br/>
<span style="color: #3c989f"><span style="font-size: small">(13:37:04)</span> <b>wiscmoate:</b></span> It should already be latest....<br/>
<span style="color: #4cc091"><span style="font-size: small">(13:38:17)</span> <b>blin:</b></span> ah, i think it's because we're missing all the binary RPMs<br/>
<span style="color: #4cc091"><span style="font-size: small">(13:38:36)</span> <b>blin:</b></span> @tim we need all the htcondor-ce RPMs here <a href="https://research.cs.wisc.edu/htcondor/repo/9.1/el7/rc/">https://research.cs.wisc.edu/htcondor/repo/9.1/el7/rc/</a><br/>
<span style="color: #3c989f"><span style="font-size: small">(13:39:12)</span> <b>wiscmoate:</b></span> <pre>[moate@lhcb-ce ~]$ yum list --showduplicates htcondor-ce<br/>Loaded plugins: fastestmirror, priorities, product-id, search-disabled-repos, subscription-manager, versionlock<br/>Loading mirror speeds from cached hostfile<br/>Excluding 5 updates due to versionlock (use "yum versionlock status" to show them)<br/>Installed Packages<br/>htcondor-ce.noarch                                                                             5.1.0-0.rc3.el7                                                                              @htcondor_el7_v9_chtc_rc<br/>Available Packages<br/>htcondor-ce.noarch                                                                             5.1.1-1.el7                                                                                  htcondor_el7_v91_chtc_rc<br/>[moate@lhcb-ce ~]$ yum list --showduplicates htcondor-ce-condor<br/>Loaded plugins: fastestmirror, priorities, product-id, search-disabled-repos, subscription-manager, versionlock<br/>Loading mirror speeds from cached hostfile<br/>Excluding 5 updates due to versionlock (use "yum versionlock status" to show them)<br/>Installed Packages<br/>htcondor-ce-condor.noarch                                                                          5.1.0-0.rc3.el7                                                                          @htcondor_el7_v9_chtc_rc</pre><br/>
<span style="color: #3c989f"><span style="font-size: small">(13:39:46)</span> <b>wiscmoate:</b></span> Gist of that, it looks like there is a <tt>5.1.1-1.el7</tt> htcondor-ce, but not a htcondor-ce-condor, if that matters?<br/>
<span style="color: #3c989f"><span style="font-size: small">(13:40:58)</span> <b>wiscmoate:</b></span> Looks like it at least matters that there is no <tt>5.1.1-1.el7</tt> htcondor-ce-client package:<br/><pre>[moate@lhcb-ce ~]$ sudo yum update htcondor-ce<br/>Loaded plugins: fastestmirror, priorities, product-id, search-disabled-repos, subscription-manager, versionlock<br/><br/>This system is not registered with an entitlement server. You can use subscription-manager to register.<br/><br/>Loading mirror speeds from cached hostfile<br/>Excluding 5 updates due to versionlock (use "yum versionlock status" to show them)<br/>Resolving Dependencies<br/>--&gt; Running transaction check<br/>---&gt; Package htcondor-ce.noarch 0:5.1.0-0.rc3.el7 will be updated<br/>--&gt; Processing Dependency: htcondor-ce = 5.1.0-0.rc3.el7 for package: htcondor-ce-condor-5.1.0-0.rc3.el7.noarch<br/>--&gt; Processing Dependency: htcondor-ce-master = 5.1.0-0.rc3.el7 for package: htcondor-ce-view-5.1.0-0.rc3.el7.noarch<br/>---&gt; Package htcondor-ce.noarch 0:5.1.1-1.el7 will be an update<br/>--&gt; Processing Dependency: htcondor-ce-client = 5.1.1-1.el7 for package: htcondor-ce-5.1.1-1.el7.noarch<br/>--&gt; Finished Dependency Resolution<br/>Error: Package: htcondor-ce-view-5.1.0-0.rc3.el7.noarch (@htcondor_el7_v9_chtc_rc)<br/>           Requires: htcondor-ce-master = 5.1.0-0.rc3.el7<br/>           Removing: htcondor-ce-5.1.0-0.rc3.el7.noarch (@htcondor_el7_v9_chtc_rc)<br/>               htcondor-ce-master = 5.1.0-0.rc3.el7<br/>           Updated By: htcondor-ce-5.1.1-1.el7.noarch (htcondor_el7_v91_chtc_rc)<br/>               htcondor-ce-master = 5.1.1-1.el7<br/>Error: Package: htcondor-ce-condor-5.1.0-0.rc3.el7.noarch (@htcondor_el7_v9_chtc_rc)<br/>           Requires: htcondor-ce = 5.1.0-0.rc3.el7<br/>           Removing: htcondor-ce-5.1.0-0.rc3.el7.noarch (@htcondor_el7_v9_chtc_rc)<br/>               htcondor-ce = 5.1.0-0.rc3.el7<br/>           Updated By: htcondor-ce-5.1.1-1.el7.noarch (htcondor_el7_v91_chtc_rc)<br/>               htcondor-ce = 5.1.1-1.el7<br/>Error: Package: htcondor-ce-5.1.1-1.el7.noarch (htcondor_el7_v91_chtc_rc)<br/>           Requires: htcondor-ce-client = 5.1.1-1.el7<br/>           Installed: htcondor-ce-client-5.1.0-0.rc3.el7.noarch (@htcondor_el7_v9_chtc_rc)<br/>               htcondor-ce-client = 5.1.0-0.rc3.el7<br/> You could try using --skip-broken to work around the problem<br/> You could try running: rpm -Va --nofiles --nodigest</pre><br/>
<span style="color: #bb86b7"><span style="font-size: small">(13:42:40)</span> <b>tim:</b></span> Working on fixing this.<br/>
<span style="color: #bb86b7"><span style="font-size: small">(13:57:26)</span> <b>tim:</b></span> @blin @wiscmoate This should be fixed now.<br/>
<span style="color: #4cc091"><span style="font-size: small">(13:58:03)</span> <b>blin:</b></span> is there a script/doc for where to move the CE/blahp RPMs for their release processes?<br/>
<span style="color: #bb86b7"><span style="font-size: small">(14:00:09)</span> <b>tim:</b></span> I am currently working on the scripting packages external to htcondor and docs will follow. I should be able finish that up this week.<br/>
<span style="color: #4cc091"><span style="font-size: small">(14:02:15)</span> <b>blin:</b></span> cool<br/>
<span style="color: #4cc091"><span style="font-size: small">(14:02:21)</span> <b>blin:</b></span> :thumbsup::skin-tone-3:<br/>
<span style="color: #3c989f"><span style="font-size: small">(14:33:10)</span> <b>wiscmoate:</b></span> @blin it's installed, though we should watch it in the future -<br/>
<span style="color: #3c989f"><span style="font-size: small">(14:33:21)</span> <b>wiscmoate:</b></span> Puppet didn't want to upgrade it despite it being set to <tt>latest</tt> -<br/>
<span style="color: #4cc091"><span style="font-size: small">(14:33:30)</span> <b>blin:</b></span> hrm ok. thanks<br/>
<span style="color: #3c989f"><span style="font-size: small">(14:33:36)</span> <b>wiscmoate:</b></span> I don't know how puppet decides if a package is <tt>latest</tt>, but it's obviously not 100%<br/>
<span style="color: #3c989f"><span style="font-size: small">(14:33:56)</span> <b>wiscmoate:</b></span> Maybe it has some sort of cache that it expires periodically<br/>
</blockquote>
</body>
</html>
