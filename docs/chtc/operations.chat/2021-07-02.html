<!DOCTYPE html>
<html>
<head>
<title>Fri Jul 2, 2021 : #operations (chtc)</title>
</head>
<body>
<h3>Fri Jul 2, 2021 : #operations (chtc)</h3>
<span style="color: #684b6c"><span style="font-size: small">(08:14:36)</span> <b>bbockelman:</b></span> idle thoughts: has anyone played with the idea of adding their SSH key to a yubikey?<br/>
<span style="color: #d58247"><span style="font-size: small">(08:44:29)</span> <b>gthain:</b></span> No, but I've wondered if a phone can do this<br/>
<span style="color: #d58247"><span style="font-size: small">(08:44:49)</span> <b>gthain:</b></span> If I've got my phone plugged into my desktop to charge anyways...<br/>
<span style="color: #684b6c"><span style="font-size: small">(08:45:33)</span> <b>bbockelman:</b></span> So, if it's a CHTC provided YubiKey, I would be willing to do an "anywhere from Earth to anywhere at CHTC" Duo exemption.<br/>
<span style="color: #684b6c"><span style="font-size: small">(08:46:48)</span> <b>bbockelman:</b></span> (the YubiKey can generate a new private key internally that cannot be extracted from the hardware)<br/>
<span style="color: #674b1b"><span style="font-size: small">(10:03:04)</span> <b>coatsworth:</b></span> How much effort is involved with setting up and configuring a yubikey?<br/>
<span style="color: #674b1b"><span style="font-size: small">(10:04:04)</span> <b>coatsworth:</b></span> I'm hesitant to throw yet another security mechanism onto the ever-growing pile, but if it's an easy way to skip the Duo 2FA then I'm interested<br/>
<span style="color: #d58247"><span style="font-size: small">(10:04:55)</span> <b>gthain:</b></span> I hear you, @coatsworth, but I'm worried that I'm one phone breakage away from not being able to do any work at all<br/>
<span style="color: #e7392d"><span style="font-size: small">(10:05:08)</span> <b>ckoch5:</b></span> I would definitely be interested in having a yubikey!<br/>
<span style="color: #674b1b"><span style="font-size: small">(10:08:35)</span> <b>coatsworth:</b></span> @gthain Is a yubikey linked to your phone? The last time I used one it was an independent USB device<br/>
<span style="color: #674b1b"><span style="font-size: small">(10:09:02)</span> <b>coatsworth:</b></span> I'm definitely concerned that losing or breaking my phone now means I can't do my job.<br/>
<span style="color: #d58247"><span style="font-size: small">(10:09:41)</span> <b>gthain:</b></span> Not linked to phone, but it would be used instead of a Duo push<br/>
<span style="color: #4cc091"><span style="font-size: small">(10:34:13)</span> <b>blin:</b></span> since i had a phone breakage headache recently, you should make sure to have your duo  fob registered and regenerate your emergency keys every few months since they expire<br/>
<span style="color: #4cc091"><span style="font-size: small">(10:35:35)</span> <b>blin:</b></span> also if you keep your fob in a bag, it's possible that the button gets pressed repeatedly and they'll disable your fob on you because of too many generated, unused codes. It's not too bad reconnecting the fob but it's annoying<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:18:03)</span> <b>coatsworth:</b></span> How soon can we expect to see the v9.1.1 RC show up on CHTC? I've got some code in there I want to test in production before we ship.<br/>
<blockquote>
<span style="color: #bb86b7"><span style="font-size: small">(13:23:44)</span> <b>tim:</b></span> @coatsworth: You can check to upgrade progress at <a href="https://wiki.chtc.wisc.edu/wiki/HTCondor_9.1_CHTC_Pool_Upgrade_Logs">https://wiki.chtc.wisc.edu/wiki/HTCondor_9.1_CHTC_Pool_Upgrade_Logs</a><br/>
</blockquote>
<span style="color: #bb86b7"><span style="font-size: small">(12:30:26)</span> <b>tim:</b></span> It's on submittest0000 already.<br/>
<span style="color: #684b6c"><span style="font-size: small">(12:50:22)</span> <b>bbockelman:</b></span> &gt;  How much effort is involved with setting up and configuring a yubikey?<br/>Think of a yubikey as a hardware device that stores a private SSH key.  It's not tied to the phone.  Once we figure it out once, maybe 20 minutes to setup?<br/>
<span style="color: #684b6c"><span style="font-size: small">(12:51:09)</span> <b>bbockelman:</b></span> Maybe 30 minutes to setup the client as you have to configure SSH to integrate with GPG.<br/>
<span style="color: #684b6c"><span style="font-size: small">(12:51:52)</span> <b>bbockelman:</b></span> <a href="https://github.com/drduh/YubiKey-Guide">https://github.com/drduh/YubiKey-Guide</a> I was working through this guide.  Much longer the first time, of course.<br/>
<span style="color: #e7392d"><span style="font-size: small">(12:54:25)</span> <b>ckoch5:</b></span> maciej, the owner of pinboard has a guide on how to secure your email with a yubikey that I think is on the order of an hour or less<br/>
<span style="color: #684b6c"><span style="font-size: small">(12:55:03)</span> <b>bbockelman:</b></span> Yeah.  I mean, I guessed 30 minutes because I figure everyone's laptop is slightly misconfigured.<br/>
<span style="color: #99a949"><span style="font-size: small">(12:58:29)</span> <b>matyas:</b></span> note that I keep my yubikey on the same keychain as my duo fob...<br/>
<span style="color: #684b6c"><span style="font-size: small">(12:58:58)</span> <b>bbockelman:</b></span> since yubikey can hold a RSA key, you can do passwordless SSH....<br/>
<span style="color: #99a949"><span style="font-size: small">(12:59:21)</span> <b>matyas:</b></span> how do you pick which key to send? mine only has one button<br/>
<span style="color: #684b6c"><span style="font-size: small">(12:59:26)</span> <b>bbockelman:</b></span> GPG also will keep the decryption pin for N minutes.<br/>
<span style="color: #684b6c"><span style="font-size: small">(13:01:25)</span> <b>bbockelman:</b></span> <a href="https://github.com/drduh/YubiKey-Guide#optional-save-public-key-for-identity-file-configuration">https://github.com/drduh/YubiKey-Guide#optional-save-public-key-for-identity-file-configuration</a> apparently you either configure a specific entry to send or it will try them all in order.<br/>
<span style="color: #99a949"><span style="font-size: small">(13:02:31)</span> <b>matyas:</b></span> unfortunately if I send them in the wrong order, I'll get IP-banned :slightly_smiling_face:<br/>
<blockquote>
<span style="color: #d58247"><span style="font-size: small">(13:05:11)</span> <b>gthain:</b></span> How do you know?...<br/>
<span style="color: #9e3997"><span style="font-size: small">(13:45:29)</span> <b>tlmiller:</b></span> Because Moate has _really_ sensitive automatic trips to detect "too many" SSH connections.<br/>
<span style="color: #99a949"><span style="font-size: small">(13:46:56)</span> <b>matyas:</b></span> to the point where I have to specify exactly which key should be used in my ssh config because using ssh-agent will trip it<br/>
</blockquote>
<span style="color: #684b6c"><span style="font-size: small">(13:05:42)</span> <b>bbockelman:</b></span> No, I don't think so -- the authentication doesn't fail, it's part of one handshake.<br/>
<span style="color: #684b6c"><span style="font-size: small">(17:09:04)</span> <b>bbockelman:</b></span> @matyas - i was able to get the whole Yubikey workflow going. It’s pretty slick<br/>
<span style="color: #99a949"><span style="font-size: small">(17:09:26)</span> <b>matyas:</b></span> nice<br/>
<span style="color: #684b6c"><span style="font-size: small">(17:10:21)</span> <b>bbockelman:</b></span> You can do all your GPG signing with the Yubikey as well as SSH.<br/>
<span style="color: #684b6c"><span style="font-size: small">(17:10:51)</span> <b>bbockelman:</b></span> Agent forwarding works as well, meaning you can sign things on other servers.<br/>
<span style="color: #684b6c"><span style="font-size: small">(17:13:21)</span> <b>bbockelman:</b></span> Suspect that’s what we should do with the OSG keys?<br/>
</body>
</html>
