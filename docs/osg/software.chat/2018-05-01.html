<!DOCTYPE html>
<html>
<head>
<title>Tue May 1, 2018 : #software (osg)</title>
</head>
<body>
<h3>Tue May 1, 2018 : #software (osg)</h3>
<span style="color: #9e3997"><span style="font-size: small">(07:08:50)</span> <b>bbockelm:</b></span> hi - do we have an updated <tt>osg-ca-certs</tt> package in osg-testing?<br/>
<span style="color: #9e3997"><span style="font-size: small">(07:14:09)</span> <b>bbockelm:</b></span> Taking advantage of the timezone difference to bother everyone before they respond -- don't forget today is the transition day for <a href="http://repo.opensciencegrid.org">repo.opensciencegrid.org</a><br/>
<span style="color: #73769d"><span style="font-size: small">(08:53:33)</span> <b>tim.theisen:</b></span> The latest osg-ca-certs was built at the end of March. I think that Susan want to time it to be with the IGTF release which typically happens the last Monday of the month. (It hasn't happened yet.)<br/>
<span style="color: #73769d"><span style="font-size: small">(08:54:00)</span> <b>tim.theisen:</b></span> Thank you for the reminder. It is also the day that we push out Singularity 2.5.0<br/>
<span style="color: #9e3997"><span style="font-size: small">(08:54:25)</span> <b>bbockelm:</b></span> yeah - but I think it's important to actually have a test CA package that we can show folks, as there's such a major change internally.<br/>
<span style="color: #9e3997"><span style="font-size: small">(08:54:55)</span> <b>bbockelm:</b></span> I did verify that the new repo has singularity-2.5.0 in testing...<br/>
<span style="color: #73769d"><span style="font-size: small">(08:55:29)</span> <b>tim.theisen:</b></span> Cool<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:00:52)</span> <b>bbockelm:</b></span> Derek just cut things over... can everyone do a quick smoke test?<br/>
<span style="color: #d1707d"><span style="font-size: small">(09:04:13)</span> <b>gattebury:</b></span> http works, rsync works, dns looks correct â€¦ success?<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:04:34)</span> <b>bbockelm:</b></span> I see some accesses from <tt><a href="http://squid1000.chtc.wisc.edu">squid1000.chtc.wisc.edu</a></tt> so the DNS change is propagating.<br/>
<span style="color: #73769d"><span style="font-size: small">(09:05:17)</span> <b>tim.theisen:</b></span> looks go to me as well. I installed packages from a fermicloud VM, checked the CA website and tarballs.<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:05:48)</span> <b>bbockelm:</b></span> That reminds me - we have the OASIS switchover in 2 days.<br/>
<span style="color: #c386df"><span style="font-size: small">(09:08:26)</span> <b>matyas:</b></span> yeah. tim, can you test uploading the tarballs to oasis-itb?<br/>
<span style="color: #73769d"><span style="font-size: small">(09:10:48)</span> <b>tim.theisen:</b></span> OK, later today<br/>
<span style="color: #43761b"><span style="font-size: small">(09:12:35)</span> <b>blin:</b></span> @bbockelm, @zalak said he'd be working on getting the let's encrypt CA into the osg CA bundle yesterday<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:35:22)</span> <b>bbockelm:</b></span> great<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:36:00)</span> <b>bbockelm:</b></span> @dweitzel - could you put together a <tt>robots.txt</tt>?  just noticed some random spiders crawling around the log...<br/>
<span style="color: #235e5b"><span style="font-size: small">(09:36:17)</span> <b>dweitzel:</b></span> sure<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:36:28)</span> <b>bbockelm:</b></span> (Yandex is looking for old pacman files... yay!)<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:03:04)</span> <b>dweitzel:</b></span> @blin <a href="http://software.opensciencegrid.org">software.opensciencegrid.org</a> still points to the GOC.  Should I change that also to point to the new repo?<br/>
<span style="color: #43761b"><span style="font-size: small">(10:03:24)</span> <b>blin:</b></span> that should be retired<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:03:31)</span> <b>dweitzel:</b></span> Ok, I can delete that DNS entry.<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:03:48)</span> <b>dweitzel:</b></span> sound good, delete?<br/>
<span style="color: #43761b"><span style="font-size: small">(10:04:49)</span> <b>blin:</b></span> yup<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:05:57)</span> <b>dweitzel:</b></span> deleted<br/>
<span style="color: #16569E"><span style="font-size: small">(10:29:24)</span> <b>edquist:</b></span> Hi guys, @tim.theisen points out that the repo mirrors (eg <a href="http://repo.opensciencegrid.org/mirror/osg/3.4/el7/development/x86_64">http://repo.opensciencegrid.org/mirror/osg/3.4/el7/development/x86_64</a>) still point to <tt><a href="http://repo.grid.iu.edu">repo.grid.iu.edu</a></tt><br/>
<span style="color: #16569E"><span style="font-size: small">(10:29:47)</span> <b>edquist:</b></span> The latest build of <tt>osg-repo-scripts</tt> has a fix for this, but it's only in <tt>goc-itb</tt><br/>
<span style="color: #16569E"><span style="font-size: small">(10:29:49)</span> <b>edquist:</b></span> <a href="https://koji.chtc.wisc.edu/koji/buildinfo?buildID=11790">https://koji.chtc.wisc.edu/koji/buildinfo?buildID=11790</a><br/>
<span style="color: #16569E"><span style="font-size: small">(10:30:47)</span> <b>edquist:</b></span> Not sure who needs to be involved to get the newer one installed on the prod <tt>repo</tt> server<br/>
<span style="color: #16569E"><span style="font-size: small">(10:31:01)</span> <b>edquist:</b></span> (<tt>osg-repo-scripts-1.1-1.osg34.el*</tt>)<br/>
<span style="color: #43761b"><span style="font-size: small">(10:32:23)</span> <b>blin:</b></span> @dweitzel said he had installed it on the new repo host: <a href="https://jira.opensciencegrid.org/browse/SOFTWARE-3139?focusedCommentId=349987&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-349987">https://jira.opensciencegrid.org/browse/SOFTWARE-3139?focusedCommentId=349987&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-349987</a><br/>
<span style="color: #16569E"><span style="font-size: small">(10:34:52)</span> <b>edquist:</b></span> yeah, now i see that... i'm taking a look at the repo server now to see what's up<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:34:58)</span> <b>dweitzel:</b></span> <pre># rpm -q osg-repo-scripts<br/>osg-repo-scripts-1.1-1.osg34.el7.noarch</pre><br/>
<span style="color: #16569E"><span style="font-size: small">(10:35:05)</span> <b>edquist:</b></span> yeah :X<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:35:46)</span> <b>dweitzel:</b></span> does osg-repo-scripts update the mirror list?<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:37:20)</span> <b>dweitzel:</b></span> I thought I corrected all of those last month, I even have this command in the history:<br/><pre><br/>for file in <tt>find . -type f</tt>; do echo $file; sed -i s/repo.grid.iu.edu/repo.opensciencegrid.org/g $file; done<br/></pre><br/>
<span style="color: #235e5b"><span style="font-size: small">(10:37:34)</span> <b>dweitzel:</b></span> is something editing the mirror scripts?<br/>
<span style="color: #c386df"><span style="font-size: small">(10:38:05)</span> <b>matyas:</b></span> is it the mirror scripts or the mirror data?<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:38:16)</span> <b>dweitzel:</b></span> sorry, the mirror data<br/>
<span style="color: #16569E"><span style="font-size: small">(10:38:58)</span> <b>edquist:</b></span> <tt>/usr/bin/update_mirror.py</tt><br/>
<span style="color: #16569E"><span style="font-size: small">(10:40:26)</span> <b>edquist:</b></span> it does appear it's running,<br/>
<span style="color: #16569E"><span style="font-size: small">(10:41:17)</span> <b>edquist:</b></span> <pre><br/>[root@hcc-osg-software development]# cat /usr/local/mirror/osg/3.4/el7/development/x86_64 <br/><a href="http://repo.opensciencegrid.org/osg/3.4/el7/development/x86_64">http://repo.opensciencegrid.org/osg/3.4/el7/development/x86_64</a><br/><a href="http://mirror.hep.wisc.edu/upstream/osg/3.4/el7/development/x86_64">http://mirror.hep.wisc.edu/upstream/osg/3.4/el7/development/x86_64</a><br/><a href="http://t2.unl.edu/osg/3.4/el7/development/x86_64">http://t2.unl.edu/osg/3.4/el7/development/x86_64</a><br/><a href="http://mirror.grid.uchicago.edu/pub/osg/3.4/el7/development/x86_64">http://mirror.grid.uchicago.edu/pub/osg/3.4/el7/development/x86_64</a><br/></pre><br/>
<span style="color: #16569E"><span style="font-size: small">(10:41:30)</span> <b>edquist:</b></span> maybe a different path is being hosted?<br/>
<span style="color: #16569E"><span style="font-size: small">(10:41:35)</span> <b>edquist:</b></span> by apache<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:42:41)</span> <b>dweitzel:</b></span> Yeah, wanna symlink it?<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:42:51)</span> <b>dweitzel:</b></span> or is there a configuration somewhere?<br/>
<span style="color: #16569E"><span style="font-size: small">(10:44:03)</span> <b>edquist:</b></span> yeah let's symlink for now if apache will follow it<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:44:12)</span> <b>dweitzel:</b></span> (it's nginx, but sure)<br/>
<span style="color: #16569E"><span style="font-size: small">(10:45:07)</span> <b>edquist:</b></span> unfortunately the <tt>/usr/local</tt> paths are hardcoded (following the old goc ops tradition), but for the future sure we should make it configuable<br/>
<span style="color: #16569E"><span style="font-size: small">(10:45:36)</span> <b>edquist:</b></span> what's nginx ?<br/>
<span style="color: #16569E"><span style="font-size: small">(10:45:53)</span> <b>edquist:</b></span> ah, webserver<br/>
<span style="color: #16569E"><span style="font-size: small">(10:45:54)</span> <b>edquist:</b></span> ok<br/>
<span style="color: #16569E"><span style="font-size: small">(10:45:57)</span> <b>edquist:</b></span> great<br/>
<span style="color: #16569E"><span style="font-size: small">(10:48:49)</span> <b>edquist:</b></span> @dweitzel, are you able to add the symlink?<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:48:58)</span> <b>dweitzel:</b></span> oh, sure.  I can.<br/>
<span style="color: #16569E"><span style="font-size: small">(10:49:34)</span> <b>edquist:</b></span> ah, now i see the config<br/>
<span style="color: #16569E"><span style="font-size: small">(10:49:45)</span> <b>edquist:</b></span> so it was all under /usr/local/repo<br/>
<span style="color: #16569E"><span style="font-size: small">(10:50:21)</span> <b>edquist:</b></span> ... or is it?<br/>
<span style="color: #16569E"><span style="font-size: small">(10:50:52)</span> <b>edquist:</b></span> i'm a bit confused, just trying to figure out where the old mirrorlist files were<br/>
<span style="color: #73769d"><span style="font-size: small">(10:52:08)</span> <b>tim.theisen:</b></span> Oops, now the mirror list is 404 Not Found<br/>
<span style="color: #16569E"><span style="font-size: small">(10:52:11)</span> <b>edquist:</b></span> i'm seeing it's all a bunch of symlinks<br/>
<span style="color: #16569E"><span style="font-size: small">(10:52:13)</span> <b>edquist:</b></span> :smile:<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:52:14)</span> <b>dweitzel:</b></span> updated.<br/>
<span style="color: #16569E"><span style="font-size: small">(10:52:18)</span> <b>edquist:</b></span> looks like it's up now<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:52:19)</span> <b>dweitzel:</b></span> @tim.theisen try again.<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:52:27)</span> <b>dweitzel:</b></span> there was ~1 second of downtime.<br/>
<span style="color: #16569E"><span style="font-size: small">(10:52:31)</span> <b>edquist:</b></span> thanks @dweitzel!<br/>
<span style="color: #73769d"><span style="font-size: small">(10:52:35)</span> <b>tim.theisen:</b></span> Yup, looks good<br/>
<span style="color: #73769d"><span style="font-size: small">(10:52:43)</span> <b>tim.theisen:</b></span> Thank you<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:53:01)</span> <b>dweitzel:</b></span> <b>@edquist</b> I symlinked from /usr/local/mirror to /mnt/repo/repo/mirror<br/>
<span style="color: #16569E"><span style="font-size: small">(10:54:01)</span> <b>edquist:</b></span> yeah at first i was imagining the other way around but this makes sense<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:55:11)</span> <b>dweitzel:</b></span> 1000 different ways to do it.<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:55:21)</span> <b>dweitzel:</b></span> The nginx config has the webroot as <tt>root /usr/local/repo;</tt><br/>
<span style="color: #16569E"><span style="font-size: small">(10:59:08)</span> <b>edquist:</b></span> yeah, I was just confused at first about which things under there were real dirs vs symlinks, but it all makes sense now<br/>
<span style="color: #e96699"><span style="font-size: small">(12:22:19)</span> <b>lincoln:</b></span> who do i bug about condor-in-a-container weirdness? :slightly_smiling_face: <br/><pre>05/01/18 17:20:29 About to tell ProcD to track family with root 1334 via cgroup htcondor/condor_var_lib_condor_execute_slot1_1@htcondor-54f49b45fb-f6xlm<br/>05/01/18 17:20:29 Result of "track_family_via_cgroup" operation from ProcD: ERROR: No cgroup available for tracking<br/>05/01/18 17:20:29 Create_Process: error tracking family with root 1334 via cgroup htcondor/condor_var_lib_condor_execute_slot1_1@htcondor-54f49b45fb-f6xlm<br/>05/01/18 17:20:29 Create_Process(/usr/libexec/condor/wrapper.sh): child failed because it failed to register itself with the ProcD<br/>05/01/18 17:20:29 ERROR "Create_Process failed to register the job with the ProcD" at line 632 in file /builddir/build/BUILD/condor-8.6.10/src/condor_starter.V6.1/os_proc.cpp<br/></pre><br/><br/>running condor 8.6.10-1.osg34 in kubernetes<br/>
<span style="color: #e96699"><span style="font-size: small">(12:23:16)</span> <b>lincoln:</b></span> works fine if i set USE_PROCD=false<br/>
<span style="color: #43761b"><span style="font-size: small">(12:34:44)</span> <b>blin:</b></span> greg thain would probably be your man<br/>
<span style="color: #43761b"><span style="font-size: small">(12:35:01)</span> <b>blin:</b></span> i'd mail condor-users<br/>
<span style="color: #e96699"><span style="font-size: small">(12:41:57)</span> <b>lincoln:</b></span> thanks<br/>
<span style="color: #73769d"><span style="font-size: small">(14:09:44)</span> <b>tim.theisen:</b></span> When I was fixing something on <a href="http://repo.opensciencegrid.org">repo.opensciencegrid.org</a> as root. I noticed that root receives 18 emails each hour about cron jobs. Most are cron job failures.<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:10:50)</span> <b>dweitzel:</b></span> what's failing?<br/>
<span style="color: #73769d"><span style="font-size: small">(14:17:28)</span> <b>tim.theisen:</b></span> Don't know if it's import. osg-display, awstats,<br/>
<span style="color: #73769d"><span style="font-size: small">(14:17:46)</span> <b>tim.theisen:</b></span> no shell script for service-monitor<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:17:52)</span> <b>dweitzel:</b></span> I'm sure it's awstats<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:18:01)</span> <b>dweitzel:</b></span> there is no awstats on that machine<br/>
<span style="color: #73769d"><span style="font-size: small">(14:18:38)</span> <b>tim.theisen:</b></span> repo-update-cadist must be running with -x or something.<br/>
<span style="color: #73769d"><span style="font-size: small">(14:19:21)</span> <b>tim.theisen:</b></span> just those 4 things over and over<br/>
</body>
</html>
