<!DOCTYPE html>
<html>
<head>
<title>Thu Jan 21, 2021 : #software (osg)</title>
</head>
<body>
<h3>Thu Jan 21, 2021 : #software (osg)</h3>
<span style="color: #a63024"><span style="font-size: small">(13:24:17)</span> <b>efajardo:</b></span> Hi @blin<br/>
<span style="color: #a63024"><span style="font-size: small">(13:24:25)</span> <b>efajardo:</b></span> is this <tt>opensciencegrid/cms-xcache:upcoming-fresh</tt>automaticaly built<br/>
<span style="color: #a63024"><span style="font-size: small">(13:24:27)</span> <b>efajardo:</b></span> ?<br/>
<span style="color: #a63024"><span style="font-size: small">(13:24:41)</span> <b>efajardo:</b></span> meaning every 24h or so<br/>
<span style="color: #c386df"><span style="font-size: small">(13:24:55)</span> <b>matyas:</b></span> not anymore since we switched 'fresh' to xrootd 5<br/>
<span style="color: #a63024"><span style="font-size: small">(13:25:13)</span> <b>efajardo:</b></span> So I should move to <tt>opensciencegrid/cms-xcache:fresh</tt><br/>
<span style="color: #c386df"><span style="font-size: small">(13:25:16)</span> <b>matyas:</b></span> yeah<br/>
<span style="color: #a63024"><span style="font-size: small">(13:25:21)</span> <b>efajardo:</b></span> and that should have <tt>5.1.0.rc5</tt><br/>
<span style="color: #a63024"><span style="font-size: small">(13:25:24)</span> <b>efajardo:</b></span> which I built lastnight?<br/>
<span style="color: #c386df"><span style="font-size: small">(13:28:41)</span> <b>matyas:</b></span> ... apparently it's built from upcoming-testing, not upcoming-development. @blin, any ideas?<br/>
<span style="color: #43761b"><span style="font-size: small">(13:29:11)</span> <b>blin:</b></span> we can't promote it to testing until we sort out the issues with the nightlies<br/>
<span style="color: #c386df"><span style="font-size: small">(13:29:42)</span> <b>matyas:</b></span> can we give Edgar images from development somehow?<br/>
<span style="color: #43761b"><span style="font-size: small">(13:37:50)</span> <b>blin:</b></span> it should be pretty straightforward to build them -- i'm not too keen on having dev tags lying around in the official repos with our current model<br/>
<span style="color: #a63024"><span style="font-size: small">(14:03:27)</span> <b>efajardo:</b></span> the new images are broken<br/>
<span style="color: #a63024"><span style="font-size: small">(14:03:38)</span> <b>efajardo:</b></span> :disappointed:<br/>
<span style="color: #a63024"><span style="font-size: small">(14:03:40)</span> <b>efajardo:</b></span> <pre>Format string '/usr/bin/cmsd -c /etc/xrootd/xrootd-%(ENV_XC_IMAGE_NAME).cfg -k fifo -n %(ENV_XC_IMAGE_NAME) -k %(ENV_XC_NUM_LOGROTATE)s -s /var/run/xrootd/cmsd-%(ENV_XC_IMAGE_NAME).pid -l /var/log/xrootd/cmsd.log' for 'program:xcache-cmsd.command' is badly formatted: %c requires int or char in section 'program:xcache-cmsd' (file: '/etc/supervisord.d/10-xcache-cmsd.conf')<br/>For help, use /usr/bin/supervisord -h</pre><br/>
<span style="color: #a63024"><span style="font-size: small">(14:04:41)</span> <b>efajardo:</b></span> This is the config file that was generated by the way<br/>
<span style="color: #a63024"><span style="font-size: small">(14:04:43)</span> <b>efajardo:</b></span> <pre>[program:xcache-cmsd]<br/>command=/usr/bin/cmsd -c /etc/xrootd/xrootd-%(ENV_XC_IMAGE_NAME).cfg -k fifo -n %(ENV_XC_IMAGE_NAME) -k %(ENV_XC_NUM_LOGROTATE)s -s /var/run/xrootd/cmsd-%(ENV_XC_IMAGE_NAME).pid -l /var/log/xrootd/cmsd.log<br/>user=xrootd<br/>autorestart=true<br/>environment=LD_PRELOAD=/usr/lib64/libtcmalloc.so,TCMALLOC_RELEASE_RATE=10</pre><br/>
<span style="color: #c386df"><span style="font-size: small">(14:16:03)</span> <b>matyas:</b></span> <pre>command=/usr/bin/cmsd -c /etc/xrootd/xrootd-%(ENV_XC_IMAGE_NAME)s.cfg -k fifo -n %(ENV_XC_IMAGE_NAME)s -k %(ENV_XC_NUM_LOGROTATE)s -s /var/run/xrootd/cmsd-%(ENV_XC_IMAGE_NAME)s.pid -l /var/log/xrootd/cmsd.log</pre><br/>^^ should be that<br/>
<span style="color: #c386df"><span style="font-size: small">(14:16:14)</span> <b>matyas:</b></span> note the <tt>s</tt> after <tt>%(ENV_XC_IMAGE_NAME)</tt><br/>
<span style="color: #a63024"><span style="font-size: small">(14:18:56)</span> <b>efajardo:</b></span> I do not think so<br/>
<span style="color: #a63024"><span style="font-size: small">(14:19:02)</span> <b>efajardo:</b></span> thinsce this one seems to wokr well<br/>
<span style="color: #a63024"><span style="font-size: small">(14:19:03)</span> <b>efajardo:</b></span> <pre>[program:cms-xcache]<br/>command=xrootd -c /etc/xrootd/xrootd-cms-xcache.cfg -k fifo -n cms-xcache -k %(ENV_XC_NUM_LOGROTATE)s -s /var/run/xrootd/xrootd-cms-xcache.pid -l /var/log/xrootd/xrootd.log<br/>user=xrootd<br/>autorestart=true<br/>environment=LD_PRELOAD=/usr/lib64/libtcmalloc.so,TCMALLOC_RELEASE_RATE=10</pre><br/>
<span style="color: #a63024"><span style="font-size: small">(14:20:43)</span> <b>efajardo:</b></span> ahh I see what you mean<br/>
<span style="color: #a63024"><span style="font-size: small">(14:23:24)</span> <b>efajardo:</b></span> @matyas do you mind reviewing and merging<br/>
<span style="color: #a63024"><span style="font-size: small">(14:23:25)</span> <b>efajardo:</b></span> <a href="https://github.com/opensciencegrid/docker-xcache/pull/62">https://github.com/opensciencegrid/docker-xcache/pull/62</a><br/>
<span style="color: #a63024"><span style="font-size: small">(14:23:58)</span> <b>efajardo:</b></span> Does this automatically build <tt>image: opensciencegrid/cms-xcache:fresh</tt><br/>
<span style="color: #a63024"><span style="font-size: small">(14:23:58)</span> <b>efajardo:</b></span> ?<br/>
<span style="color: #c386df"><span style="font-size: small">(14:26:12)</span> <b>matyas:</b></span> Approved. Yes, it will do the build.<br/>
<span style="color: #a63024"><span style="font-size: small">(14:40:15)</span> <b>efajardo:</b></span> thanks<br/>
<span style="color: #73769d"><span style="font-size: small">(15:26:26)</span> <b>tim.theisen:</b></span> @blin Have any containers been tagged as stable since 2020-12-10?<br/>
<span style="color: #43761b"><span style="font-size: small">(15:29:41)</span> <b>blin:</b></span> nope<br/>
<span style="color: #c386df"><span style="font-size: small">(16:12:14)</span> <b>matyas:</b></span> koji is temporarily down. working on it.<br/>
<span style="color: #c386df"><span style="font-size: small">(16:26:14)</span> <b>matyas:</b></span> it's back up<br/>
</body>
</html>
