<!DOCTYPE html>
<html>
<head>
<title>Fri Aug 20, 2021 : #software (osg)</title>
</head>
<body>
<h3>Fri Aug 20, 2021 : #software (osg)</h3>
<span style="color: #a72f79"><span style="font-size: small">(11:11:04)</span> <b>andrew.melo:</b></span> Are there any hooks in the global pool to request that the worker node has a specific CVMFS dir available?<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:12:33)</span> <b>dweitzel:</b></span> In the OSPool, yes.  It's based on repos, not CVMFS dirs, but I think that's what you meant?<br/>
<span style="color: #a72f79"><span style="font-size: small">(11:13:35)</span> <b>andrew.melo:</b></span> Yes, I think so. Have some jobs landing on nodes that can't mount /cvmfs/sft.cern.ch, so I'dl ike to avoid that<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:13:51)</span> <b>dweitzel:</b></span> OSPool has attributes like:<br/><pre>HAS_CVMFS_ams_cern_ch = true<br/>HAS_CVMFS_atlas_cern_ch = true<br/>HAS_CVMFS_cms_cern_ch = true<br/>HAS_CVMFS_connect_opensciencegrid_org = true<br/>HAS_CVMFS_desdm_osgstorage_org = true<br/>HAS_CVMFS_eic_opensciencegrid_org = true<br/>HAS_CVMFS_gwosc_osgstorage_org = true<br/>HAS_CVMFS_icecube_opensciencegrid_org = true<br/>HAS_CVMFS_nexo_opensciencegrid_org = true<br/>HAS_CVMFS_oasis_opensciencegrid_org = true<br/>HAS_CVMFS_singularity_opensciencegrid_org = true<br/>HAS_CVMFS_snoplus_egi_eu = true<br/>HAS_CVMFS_sphenix_opensciencegrid_org = true<br/>HAS_CVMFS_spt_opensciencegrid_org = true<br/>HAS_CVMFS_stash_osgstorage_org = true<br/>HAS_CVMFS_sw_lsst_eu = true<br/>HAS_CVMFS_veritas_opensciencegrid_org = true<br/>HAS_CVMFS_xenon_opensciencegrid_org = true</pre><br/>
<span style="color: #235e5b"><span style="font-size: small">(11:14:39)</span> <b>dweitzel:</b></span> I don't see <a href="http://sft.cern.ch">sft.cern.ch</a> in that list.  It's a whitelist of repos to check for:<br/><a href="https://github.com/opensciencegrid/osg-flock/blob/master/node-check/osgvo-node-advertise#L346-L363">https://github.com/opensciencegrid/osg-flock/blob/master/node-check/osgvo-node-advertise#L346-L363</a><br/>
<span style="color: #a72f79"><span style="font-size: small">(11:15:38)</span> <b>andrew.melo:</b></span> would it be OK to put a PR in to add that?<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:21:30)</span> <b>dweitzel:</b></span> Yup, I think so.<br/>
<span style="color: #a72f79"><span style="font-size: small">(11:22:13)</span> <b>andrew.melo:</b></span> It actually appears this host doesn't have CVMFS at all:<br/><pre>HAS_CVMFS_IGWN_CONTAINERS=False                                                                                 <br/>HAS_CVMFS_IGWN_PRIVATE_DATA=False                                                  <br/>HAS_CVMFS_IGWN_PRIVATE_DATA_SINGULARITY=False                                      <br/>HAS_CVMFS_IGWN_STORAGE=False                                                       <br/>HAS_CVMFS_LIGO_CONTAINERS=False                                                    <br/>HAS_CVMFS_LIGO_STORAGE=False                                                       <br/>HAS_CVMFS_ams_cern_ch=False                                                        <br/>HAS_CVMFS_atlas_cern_ch=False                                                      <br/>HAS_CVMFS_cms_cern_ch=False                                                        <br/>HAS_CVMFS_connect_opensciencegrid_org=False                                        <br/>HAS_CVMFS_desdm_osgstorage_org=False                                               <br/>HAS_CVMFS_eic_opensciencegrid_org=False                                            <br/>HAS_CVMFS_gwosc_osgstorage_org=False                                               <br/>HAS_CVMFS_icecube_opensciencegrid_org=False                                        <br/>HAS_CVMFS_nexo_opensciencegrid_org=False                                           <br/>HAS_CVMFS_oasis_opensciencegrid_org=False                                          <br/>HAS_CVMFS_singularity_opensciencegrid_org=False                                    <br/>HAS_CVMFS_snoplus_egi_eu=False                                                     <br/>HAS_CVMFS_sphenix_opensciencegrid_org=False                                        <br/>HAS_CVMFS_spt_opensciencegrid_org=False                                            <br/>HAS_CVMFS_stash_osgstorage_org=False                                               <br/>HAS_CVMFS_sw_lsst_eu=False                                                         <br/>HAS_CVMFS_veritas_opensciencegrid_org=False                                        <br/>HAS_CVMFS_xenon_opensciencegrid_org=False  </pre><br/><br/>
<span style="color: #235e5b"><span style="font-size: small">(11:22:57)</span> <b>dweitzel:</b></span> :slightly_smiling_face: that could be a problem.<br/>
<span style="color: #a72f79"><span style="font-size: small">(11:29:34)</span> <b>andrew.melo:</b></span> Is there a way to check <tt>GLIDEIN_PROVIDES</tt> for CVMFS?<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:31:09)</span> <b>dweitzel:</b></span> oh, I don't know.  I think <tt>GLIDEIN_PROVIDES</tt> is from glideinwms itself?<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:31:34)</span> <b>dweitzel:</b></span> In the OS pool, that value is:<br/><pre>$ condor_status -af GLIDEIN_PROVIDES | sort | uniq -c<br/>  18144 singularity/privileged<br/>    701 singularity/unprivileged<br/>   6879 undefined</pre><br/>
<span style="color: #a72f79"><span style="font-size: small">(11:40:12)</span> <b>andrew.melo:</b></span> Hmm. Yeah, I did this temporarily just to make sure that CVMFS is there at all<br/><pre>Requirements = ( HAS_CVMFS_cms_cern_ch == True )</pre><br/>
<span style="color: #a72f79"><span style="font-size: small">(11:42:25)</span> <b>andrew.melo:</b></span> One last Q and I think I'll be done... Why does the following snippet<br/><pre>out_path=/tmp/melo/outtest                          <br/>transfer_output_files = delphesstep/out.root                                       <br/>transfer_output_remaps = "out.root,$(out_path)/delphesstep/out_$(Cluster)_$(Process).root"<br/>Error = /dev/null                                                                  <br/>Output = $(out_path)/log/job.output.$(Cluster)-$(Process)                          <br/>Log = $(out_path)/log/job.log.$(Cluster) </pre><br/>Send the log file to where I asked, but the output just goes to <tt>_condor_stdout</tt><br/>
<span style="color: #a72f79"><span style="font-size: small">(11:52:59)</span> <b>andrew.melo:</b></span> nm, got it<br/>
<span style="color: #c386df"><span style="font-size: small">(11:53:18)</span> <b>matyas:</b></span> what was it?<br/>
<span style="color: #a72f79"><span style="font-size: small">(12:13:34)</span> <b>andrew.melo:</b></span> needed to do Output = log.txt then add that to the transfer output remaps<br/>
<span style="color: #a72f79"><span style="font-size: small">(12:13:46)</span> <b>andrew.melo:</b></span> Or at least that's what I did .. not sure if that's the correct way<br/>
</body>
</html>
