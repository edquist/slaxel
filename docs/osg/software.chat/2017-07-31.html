<!DOCTYPE html>
<html>
<head>
<title>Mon Jul 31, 2017 : #software (osg)</title>
</head>
<body>
<h3>Mon Jul 31, 2017 : #software (osg)</h3>
<span style="color: #9e3997"><span style="font-size: small">(08:50:52)</span> <b>bbockelm:</b></span> alright, it appears that - outside an errant <tt>Generated osg vo-user map</tt>, the Nebraska GUMS server is decommissioned!<br/>
<span style="color: #d1707d"><span style="font-size: small">(09:33:55)</span> <b>gattebury:</b></span> You do realize that 3 seconds after you typed that there was a nanohub mapping call in our GUMS right? You jinxed us<br/>
<span style="color: #d1707d"><span style="font-size: small">(09:34:14)</span> <b>gattebury:</b></span> (but seriously, yes, GUMS is dead, long live the GUMS!)<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:34:56)</span> <b>bbockelm:</b></span> that's nanohub's problem if they want to use glexec locally ... to map nanohub users to the same account as the parent.<br/>
<span style="color: #674b1b"><span style="font-size: small">(10:35:58)</span> <b>rynge:</b></span> I have a couple of CE questions. This is for a HTCondorCE which uses HTCondor as a site scheduler<br/>
<span style="color: #674b1b"><span style="font-size: small">(10:36:20)</span> <b>rynge:</b></span> 1) I keep getting GSI problems in the glideins regarding the site scheduler:<br/>
<span style="color: #674b1b"><span style="font-size: small">(10:36:26)</span> <b>rynge:</b></span> 07/31/17 15:32:20 (pid:9531) SECMAN: required authentication with collector <a href="http://js-157-237.jetstream-cloud.org:9619">js-157-237.jetstream-cloud.org:9619</a> failed, so aborting command UPDATE_STARTD_AD.<br/>07/31/17 15:32:20 (pid:9531) ERROR: AUTHENTICATE:1003:Failed to authenticate with any method|AUTHENTICATE:1004:Failed to authenticate using GSI|GSI:5006:Failed to authenticate because the subject '/DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=<a href="http://js-157-237.jetstream-cloud.org">js-157-237.jetstream-cloud.org</a>' is not currently trusted by you.  If it should be, add it to GSI_DAEMON_NAME or undefine GSI_DAEMON_NAME.<br/>07/31/17 15:32:20 (pid:9531) Failed to start non-blocking update to &lt;149.165.157.237:9619&gt;.<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:37:40)</span> <b>dweitzel:</b></span> Is that error fatal @rynge ?<br/>
<span style="color: #674b1b"><span style="font-size: small">(10:37:59)</span> <b>rynge:</b></span> No, just annoying<br/>
<span style="color: #674b1b"><span style="font-size: small">(10:38:56)</span> <b>rynge:</b></span> 2) Even though the factory supposedly requests 1800 MB RAM, the partitioned slot I get is 1920. Maybe something wrong with my partitionalble slots, but I have not been able to figure it out.<br/>
<span style="color: #674b1b"><span style="font-size: small">(10:41:14)</span> <b>rynge:</b></span> Maybe 2 is factory ops anyways - I see both 1800 and 1920 in the machine ad:<br/>
<span style="color: #674b1b"><span style="font-size: small">(10:41:16)</span> <b>rynge:</b></span> MemoryProvisioned = 1920<br/>RequestMemory = 1800<br/>GLIDEIN_MaxMemMBs = 1920<br/>Memory = 1920<br/>TotalMemory = 1920<br/>TotalSlotMemory = 1920<br/>
<span style="color: #674b1b"><span style="font-size: small">(10:41:26)</span> <b>rynge:</b></span> I'll ask factory ops about that one<br/>
<span style="color: #9e3997"><span style="font-size: small">(11:06:58)</span> <b>bbockelm:</b></span> For (1) - that should automatically be added to <tt>GSI_DAEMON_NAME</tt> IIRC?  Hostname mismatch between the HTCONDOR_CE_NAME and the DN of the cert?<br/>
<span style="color: #674b1b"><span style="font-size: small">(11:10:38)</span> <b>rynge:</b></span> I don't see it added:<br/>
<span style="color: #674b1b"><span style="font-size: small">(11:10:40)</span> <b>rynge:</b></span> GSI_DAEMON_NAME=/DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=<a href="http://osg-flock.grid.iu.edu">osg-flock.grid.iu.edu</a>,/DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=glideinwms/osg-flock.grid.iu.edu,/DC=org/DC=opensciencegrid/O=Open Science Grid/OU=Services/CN=pilot/osg-flock.grid.iu.edu<br/>
<span style="color: #674b1b"><span style="font-size: small">(11:11:01)</span> <b>rynge:</b></span> Where would I find the HTCONDOR_CE_NAME setting?<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:44:15)</span> <b>bbockelm:</b></span> (looking for the ticket)<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:44:32)</span> <b>bbockelm:</b></span> <a href="https://cdcvs.fnal.gov/redmine/issues/7807">https://cdcvs.fnal.gov/redmine/issues/7807</a><br/>
<span style="color: #9e3997"><span style="font-size: small">(12:44:40)</span> <b>bbockelm:</b></span> <tt>CONDORCE_COLLECTOR_HOST</tt> is the precise name, I guess.<br/>
<span style="color: #9e3997"><span style="font-size: small">(13:26:35)</span> <b>bbockelm:</b></span> @bbockelm uploaded a file: <a href="https://opensciencegrid.slack.com/files/bbockelm/F6G2VD01Y/my_tombstone_thumb.jpg">I don't know who made this, but I like it.</a><br/>
<span style="color: #d1707d"><span style="font-size: small">(13:43:23)</span> <b>gattebury:</b></span> … don’t forget the requisite MOTD ASCII art for the old server.<br/>
<span style="color: #674b1b"><span style="font-size: small">(13:47:45)</span> <b>rynge:</b></span> That variable is set correctly, but there is no GSI update because of it<br/>
<span style="color: #674b1b"><span style="font-size: small">(13:47:49)</span> <b>rynge:</b></span> # If $CONDORCE_COLLECTOR_HOST is set in the glidein's environment, site<br/># wants to have some visibility into the glidein. Add to COLLECTOR_HOST<br/>if [ -n "$CONDORCE_COLLECTOR_HOST" ]; then<br/>    add_config_line GLIDEIN_Site_Collector $CONDORCE_COLLECTOR_HOST<br/>fi<br/>
<span style="color: #9e3997"><span style="font-size: small">(13:52:28)</span> <b>bbockelm:</b></span> So, the <tt>STARTD.ALLOW_CLIENT</tt> line is this:<br/>
<span style="color: #9e3997"><span style="font-size: small">(13:52:31)</span> <b>bbockelm:</b></span> <pre><br/>STARTD.ALLOW_CLIENT = collector*/*, anonymous*/*, frontend*/*, condor*/*, submit-side@matchsession/*<br/></pre><br/>
<span style="color: #9e3997"><span style="font-size: small">(13:54:30)</span> <b>bbockelm:</b></span> <tt>STARTD.GSI_DAEMON_NAME</tt> should be unset, right?<br/>
<span style="color: #674b1b"><span style="font-size: small">(14:01:02)</span> <b>rynge:</b></span> I don't know how the whole chain in gwms works, but I see:<br/>
<span style="color: #674b1b"><span style="font-size: small">(14:01:35)</span> <b>rynge:</b></span> STARTD.GSI_DAEMON_NAME =<br/>
<span style="color: #674b1b"><span style="font-size: small">(14:01:39)</span> <b>rynge:</b></span> So that looks right<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:17:32)</span> <b>bbockelm:</b></span> what version of HTCondor are you using?<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:17:39)</span> <b>bbockelm:</b></span> I wonder if that's not doing what we think it is?<br/>
<span style="color: #674b1b"><span style="font-size: small">(14:34:06)</span> <b>rynge:</b></span> 8.4.8<br/>
<span style="color: #674b1b"><span style="font-size: small">(14:34:12)</span> <b>rynge:</b></span> That is on the glideins<br/>
<span style="color: #674b1b"><span style="font-size: small">(14:34:21)</span> <b>rynge:</b></span> Maybe time to update :slightly_smiling_face:<br/>
<span style="color: #674b1b"><span style="font-size: small">(15:38:43)</span> <b>rynge:</b></span> @bbockelm Seems it works correctly with 8.6 glideins<br/>
</body>
</html>
