<!DOCTYPE html>
<html>
<head>
<title>Mon Nov 2, 2020 : #software (osg)</title>
</head>
<body>
<h3>Mon Nov 2, 2020 : #software (osg)</h3>
<span style="color: #43761b"><span style="font-size: small">(08:31:48)</span> <b>blin:</b></span> yeah, we're seeing that in the tests, too<br/>
<span style="color: #43761b"><span style="font-size: small">(08:37:24)</span> <b>blin:</b></span> new travis ci pricing plan =/ <a href="https://blog.travis-ci.com/2020-11-02-travis-ci-new-billing">https://blog.travis-ci.com/2020-11-02-travis-ci-new-billing</a><br/>&gt; For those of you who have been building on public repositories (on <a href="http://travis-ci.com">travis-ci.com</a>, with no paid subscription), we will upgrade you to our trial (free) plan with a 10K credit allotment (which allows around 1000 minutes in a Linux environment).<br/>
<span style="color: #9e3997"><span style="font-size: small">(08:39:35)</span> <b>bbockelm:</b></span> fun!  So the upshot is we have 1k minutes per account?<br/>
<span style="color: #43761b"><span style="font-size: small">(08:40:15)</span> <b>blin:</b></span> yup, where an org = 1 account<br/>
<span style="color: #9e3997"><span style="font-size: small">(08:40:31)</span> <b>bbockelm:</b></span> Any good way to audit the number of minutes we are currently using?<br/>
<span style="color: #43761b"><span style="font-size: small">(08:41:24)</span> <b>blin:</b></span> they have a plan page for current consumption but i don't see anything mentioning historical consumption <a href="https://travis-ci.com/organizations/opensciencegrid/plan">https://travis-ci.com/organizations/opensciencegrid/plan</a><br/>
<span style="color: #9e3997"><span style="font-size: small">(08:41:50)</span> <b>bbockelm:</b></span> If I'm doing the numbers right, that's ~30 minutes every night.  For <a href="http://osg.org">osg.org</a>, I'm assuming that's doable provided we cut down some of the parallel builds?<br/>
<span style="color: #43761b"><span style="font-size: small">(08:42:33)</span> <b>blin:</b></span> we'll probably need to disable or limit the number of osg-test builds<br/>
<span style="color: #43761b"><span style="font-size: small">(08:42:54)</span> <b>blin:</b></span> some of our container builds have already been moved to GHA<br/>
<span style="color: #43761b"><span style="font-size: small">(08:43:21)</span> <b>blin:</b></span> i think we'll have to worry about htcondor/htcondor-ce/blahp, though<br/>
<span style="color: #9e3997"><span style="font-size: small">(08:43:46)</span> <b>bbockelm:</b></span> Indeed - particularly the Mac OS X builds are pricey.<br/>
<span style="color: #9e3997"><span style="font-size: small">(08:47:17)</span> <b>bbockelm:</b></span> ah, I'm reading that note wrong.  The 10k credits are non-renewable and you have to apply / get approved for monthly OSS credits.<br/>
<span style="color: #43761b"><span style="font-size: small">(08:48:16)</span> <b>blin:</b></span> yikes<br/>
<span style="color: #9e3997"><span style="font-size: small">(08:49:32)</span> <b>bbockelm:</b></span> &gt;  We will be offering an allotment of OSS minutes that will be reviewed and allocated on a case by case basis. Should you want to apply for these credits please open a request with Travis CI support stating that you’d like to be considered for the OSS allotment. Please include:<br/>&gt; Your account name and VCS provider (like <tt><a href="http://travis-ci.com/github/[your">travis-ci.com/github/[your</a> account name]</tt> )<br/>&gt; How many credits (build minutes) you’d like to request (should your run out of credits again you can repeat the process to request more)<br/>
<span style="color: #9e3997"><span style="font-size: small">(08:49:59)</span> <b>bbockelm:</b></span> I'm guessing all the sweet sweet VC money is drying up!<br/>
<span style="color: #43761b"><span style="font-size: small">(08:50:37)</span> <b>blin:</b></span> yeah, that's one reason why i started moving container builds over to GHA<br/>
<span style="color: #9e3997"><span style="font-size: small">(08:57:35)</span> <b>bbockelm:</b></span> Ok - so it seems they've changed plans over for folks but don't even have the pricing info up for the usage-based plans.<br/>
<span style="color: #9e3997"><span style="font-size: small">(08:58:42)</span> <b>bbockelm:</b></span> I mean, I don't mind paying for services but it seems they don't have their crap together here.<br/>
<span style="color: #43761b"><span style="font-size: small">(08:58:45)</span> <b>blin:</b></span> if you have admin here, you can see it <a href="https://travis-ci.com/organizations/htcondor/plan">https://travis-ci.com/organizations/htcondor/plan</a><br/>
<span style="color: #9e3997"><span style="font-size: small">(08:59:18)</span> <b>bbockelm:</b></span> Right - but if you look at the screenshot of their blog, there should be a "buy more minutes" button.  I only see purchasing the concurrency-based plans.<br/>
<span style="color: #43761b"><span style="font-size: small">(08:59:29)</span> <b>blin:</b></span> ah sure<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:00:45)</span> <b>bbockelm:</b></span> So I can't even tell if the GHA or travis-ci is a cheaper approach.<br/>
<span style="color: #235e5b"><span style="font-size: small">(09:32:07)</span> <b>dweitzel:</b></span> Apparently my certificate is not attached to see contact information in topology.  So I need to update that.  But also, I need the contact info for a CE.  Anyone want to help me with either of those?<br/>
<span style="color: #235e5b"><span style="font-size: small">(09:32:32)</span> <b>dweitzel:</b></span> (CMS site stopped reporting to GRACC, want to open ticket against them)<br/>
<span style="color: #235e5b"><span style="font-size: small">(09:32:42)</span> <b>dweitzel:</b></span> (if only we had a site where you could open a ticket against a site...)<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:33:04)</span> <b>bbockelm:</b></span> for a LHC site, might be better to do a GGUS ticket.<br/>
<span style="color: #235e5b"><span style="font-size: small">(09:33:33)</span> <b>dweitzel:</b></span> do they have a interface to open a ticket against a site?<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:33:48)</span> <b>bbockelm:</b></span> yup.<br/>
<span style="color: #235e5b"><span style="font-size: small">(09:37:55)</span> <b>dweitzel:</b></span> ok, that works.<br/>
<span style="color: #235e5b"><span style="font-size: small">(09:37:56)</span> <b>dweitzel:</b></span> opened<br/>
<span style="color: #9d8eee"><span style="font-size: small">(09:43:06)</span> <b>cat:</b></span> Wow, that’s a pricing plan straight out of a marketing department… makes no sense.<br/>
<span style="color: #9d8eee"><span style="font-size: small">(09:43:35)</span> <b>cat:</b></span> “I know, let’s invent a new, meaningless unit of currency to obfuscate what things really cost!”<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:44:04)</span> <b>bbockelm:</b></span> Yes - and I'm more worried about how poorly it was rolled out versus actually paying for services (which seems, erm, reasonable...).<br/>
<span style="color: #9d8eee"><span style="font-size: small">(09:44:07)</span> <b>cat:</b></span> Anyway, it appears that it is not a budget-busting proposition to buy “credits” now and then.<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:44:39)</span> <b>bbockelm:</b></span> Although, as noted above, it's literally not possible to buy credits since they don't seem to have rolled out that part of the web interface...<br/>
<span style="color: #9d8eee"><span style="font-size: small">(09:44:55)</span> <b>cat:</b></span> I’m not talking about this very moment.<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:48:28)</span> <b>bbockelm:</b></span> If the screenshot they posted in their blog is the price, it looks like it's $0.004 / minute for Linux with 0 minutes free.  GHA is $0.008 / minute for Linux and 2,000 minutes / month free.<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:48:53)</span> <b>bbockelm:</b></span> GHA additionally allows you to run your own workers and time you run on your own workers is also free.<br/>
<span style="color: #9d8eee"><span style="font-size: small">(09:51:10)</span> <b>cat:</b></span> So if we had general-purpose compute machines at our disposal, we could just use them for free? If only…<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:51:23)</span> <b>bbockelm:</b></span> yeah, imagine that!<br/>
<span style="color: #43761b"><span style="font-size: small">(10:06:01)</span> <b>blin:</b></span> @marcom did you create a ticket for the wn-client install failure? i didn't see one come across our ticketing system<br/>
<span style="color: #dd8527"><span style="font-size: small">(10:07:31)</span> <b>marcom:</b></span> @blin I did, <a href="https://support.opensciencegrid.org/public/tickets/643038624fbcfeaeb5ebfe688718fc651f48ff1ba0311b061dff3c2d69c3f412">https://support.opensciencegrid.org/public/tickets/643038624fbcfeaeb5ebfe688718fc651f48ff1ba0311b061dff3c2d69c3f412</a><br/>
<span style="color: #43761b"><span style="font-size: small">(10:07:44)</span> <b>blin:</b></span> perfect, thanks<br/>
<span style="color: #dd8527"><span style="font-size: small">(10:08:01)</span> <b>marcom:</b></span> [#65974] Failing the install of osg-wn-client in OSG 3.5<br/>
<span style="color: #e96699"><span style="font-size: small">(10:11:51)</span> <b>lincoln:</b></span> did anything change with the certificates/crls in OASIS recently? we symlink <tt>/etc/grid-security/certificates</tt> to <tt>/cvmfs/oasis.opensciencegrid.org/osg-software/osg-wn-client/certificates</tt>. failing TPC smoke tests now with the following err in dcache:<br/><pre>Initiating a macaroon authz HTTP PULL, authz with macaroon to target: FAILED: java.security.cert.CertificateException: The peer's certificate with subject's DN CN=<a href="http://prometheus.desy.de">prometheus.desy.de</a>,OU=DESY,O=GermanGrid,C=DE was rejected. The peer's certificate status is: FAILED The following validation errors were found:;error at position 0 in chain, problematic certificate subject: CN=<a href="http://prometheus.desy.de">prometheus.desy.de</a>,OU=DESY,O=GermanGrid,C=DE (category: CRL): Signature of a CRL corresponding to this certificates CA is invalid</pre><br/><br/>
<span style="color: #43761b"><span style="font-size: small">(10:14:15)</span> <b>blin:</b></span> hrmmm, first i'm hearing of an issue there. @tim.theisen?<br/>
<span style="color: #73769d"><span style="font-size: small">(10:15:16)</span> <b>tim.theisen:</b></span> First that I've heard of it as well.<br/>
<span style="color: #73769d"><span style="font-size: small">(10:16:29)</span> <b>tim.theisen:</b></span> We haven't had a certificate update in a while.<br/>
<span style="color: #43761b"><span style="font-size: small">(10:35:23)</span> <b>blin:</b></span> @tim.theisen could be that the CRL updater isn't running? Mat's OOO today, would you be able to take a look?<br/>
<span style="color: #73769d"><span style="font-size: small">(10:36:11)</span> <b>tim.theisen:</b></span> OK<br/>
<span style="color: #73769d"><span style="font-size: small">(10:39:18)</span> <b>tim.theisen:</b></span> It runs every 6 hours, the last one completed at 6:20 this morning with no errors.<br/>
<span style="color: #43761b"><span style="font-size: small">(10:43:39)</span> <b>blin:</b></span> maybe the CRL is malformed? i don't think fetch-crl checks that<br/>
<span style="color: #e96699"><span style="font-size: small">(10:44:25)</span> <b>lincoln:</b></span> thanks for checking Tim<br/>
<span style="color: #e96699"><span style="font-size: small">(10:44:50)</span> <b>lincoln:</b></span> yeah, i'm surprised if this doesn't show up anywhere else. i guess maybe we're the weird ones for just using the CRLs from oasis..?<br/>
<span style="color: #e96699"><span style="font-size: small">(10:44:56)</span> <b>lincoln:</b></span> but it seems like oasis doesn't have a problem.<br/>
<span style="color: #9e3997"><span style="font-size: small">(10:57:23)</span> <b>bbockelm:</b></span> @lincoln - I don't know if there's any extra complications with the prometheus hostcert.  Could send a note to Paul asking for advice as welll<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:07:08)</span> <b>dweitzel:</b></span> <b>@edquist</b> is the host osg-pilot-container:<a href="http://cm3000.chtc.wisc.edu">cm3000.chtc.wisc.edu</a> your testing gratia probe?<br/>
<span style="color: #16569E"><span style="font-size: small">(13:07:29)</span> <b>edquist:</b></span> that's where i was doing some testing<br/>
<span style="color: #16569E"><span style="font-size: small">(13:07:31)</span> <b>edquist:</b></span> yes<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:08:22)</span> <b>dweitzel:</b></span> It appears you are not setting the site?  Or setting the Host Description?<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:08:41)</span> <b>dweitzel:</b></span> Showing up in my query for malformed site records.<br/>
</body>
</html>
