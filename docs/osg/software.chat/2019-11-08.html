<!DOCTYPE html>
<html>
<head>
<title>Fri Nov 8, 2019 : #software (osg)</title>
</head>
<body>
<h3>Fri Nov 8, 2019 : #software (osg)</h3>
<span style="color: #c386df"><span style="font-size: small">(12:51:37)</span> <b>matyas:</b></span> quote of the day (from the EPEL mailing list):<br/>&gt;&gt;&gt;<br/>Python 2 upstream support ends in 2 months (minus 8 days).<br/>Python 2 support in RHEL 8 ends in 2024 (IIRC).<br/>RHEL/EPEL 8 support ends in 100 years (give or take).<br/>
<span style="color: #16569E"><span style="font-size: small">(12:51:58)</span> <b>edquist:</b></span> :-p<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:13:20)</span> <b>dweitzel:</b></span> What in the HTCondor-CE uploads to metrics to <a href="http://collector.opensciencegrid.org">collector.opensciencegrid.org</a> ?<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:13:28)</span> <b>dweitzel:</b></span> trying to find the python script.<br/>
<span style="color: #43761b"><span style="font-size: small">(13:15:31)</span> <b>blin:</b></span> it just uses CONDOR_VIEW machinery<br/>
<span style="color: #43761b"><span style="font-size: small">(13:15:56)</span> <b>blin:</b></span> osg-configure sets up the view host config + extra attributes to advertise<br/>
<span style="color: #43761b"><span style="font-size: small">(13:16:03)</span> <b>blin:</b></span> any sorta metrics would have to come from the schedd ad itself<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:16:15)</span> <b>dweitzel:</b></span> ok, the extra attributes seems to be failing on some CE's.<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:16:28)</span> <b>dweitzel:</b></span> look at the bottom of this json mess: <a href="http://collector.opensciencegrid.org/json/agis-compat">http://collector.opensciencegrid.org/json/agis-compat</a><br/>
<span style="color: #235e5b"><span style="font-size: small">(13:16:42)</span> <b>dweitzel:</b></span> it has traceback's and failing CE's<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:16:55)</span> <b>dweitzel:</b></span> (it's easier to read if you input the json into something)<br/>
<span style="color: #43761b"><span style="font-size: small">(13:17:08)</span> <b>blin:</b></span> <pre><br/># cat /etc/condor-ce/config.d/10-osg-attributes-generated.conf<br/># Do not edit - file generated by osg-configure<br/>OSG_Resource = "local"<br/>OSG_ResourceGroup = "UNAVAILABLE"<br/>OSG_BatchSystems = "Condor"<br/>OSG_ResourceCatalog = { \<br/>  [ \<br/>    AllowedVOs = { "cdf", "fermilab" }; \<br/>    CPUs = 2; \<br/>    MaxWallTime = 1440; \<br/>    Memory = 10000; \<br/>    Name = "test"; \<br/>    Requirements = TARGET.RequestCPUs &lt;= CPUs &amp;&amp; TARGET.RequestMemory &lt;= Memory &amp;&amp; member(TARGET.VO, AllowedVOs); \<br/>    Transform = [ set_MaxMemory = RequestMemory; set_xcount = RequestCPUs; ]; \<br/>  ] \<br/>}<br/>SCHEDD_ATTRS = $(SCHEDD_ATTRS) OSG_Resource OSG_ResourceGroup OSG_BatchSystems OSG_ResourceCatalog<br/>[root@fermicloud068 ~]# cat /etc/condor-ce/config.d/*generated.conf<br/># Do not edit - file generated by osg-configure<br/>CONDOR_VIEW_HOST = <a href="http://collector-itb.opensciencegrid.org:9619">collector-itb.opensciencegrid.org:9619</a><br/># Do not edit - file generated by osg-configure<br/>OSG_Resource = "local"<br/>OSG_ResourceGroup = "UNAVAILABLE"<br/>OSG_BatchSystems = "Condor"<br/>OSG_ResourceCatalog = { \<br/>  [ \<br/>    AllowedVOs = { "cdf", "fermilab" }; \<br/>    CPUs = 2; \<br/>    MaxWallTime = 1440; \<br/>    Memory = 10000; \<br/>    Name = "test"; \<br/>    Requirements = TARGET.RequestCPUs &lt;= CPUs &amp;&amp; TARGET.RequestMemory &lt;= Memory &amp;&amp; member(TARGET.VO, AllowedVOs); \<br/>    Transform = [ set_MaxMemory = RequestMemory; set_xcount = RequestCPUs; ]; \<br/>  ] \<br/>}<br/>SCHEDD_ATTRS = $(SCHEDD_ATTRS) OSG_Resource OSG_ResourceGroup OSG_BatchSystems OSG_ResourceCatalog<br/></pre><br/>
<span style="color: #235e5b"><span style="font-size: small">(13:17:24)</span> <b>dweitzel:</b></span> <tt>Memory</tt> isn't being set.  <tt>OSG_BatchSystems</tt><br/>
<span style="color: #43761b"><span style="font-size: small">(13:18:17)</span> <b>blin:</b></span> yeah, i think that means that they need to run osg-configure<br/>
<span style="color: #16569E"><span style="font-size: small">(14:18:26)</span> <b>edquist:</b></span> Hey guys, anybody know anything about this patch we are carrying in the osg packaging of condor?<br/><br/><pre><br/>--- a/src/condor_contrib/bosco/bosco_cluster<br/>+++ b/src/condor_contrib/bosco/bosco_cluster<br/>@@ -962,6 +962,9 @@ else<br/> fi<br/> rsync -aq  $archive_dir/$libdir/libclassad.so* $remote_glite_dir/lib/ 2&gt;/dev/null<br/> rsync -aq  $archive_dir/$libdir/libcondor_utils* $remote_glite_dir/lib/ 2&gt;/dev/null<br/>+if [ -d $archive_dir/libexec/glite/libexec ] ; then<br/>+    rsync -aq $archive_dir/libexec/glite/libexec $remote_glite_dir/<br/>+fi<br/> show_progress "Sending libraries to $remote_host" rsync -aq  $archive_dir/$libdir/condor $remote_glite_dir/lib/ 2&gt;/dev/null<br/> rsync -aq  $archive_dir/sbin/condor_ft-gahp $remote_glite_dir/bin 2&gt;/dev/null<br/></pre><br/><br/>We have this patch for trunk/osg-3.5 but not osg-3.4, just wondering if it ought to be in 3.4 also or not<br/>
<span style="color: #43761b"><span style="font-size: small">(14:19:12)</span> <b>blin:</b></span> @tim.theisen @matyas<br/>
<span style="color: #73769d"><span style="font-size: small">(14:20:08)</span> <b>tim.theisen:</b></span> Don't know about. Looks safe to apply.<br/>
<span style="color: #43761b"><span style="font-size: small">(14:21:15)</span> <b>blin:</b></span> where are all the bosco_cluster htcondor tickets? i can't find any<br/>
<span style="color: #c386df"><span style="font-size: small">(14:22:48)</span> <b>matyas:</b></span> was that an htcondor ticket or a jira ticket?<br/>
<span style="color: #43761b"><span style="font-size: small">(14:24:04)</span> <b>blin:</b></span> there's this <a href="https://github.com/opensciencegrid/Software-Redhat/commit/78f2869e594aec4d6bfed0661af1915f1e521f19">https://github.com/opensciencegrid/Software-Redhat/commit/78f2869e594aec4d6bfed0661af1915f1e521f19</a>, which indicates an associated jira ticket<br/>
<span style="color: #43761b"><span style="font-size: small">(14:24:23)</span> <b>blin:</b></span> but my changelog message says that it's an "htcondor-provided patch"<br/>
<span style="color: #16569E"><span style="font-size: small">(14:24:37)</span> <b>edquist:</b></span> mystery code<br/>
<span style="color: #16569E"><span style="font-size: small">(14:24:59)</span> <b>edquist:</b></span> htcondor-provided as in, "somebody from the condor team slipped me this patch under the table"<br/>
<span style="color: #16569E"><span style="font-size: small">(14:25:17)</span> <b>edquist:</b></span> "... and told me not to report it to the irs"<br/>
<span style="color: #16569E"><span style="font-size: small">(14:25:35)</span> <b>edquist:</b></span> anyways<br/>
<span style="color: #16569E"><span style="font-size: small">(14:25:53)</span> <b>edquist:</b></span> if anybody has any reason why i should leave this out of 3.4, let me know, otherwise i won't<br/>
<span style="color: #43761b"><span style="font-size: small">(14:28:41)</span> <b>blin:</b></span> what bothers me is that it's not in upstream<br/>
<span style="color: #16569E"><span style="font-size: small">(14:28:58)</span> <b>edquist:</b></span> they tricked us<br/>
<span style="color: #43761b"><span style="font-size: small">(14:30:09)</span> <b>blin:</b></span> nor is htcondor using the new bosco...<br/>
<span style="color: #43761b"><span style="font-size: small">(14:30:31)</span> <b>blin:</b></span> @tim.theisen i don't recall, is there a reason why upstream 8.9 aren't using the unified bosco tarball?<br/>
<span style="color: #43761b"><span style="font-size: small">(14:30:44)</span> <b>blin:</b></span> ah wait, i see it's only updated for rhel7<br/>
<span style="color: #43761b"><span style="font-size: small">(15:03:18)</span> <b>blin:</b></span> <b>@edquist</b> found it, it was in an email from jaime to you/me/tim<br/>
<span style="color: #43761b"><span style="font-size: small">(15:05:16)</span> <b>blin:</b></span> but yeah, it should also be in the 3.4 build<br/>
<span style="color: #16569E"><span style="font-size: small">(16:08:06)</span> <b>edquist:</b></span> nice<br/>
<span style="color: #16569E"><span style="font-size: small">(16:08:25)</span> <b>edquist:</b></span> it was under the table after all<br/>
</body>
</html>
