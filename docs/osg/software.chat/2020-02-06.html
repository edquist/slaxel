<!DOCTYPE html>
<html>
<head>
<title>Thu Feb 6, 2020 : #software (osg)</title>
</head>
<body>
<h3>Thu Feb 6, 2020 : #software (osg)</h3>
<span style="color: #a72f79"><span style="font-size: small">(03:13:45)</span> <b>andrew.melo:</b></span> Can you use globus-url-copy and crank the debugging?<br/>
<span style="color: #619a4f"><span style="font-size: small">(11:25:38)</span> <b>u0928244:</b></span> @dwd I’ve had a lengthy conversation with the cluster admins about the CVMFS alternatives you suggested.<br/><br/>They are opposed to installing fuse on the nodes, so the fusermount option won’t work for us.<br/><br/>I would like to get support in for the singularity pre-mounts, so there is an alternative available to NFS. We’re going forward with the NFS exporter at this time. I have discovered it is possible to avoid rc.local hacks by specifying dependencies in the fstab:<br/><br/><pre># CVMFS REPOS<br/><a href="http://config-osg.opensciencegrid.org">config-osg.opensciencegrid.org</a>          /cvmfs/config-osg.opensciencegrid.org   cvmfs   defaults,_netdev									0 0<br/><a href="http://atlas.cern.ch">atlas.cern.ch</a>				/cvmfs/atlas.cern.ch			cvmfs	defaults,_netdev,x-systemd.requires-mounts-for=/cvmfs/config-osg.opensciencegrid.org	0 0<br/><a href="http://sft.cern.ch">sft.cern.ch</a>				/cvmfs/sft.cern.ch			cvmfs	defaults,_netdev,x-systemd.requires-mounts-for=/cvmfs/config-osg.opensciencegrid.org	0 0<br/><a href="http://geant4.cern.ch">geant4.cern.ch</a>				/cvmfs/geant4.cern.ch			cvmfs	defaults,_netdev,x-systemd.requires-mounts-for=/cvmfs/config-osg.opensciencegrid.org	0 0<br/><a href="http://grid.cern.ch">grid.cern.ch</a>				/cvmfs/grid.cern.ch			cvmfs	defaults,_netdev,x-systemd.requires-mounts-for=/cvmfs/config-osg.opensciencegrid.org	0 0<br/><a href="http://cms.cern.ch">cms.cern.ch</a>				/cvmfs/cms.cern.ch			cvmfs	defaults,_netdev,x-systemd.requires-mounts-for=/cvmfs/config-osg.opensciencegrid.org	0 0<br/><a href="http://oasis.opensciencegrid.org">oasis.opensciencegrid.org</a>		/cvmfs/oasis.opensciencegrid.org	cvmfs	defaults,_netdev,x-systemd.requires-mounts-for=/cvmfs/config-osg.opensciencegrid.org	0 0<br/><a href="http://connect.opensciencegrid.org">connect.opensciencegrid.org</a>		/cvmfs/connect.opensciencegrid.org	cvmfs	defaults,_netdev,x-systemd.requires-mounts-for=/cvmfs/config-osg.opensciencegrid.org	0 0<br/><a href="http://singularity.opensciencegrid.org">singularity.opensciencegrid.org</a>		/cvmfs/singularity.opensciencegrid.org	cvmfs	defaults,_netdev,x-systemd.requires-mounts-for=/cvmfs/config-osg.opensciencegrid.org	0 0<br/><a href="http://icecube.opensciencegrid.org">icecube.opensciencegrid.org</a>		/cvmfs/icecube.opensciencegrid.org	cvmfs	defaults,_netdev,x-systemd.requires-mounts-for=/cvmfs/config-osg.opensciencegrid.org	0 0</pre><br/><br/>
<span style="color: #99a949"><span style="font-size: small">(11:30:09)</span> <b>dwd:</b></span> Ok, good to know.  I would really like to know where this paranoia against fuse comes from in HPC admins.  A number of them (although far from all) seem to have it, although I have never heard the reasons.  Starting with kernel 4.18 (EL8) they won’t be able to avoid it because it can be used in unprivileged user namespaces which are available by default.  Even if they don’t install the fuse rpm it won’t matter.<br/>
<span style="color: #99a949"><span style="font-size: small">(11:37:58)</span> <b>dwd:</b></span> I will add your hint to <a href="https://cvmfs.readthedocs.io/en/stable/cpt-configure.html#mounting">https://cvmfs.readthedocs.io/en/stable/cpt-configure.html#mounting</a><br/>
<span style="color: #619a4f"><span style="font-size: small">(11:46:38)</span> <b>u0928244:</b></span> Thank you very much for all the help with this!<br/>
<span style="color: #99a949"><span style="font-size: small">(12:00:42)</span> <b>dwd:</b></span> You’re welcome.<br/>
<span style="color: #16569E"><span style="font-size: small">(12:12:12)</span> <b>edquist:</b></span> Is anyone here familiar with generating <a href="http://opensciencegrid.github.io">opensciencegrid.github.io</a> pages (ie, the osg website) from a personal github fork?  (@dweitzel, @bbockelm @blin ?)<br/><br/>I set my fork up to generate from my gh-pages branch, which it seems to do for generating pages from .md files, but it does not seem to serve anything under <tt>assets</tt>, like images or js.<br/><br/>Are there any extra steps i might be missing?<br/>
<span style="color: #16569E"><span style="font-size: small">(12:12:20)</span> <b>edquist:</b></span> (thanks in advance!)<br/>
<span style="color: #235e5b"><span style="font-size: small">(12:12:53)</span> <b>dweitzel:</b></span> yes, I have.<br/>
<span style="color: #235e5b"><span style="font-size: small">(12:13:04)</span> <b>dweitzel:</b></span> got an example?<br/>
<span style="color: #16569E"><span style="font-size: small">(12:13:47)</span> <b>edquist:</b></span> sure...<br/>
<span style="color: #16569E"><span style="font-size: small">(12:13:51)</span> <b>edquist:</b></span> so, for instance<br/>
<span style="color: #16569E"><span style="font-size: small">(12:13:54)</span> <b>edquist:</b></span> this js asset<br/>
<span style="color: #16569E"><span style="font-size: small">(12:13:57)</span> <b>edquist:</b></span> <a href="https://github.com/edquist/opensciencegrid.github.io/blob/gh-pages/assets/js/jquery-3.2.1.slim.min.js">https://github.com/edquist/opensciencegrid.github.io/blob/gh-pages/assets/js/jquery-3.2.1.slim.min.js</a><br/>
<span style="color: #16569E"><span style="font-size: small">(12:14:44)</span> <b>edquist:</b></span> hm,<br/>
<span style="color: #16569E"><span style="font-size: small">(12:15:08)</span> <b>edquist:</b></span> well, the generated main page<br/>
<span style="color: #16569E"><span style="font-size: small">(12:15:09)</span> <b>edquist:</b></span> <a href="https://edquist.github.io/opensciencegrid.github.io/">https://edquist.github.io/opensciencegrid.github.io/</a><br/>
<span style="color: #16569E"><span style="font-size: small">(12:15:34)</span> <b>edquist:</b></span> oh i see<br/>
<span style="color: #16569E"><span style="font-size: small">(12:15:49)</span> <b>edquist:</b></span> you can see on the main page there is a bunch of stuff missing<br/>
<span style="color: #16569E"><span style="font-size: small">(12:15:59)</span> <b>edquist:</b></span> and, if i look at the web console,<br/>
<span style="color: #16569E"><span style="font-size: small">(12:16:06)</span> <b>edquist:</b></span> it complains about stuff like<br/>
<span style="color: #16569E"><span style="font-size: small">(12:16:14)</span> <b>edquist:</b></span> &gt; The script from “<a href="https://edquist.github.io/assets/js/jquery-3.2.1.slim.min.js">https://edquist.github.io/assets/js/jquery-3.2.1.slim.min.js</a>” was loaded even though its MIME type (“text/html”) is not a valid JavaScript MIME type.<br/>
<span style="color: #16569E"><span style="font-size: small">(12:16:33)</span> <b>edquist:</b></span> and indeed there is nothing behind that link<br/>
<span style="color: #16569E"><span style="font-size: small">(12:16:53)</span> <b>edquist:</b></span> but i am guessing that's because it's looking under /assets<br/>
<span style="color: #16569E"><span style="font-size: small">(12:17:08)</span> <b>edquist:</b></span> but my site is being served relative to <a href="https://edquist.github.io/opensciencegrid.github.io/">https://edquist.github.io/opensciencegrid.github.io/</a><br/>
<span style="color: #16569E"><span style="font-size: small">(12:17:29)</span> <b>edquist:</b></span> so,<br/>
<span style="color: #16569E"><span style="font-size: small">(12:18:29)</span> <b>edquist:</b></span> it actually looks like things are being served, but all the absolute links in the osg site don't work since my site is not at the root of <a href="http://edquist.github.io">edquist.github.io</a><br/>
<span style="color: #16569E"><span style="font-size: small">(12:19:50)</span> <b>edquist:</b></span> did you get it working for yourself by making your <a href="http://opensciencegrid.github.io">opensciencegrid.github.io</a> repo (in your github fork) the main web repo for your github user<br/>
<span style="color: #16569E"><span style="font-size: small">(12:19:51)</span> <b>edquist:</b></span> ?<br/>
<span style="color: #235e5b"><span style="font-size: small">(12:23:54)</span> <b>dweitzel:</b></span> that's a good question.  I suspect that I just test on my local host.<br/>
<span style="color: #16569E"><span style="font-size: small">(12:24:26)</span> <b>edquist:</b></span> i see<br/>
<span style="color: #235e5b"><span style="font-size: small">(12:46:56)</span> <b>dweitzel:</b></span> so I guess I don't have the right experience.  I have done test sites before.<br/>
<span style="color: #43761b"><span style="font-size: small">(13:27:32)</span> <b>blin:</b></span> <b>@edquist</b> you'll probably have to rename the repo to <a href="http://edquist.github.io">edquist.github.io</a><br/>
<span style="color: #16569E"><span style="font-size: small">(13:28:26)</span> <b>edquist:</b></span> yeah i think that would do the trick,<br/>
<span style="color: #16569E"><span style="font-size: small">(13:28:34)</span> <b>edquist:</b></span> i was hoping there was a less drastic way<br/>
<span style="color: #16569E"><span style="font-size: small">(13:28:35)</span> <b>edquist:</b></span> ;)<br/>
<span style="color: #16569E"><span style="font-size: small">(13:28:49)</span> <b>edquist:</b></span> i mean,<br/>
<span style="color: #16569E"><span style="font-size: small">(13:29:19)</span> <b>edquist:</b></span> than making my github homepage a maybe-broken clone of the osg homepage :D<br/>
<span style="color: #16569E"><span style="font-size: small">(13:29:50)</span> <b>edquist:</b></span> but yeah at least that should address the issue with the absolute /assets links<br/>
<span style="color: #9e3997"><span style="font-size: small">(13:59:02)</span> <b>bbockelm:</b></span> <b>@edquist</b> - in my half-written email response to you, I also noted that <tt>&lt;table border=1&gt;</tt> is not valid HTML, which might be why Markdown doesn't like it.<br/>
<span style="color: #c386df"><span style="font-size: small">(14:01:34)</span> <b>matyas:</b></span> isn't it?<br/>
<span style="color: #c386df"><span style="font-size: small">(14:04:25)</span> <b>matyas:</b></span> I thought the quotes around the attribute values were now optional in HTML5<br/>
<span style="color: #c386df"><span style="font-size: small">(14:05:25)</span> <b>matyas:</b></span> ... although who knows if Markdown uses HTML5<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:06:48)</span> <b>bbockelm:</b></span> Yes, but in HTML5 <tt>border</tt>  is no longer a valid attribute.<br/>
<span style="color: #c386df"><span style="font-size: small">(14:08:48)</span> <b>matyas:</b></span> invalid or just deprecated?<br/>
<span style="color: #16569E"><span style="font-size: small">(15:19:40)</span> <b>edquist:</b></span> yeah, i had seen that before, that the <tt>border</tt> attribute is not considered valid anymore -- which i always thought was a little odd.  Moreover i remember the equivalent css never looking quite as good, i think on firefox.  But what surprised me was that the "raw" html wasn't so raw after all, if it wasn't up to markdown's <tt>--pedantic</tt> standards<br/>
<span style="color: #16569E"><span style="font-size: small">(15:22:48)</span> <b>edquist:</b></span> the bigger questions for me though were <br/><br/>1. how to get /assets to resolve correctly (short of making my fork of <a href="http://opensciencegrid.github.io">opensciencegrid.github.io</a> my main user page), and<br/><br/>2. how to support cross-origin requests for loading a remote json file<br/>
<span style="color: #16569E"><span style="font-size: small">(15:23:27)</span> <b>edquist:</b></span> @bbockelm - off hand, any thoughts/ideas about these?<br/>
<span style="color: #16569E"><span style="font-size: small">(20:04:08)</span> <b>edquist:</b></span> alright, just to follow up (mainly for @bbockelm) -<br/><br/>1. indeed, just renaming my <a href="http://opensciencegrid.github.io">opensciencegrid.github.io</a> repo to <a href="http://edquist.github.io">edquist.github.io</a> resolved all the absolute path issues (with /assets) ... i wasn't wild about the solution but for development it works<br/><br/>2. for the cross-origin stuff - i started going down the extremely dubious 'jsonp' rabbit hole, which left me feeling a bit disgusted.  Turns out though that github actually enables the <tt>Access-Control-Allow-Origin</tt> on github pages by default, but i had the issue backwards; the server serving the json content has to serve the json with that header.  So that meant enabling mod_headers on web0000 and adding that header to a new conf.d file<br/><br/>so, machinery for generated tables is working now..!<br/><br/><a href="https://edquist.github.io/about/introduction/">https://edquist.github.io/about/introduction/</a><br/>
<span style="color: #9e3997"><span style="font-size: small">(20:06:52)</span> <b>bbockelm:</b></span> Looks like we now load two different versions of jquery on that page?<br/>
<span style="color: #16569E"><span style="font-size: small">(20:08:19)</span> <b>edquist:</b></span> ah, i'll take that out, that is just on my experimental branch - from when i was trying to figure out why it wasn't loading the one under /assets<br/>
<span style="color: #9e3997"><span style="font-size: small">(20:08:27)</span> <b>bbockelm:</b></span> gotcha<br/>
<span style="color: #9e3997"><span style="font-size: small">(20:08:36)</span> <b>bbockelm:</b></span> The other thing to think about is adding some text explaining things.<br/>
<span style="color: #16569E"><span style="font-size: small">(20:08:44)</span> <b>edquist:</b></span> sure<br/>
<span style="color: #16569E"><span style="font-size: small">(20:09:11)</span> <b>edquist:</b></span> this is just getting the web machinery going so far...<br/>
<span style="color: #9e3997"><span style="font-size: small">(20:09:30)</span> <b>bbockelm:</b></span> The other thing I'd like is to have a server under the <a href="http://OSG.org">OSG.org</a> domain.<br/>
<span style="color: #16569E"><span style="font-size: small">(20:09:58)</span> <b>edquist:</b></span> do we own that?<br/>
<span style="color: #9e3997"><span style="font-size: small">(20:10:37)</span> <b>bbockelm:</b></span> (I mean <a href="http://opensciencegrid.org">opensciencegrid.org</a>)<br/>
<span style="color: #9e3997"><span style="font-size: small">(20:11:08)</span> <b>bbockelm:</b></span> For example, once you're happy with the script, maybe we should have it run on <a href="http://display.opensciencegrid.org">display.opensciencegrid.org</a><br/>
<span style="color: #16569E"><span style="font-size: small">(20:11:40)</span> <b>edquist:</b></span> makes sense<br/>
<span style="color: #16569E"><span style="font-size: small">(20:11:49)</span> <b>edquist:</b></span> doesn't matter too much to me<br/>
<span style="color: #16569E"><span style="font-size: small">(20:12:01)</span> <b>edquist:</b></span> so, i took out the extra <a href="https://code.jquery.com/jquery-3.4.1.js">https://code.jquery.com/jquery-3.4.1.js</a><br/>
<span style="color: #16569E"><span style="font-size: small">(20:12:27)</span> <b>edquist:</b></span> and now the page is broken, looks like the existing version doesn't support <tt> $.getJSON</tt><br/>
<span style="color: #9e3997"><span style="font-size: small">(20:12:58)</span> <b>bbockelm:</b></span> I'm OK with upgrading to the newer jquery!<br/>
<span style="color: #16569E"><span style="font-size: small">(20:13:04)</span> <b>edquist:</b></span> ok!  :)<br/>
</body>
</html>
