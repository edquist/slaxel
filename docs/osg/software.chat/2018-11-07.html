<!DOCTYPE html>
<html>
<head>
<title>Wed Nov 7, 2018 : #software (osg)</title>
</head>
<body>
<h3>Wed Nov 7, 2018 : #software (osg)</h3>
<span style="color: #a72f79"><span style="font-size: small">(08:32:12)</span> <b>andrew.melo:</b></span> Hmmmm, on a bare centos6 docker image, installing the OSG3.4 repo then trying to install packages yields:<br/><pre><br/>Setting up Install Process<br/>Loading mirror speeds from cached hostfile<br/>epel/metalink                                                                                                  |  14 kB     00:00     <br/> * base: <a href="http://reflector.westga.edu">reflector.westga.edu</a><br/> * epel: <a href="http://reflector.westga.edu">reflector.westga.edu</a><br/> * extras: <a href="http://repos.mia.quadranet.com">repos.mia.quadranet.com</a><br/> * osg: <a href="http://mirror.grid.uchicago.edu">mirror.grid.uchicago.edu</a><br/> * updates: <a href="http://distro.ibiblio.org">distro.ibiblio.org</a><br/>epel                                                                                                           | 3.2 kB     00:00     <br/>epel/primary                                                                                                   | 3.2 MB     00:01     <br/>epel                                                                                                                      12492/12492<br/>osg                                                                                                            | 3.1 kB     00:00     <br/>osg/primary_db                                                                                                 | 613 kB     00:00     <br/>Error: xz compression not available<br/></pre><br/>
<span style="color: #9e3997"><span style="font-size: small">(08:33:05)</span> <b>bbockelm:</b></span> interesting.  Maybe an issue with running <tt>createrepo</tt> on RHEL7?<br/>
<span style="color: #a72f79"><span style="font-size: small">(08:33:55)</span> <b>andrew.melo:</b></span> Looks like the default image is missing pylzma ..<br/>
<span style="color: #9e3997"><span style="font-size: small">(08:34:52)</span> <b>bbockelm:</b></span> maybe a new default for <tt>createrepo</tt>?<br/>
<span style="color: #a72f79"><span style="font-size: small">(08:36:28)</span> <b>andrew.melo:</b></span> perhaps<br/>
<span style="color: #9e3997"><span style="font-size: small">(08:39:52)</span> <b>bbockelm:</b></span> nothing looks obviously wrong.<br/>
<span style="color: #9e3997"><span style="font-size: small">(08:41:38)</span> <b>bbockelm:</b></span> looking at the primary file itself, it's compressed with gz.<br/>
<span style="color: #9e3997"><span style="font-size: small">(08:41:52)</span> <b>bbockelm:</b></span> what's in your yum.repos.d?<br/>
<span style="color: #a72f79"><span style="font-size: small">(08:42:24)</span> <b>andrew.melo:</b></span> at this point, it's a bit:<br/><pre><br/>[root@51504db0c1dc hadoop-xrootd]# ls /etc/yum.repos.d/<br/>CentOS-Base.repo       epel-testing.repo     osg-el6-development.repo  osg-el6-upcoming-development.repo  osg-el6.repo<br/>CentOS-Debuginfo.repo  epel.repo             osg-el6-empty.repo        osg-el6-upcoming-minefield.repo<br/>CentOS-Media.repo      goc-itb.repo          osg-el6-minefield.repo    osg-el6-upcoming-prerelease.repo<br/>CentOS-Vault.repo      goc.repo              osg-el6-prerelease.repo   osg-el6-upcoming-testing.repo<br/>CentOS-fasttrack.repo  osg-el6-contrib.repo  osg-el6-testing.repo      osg-el6-upcoming.repo<br/></pre><br/>
<span style="color: #9e3997"><span style="font-size: small">(08:44:02)</span> <b>bbockelm:</b></span> hm.  Looks like a UChicago mirror problem.<br/>
<span style="color: #9e3997"><span style="font-size: small">(08:44:10)</span> <b>bbockelm:</b></span> <a href="http://mirror.grid.uchicago.edu/pub/osg/3.4/el6/release/x86_64/repodata/repomd.xml">http://mirror.grid.uchicago.edu/pub/osg/3.4/el6/release/x86_64/repodata/repomd.xml</a> and <a href="https://repo.opensciencegrid.org/osg/3.4/el6/release/x86_64/repodata/repomd.xml">https://repo.opensciencegrid.org/osg/3.4/el6/release/x86_64/repodata/repomd.xml</a> look very different<br/>
<span style="color: #a72f79"><span style="font-size: small">(08:44:28)</span> <b>andrew.melo:</b></span> Ahhh<br/>
<span style="color: #9e3997"><span style="font-size: small">(08:46:01)</span> <b>bbockelm:</b></span> @lincoln - who maintains the uchicago mirror?<br/>
<span style="color: #9e3997"><span style="font-size: small">(08:46:47)</span> <b>bbockelm:</b></span> the Nebraska mirror looks correct<br/>
<span style="color: #9e3997"><span style="font-size: small">(08:47:03)</span> <b>bbockelm:</b></span> the UChicago mirror has a recent timestamp but the contents are wrong<br/>
<span style="color: #e96699"><span style="font-size: small">(08:50:32)</span> <b>lincoln:</b></span> Hm<br/>
<span style="color: #e96699"><span style="font-size: small">(08:50:38)</span> <b>lincoln:</b></span> I will take a look<br/>
<span style="color: #e96699"><span style="font-size: small">(08:54:22)</span> <b>lincoln:</b></span> i am running a sync now<br/>
<span style="color: #e96699"><span style="font-size: small">(08:54:45)</span> <b>lincoln:</b></span> we are syncing from <tt><a href="http://hcc-osg-software.unl.edu/osg">hcc-osg-software.unl.edu/osg</a></tt><br/>
<span style="color: #e96699"><span style="font-size: small">(08:54:50)</span> <b>lincoln:</b></span> should i be using a diff mirror as upstream?<br/>
<span style="color: #e96699"><span style="font-size: small">(08:55:29)</span> <b>lincoln:</b></span> rsync just finished and the repomds are still diff<br/>
<span style="color: #e96699"><span style="font-size: small">(08:56:10)</span> <b>lincoln:</b></span> heres what we use to sync the mirror<br/>
<span style="color: #e96699"><span style="font-size: small">(08:56:16)</span> <b>lincoln:</b></span> <pre><br/>[root@mirror bin]# rsync -aSH --delete --delete-after --delay-updates <a href="rsync://hcc-osg-software.unl.edu/osg">rsync://hcc-osg-software.unl.edu/osg</a> /tank/pub/osg/<br/></pre><br/>
<span style="color: #e96699"><span style="font-size: small">(08:59:55)</span> <b>lincoln:</b></span> @bbockelm should i change our upstream to <a href="http://repo.opensciencegrid.org">repo.opensciencegrid.org</a> ? i think it mustve gotten switched to hcc-osg-software when the IU stuff went away<br/>
<span style="color: #e96699"><span style="font-size: small">(09:00:05)</span> <b>lincoln:</b></span> we are matching whatever is on the UNL site<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:04:21)</span> <b>bbockelm:</b></span> Yeah - <tt><a href="http://repo.opensciencegrid.org">repo.opensciencegrid.org</a></tt>.<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:04:50)</span> <b>bbockelm:</b></span> the CNAME is right but the A name isn't guaranteed.<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:05:16)</span> <b>bbockelm:</b></span> (e.g., at various times the underlying host is <tt><a href="http://hcc-osg-software.unl.edu">hcc-osg-software.unl.edu</a></tt> or <tt><a href="http://hcc-osg-software2.unl.edu">hcc-osg-software2.unl.edu</a></tt>.<br/>
<span style="color: #e96699"><span style="font-size: small">(09:05:25)</span> <b>lincoln:</b></span> sure<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:06:28)</span> <b>bbockelm:</b></span> It's the standard wanting to avoid university-specific DNS names given the headaches associated with moving off <tt><a href="http://iu.edu">iu.edu</a></tt>.<br/>
<span style="color: #e96699"><span style="font-size: small">(09:07:53)</span> <b>lincoln:</b></span> yes, aliases are a wonderful thing<br/>
<span style="color: #e96699"><span style="font-size: small">(09:08:16)</span> <b>lincoln:</b></span> OK, mirror should be up to date with the correct upstream now<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:08:42)</span> <b>bbockelm:</b></span> @andrew.melo - can you confirm the fix?<br/>
<span style="color: #a72f79"><span style="font-size: small">(09:08:53)</span> <b>andrew.melo:</b></span> yeppers, one sec<br/>
<span style="color: #a72f79"><span style="font-size: small">(09:11:12)</span> <b>andrew.melo:</b></span> <tt>docker run -it centos:6 /bin/bash</tt> then <tt>yum install yum-plugin-priorities ; rpm -Uvh <a href="https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm">https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm</a> ; rpm -Uvh <a href="https://repo.opensciencegrid.org/osg/3.4/osg-3.4-el6-release-latest.rpm">https://repo.opensciencegrid.org/osg/3.4/osg-3.4-el6-release-latest.rpm</a> ; yum install xrootd-client-devel</tt> works now<br/>
<span style="color: #a72f79"><span style="font-size: small">(11:20:22)</span> <b>andrew.melo:</b></span> Ehhh, is there an rsync happening now?<br/><pre><br/>---&gt; Package xrootd-libs.x86_64 1:4.8.5-1.osg34.el6 will be installed<br/><a href="http://mirror.hep.wisc.edu/upstream/osg/3.4/el6/release/x86_64/repodata/01e97dda4af91a47685c23f25bc4e6b1241e5df1f674f13125cad88fb48ceeb6-filelists.sqlite.xz">http://mirror.hep.wisc.edu/upstream/osg/3.4/el6/release/x86_64/repodata/01e97dda4af91a47685c23f25bc4e6b1241e5df1f674f13125cad88fb48ceeb6-filelists.sqlite.xz</a>: [Errno 14] PYCURL ERROR 22 - "The requested URL returned error: 404 Not Found"<br/>Trying other mirror.<br/>To address this issue please refer to the below knowledge base article <br/><br/><a href="https://access.redhat.com/articles/1320623">https://access.redhat.com/articles/1320623</a><br/><br/>If above article doesn't help to resolve this issue please open a ticket with Red Hat Support.<br/><br/><a href="http://t2.unl.edu/osg/3.4/el6/release/x86_64/repodata/01e97dda4af91a47685c23f25bc4e6b1241e5df1f674f13125cad88fb48ceeb6-filelists.sqlite.xz">http://t2.unl.edu/osg/3.4/el6/release/x86_64/repodata/01e97dda4af91a47685c23f25bc4e6b1241e5df1f674f13125cad88fb48ceeb6-filelists.sqlite.xz</a>: [Errno 14] PYCURL ERROR 22 - "The requested URL returned error: 404 Not Found"<br/>Trying other mirror.<br/><a href="http://repo.opensciencegrid.org/osg/3.4/el6/release/x86_64/repodata/01e97dda4af91a47685c23f25bc4e6b1241e5df1f674f13125cad88fb48ceeb6-filelists.sqlite.xz">http://repo.opensciencegrid.org/osg/3.4/el6/release/x86_64/repodata/01e97dda4af91a47685c23f25bc4e6b1241e5df1f674f13125cad88fb48ceeb6-filelists.sqlite.xz</a>: [Errno 14] PYCURL ERROR 22 - "The requested URL returned error: 404 Not Found"<br/>Trying other mirror.<br/><a href="http://mirror.grid.uchicago.edu/pub/osg/3.4/el6/release/x86_64/repodata/01e97dda4af91a47685c23f25bc4e6b1241e5df1f674f13125cad88fb48ceeb6-filelists.sqlite.xz">http://mirror.grid.uchicago.edu/pub/osg/3.4/el6/release/x86_64/repodata/01e97dda4af91a47685c23f25bc4e6b1241e5df1f674f13125cad88fb48ceeb6-filelists.sqlite.xz</a>: [Errno 14] PYCURL ERROR 22 - "The requested URL returned error: 404 Not Found"<br/>Trying other mirror.<br/>Error: failure: repodata/01e97dda4af91a47685c23f25bc4e6b1241e5df1f674f13125cad88fb48ceeb6-filelists.sqlite.xz from osg: [Errno 256] No more mirrors to try.<br/></pre><br/>
<span style="color: #e96699"><span style="font-size: small">(14:50:53)</span> <b>lincoln:</b></span> is there a way to set a <tt>+ClassAd=...</tt> in a condor job route?<br/>
<span style="color: #43761b"><span style="font-size: small">(14:51:45)</span> <b>blin:</b></span> you mean arbitrary job attr in the routed job?<br/>
<span style="color: #e96699"><span style="font-size: small">(14:51:52)</span> <b>lincoln:</b></span> yes<br/>
<span style="color: #e96699"><span style="font-size: small">(14:52:11)</span> <b>lincoln:</b></span> i want to have like +WantsFoo=True<br/>
<span style="color: #43761b"><span style="font-size: small">(14:52:14)</span> <b>blin:</b></span> <tt>set_</tt> or <tt>eval_set</tt> <a href="http://opensciencegrid.org/docs/compute-element/job-router-recipes/#editing-attributes">http://opensciencegrid.org/docs/compute-element/job-router-recipes/#editing-attributes</a><br/>
<span style="color: #43761b"><span style="font-size: small">(14:52:27)</span> <b>blin:</b></span> <tt>set_WantsFoo = True</tt> would be the simplest way to do it<br/>
<span style="color: #e96699"><span style="font-size: small">(14:52:46)</span> <b>lincoln:</b></span> wouldnt that be the same as "WantsFoo = true" without the + though?<br/>
<span style="color: #e96699"><span style="font-size: small">(14:53:02)</span> <b>lincoln:</b></span> i thought the + was required to insert it into the job ad<br/>
<span style="color: #c386df"><span style="font-size: small">(14:53:18)</span> <b>matyas:</b></span> that's a condor_submit thing<br/>
<span style="color: #e96699"><span style="font-size: small">(14:53:28)</span> <b>lincoln:</b></span> got it<br/>
<span style="color: #e96699"><span style="font-size: small">(14:54:43)</span> <b>lincoln:</b></span> makes sense now<br/>
<span style="color: #e96699"><span style="font-size: small">(14:54:46)</span> <b>lincoln:</b></span> thanks gents<br/>
</body>
</html>
