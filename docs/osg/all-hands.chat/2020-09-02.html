<!DOCTYPE html>
<html>
<head>
<title>Wed Sep 2, 2020 : #all-hands (osg)</title>
</head>
<body>
<h3>Wed Sep 2, 2020 : #all-hands (osg)</h3>
<span style="color: #9d8eee"><span style="font-size: small">(09:23:51)</span> <b>cat:</b></span> set the channel topic: Schedule: <a href="https://indico.fnal.gov/event/22127/timetable/#20200902.detailed">https://indico.fnal.gov/event/22127/timetable/#20200902.detailed</a><br/>
<span style="color: #4ec0d6"><span style="font-size: small">(11:11:49)</span> <b>smckee:</b></span> Was the Zoom URL mailed out?<br/>
<span style="color: #c386df"><span style="font-size: small">(11:12:09)</span> <b>matyas:</b></span> yep<br/>
<span style="color: #9d8eee"><span style="font-size: small">(11:13:22)</span> <b>cat:</b></span> Subject: “OSG All-Hands Meeting 2020 - Wednesday, September 2”<br/>
<span style="color: #9d8eee"><span style="font-size: small">(11:13:43)</span> <b>cat:</b></span> Sent 9:21 CT…<br/>
<span style="color: #4ec0d6"><span style="font-size: small">(11:14:46)</span> <b>smckee:</b></span> Strange..I got all your other emails but not that one!<br/>
<span style="color: #4ec0d6"><span style="font-size: small">(11:14:56)</span> <b>smckee:</b></span> I have the link now.  Thanks.<br/>
<span style="color: #43761b"><span style="font-size: small">(12:01:46)</span> <b>blin:</b></span> FYI Madison tests their tornado sirens at noon on the first Wednesday of the month<br/>
<span style="color: #43761b"><span style="font-size: small">(12:02:29)</span> <b>blin:</b></span> Benedikt isn't bravely giving his talk in the middle of a disaster :stuck_out_tongue:<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:02:34)</span> <b>bbockelm:</b></span> :slightly_smiling_face: I suspect all those folks in California are really confused.<br/>
<span style="color: #965d1b"><span style="font-size: small">(12:30:16)</span> <b>briedel:</b></span> i could giving my talk from the basement after all :wink:<br/>
<span style="color: #9d8eee"><span style="font-size: small">(12:31:32)</span> <b>cat:</b></span> @briedel, it really wasn’t that bad! The funny thing was for those of us in Dane Co. (apparently) who had our own local tests going on at the same time — like stereo, but not. Sirens rotate at different speeds, I learned…<br/>
<span style="color: #df3dc0"><span style="font-size: small">(12:32:04)</span> <b>burt:</b></span> @briedel and @isfiligoi: didn’t get a chance to say this during the talk, but I also really enjoy seeing IceCube take over every available GPU in the big 3.  I feel like there should be a “maximum FLOPs in the cloud” trophy that I should have sent over to you.<br/>
<span style="color: #385a86"><span style="font-size: small">(13:04:15)</span> <b>jdost321:</b></span> yeah that you get warnings, our fires and earthquakes hit and its already too late<br/>
<span style="color: #db3150"><span style="font-size: small">(13:27:21)</span> <b>christinalk:</b></span> Hi everyone - we’ll be getting started again in a few minutes<br/>
<span style="color: #7d414c"><span style="font-size: small">(14:11:01)</span> <b>jed:</b></span> I'm always on the fence about disabling Zoom chat and encouraging an event slack for communication -- just to have the features to ease communication as @bbockelm just pointed out.<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:12:08)</span> <b>bbockelm:</b></span> :slightly_smiling_face:<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:12:53)</span> <b>bbockelm:</b></span> W.r.t. the question about bandwidth-intensive services on Kubernetes: I'd assume you can get 10Gbps with almost any configuration, 40Gbps with some elbow grease, and 100Gbps is a summer project.<br/>
<span style="color: #99a949"><span style="font-size: small">(14:16:18)</span> <b>dwd:</b></span> @efajardo The trouble with creating a <a href="http://cdn.opensciencegrid.org">cdn.opensciencegrid.org</a> is that it requires advanced networking not available to normal mortals  <a href="https://www.cloudflare.com/learning/cdn/glossary/anycast-network/">https://www.cloudflare.com/learning/cdn/glossary/anycast-network/</a><br/>
<span style="color: #a63024"><span style="font-size: small">(14:17:42)</span> <b>efajardo:</b></span> @dwd I udnerstnad that but I think there is a cheaper alternative<br/>
<span style="color: #a63024"><span style="font-size: small">(14:18:59)</span> <b>efajardo:</b></span> Having XRootD redirector at <tt><a href="http://cdn.opensciencegrid.org">cdn.opensciencegrid.org</a></tt><br/>
<span style="color: #a63024"><span style="font-size: small">(14:19:08)</span> <b>efajardo:</b></span> and the redirections been done on GeoIp<br/>
<span style="color: #99a949"><span style="font-size: small">(14:20:39)</span> <b>dwd:</b></span> So to move the GeoIP calculations into the redirector instead of cvmfs<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:21:13)</span> <b>bbockelm:</b></span> @efajardo - possibly almost a decade back, I worked to push a plugin architecture into the XRootD redirector to do exactly this.  It was ... unsuccessful.<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:22:16)</span> <b>bbockelm:</b></span> You may have more success with writing a small Python application to do this.  You still wouldn't want CVMFS to point at <tt><a href="http://cdn.opensciencegrid.org">cdn.opensciencegrid.org</a></tt>.<br/>
<span style="color: #99a949"><span style="font-size: small">(14:23:03)</span> <b>dwd:</b></span> By letting cvmfs have the whole list, it can try multiple servers if one fails<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:24:33)</span> <b>bbockelm:</b></span> Exactly.  CVMFS will also churn through TCP connections much more quickly in HTTPS mode.<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:24:46)</span> <b>bbockelm:</b></span> (HTTP mode for CVMFS does "the right thing")<br/>
<span style="color: #a63024"><span style="font-size: small">(14:26:11)</span> <b>efajardo:</b></span> ahh I see well that is defitnelt an option @bbockelm<br/>
<span style="color: #a63024"><span style="font-size: small">(14:26:16)</span> <b>efajardo:</b></span> the reason I would like that<br/>
<span style="color: #a63024"><span style="font-size: small">(14:26:22)</span> <b>efajardo:</b></span> is that it would be cool<br/>
<span style="color: #a63024"><span style="font-size: small">(14:26:40)</span> <b>efajardo:</b></span> if we could use the CDN with HTCondor trasnfer mechanism<br/>
<span style="color: #a63024"><span style="font-size: small">(14:26:44)</span> <b>efajardo:</b></span> since it supports http<br/>
<span style="color: #a63024"><span style="font-size: small">(14:26:54)</span> <b>efajardo:</b></span> I would like that folks can put in their submit file<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:26:59)</span> <b>bbockelm:</b></span> A small WSGI Python webapp, scaled with Kubernetes, is also something that we can ask a student to do.  This part of the xrootd code is not student friendly.<br/>
<span style="color: #a63024"><span style="font-size: small">(14:27:18)</span> <b>efajardo:</b></span> <tt>inputFIle= <a href="http://cdn.opensciengrid.org/foo/bar">http://cdn.opensciengrid.org/foo/bar</a></tt><br/>
<span style="color: #a63024"><span style="font-size: small">(14:27:41)</span> <b>efajardo:</b></span> and HTCondor birngs it on the fly from the CDN<br/>
<span style="color: #a63024"><span style="font-size: small">(14:27:52)</span> <b>efajardo:</b></span> I acually like the WSGI idea a lot and I have the student for it<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:28:41)</span> <b>bbockelm:</b></span> You also don't need to do the GeoIP logic.  With appropriate caching for load-management, you can just proxy the request to the Stratum-1 GeoIP service.<br/>
<span style="color: #a63024"><span style="font-size: small">(14:28:51)</span> <b>efajardo:</b></span> yes that is my idea to use curls like this<br/>
<span style="color: #a63024"><span style="font-size: small">(14:28:53)</span> <b>efajardo:</b></span> <pre>curl <a href="http://oasis-replica-itb.opensciencegrid.org:8000/cvmfs/dwd.test/api/v1.0/geo/squid.aglt2.org/fndca1.fnal.gov,stashcache.t2.ucsd.edu,mwt2-stashcache.campuscluster.illinois.edu,its-condor-xrootd1.syr.edu,osg-kansas-city-stashcache.nrp.internet2.edu,osg-chicago-stashcache.nrp.internet2.edu,osg-new-york-stashcache.nrp.internet2.edu,sc-cache.chtc.wisc.edu,osg-gftp.pace.gatech.edu,dtn2-daejeon.kreonet.net">http://oasis-replica-itb.opensciencegrid.org:8000/cvmfs/dwd.test/api/v1.0/geo/squid.aglt2.org/fndca1.fnal.gov,stashcache.t2.ucsd.edu,mwt2-stashcache.campuscluster.illinois.edu,its-condor-xrootd1.syr.edu,osg-kansas-city-stashcache.nrp.internet2.edu,osg-chicago-stashcache.nrp.internet2.edu,osg-new-york-stashcache.nrp.internet2.edu,sc-cache.chtc.wisc.edu,osg-gftp.pace.gatech.edu,dtn2-daejeon.kreonet.net</a> </pre><br/>
<span style="color: #a63024"><span style="font-size: small">(14:30:07)</span> <b>efajardo:</b></span> and we can definetly do the kubernets auto horizontal scalling<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:34:22)</span> <b>bbockelm:</b></span> yeah, there's a few things to workaround (it's not going to give the right results as you need to forward the IP of the client, for example; you definitely don't want to do that each time; you probably aren't going to literally fork/exec <tt>curl</tt>) but that's largely the right picture.<br/>
<span style="color: #99a949"><span style="font-size: small">(14:35:20)</span> <b>dwd:</b></span> I’d probably rather have you use the stratum-1 geoip service on <a href="http://wlcg-wpad.fnal.gov/api/v1.0/geo">http://wlcg-wpad.fnal.gov/api/v1.0/geo</a><br/>
<span style="color: #a63024"><span style="font-size: small">(14:35:51)</span> <b>efajardo:</b></span> yes it will have some sort of caching<br/>
<span style="color: #a63024"><span style="font-size: small">(14:36:13)</span> <b>efajardo:</b></span> but basically it is gettign the “client Ip” contact the staatum-1 geo-ip<br/>
<span style="color: #a63024"><span style="font-size: small">(14:36:16)</span> <b>efajardo:</b></span> obtain the cloest one<br/>
<span style="color: #a63024"><span style="font-size: small">(14:36:26)</span> <b>efajardo:</b></span> and then give the https redirections<br/>
<span style="color: #a63024"><span style="font-size: small">(14:36:36)</span> <b>efajardo:</b></span> that seems very straightforward<br/>
</body>
</html>
