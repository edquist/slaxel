<!DOCTYPE html>
<html>
<head>
<title>Tue Mar 20, 2018 : #general (osg)</title>
</head>
<body>
<h3>Tue Mar 20, 2018 : #general (osg)</h3>
<span style="color: #c386df"><span style="font-size: small">(10:55:19)</span> <b>matyas:</b></span> what do you guys mean when you say wall hours? to me it should be impossible to get more than one wall hour per hour w/o a time machine<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:03:44)</span> <b>kylegross:</b></span> I've often thought the same, Mat.<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:03:53)</span> <b>kylegross:</b></span> I clearly have the concept wrong inside my head.<br/>
<span style="color: #e96699"><span style="font-size: small">(11:09:33)</span> <b>lincoln:</b></span> you can get 1 wall hour per hour _per cpu_<br/>
<span style="color: #c386df"><span style="font-size: small">(11:09:48)</span> <b>matyas:</b></span> I thought that was CPU-hours<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:09:58)</span> <b>kylegross:</b></span> yeah, that's the way I see it<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:10:05)</span> <b>kylegross:</b></span> 4 CPUs give me 4 CPU hours per wall hour.<br/>
<span style="color: #e96699"><span style="font-size: small">(11:10:15)</span> <b>lincoln:</b></span> what if the CPU is idle? :slightly_smiling_face:<br/>
<span style="color: #c386df"><span style="font-size: small">(11:10:29)</span> <b>matyas:</b></span> what if the wall clock's broken? :stuck_out_tongue:<br/>
<span style="color: #e96699"><span style="font-size: small">(11:10:51)</span> <b>lincoln:</b></span> even a stopped clock is right twice a day<br/>
<span style="color: #e96699"><span style="font-size: small">(11:10:57)</span> <b>lincoln:</b></span> im not sure where we're going with this metaphor anymore.<br/>
<span style="color: #c386df"><span style="font-size: small">(11:11:28)</span> <b>matyas:</b></span> so what's the current term for wall-clock hours? watch-hours? smartwatch-hours?<br/>
<span style="color: #e96699"><span style="font-size: small">(11:15:24)</span> <b>lincoln:</b></span> but seriously..<br/>wall hour = 1 hour as passed on a clock <br/>cpu hour = the time the cpu was busy during a 1 hr period<br/>cpu efficiency = cpu hour / wall hour<br/>
<span style="color: #e96699"><span style="font-size: small">(11:15:58)</span> <b>lincoln:</b></span> you can get 50k wall hours from a resource and they could all be badput and worthless :slightly_smiling_face:<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:16:08)</span> <b>kylegross:</b></span> how do you get 50k wall hours?<br/>
<span style="color: #5b89d5"><span style="font-size: small">(11:16:16)</span> <b>sthapa:</b></span> For I/O heavy jobs, wall hours and cpu hours can be very different.  If your job is spending most of your time waiting for network or disk I/O, it’ll be sleeping a lot so cpu hours might be low but you’re still getting wall hours<br/>
<span style="color: #e96699"><span style="font-size: small">(11:16:16)</span> <b>lincoln:</b></span> its a sum of the CPUs<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:16:19)</span> <b>kylegross:</b></span> unless 50k hours actually elapsed<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:16:24)</span> <b>kylegross:</b></span> why is that not CPU hours?<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:17:14)</span> <b>kylegross:</b></span> Yes, I understand the waiting....so you could have 2 wall hours and 1 cpu hour....<br/>
<span style="color: #5b89d5"><span style="font-size: small">(11:17:18)</span> <b>sthapa:</b></span> yes<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:17:42)</span> <b>kylegross:</b></span> but whether you have 1 processor or 1000 processors... an hour on the clock is still an hour.<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:17:51)</span> <b>kylegross:</b></span> whether the CPUs are doing anything or not.<br/>
<span style="color: #e96699"><span style="font-size: small">(11:17:52)</span> <b>lincoln:</b></span> if you have 1000 jobs in queue<br/>
<span style="color: #e96699"><span style="font-size: small">(11:17:55)</span> <b>lincoln:</b></span> and they take 1 hour each<br/>
<span style="color: #e96699"><span style="font-size: small">(11:18:03)</span> <b>lincoln:</b></span> you can either process 1000 of them in 1000 hours<br/>
<span style="color: #5b89d5"><span style="font-size: small">(11:18:04)</span> <b>sthapa:</b></span> but if you’re running on 1000 jobs, you get 1000 wall hours in aggregate<br/>
<span style="color: #e96699"><span style="font-size: small">(11:18:06)</span> <b>lincoln:</b></span> or 1000 of them in 1 hr<br/>
<span style="color: #c386df"><span style="font-size: small">(11:18:08)</span> <b>matyas:</b></span> then that's 1000 job-hours<br/>
<span style="color: #e96699"><span style="font-size: small">(11:18:20)</span> <b>lincoln:</b></span> why introduce a new term<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:18:25)</span> <b>kylegross:</b></span> yeah, see... that's what I've never understood... the clock went around once.  that's 1 wall hour...<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:18:34)</span> <b>kylegross:</b></span> 1000 CPU hours<br/>
<span style="color: #e96699"><span style="font-size: small">(11:18:46)</span> <b>lincoln:</b></span> no! its not 1000 cpu hours if the CPUs aren't 100% used :slightly_smiling_face:<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:18:47)</span> <b>kylegross:</b></span> (assuming they were working for that hour...not including waiting or whatever)<br/>
<span style="color: #43761b"><span style="font-size: small">(11:18:52)</span> <b>blin:</b></span> wall hours has always been an aggregate of wall hours over the number of jobs you have<br/>
<span style="color: #43761b"><span style="font-size: small">(11:19:25)</span> <b>blin:</b></span> otherwise it'd be a mostly useless metric<br/>
<span style="color: #c386df"><span style="font-size: small">(11:19:37)</span> <b>matyas:</b></span> well it would be on the denominator<br/>
<span style="color: #43761b"><span style="font-size: small">(11:20:10)</span> <b>blin:</b></span> :confused:<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:20:38)</span> <b>kylegross:</b></span> it's not like I hang another clock on the wall because I bought a second computer.<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:20:51)</span> <b>kylegross:</b></span> I still just have my good old wall clock that goes around once per hour.<br/>
<span style="color: #e96699"><span style="font-size: small">(11:20:52)</span> <b>lincoln:</b></span> for your jobs, it is!<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:21:04)</span> <b>kylegross:</b></span> then, it's a poorly named metric.<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:21:18)</span> <b>kylegross:</b></span> putting two clocks on the wall doesn't make me a time traveler.<br/>
<span style="color: #5b89d5"><span style="font-size: small">(11:21:34)</span> <b>sthapa:</b></span> maybe but it’s been used for a while and it’ll be hard to change at this point<br/>
<span style="color: #43761b"><span style="font-size: small">(11:21:43)</span> <b>blin:</b></span> eh, i disagree, that's kind of the selling point of HTC<br/>
<span style="color: #e96699"><span style="font-size: small">(11:21:45)</span> <b>lincoln:</b></span> it makes your jobs live in a parallel universe with their own idnependent clock :slightly_smiling_face:<br/>
<span style="color: #43761b"><span style="font-size: small">(11:22:20)</span> <b>blin:</b></span> "if you ran 1000 1-hr jobs on a single cpu, it would take 1000 hours"<br/>
<span style="color: #4cc091"><span style="font-size: small">(11:22:25)</span> <b>elizabethprout:</b></span> HTC: we’ve got time travel<br/>
<span style="color: #43761b"><span style="font-size: small">(11:22:30)</span> <b>blin:</b></span> ^^<br/>
<span style="color: #e96699"><span style="font-size: small">(11:22:31)</span> <b>lincoln:</b></span> :thumbsup:<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:22:48)</span> <b>kylegross:</b></span> yes, if you ran 1000 1 hour jobs on a single cpu, it would take 1000 hours....<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:22:53)</span> <b>kylegross:</b></span> 1000 wall hours and 1000 CPU hours.<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:23:03)</span> <b>kylegross:</b></span> if you had two CPUs, it would be 500 wall hours and 1000 CPU hours.<br/>
<span style="color: #e0a729"><span style="font-size: small">(11:23:05)</span> <b>kylegross:</b></span> in my head.<br/>
<span style="color: #c386df"><span style="font-size: small">(11:23:48)</span> <b>matyas:</b></span> being bad at naming has been the selling point of htc? :stuck_out_tongue:<br/>
<span style="color: #4cc091"><span style="font-size: small">(11:24:30)</span> <b>elizabethprout:</b></span> Free time machine with every opportunistic cluster, act now<br/>
<span style="color: #c386df"><span style="font-size: small">(11:24:41)</span> <b>matyas:</b></span> act yesterday<br/>
<span style="color: #43761b"><span style="font-size: small">(11:24:48)</span> <b>blin:</b></span> lol<br/>
<span style="color: #c386df"><span style="font-size: small">(11:25:59)</span> <b>matyas:</b></span> HTC: Tomorrow's Research Yesterday<br/>
<span style="color: #4cc091"><span style="font-size: small">(11:26:36)</span> <b>elizabethprout:</b></span> I like it<br/>
<span style="color: #5b89d5"><span style="font-size: small">(11:27:09)</span> <b>sthapa:</b></span> It’s like stephen hawking’s time travel party<br/>
<span style="color: #e96699"><span style="font-size: small">(13:13:00)</span> <b>ian_cancercomputer:</b></span> Wallhours is how much wall clock time was used to do a job on your cluster.  And then all of those individual wall clock times are summed to create the huge aggregates, right?  <br/><br/>To be honest I’m not sure why it’s a particularly good metric, I can get massive wallhours by significantly overcommitting my clusters, but that doesn’t help increase cpu-hours any nor get the science done faster.<br/>
<span style="color: #43761b"><span style="font-size: small">(14:44:36)</span> <b>blin:</b></span> i think it's at least a useful metric when selling HTC to users<br/>
<span style="color: #c386df"><span style="font-size: small">(15:11:30)</span> <b>matyas:</b></span> and nothing else :slightly_smiling_face:<br/>
<span style="color: #43761b"><span style="font-size: small">(15:18:53)</span> <b>blin:</b></span> meh, it's an easily understandable approximation to how much work is being done<br/>
<span style="color: #e0a729"><span style="font-size: small">(15:20:07)</span> <b>kylegross:</b></span> CLEARLY it is not easily understandable, based on everything above.<br/>
<span style="color: #965d1b"><span style="font-size: small">(15:20:25)</span> <b>briedel:</b></span> because there is no concept of wallhours in condor<br/>
<span style="color: #965d1b"><span style="font-size: small">(15:20:32)</span> <b>briedel:</b></span> like there is in PBS, SLURM, etc.<br/>
<span style="color: #43761b"><span style="font-size: small">(15:21:53)</span> <b>blin:</b></span> it's easily understandable compared to CPU hours<br/>
<span style="color: #5b89d5"><span style="font-size: small">(15:22:12)</span> <b>sthapa:</b></span> this ^<br/>
<span style="color: #c386df"><span style="font-size: small">(15:26:19)</span> <b>matyas:</b></span> IMO time spent doing IO is time not spent doing useful work<br/>
<span style="color: #43761b"><span style="font-size: small">(15:27:07)</span> <b>blin:</b></span> yea, and that's why we have CPU hours<br/>
<span style="color: #43761b"><span style="font-size: small">(15:27:35)</span> <b>blin:</b></span> but to users, useful work = their job, whether it's doing work or blocked on IO<br/>
<span style="color: #c386df"><span style="font-size: small">(15:27:48)</span> <b>matyas:</b></span> but kinda like Ian said, wall hours is rewarding us for being less efficient<br/>
<span style="color: #965d1b"><span style="font-size: small">(15:30:01)</span> <b>briedel:</b></span> so we should never do I/O?<br/>
<span style="color: #965d1b"><span style="font-size: small">(15:30:08)</span> <b>briedel:</b></span> just run <tt>/dev/urandom</tt>?<br/>
<span style="color: #c386df"><span style="font-size: small">(15:30:54)</span> <b>matyas:</b></span> no that's not what I said. if you can do more with less data though, that's a win<br/>
<span style="color: #c386df"><span style="font-size: small">(15:31:32)</span> <b>matyas:</b></span> if the data from <tt>/dev/urandom</tt> is just as useful as 15GB off the wire, then maybe that's what you should use... but it's usually not :stuck_out_tongue:<br/>
<span style="color: #5b89d5"><span style="font-size: small">(15:38:40)</span> <b>sthapa:</b></span> Yeah but I/O might just be memory access.  If a cache miss means you’re waiting 600 cycles for your data to get to you, might as well run something else<br/>
<span style="color: #43761b"><span style="font-size: small">(16:24:10)</span> <b>blin:</b></span> yea, people should try to improve the efficiency of their jobs but for opportunistic users, maximizing cpu efficiency is not and probably shouldn't be their main goal<br/>
<span style="color: #43761b"><span style="font-size: small">(16:24:45)</span> <b>blin:</b></span> that's more of a concern for bigger experiments that are resource constrained<br/>
</body>
</html>
