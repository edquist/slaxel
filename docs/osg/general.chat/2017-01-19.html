<!DOCTYPE html>
<html>
<head>
<title>Thu Jan 19, 2017 : #general (osg)</title>
</head>
<body>
<h3>Thu Jan 19, 2017 : #general (osg)</h3>
<span style="color: #b14cbc"><span style="font-size: small">(12:17:33)</span> <b>tmartin:</b></span> @gattebury I just do not get why my config is not working with 1.3.2. I get this error. <br/><br/>Jan 19 10:15:50 lvs-1 Keepalived_healthcheckers[17872]: IPVS (cmd 1154, errno 97): Operation not supported with specified address family<br/>Jan 19 10:15:50 lvs-1 Keepalived_healthcheckers[17872]: IPVS (cmd 1159, errno 97): Operation not supported with specified address family<br/>Jan 19 10:15:50 lvs-1 Keepalived_healthcheckers[17872]: IPVS (cmd 1159, errno 97): Operation not supported with specified address family<br/>Jan 19 10:15:50 lvs-1 Keepalived_healthcheckers[17872]: IPVS (cmd 1159, errno 97): Operation not supported with specified address family<br/>Jan 19 10:15:50 lvs-1 Keepalived_healthcheckers[17872]: IPVS (cmd 1159, errno 97): Operation not supported with specified address family<br/>Jan 19 10:15:50 lvs-1 Keepalived_healthcheckers[17872]: IPVS (cmd 1159, errno 97): Operation not supported with specified address family<br/>Jan 19 10:15:50 lvs-1 Keepalived_healthcheckers[17872]: IPVS (cmd 1159, errno 97): Operation not supported with specified address family<br/><br/>Then it goes on to find the IPv6 Machines for healthcheck, but the ipvsadm never gets them into its list...<br/><br/>Jan 19 10:15:50 lvs-1 Keepalived_healthcheckers[17872]: Activating healthchecker for service [169.228.130.136]:2811<br/>Jan 19 10:15:50 lvs-1 Keepalived_healthcheckers[17872]: Activating healthchecker for service [169.228.130.137]:2811<br/>Jan 19 10:15:50 lvs-1 Keepalived_healthcheckers[17872]: Activating healthchecker for service [2607:f720:1700:1b30::84]:2811<br/>Jan 19 10:15:50 lvs-1 Keepalived_healthcheckers[17872]: Activating healthchecker for service [2607:f720:1700:1b30::85]:2811<br/>
<span style="color: #b14cbc"><span style="font-size: small">(12:18:01)</span> <b>tmartin:</b></span> I did post on the ticket thread for keepalived, but googling that error implies it is pretty generic.<br/>
<span style="color: #b14cbc"><span style="font-size: small">(12:25:47)</span> <b>tmartin:</b></span> Is there any value in trying to get help on the LVS mailing list?<br/>
<span style="color: #d1707d"><span style="font-size: small">(12:40:10)</span> <b>gattebury:</b></span> That was one of the errors I came across, so I’ve seen it before — think it was one of the reasons I stopped using the arioch/puppet-keepalived module as well. Unfortunately it’s been long enough I don’t recall exactly what I found as the cause/reason. Do you have completely separate v4 and v6 VRRP instances and virtual_server sections?<br/>
<span style="color: #b14cbc"><span style="font-size: small">(12:50:43)</span> <b>tmartin:</b></span> Yes I do, I know that was removed in a 1.2.x version as per the comments on the Git issues<br/>
<span style="color: #b14cbc"><span style="font-size: small">(12:51:12)</span> <b>tmartin:</b></span> I just tried to build that version I grabbed 1.2.24...alas I got an error I had from before<br/>
<span style="color: #b14cbc"><span style="font-size: small">(12:51:12)</span> <b>tmartin:</b></span> WARNING: 'aclocal-1.15' is missing on your system.<br/>         You should only need it if you modified 'acinclude.m4' or<br/>         '<a href="http://configure.ac">configure.ac</a>' or m4 files included by '<a href="http://configure.ac">configure.ac</a>'.<br/>         The 'aclocal' program is part of the GNU Automake package:<br/>         &lt;http://www.gnu.org/software/automake&gt;<br/>         It also requires GNU Autoconf, GNU m4 and Perl in order to run:<br/>         &lt;http://www.gnu.org/software/autoconf&gt;<br/>         &lt;http://www.gnu.org/software/m4/&gt;<br/>         &lt;http://www.perl.org/&gt;<br/>
<span style="color: #b14cbc"><span style="font-size: small">(12:52:25)</span> <b>tmartin:</b></span> Which is why I think I had switched to the new version...let me see if I can fudge that<br/>
<span style="color: #b14cbc"><span style="font-size: small">(12:53:10)</span> <b>tmartin:</b></span> My config is very similar to yours I think, just without the addition of the squid server.<br/>
<span style="color: #b14cbc"><span style="font-size: small">(13:01:01)</span> <b>tmartin:</b></span> See and then I run into the problem here.<br/>
<span style="color: #b14cbc"><span style="font-size: small">(13:01:01)</span> <b>tmartin:</b></span> In file included from vrrp_data.c:40:0:<br/>./../include/vrrp_iproute.h:32:24: fatal error: linux/mpls.h: No such file or directory<br/> #include &lt;linux/mpls.h&gt;<br/>                        ^<br/>compilation terminated.<br/>  CC       vrrp_index.o<br/>In file included from vrrp.c:62:0:<br/>./../include/vrrp_iproute.h:32:24: fatal error: linux/mpls.h: No such file or directory<br/> #include &lt;linux/mpls.h&gt;<br/>
<span style="color: #b14cbc"><span style="font-size: small">(13:01:23)</span> <b>tmartin:</b></span> That I have learned is caused from the latest RHEL7 kernels not backporting some important bit in the kernel<br/>
<span style="color: #b14cbc"><span style="font-size: small">(13:01:30)</span> <b>tmartin:</b></span> the latest commit fixes that error<br/>
<span style="color: #b14cbc"><span style="font-size: small">(13:02:11)</span> <b>tmartin:</b></span> that is why I ended up trying to get 1.3.2 with the most recent patch (call it 1.3.2-3) since otherwise it would not compile<br/>
</body>
</html>
