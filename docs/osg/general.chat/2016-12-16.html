<!DOCTYPE html>
<html>
<head>
<title>Fri Dec 16, 2016 : #general (osg)</title>
</head>
<body>
<h3>Fri Dec 16, 2016 : #general (osg)</h3>
<span style="color: #8d4b84"><span style="font-size: small">(14:47:24)</span> <b>kherner:</b></span> If anyone's got a minute, I could use some help debugging a CondorCE issue at JINR<br/>
<span style="color: #8d4b84"><span style="font-size: small">(14:47:42)</span> <b>kherner:</b></span> I've posted the log file also in #osg-support but I'll put it here too<br/>
<span style="color: #8d4b84"><span style="font-size: small">(14:48:45)</span> <b>kherner:</b></span> They're setting up a new HTCondorCE + schedd on <a href="http://cloud-osg-ce.jinr.ru">cloud-osg-ce.jinr.ru</a><br/>
<span style="color: #8d4b84"><span style="font-size: small">(14:48:53)</span> <b>kherner:</b></span> Here's their current job router<br/>
<span style="color: #8d4b84"><span style="font-size: small">(14:49:10)</span> <b>kherner:</b></span> {{{<br/>JOB_ROUTER_SCHEDD2_SPOOL=/var/lib/condor/spool<br/>JOB_ROUTER_SCHEDD2_POOL=<a href="http://condor.jinr.ru">condor.jinr.ru</a><br/>JOB_ROUTER_SCHEDD2_NAME=<a href="http://cloud-osg-ce.jinr.ru">cloud-osg-ce.jinr.ru</a><br/><br/>JOB_ROUTER_ENTRIES = \<br/>  [ \<br/>    TargetUniverse = 5; \<br/>    GridResource = "condor localhost localhost"; \<br/>    eval_set_GridResource = strcat("condor ", "$(FULL_HOSTNAME)", " $(JOB_ROUTER_SCHEDD2_POOL)"); \<br/>    name = "NOvA_Condor"; \<br/>    # Route to an HTCondor-CE batch system \<br/>  ]<br/>}}}<br/>
<span style="color: #8d4b84"><span style="font-size: small">(14:50:07)</span> <b>kherner:</b></span> And their router log shows it's having trouble talking to the schedd, though the CE and schedd are ostensibly on the same machine:<br/><br/>{{{<br/>12/09/16 20:17:47 TimerHandler_JobLogPolling() called<br/>12/09/16 20:17:47 === Current Probing Information ===<br/>12/09/16 20:17:47 fsize: 10303          mtime: 1481303788<br/>12/09/16 20:17:47 first log entry: 11 CreationTimestamp 1481195393<br/>12/09/16 20:17:47 TimerHandler_JobLogPolling() called<br/>12/09/16 20:17:47 === Current Probing Information ===<br/>12/09/16 20:17:47 fsize: 130            mtime: 1481298024<br/>12/09/16 20:17:47 first log entry: 4 CreationTimestamp 1481272312<br/>12/09/16 20:17:47 JobRouter: polling state of (0) managed jobs.<br/>12/09/16 20:17:47 JobRouter: Checking for candidate jobs. routing table is:<br/>Route Name             Submitted/Max        Idle/Max     Throttle Recent: Started Succeeded Failed<br/>NOvA_Condor                    0/  10000       0/   2000     none               7         0      7<br/>12/09/16 20:17:47 JobRouter: Umbrella constraint: ((target.x509userproxysubject =!= UNDEFINED) &amp;&amp; (target.x509UserProxyExpiration =!= UNDEFINED) &amp;&amp; (time() &lt; target.x509UserProxyExpiration) &amp;&amp; (target.JobUniverse =?= 5 || target.JobUniverse =?= 1)) &amp;&amp; ( (true) ) &amp;&amp; (target.ProcId &gt;= 0 &amp;&amp; target.JobStatus == 1 &amp;&amp; (target.StageInStart is undefined || target.StageInFinish isnt undefined) &amp;&amp; target.Managed isnt "ScheddDone" &amp;&amp; target.Managed isnt "External" &amp;&amp; target.Owner isnt Undefined &amp;&amp; target.RoutedBy isnt "nova-htcondor-ce")<br/>12/09/16 20:17:47 JobRouter: Found candidate job src=18.0,route=NOvA_Condor<br/>12/09/16 20:17:47 SharedPortClient: sent connection request to schedd at &lt;159.93.221.21:9619&gt; for shared port id 141064_413e_3<br/>12/09/16 20:17:47 This process has a valid certificate &amp; key<br/>12/09/16 20:17:47 IPVERIFY: checking <a href="http://cloud-osg-ce.jinr.ru">cloud-osg-ce.jinr.ru</a> against 159.93.221.21<br/>12/09/16 20:17:47 IPVERIFY: matched 159.93.221.21 to 159.93.221.21<br/>12/09/16 20:17:47 IPVERIFY: ip found is 1<br/>12/09/16 20:17:47 ZKM: successful mapping to GSS_ASSIST_GRIDMAP<br/>12/09/16 20:17:47 condor_read(): Socket closed when trying to read 21 bytes from schedd at &lt;159.93.221.21:9619&gt;<br/>12/09/16 20:17:47 IO: EOF reading packet header<br/>12/09/16 20:17:47 SECMAN: FAILED: Failed to received post-auth ClassAd<br/>12/09/16 20:17:47 JobRouter failure (src=18.0,route=NOvA_Condor): candidate job could not be claimed by JobRouter: ERROR (local pool) Unable to connect<br/>SECMAN:2007:Failed to received post-auth ClassAd<br/><br/>12/09/16 20:17:47 JobRouter (src=18.0,route=NOvA_Condor): Cleaned up and removed routed job.<br/>12/09/16 20:17:47 JobRouter (src=18.0): job mirror synchronized; removing job from internal 'retirement' status<br/>}}}<br/>
<span style="color: #8d4b84"><span style="font-size: small">(14:50:31)</span> <b>kherner:</b></span> Is this just an incorrect port settings kind of issue or i there something more fundamentally wrong with the setup?<br/>
<span style="color: #235e5b"><span style="font-size: small">(16:42:22)</span> <b>dweitzel:</b></span> The interesting logs will be on 159.93.221.21 in either the SchedLog, the SharedPortLog, or the CollectorLog<br/>
<span style="color: #235e5b"><span style="font-size: small">(16:42:28)</span> <b>dweitzel:</b></span> @kherner ^<br/>
<span style="color: #8d4b84"><span style="font-size: small">(17:03:04)</span> <b>kherner:</b></span> Thanks @dweitzel; I'll ask them to produce those.<br/>
</body>
</html>
