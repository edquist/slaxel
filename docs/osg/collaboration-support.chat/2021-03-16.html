<!DOCTYPE html>
<html>
<head>
<title>Tue Mar 16, 2021 : #collaboration-support (osg)</title>
</head>
<body>
<h3>Tue Mar 16, 2021 : #collaboration-support (osg)</h3>
<span style="color: #674b1b"><span style="font-size: small">(10:13:24)</span> <b>rynge:</b></span> @ruben.lara I have registered GATech_PACE for you. Here is a test job you can try (the requirements means the job will not run locally):<br/>
<span style="color: #674b1b"><span style="font-size: small">(10:13:36)</span> <b>rynge:</b></span> <pre>universe     = vanilla<br/><br/>+ProjectName = "GATech_PACE"<br/><br/>requirements = GLIDECLIENT_OSG_VO == "OSG"<br/><br/>executable   = /bin/hostname<br/>arguments    =<br/>input        =<br/>output       = $(Cluster).$(Process).out<br/>error        = $(Cluster).$(Process).err<br/>log          = $(Cluster).log<br/><br/>should_transfer_files   = YES<br/>when_to_transfer_output = ON_EXIT<br/><br/>request_cpus = 1<br/>request_memory = 1GB<br/><br/>Notification = never<br/><br/>queue 1</pre><br/><br/>
<span style="color: #a63024"><span style="font-size: small">(10:30:14)</span> <b>paschos:</b></span> setting requirements = true will cause the job to consider the local pool first. It can still flock out if no slots are available there<br/>
<span style="color: #c386df"><span style="font-size: small">(11:40:02)</span> <b>ruben.lara:</b></span> I’ll test in a few moments.<br/>
<span style="color: #5a4592"><span style="font-size: small">(12:27:16)</span> <b>lmichael:</b></span> @paschos I just met with @ruben.lara, who had requested an OSG Account (via OSG Connect) to do some testing from there onto the OS Pool and their infrastructure, but he mentioned some other desires. Namely, he and I discussed that their local submit points will ‘default’ submit to a single pool, but can flock to others, and it’s possible to tweak the user experience by making the other pools accessible to jobs via ‘opt-in’ and/or to have separate submit points (with different default pools) per user community/research project, depending on what pool access and user experience you’re going for (not requiring opt-in flags just to reach a single pool). Have any of you talked with him about that?<br/>
<span style="color: #5a4592"><span style="font-size: small">(12:28:35)</span> <b>lmichael:</b></span> His next desire is to configure their submit point (that he thinks submits to the LIGO pool, only/default) and see what the HTCondor configuration looks like to set up flocking to the OS Pool, but with opt-in behavior for users to get the OS Pool. Does that make sense to everyone?<br/>
<span style="color: #5a4592"><span style="font-size: small">(12:29:13)</span> <b>lmichael:</b></span> (btw, I added him to GTConvertHTC for OSG Connect submission)<br/>
<span style="color: #a63024"><span style="font-size: small">(12:31:07)</span> <b>paschos:</b></span> at this point, we are trying to validate access to pools. and yes it makes sense but my understanding  is that policy implementation  on their end. has not been decided yet. The primary  user for the cluster based on share is LIGO.<br/>
<span style="color: #a63024"><span style="font-size: small">(12:31:30)</span> <b>paschos:</b></span> @mehmet.belgin is better positioned to elaborate on itt<br/>
<span style="color: #5a4592"><span style="font-size: small">(12:38:51)</span> <b>lmichael:</b></span> @mehmet.belgin is part of the <tt>GTConvertHTC</tt> project, too, but I don’t see <tt>GATech_PACE</tt> or <tt>GATech_OSG_PACE</tt>. Do we need both, or can/should I reconcile to which single project?<br/>
<span style="color: #4ec0d6"><span style="font-size: small">(12:41:01)</span> <b>mehmet.belgin:</b></span> @lmichael @paschos I'm just catching up with this thread -- GTConvertHPC was a catch-all group for GT researchers to test their workflows on OSG. It didn't stick, so we can discard it (I'll see if I can remove it). It has no relevance to ongoing efforts to deploy the new cluster.<br/>
<span style="color: #5a4592"><span style="font-size: small">(12:46:54)</span> <b>lmichael:</b></span> Okay. Is it <tt>GATech_PACE</tt> or <tt>GATech_OSG_PACE</tt> that I should get reflected in the OSG user account space, so that @ruben.lara can submit jobs from an OSG Connect access point under that project? (I’ll have instructions for him on how to set it as the default submission project in that case.)<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:47:42)</span> <b>rynge:</b></span> I added <tt>GATech_PACE</tt> to topology, but not OSGConnect<br/>
<span style="color: #5a4592"><span style="font-size: small">(12:48:21)</span> <b>lmichael:</b></span> I won’t bother with topology, then. Thanks, @rynge!<br/>
<span style="color: #4ec0d6"><span style="font-size: small">(12:49:44)</span> <b>mehmet.belgin:</b></span> @paschos I recently followed up with @james.clark, quoting:<br/><br/>&gt; Usually, the way we expect things to work is:<br/>&gt; * jobs running in pilots write to the execute node's local storage and we rely on condor file transfer to get it back to the users' directories<br/>&gt; * jobs not running in pilots and instead in the local pool can write directly to users' working space from the execute node.<br/>So, as far as I can tell, a local user can guarantee a job to remain in the GT pool (using GT user account, not the ligo proxy user) by NOT specifying ‘opt-in’ external pools. @lmichael does this match your understanding? This is particularly important because some local users have access to data locations owned by them, which won't be accessible to the ligo proxy user. There's a desire to reference/use these local datasets without moving them to Stashcache or bundling with jobs.<br/><br/>@james.clark please feel free to step in here if my understanding was different.<br/>
</body>
</html>
