<!DOCTYPE html>
<html>
<head>
<title>Thu Jun 4, 2020 : #ligo-rucio (osg)</title>
</head>
<body>
<h3>Thu Jun 4, 2020 : #ligo-rucio (osg)</h3>
<span style="color: #a2a5dc"><span style="font-size: small">(10:58:55)</span> <b>james.clark:</b></span> I finally remembered to add some verbosity to the <tt>gfal-stat</tt> and indeed, i'm getting:<br/><pre>530-The certificate has expired: Credential with subject: /C=SE/O=AddTrust AB/OU=AddTrust External TTP Network/CN=AddTrust External CA Root has expired.<br/>530 End.</pre><br/>Anyone know if that's client-side or server-side?<br/><br/>I had tried just reinstalling the osg-ca-certs package but i'm now trying a container rebuild with an explicit <tt>fetch-crl</tt>  in case it's on my end.  If it is on my end, though I'm not sure why the FTS transfers would also do this<br/>
<span style="color: #ea2977"><span style="font-size: small">(11:00:17)</span> <b>jlstephen:</b></span> anything else around that message? or is that all it's reporting<br/>
<span style="color: #ea2977"><span style="font-size: small">(11:00:51)</span> <b>jlstephen:</b></span> that is indeed the CA certificate that expired at the end of may<br/>
<span style="color: #a2a5dc"><span style="font-size: small">(11:15:43)</span> <b>james.clark:</b></span> there's some more about loading plugins but this is the meat of it:<br/><pre>530 530-globus_xio_gssapi_ftp.c:globus_l_xio_gssapi_ftp_decode_adat:856:<br/>530-Authentication Error<br/>530-GSS Major Status: Authentication Failed<br/>530-accept_sec_context.c:gss_accept_sec_context:198:<br/>530-SSL handshake problems<br/>530-globus_i_gsi_gss_utils.c:globus_i_gsi_gss_handshake:1122:<br/>530-Unable to verify remote side's credentials<br/>530-globus_i_gsi_gss_utils.c:globus_i_gsi_gss_handshake:1095:<br/>530-SSL handshake problems: Couldn't do ssl handshake<br/>530-OpenSSL Error: s3_srvr.c:3327: in library: SSL routines, function ssl3_get_client_certificate: certificate verify failed<br/>530-globus_gsi_callback.c:globus_gsi_callback_handshake_callback:558:<br/>530-Could not verify credential<br/>530-globus_gsi_callback.c:globus_i_gsi_callback_cred_verify:805:<br/>530-The certificate has expired: Credential with subject: /C=SE/O=AddTrust AB/OU=AddTrust External TTP Network/CN=AddTrust External CA Root has expired.<br/>530 End.<br/><br/><br/>DEBUG      [gfal_gridftp_statG]&lt;-<br/>gfal-stat error: 13 (Permission denied) - [gfal2_stat][gfal_plugin_statG][gfal_gridftp_statG][gfal_gridftp_statG] globus_ftp_client: the server responded with an error 530 530-globus_xio_gssapi_ftp.c:globus_l_xio_gssapi_ftp_decode_adat:856:  530-Authentication Error  530-GSS Major Status: Authentication Failed  530-accept_sec_context.c:gss_accept_sec_context:198:  530-SSL handshake problems  530-globus_i_gsi_gss_utils.c:globus_i_gsi_gss_handshake:1122:  530-Unable to verify remote side's credentials  530-globus_i_gsi_gss_utils.c:globus_i_gsi_gss_handshake:1095:  530-SSL handshake problems: Couldn't do ssl handshake  5<br/>DEBUG    gridftp session cache garbage collection ...</pre><br/><br/>
<span style="color: #a2a5dc"><span style="font-size: small">(11:16:21)</span> <b>james.clark:</b></span> and a little further up:<br/><pre>DEBUG      -&gt; [gfal_gridftp_statG]<br/>DEBUG     -&gt; [GridFTPModule::stat] <br/>DEBUG     -&gt; [Gridftp_stat_module::globus_gass_stat] <br/>DEBUG    GSIFTP using certificate /tmp/x509up<br/>DEBUG    GSIFTP using private key /tmp/x509up<br/>DEBUG    no session associated with this baseurl, try find generic one .... <br/>DEBUG    no session found in cache for gsi<a href="ftp://kagra-ldr.icrr.u-tokyo.ac.jp:2811">ftp://kagra-ldr.icrr.u-tokyo.ac.jp:2811</a>!<br/>DEBUG    Impossible to get integer parameter GRIDFTP PLUGIN:BLOCK_SIZE, set to default value 0, err Key file does not have key "BLOCK_SIZE" in group "GRIDFTP PLUGIN"<br/>DEBUG    Impossible to get integer parameter GRIDFTP PLUGIN:OPERATION_TIMEOUT, set to default value 1800, err Key file does not have key "OPERATION_TIMEOUT" in group "GRIDFTP PLUGIN"<br/>DEBUG       [GridFTP_Request_state::wait_callback] setup gsiftp timeout to 1800 seconds<br/>DEBUG     gridFTP operation done<br/>DEBUG    globus_ftp_client: the server responded with an error</pre><br/><br/>
</body>
</html>
