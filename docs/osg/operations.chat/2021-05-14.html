<!DOCTYPE html>
<html>
<head>
<title>Fri May 14, 2021 : #operations (osg)</title>
</head>
<body>
<h3>Fri May 14, 2021 : #operations (osg)</h3>
<span style="color: #43761b"><span style="font-size: small">(08:49:03)</span> <b>blin:</b></span> @jpeterson because of course, ESLA broke after our update yesterday<br/>
<span style="color: #43761b"><span style="font-size: small">(08:49:29)</span> <b>blin:</b></span> it doesn't look like they have python3 available on the host =/. for the time being, we should be able to rever to the Bosco 1.3 tarball<br/>
<span style="color: #3c8c69"><span style="font-size: small">(08:49:30)</span> <b>jpeterson:</b></span> whe<br/>
<span style="color: #3c8c69"><span style="font-size: small">(08:49:39)</span> <b>jpeterson:</b></span> whee<br/>
<span style="color: #43761b"><span style="font-size: small">(08:49:40)</span> <b>blin:</b></span> so it's a "simple" fix<br/>
<span style="color: #43761b"><span style="font-size: small">(08:50:06)</span> <b>blin:</b></span> (also feel free to drop the <tt>BoscoOverrides.URL</tt> line. I fixed it for real this time)<br/>
<span style="color: #43761b"><span style="font-size: small">(08:50:51)</span> <b>blin:</b></span> we should probably reach out to them about installing Python 3 at least on the login node (or pointing us to where it may be?)<br/>
<span style="color: #43761b"><span style="font-size: small">(08:51:01)</span> <b>blin:</b></span> running old Bosco isn't going to be sustainable long term<br/>
<span style="color: #3c8c69"><span style="font-size: small">(08:53:01)</span> <b>jpeterson:</b></span> but for now just swap the tarball back and leave the rest of the scitokens in?<br/>
<span style="color: #43761b"><span style="font-size: small">(09:02:08)</span> <b>blin:</b></span> yup<br/>
<span style="color: #43761b"><span style="font-size: small">(13:52:17)</span> <b>blin:</b></span> hey @jthiltges we're seeing issues with PSU advertising to the central collector and it looks like a timeout, maybe?<br/><pre>05/14/21 18:46:14 (D_SECURITY) IPVERIFY: for <a href="http://hcc-osg-collector2.unl.edu">hcc-osg-collector2.unl.edu</a> matched 129.93.175.57 to 129.93.175.57<br/>05/14/21 18:46:14 (D_SECURITY) IPVERIFY: <a href="mailto:collector.opensciencegrid.org@unmapped.htcondor.org">collector.opensciencegrid.org@unmapped.htcondor.org</a> at &lt;129.93.175.57:9619&gt; not matched to deny list, so allowing.<br/>05/14/21 18:46:14 (D_SECURITY:2) Adding to resolved authorization table: <a href="mailto:collector.opensciencegrid.org@unmapped.htcondor.org">collector.opensciencegrid.org@unmapped.htcondor.org</a>/129.93.175.57: CLIENT<br/>05/14/21 18:46:14 (D_SECURITY:2) CRYPTO: resetting m_ivec(len 8) and m_num<br/>05/14/21 18:46:14 (D_ALWAYS:2) Registered TCP socket from &lt;128.104.103.149:7296&gt; for updates.<br/>05/14/21 18:46:14 (D_ALWAYS:2) condor_read(): Socket closed when trying to read 21 bytes from &lt;128.104.103.149:41221&gt; in non-blocking mode<br/>05/14/21 18:46:14 (D_ALWAYS:2) IO: EOF reading packet header<br/>05/14/21 18:46:14 (D_ALWAYS) DaemonCore: Can't receive command request from 128.104.103.149 (perhaps a timeout?)<br/>05/14/21 18:46:14 (D_SECURITY:2) CRYPTO: resetting m_ivec(len 8) and m_num<br/>05/14/21 18:46:15 (D_ALWAYS:2) CollectorAd  : Updating ... "&lt; My Pool - psu-ligo-ce1.svc.opensciencegrid.org@psu-ligo-ce1.svc.opensciencegrid.org &gt;"</pre><br/>do you see anything in the CollectorLog on your end?<br/>
<span style="color: #e06b56"><span style="font-size: small">(13:55:35)</span> <b>jthiltges:</b></span> I'm not seeing anything for "<a href="http://psu-ligo-ce1.svc.opensciencegrid.org">psu-ligo-ce1.svc.opensciencegrid.org</a>" or "128.104.103.185" in CollectorLog. Am I looking for the right thing?<br/>
<span style="color: #43761b"><span style="font-size: small">(13:58:01)</span> <b>blin:</b></span> hrm yeah, i'd expect to see one or the other<br/>
<span style="color: #43761b"><span style="font-size: small">(13:58:19)</span> <b>blin:</b></span> let me dig some more on my end. thanks<br/>
<blockquote>
<span style="color: #e06b56"><span style="font-size: small">(13:59:39)</span> <b>jthiltges:</b></span> At a quick glance, this line in the output confuses me:<br/><pre>05/14/21 18:46:14 (D_ALWAYS:2) condor_read(): Socket closed when trying to read 21 bytes from &lt;128.104.103.149:41221&gt; in non-blocking mode</pre><br/>That's a host on tiger, trying to do _something_?<br/>
<span style="color: #43761b"><span style="font-size: small">(14:00:36)</span> <b>blin:</b></span> yeah agreed<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:15:52)</span> <b>jpeterson:</b></span> outgoing addresses from CEs will show up as the host<br/>
<span style="color: #43761b"><span style="font-size: small">(15:23:06)</span> <b>blin:</b></span> agh, that's right<br/>
<span style="color: #43761b"><span style="font-size: small">(15:25:25)</span> <b>blin:</b></span> @jthiltges anything in the logs from one of these?<br/><pre>    Host: <a href="http://tiger0009.chtc.wisc.edu">tiger0009.chtc.wisc.edu</a><br/>    Host IP: 128.104.103.149</pre><br/>
<span style="color: #e06b56"><span style="font-size: small">(15:30:50)</span> <b>jthiltges:</b></span> Showing successful auth on both.<br/>My fault for adding to confusion. I was looking in condor rather than condor-ce. Apologies.<br/><pre>[root@collector1 ~]# egrep '(128.104.103.149|psc-ligo|tiger0009)' /var/log/condor-ce/CollectorLog<br/>...<br/>05/14/21 15:26:41 DC_AUTHENTICATE: received UDP packet from &lt;128.104.103.149:51615&gt;.<br/>05/14/21 15:26:41 DC_AUTHENTICATE: received DC_AUTHENTICATE from &lt;128.104.103.149:51615&gt;<br/>05/14/21 15:26:41 PERMISSION GRANTED to <a href="mailto:psc-bridges2-ce1.svc.opensciencegrid.org@unmapped.htcondor.org">psc-bridges2-ce1.svc.opensciencegrid.org@unmapped.htcondor.org</a> from host 128.104.103.149 for command 1 (UPDATE_SCHEDD_AD), access level ADVERTISE_SCHEDD: reason: cached result for ADVERTISE_SCHEDD; see first case for the full reason<br/><br/><br/>[root@collector2 ~]# egrep '(128.104.103.149|psc-ligo|tiger0009)' /var/log/condor-ce/CollectorLog<br/>...<br/>05/14/21 15:26:41 DC_AUTHENTICATE: received UDP packet from &lt;128.104.103.149:26226&gt;.<br/>05/14/21 15:26:41 DC_AUTHENTICATE: received DC_AUTHENTICATE from &lt;128.104.103.149:26226&gt;<br/>05/14/21 15:26:41 PERMISSION GRANTED to <a href="mailto:psc-bridges2-ce1.svc.opensciencegrid.org@unmapped.htcondor.org">psc-bridges2-ce1.svc.opensciencegrid.org@unmapped.htcondor.org</a> from host 128.104.103.149 for command 1 (UPDATE_SCHEDD_AD), access level ADVERTISE_SCHEDD: reason: cached result for ADVERTISE_SCHEDD; see first case for the full reason</pre><br/>
<span style="color: #e06b56"><span style="font-size: small">(15:31:01)</span> <b>jthiltges:</b></span> Oh. wait. Bridges.<br/>
<span style="color: #43761b"><span style="font-size: small">(15:31:30)</span> <b>blin:</b></span> hrmmmm<br/>
<span style="color: #e06b56"><span style="font-size: small">(15:31:40)</span> <b>jthiltges:</b></span> <pre>05/14/21 15:26:24 DC_AUTHENTICATE: UDP message is from <a href="mailto:psc-ligo-ce1.svc.opensciencegrid.org@unmapped.htcondor.org">psc-ligo-ce1.svc.opensciencegrid.org@unmapped.htcondor.org</a>.<br/>05/14/21 15:26:24 DC_AUTHENTICATE: received DC_AUTHENTICATE from &lt;128.104.103.149:43127&gt;<br/>05/14/21 15:26:24 PERMISSION GRANTED to <a href="mailto:psc-ligo-ce1.svc.opensciencegrid.org@unmapped.htcondor.org">psc-ligo-ce1.svc.opensciencegrid.org@unmapped.htcondor.org</a> from host 128.104.103.149 for command 1 (UPDATE_SCHEDD_AD), access level ADVERTISE_SCHEDD: reason: cached result for ADVERTISE_SCHEDD; see first case for the full reason</pre><br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:31:44)</span> <b>jpeterson:</b></span> yeah PSC vs PSU<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:31:57)</span> <b>jpeterson:</b></span> PSU is the one in question<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:32:31)</span> <b>jpeterson:</b></span> wait, did I mess that up somewhere too<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:32:39)</span> <b>jpeterson:</b></span> /sigh<br/>
<span style="color: #e06b56"><span style="font-size: small">(15:34:03)</span> <b>jthiltges:</b></span> (Too much multi-tasking for a Friday afternoon!)<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:34:29)</span> <b>jpeterson:</b></span> yeah, last week friday.  and then crosseyed the rest of the time<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:34:55)</span> <b>jpeterson:</b></span> time to go over all my configs again.  I found one spot so far.<br/>
<span style="color: #43761b"><span style="font-size: small">(15:35:23)</span> <b>blin:</b></span> oh dang<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:36:47)</span> <b>jpeterson:</b></span> so far.. the LE cert<br/>
<span style="color: #43761b"><span style="font-size: small">(15:37:33)</span> <b>blin:</b></span> that explains why we didn't see any errors on the central collector side<br/>
<span style="color: #43761b"><span style="font-size: small">(15:38:00)</span> <b>blin:</b></span> the collector will not accept ads where there's a mismatch between the CE collector ad + the host cert<br/>
<span style="color: #43761b"><span style="font-size: small">(15:38:11)</span> <b>blin:</b></span> annoyingly, it doesn't really log that afaik<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:45:04)</span> <b>jpeterson:</b></span> <pre>[1342] root@gfactory-2 /etc/osg-gfactory/OSG_autoconf# condor_ce_q -pool <a href="http://psu-ligo-ce1.svc.opensciencegrid.org:9619">psu-ligo-ce1.svc.opensciencegrid.org:9619</a> -name <a href="http://psu-ligo-ce1.svc.opensciencegrid.org">psu-ligo-ce1.svc.opensciencegrid.org</a><br/><br/><br/>-- Schedd: <a href="http://psu-ligo-ce1.svc.opensciencegrid.org">psu-ligo-ce1.svc.opensciencegrid.org</a> : &lt;128.104.103.185:9619?... @ 05/14/21 13:44:41<br/>OWNER BATCH_NAME      SUBMITTED   DONE   RUN    IDLE   HOLD  TOTAL JOB_IDS<br/><br/>Total for query: 0 jobs; 0 completed, 0 removed, 0 idle, 0 running, 0 held, 0 suspended<br/>Total for all users: 0 jobs; 0 completed, 0 removed, 0 idle, 0 running, 0 held, 0 suspended</pre><br/><br/>
<span style="color: #e06b56"><span style="font-size: small">(15:46:17)</span> <b>jthiltges:</b></span> <pre>[root@collector1 ~]# condor_ce_status -any -af name authenticationmethod | grep psu-ligo<br/><a href="http://psu-ligo-ce1.svc.opensciencegrid.org">psu-ligo-ce1.svc.opensciencegrid.org</a> SSL</pre><br/>
<span style="color: #43761b"><span style="font-size: small">(15:46:40)</span> <b>blin:</b></span> woooo<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:46:43)</span> <b>jpeterson:</b></span> and it shows up in the OSG factory autoconf.  /sign<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:46:47)</span> <b>jpeterson:</b></span> /sigh<br/>
<span style="color: #3c8c69"><span style="font-size: small">(16:06:35)</span> <b>jpeterson:</b></span> <pre>[1405] root@gfactory-2 /var/log/gwms-factory/client/user_feligo/glidein_gfactory_instance/entry_LIGO_US_PSU-LIGO# cat condor_activity_20210514_IGWN-OSG-GWMSFrontend.main.log<br/>000 (5161365.000.000) 05/14 14:01:57 Job submitted from host: &lt;169.228.38.43:9618?addrs=169.228.38.43-9618&amp;noUDP&amp;sock=2909650_76d3_8&gt;<br/>...<br/>012 (5161365.000.000) 05/14 14:02:58 Job was held.<br/>	Error connecting to schedd <a href="http://psu-ligo-ce1.svc.opensciencegrid.org">psu-ligo-ce1.svc.opensciencegrid.org</a>: AUTHENTICATE:1003:Failed to authenticate with any method|AUTHENTICATE:1004:Failed to authenticate using GSI|GSI:5004:Failed to authenticate.  Globus is reporting error (655360:97)|AUTHENTICATE:1004:Failed to authenticate using FS<br/>	Code 0 Subcode 0<br/>...<br/>009 (5161365.000.000) 05/14 14:03:59 Job was aborted by the user.<br/>	via condor_rm (by user gfactory)<br/>...</pre><br/>
<span style="color: #9e3997"><span style="font-size: small">(17:09:42)</span> <b>bbockelm:</b></span> @blin - what’s our lesson learned here?  Is there a check missing in osg-configure?<br/>
<span style="color: #43761b"><span style="font-size: small">(17:11:48)</span> <b>blin:</b></span> either that or a container-only check<br/>
<span style="color: #43761b"><span style="font-size: small">(17:12:07)</span> <b>blin:</b></span> would be nice to have logs on the condor side when something isn't included because of collector reqs<br/>
</blockquote>
<span style="color: #a63024"><span style="font-size: small">(14:28:29)</span> <b>paschos:</b></span> i was wondering if someone from ops/factory is available to join on a call with maurizio at jlab. in regards to CLAS12 jobs --- ticket 67282 … pm me if available — or let me know here --- the call will start in 15 min…<br/>
<span style="color: #a63024"><span style="font-size: small">(14:29:21)</span> <b>paschos:</b></span> <b>@channel</b> ^<br/>
</body>
</html>
