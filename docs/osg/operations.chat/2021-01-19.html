<!DOCTYPE html>
<html>
<head>
<title>Tue Jan 19, 2021 : #operations (osg)</title>
</head>
<body>
<h3>Tue Jan 19, 2021 : #operations (osg)</h3>
<span style="color: #A82F2F"><span style="font-size: small">(00:33:33)</span> <b>B01GA370NNT:</b></span> Your incident *Stash Filesystem outage* has been open for over *3 hours*. (<a href="http://manage.statuspage.io/pages/ws62tz4wcmxv">http://manage.statuspage.io/pages/ws62tz4wcmxv</a>)<br/>
<span style="color: #A82F2F"><span style="font-size: small">(00:33:40)</span> <b>B01GA370NNT:</b></span> Your component *Login 4* has been set to *Partial Outage* for over *3 hours*. (<a href="http://manage.statuspage.io/pages/ws62tz4wcmxv">http://manage.statuspage.io/pages/ws62tz4wcmxv</a>)<br/>
<span style="color: #A82F2F"><span style="font-size: small">(00:33:42)</span> <b>B01GA370NNT:</b></span> Your component *Login 5* has been set to *Partial Outage* for over *3 hours*. (<a href="http://manage.statuspage.io/pages/ws62tz4wcmxv">http://manage.statuspage.io/pages/ws62tz4wcmxv</a>)<br/>
<span style="color: #A82F2F"><span style="font-size: small">(00:33:44)</span> <b>B01GA370NNT:</b></span> Your component *Stash Filesystem* has been set to *Major Outage* for over *3 hours*. (<a href="http://manage.statuspage.io/pages/ws62tz4wcmxv">http://manage.statuspage.io/pages/ws62tz4wcmxv</a>)<br/>
<span style="color: #A82F2F"><span style="font-size: small">(03:33:34)</span> <b>B01GA370NNT:</b></span> Your component *Login 4* has been set to *Partial Outage* for over *6 hours*. (<a href="http://manage.statuspage.io/pages/ws62tz4wcmxv">http://manage.statuspage.io/pages/ws62tz4wcmxv</a>)<br/>
<span style="color: #A82F2F"><span style="font-size: small">(03:33:35)</span> <b>B01GA370NNT:</b></span> Your incident *Stash Filesystem outage* has been open for over *6 hours*. (<a href="http://manage.statuspage.io/pages/ws62tz4wcmxv">http://manage.statuspage.io/pages/ws62tz4wcmxv</a>)<br/>
<span style="color: #A82F2F"><span style="font-size: small">(03:33:36)</span> <b>B01GA370NNT:</b></span> Your component *Login 5* has been set to *Partial Outage* for over *6 hours*. (<a href="http://manage.statuspage.io/pages/ws62tz4wcmxv">http://manage.statuspage.io/pages/ws62tz4wcmxv</a>)<br/>
<span style="color: #A82F2F"><span style="font-size: small">(03:33:38)</span> <b>B01GA370NNT:</b></span> Your component *Stash Filesystem* has been set to *Major Outage* for over *6 hours*. (<a href="http://manage.statuspage.io/pages/ws62tz4wcmxv">http://manage.statuspage.io/pages/ws62tz4wcmxv</a>)<br/>
<span style="color: #A82F2F"><span style="font-size: small">(09:09:33)</span> <b>B01GA370NNT:</b></span> <br/>
<span style="color: #A82F2F"><span style="font-size: small">(09:26:10)</span> <b>B01GA370NNT:</b></span> <br/>
<span style="color: #9e3997"><span style="font-size: small">(09:29:03)</span> <b>bbockelm:</b></span> @lincoln - what's the latest on the Stash filesystem outage above?  Any updates we should write into the StatusPage outage?<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:29:41)</span> <b>bbockelm:</b></span> doh!  You just put an update into osg-connect.  Nevermind.  @dweitzel can you do a StatusPage update in the incident?<br/>
<span style="color: #235e5b"><span style="font-size: small">(09:30:37)</span> <b>dweitzel:</b></span> Am I the only one that can see the updates I've been making to the status page?  Are you looking for me to put more technical details?<br/>
<span style="color: #A82F2F"><span style="font-size: small">(09:33:35)</span> <b>B01GA370NNT:</b></span> Your component *Stash Filesystem* has been set to *Major Outage* for over *12 hours*. (<a href="http://manage.statuspage.io/pages/ws62tz4wcmxv">http://manage.statuspage.io/pages/ws62tz4wcmxv</a>)<br/>
<span style="color: #A82F2F"><span style="font-size: small">(09:33:39)</span> <b>B01GA370NNT:</b></span> Your incident *Stash Filesystem outage* has been open for over *12 hours*. (<a href="http://manage.statuspage.io/pages/ws62tz4wcmxv">http://manage.statuspage.io/pages/ws62tz4wcmxv</a>)<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:42:44)</span> <b>bbockelm:</b></span> Strange - I was expecting notifications for the updates.<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:42:57)</span> <b>bbockelm:</b></span> No, what's there was exactly what I was expecting ... but in my inbox.<br/>
<span style="color: #235e5b"><span style="font-size: small">(09:53:48)</span> <b>dweitzel:</b></span> Ah, ok. I never know whether to send email updates. When we get the contact synchronization going, I presume we don’t want to send notifications to all 200 OSG contacts. <br/>
<span style="color: #9e3997"><span style="font-size: small">(09:56:36)</span> <b>bbockelm:</b></span> Right - that's something we should discuss.  If we allow people to manage their own subscriptions and notifications then we don't have to worry about sending too much.<br/>
<span style="color: #a63024"><span style="font-size: small">(13:02:40)</span> <b>efajardo:</b></span> @jpeterson we are on a hurry to move the hosted-CE from River to tiger<br/>
<span style="color: #a63024"><span style="font-size: small">(13:02:49)</span> <b>efajardo:</b></span> what is the next IP address availabe on Tiger<br/>
<span style="color: #3c8c69"><span style="font-size: small">(13:05:39)</span> <b>jpeterson:</b></span> @efajardo which CE?  next host should be 128.104.103.196, but I will need to setup the PTR records, preferrably with the new naming scheme<br/>
<span style="color: #a63024"><span style="font-size: small">(13:05:50)</span> <b>efajardo:</b></span> ok<br/>
<span style="color: #a63024"><span style="font-size: small">(13:05:53)</span> <b>efajardo:</b></span> let me see<br/>
<span style="color: #a63024"><span style="font-size: small">(13:05:56)</span> <b>efajardo:</b></span> hold on<br/>
<span style="color: #a63024"><span style="font-size: small">(13:08:34)</span> <b>efajardo:</b></span> interesting<br/>
<span style="color: #3c8c69"><span style="font-size: small">(13:08:35)</span> <b>jpeterson:</b></span> also you will have to add the proper secrets to tiger via slate, and the site will need to allow access from 128.104.100/22<br/>
<span style="color: #a63024"><span style="font-size: small">(13:08:36)</span> <b>efajardo:</b></span> it landed on <tt><a href="http://tiger0004.chtc.wisc.edu">tiger0004.chtc.wisc.edu</a></tt><br/>
<span style="color: #3c8c69"><span style="font-size: small">(13:08:56)</span> <b>jpeterson:</b></span> if you don’t tell it where to go there is a pool<br/>
<span style="color: #a63024"><span style="font-size: small">(13:09:05)</span> <b>efajardo:</b></span> ok that is fine<br/>
<span style="color: #3c8c69"><span style="font-size: small">(13:09:25)</span> <b>jpeterson:</b></span> for CE we assign them an address so I can create the PTR and have some sort of method to the madness<br/>
<span style="color: #a63024"><span style="font-size: small">(13:09:55)</span> <b>efajardo:</b></span> ok I will bind it to <tt>128.104.103.144</tt><br/>
<span style="color: #3c8c69"><span style="font-size: small">(13:10:02)</span> <b>jpeterson:</b></span> please done<br/>
<span style="color: #3c8c69"><span style="font-size: small">(13:10:03)</span> <b>jpeterson:</b></span> dont<br/>
<span style="color: #a63024"><span style="font-size: small">(13:10:11)</span> <b>efajardo:</b></span> ok<br/>
<span style="color: #a63024"><span style="font-size: small">(13:10:22)</span> <b>efajardo:</b></span> to which IP?<br/>
<span style="color: #3c8c69"><span style="font-size: small">(13:10:29)</span> <b>jpeterson:</b></span> 196 as mentioned above<br/>
<span style="color: #3c8c69"><span style="font-size: small">(13:10:48)</span> <b>jpeterson:</b></span> again, which CE is this for?<br/>
<span style="color: #385a86"><span style="font-size: small">(13:12:12)</span> <b>jdost321:</b></span> @efajardo Jeff P needs a hostname you already used for exapnse <a href="http://hosted-ce41.opensciencegrid.org">hosted-ce41.opensciencegrid.org</a> right?<br/>
<span style="color: #a63024"><span style="font-size: small">(13:12:43)</span> <b>efajardo:</b></span> yes<br/>
<span style="color: #3c8c69"><span style="font-size: small">(13:12:47)</span> <b>jpeterson:</b></span> or preferably the new style hostname,<br/>
<span style="color: #385a86"><span style="font-size: small">(13:13:02)</span> <b>jdost321:</b></span> well this one isnt' new, its already registered that way in topology /gracc<br/>
<span style="color: #3c8c69"><span style="font-size: small">(13:13:39)</span> <b>jpeterson:</b></span> would still like to clean it up eventually, but I will put the pointer to hosted-ce41 for now, Derek will have to change the forward DNS<br/>
<span style="color: #a63024"><span style="font-size: small">(13:15:21)</span> <b>efajardo:</b></span> I wil ltake care of the foward DNS with a fresdesk ticket<br/>
<span style="color: #3c8c69"><span style="font-size: small">(13:15:45)</span> <b>jpeterson:</b></span> PTR record is in place<br/>
<span style="color: #a63024"><span style="font-size: small">(13:16:24)</span> <b>efajardo:</b></span> It is still going to <tt>128.104.103.144</tt><br/>
<span style="color: #a63024"><span style="font-size: small">(13:16:29)</span> <b>efajardo:</b></span> although the yaml has<br/>
<span style="color: #a63024"><span style="font-size: small">(13:16:39)</span> <b>efajardo:</b></span> <tt>RequestIP: 128.104.103.196</tt><br/>
<span style="color: #a63024"><span style="font-size: small">(13:16:47)</span> <b>efajardo:</b></span> @blin is Slate broken?<br/>
<span style="color: #43761b"><span style="font-size: small">(13:17:59)</span> <b>blin:</b></span> maybe @u0928244 knows about the state of SLATE on River ¯\_(ツ)_/¯<br/>
<span style="color: #43761b"><span style="font-size: small">(13:18:23)</span> <b>blin:</b></span> at this point i'm not sure if it's SLATE, the recent k8s upgrade at river, or both<br/>
<span style="color: #43761b"><span style="font-size: small">(13:18:33)</span> <b>blin:</b></span> (or perhaps something completely different)<br/>
<span style="color: #43761b"><span style="font-size: small">(13:19:18)</span> <b>blin:</b></span> ah sorry i missed the conversation above...maybe SLATE isn't cleaning up the old service obj?<br/>
<span style="color: #385a86"><span style="font-size: small">(13:22:18)</span> <b>jdost321:</b></span> looks good to me?<br/><pre>jdost@jd-box:~/dev/hosted-ce-config$ slate instance info instance_PghFr5OBgzQ<br/>Name                       Started                         App Version Chart Version       Group   Cluster    ID                  <br/>osg-hosted-ce-sdsc-expanse 2021-Jan-19 19:15:30.939291 UTC 4.4.1       osg-hosted-ce-3.4.8 osg-ops chtc-tiger instance_PghFr5OBgzQ<br/><br/>Services:<br/>Name                       Cluster IP    External IP     Ports          URL                 <br/>osg-hosted-ce-sdsc-expanse 10.108.243.16 128.104.103.196 9619:31715/TCP 128.104.103.196:9619<br/>osg-hosted-ce-sdsc-expanse 10.108.243.16 128.104.103.196 80:30158/TCP   128.104.103.196:80  <br/>osg-hosted-ce-sdsc-expanse 10.108.243.16 128.104.103.196 8080:31096/TCP 128.104.103.196:8080</pre><br/>
<span style="color: #3c8c69"><span style="font-size: small">(13:22:50)</span> <b>jpeterson:</b></span> 144 is the IP of the host that the pod is running on, not the IP of the pod<br/>
<span style="color: #a63024"><span style="font-size: small">(13:25:01)</span> <b>efajardo:</b></span> ahh so there is a NodeName kind service that is created?<br/>
<span style="color: #a63024"><span style="font-size: small">(13:25:12)</span> <b>efajardo:</b></span> so things are going as expected @jpeterson?<br/>
<span style="color: #3c8c69"><span style="font-size: small">(13:26:33)</span> <b>jpeterson:</b></span> looks okay to me from here<br/>
<span style="color: #a63024"><span style="font-size: small">(13:26:44)</span> <b>efajardo:</b></span> ok<br/>
<span style="color: #3c8c69"><span style="font-size: small">(13:29:07)</span> <b>jpeterson:</b></span> at some point would like to change the CE hostname/DNS records to <a href="http://sdsc-expanse-ce1.svc.opensciencegrid.org">sdsc-expanse-ce1.svc.opensciencegrid.org</a><br/>
<span style="color: #a63024"><span style="font-size: small">(13:29:28)</span> <b>efajardo:</b></span> @dweitzel I created ticket to #66603 for the DNS change<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:31:59)</span> <b>dweitzel:</b></span> done<br/>
<span style="color: #a63024"><span style="font-size: small">(13:34:21)</span> <b>efajardo:</b></span> thanks<br/>
<span style="color: #619a4f"><span style="font-size: small">(13:55:47)</span> <b>u0928244:</b></span> Let me take a look<br/>
<span style="color: #619a4f"><span style="font-size: small">(13:59:57)</span> <b>u0928244:</b></span> What exactly is going on with River?<br/>
<span style="color: #619a4f"><span style="font-size: small">(14:02:37)</span> <b>u0928244:</b></span> I see that there’s a service there Pending for a LoadBalancer. address<br/><br/><pre>osg-hosted-ce-wsu-grid              LoadBalancer   10.107.202.219   &lt;pending&gt;         9619:30471/TCP,80:30593/TCP,8080:31589/TCP   24m</pre><br/>
<span style="color: #43761b"><span style="font-size: small">(14:14:42)</span> <b>blin:</b></span> yeah @u0928244 that's causing issues for our hosted CEs but it's sounding like that's something specific to River<br/>
<span style="color: #43761b"><span style="font-size: small">(14:14:52)</span> <b>blin:</b></span> I imagine Lincoln will be able to take a look when he gets back<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:12:02)</span> <b>bbockelm:</b></span> (hi - just a friendly reminder that the PTR value doesn't matter as long as it's set.  And that's just for older versions of HTCondor -- depending on the factory version, it may not be needed at all)<br/>
<blockquote>
<span style="color: #43761b"><span style="font-size: small">(15:21:38)</span> <b>blin:</b></span> i may be misremembering with all the issues at TACC but I seem to recall a mismatched PR being an issue<br/>
<span style="color: #9e3997"><span style="font-size: small">(16:58:09)</span> <b>bbockelm:</b></span> Yup, I'm pretty sure on this one -- TACC had other DNS issues.<br/>
</blockquote>
<span style="color: #a63024"><span style="font-size: small">(15:20:38)</span> <b>efajardo:</b></span> @jpeterson can you provide me with an kubeconf so I can do this for the slate deployed containers in tiger<br/>
<span style="color: #a63024"><span style="font-size: small">(15:20:56)</span> <b>efajardo:</b></span> <pre>kubectl --namespace slate-group-osg-ops --kubeconfig ~/.kube/osgconnect.config get pods<br/>NAME                                                 READY   STATUS             RESTARTS   AGE<br/>osg-hosted-ce-amnh-ares-59fbf8f8d9-4c2fr             2/2     Running            2          8d<br/>osg-hosted-ce-amnh-hel-6dd88c569-98glb               2/2     Running            0          8d<br/>osg-hosted-ce-amnh-mendel-5f464876bb-t8j7d           2/2     Running            2          8d<br/>osg-hosted-ce-asu-dell-m240-bbcc5f9cb-lnndn          2/2     Running            0          4h43m<br/>osg-hosted-ce-computecanada-cedar-66f6484c5b-rtqhp   2/2     Running            0          8d<br/>osg-hosted-ce-fsu-hnpgrid-74b77db479-wsqgg           2/2     Running            0          8d<br/>osg-hosted-ce-gsu-acore-659d8cd87-k49j8              2/2     Running            0          8d<br/>osg-hosted-ce-nd-caml-gpu-fb787b488-wmb4l            2/2     Running            0          8d<br/>osg-hosted-ce-psc-bridges-bd577957c-fdvl8            2/2     Running            2          8d<br/>osg-hosted-ce-sdsc-triton-stratus-6d6bf8dbbf-p57g5   2/2     Running            0          8d<br/>osg-hosted-ce-tcnj-elsa-659478cc65-c8s6n             0/2     Evicted            0          8d<br/>osg-hosted-ce-tcnj-elsa-659478cc65-f9bfr             2/2     Running            0          12h<br/>osg-hosted-ce-uci-gpatlas-8c6d95564-lhrfn            2/2     Running            0          8d<br/>osg-hosted-ce-uconn-xanadu-7b67f774cc-dwq7c          1/2     CrashLoopBackOff   2054       8d<br/>osg-hosted-ce-ucsd-comet-7fbfbcd6cb-zwl97            2/2     Running            2          8d<br/>osg-hosted-ce-usf-sc-f9b758c98-6j5kh                 2/2     Running            0          4d14h<br/>osg-hosted-ce-uwm-nemo-7cf6c87d5f-jn7br              2/2     Running            0          8d<br/>osg-hosted-ce-wsu-grid-7f78bc4b65-rs5gc              2/2     Running            0          99m<br/>osg-itb-ce1-htcondor-ce-757546b78d-52zwv             0/2     Init:0/1           0          13h<br/>osg-itb-ce1-htcondor-ce-757546b78d-rz2nf             0/2     Evicted            0          8d</pre><br/>[1:17 PM] So I can <tt>kubectl exec</tt> and <tt>kubectl cp</tt><br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:21:14)</span> <b>jpeterson:</b></span> not yet, it is on my list to get one of those setup for the slate namespace.<br/>
<span style="color: #a63024"><span style="font-size: small">(15:21:18)</span> <b>efajardo:</b></span> ok<br/>
<span style="color: #a63024"><span style="font-size: small">(15:21:26)</span> <b>efajardo:</b></span> I will try to ger the host certificate in another way<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:22:06)</span> <b>jpeterson:</b></span> for the LE cert? for now I can do that extraction and make the secret.<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:22:38)</span> <b>jpeterson:</b></span> (would probably be in the morning)<br/>
<span style="color: #a63024"><span style="font-size: small">(15:23:55)</span> <b>efajardo:</b></span> if you can do the extractacion and paste it here I can make the secret<br/>
<span style="color: #a63024"><span style="font-size: small">(15:23:59)</span> <b>efajardo:</b></span> it is the public part<br/>
<span style="color: #a63024"><span style="font-size: small">(15:24:03)</span> <b>efajardo:</b></span> so feel free to paste it on slack<br/>
<span style="color: #a63024"><span style="font-size: small">(15:37:09)</span> <b>efajardo:</b></span> @blin I think the new CE is now running on tiger<br/>
<span style="color: #a63024"><span style="font-size: small">(15:37:26)</span> <b>efajardo:</b></span> are there instrucitons to add a volume mount to the spool via slate?<br/>
<span style="color: #43761b"><span style="font-size: small">(15:38:25)</span> <b>blin:</b></span> SLATE just added support for vol mounts but we aren't taking advantage of it yet for the Hosted CE app. that's on the todo list<br/>
<span style="color: #43761b"><span style="font-size: small">(15:38:55)</span> <b>blin:</b></span> <a href="https://opensciencegrid.atlassian.net/browse/SOFTWARE-4423">https://opensciencegrid.atlassian.net/browse/SOFTWARE-4423</a><br/>
<span style="color: #43761b"><span style="font-size: small">(15:39:16)</span> <b>blin:</b></span> @u0928244 may have some pointers to SLATE documentation or examples<br/>
<span style="color: #619a4f"><span style="font-size: small">(16:30:50)</span> <b>u0928244:</b></span> You can create a volume in SLATE which represents a PVC on the Kubernetes cluster. You'll need to know which StorageClass you want to use. Once you've created the SLATE volume the app can mount it like this:<br/><br/><pre>spec:  <br/>  volumes:  <br/>    - name: slate-volume<br/>      persistentVolumeClaim:<br/>        claimName: test-volume<br/>  volumeMounts:<br/>    - name: slate-volume<br/>      mountPath: /path/to/stuff</pre><br/>where the name of the SLATE volume is <tt>test-volume</tt><br/><br/>Here is a reference on SLATE volume commands<br/><a href="https://slateci.io/docs/tools/client-manual.html#volume-commands">https://slateci.io/docs/tools/client-manual.html#volume-commands</a><br/>
<span style="color: #619a4f"><span style="font-size: small">(16:31:27)</span> <b>u0928244:</b></span> We're still working on the blog with an end-to-end example, so please let me know if you have any questions.<br/>
<span style="color: #43761b"><span style="font-size: small">(16:32:14)</span> <b>blin:</b></span> perfect, thanks!<br/>
<span style="color: #A82F2F"><span style="font-size: small">(21:33:32)</span> <b>B01GA370NNT:</b></span> Your component *Login 4* has been set to *Partial Outage* for over *12 hours*. (<a href="http://manage.statuspage.io/pages/ws62tz4wcmxv">http://manage.statuspage.io/pages/ws62tz4wcmxv</a>)<br/>
<span style="color: #A82F2F"><span style="font-size: small">(21:33:33)</span> <b>B01GA370NNT:</b></span> Your component *Login 5* has been set to *Partial Outage* for over *12 hours*. (<a href="http://manage.statuspage.io/pages/ws62tz4wcmxv">http://manage.statuspage.io/pages/ws62tz4wcmxv</a>)<br/>
<span style="color: #A82F2F"><span style="font-size: small">(21:33:34)</span> <b>B01GA370NNT:</b></span> Your component *Stash Filesystem* has been set to *Major Outage* for over *24 hours*. (<a href="http://manage.statuspage.io/pages/ws62tz4wcmxv">http://manage.statuspage.io/pages/ws62tz4wcmxv</a>)<br/>
<span style="color: #A82F2F"><span style="font-size: small">(21:33:43)</span> <b>B01GA370NNT:</b></span> Your incident *Stash Filesystem outage* has been open for over *24 hours*. (<a href="http://manage.statuspage.io/pages/ws62tz4wcmxv">http://manage.statuspage.io/pages/ws62tz4wcmxv</a>)<br/>
<span style="color: #A82F2F"><span style="font-size: small">(21:53:23)</span> <b>B01GA370NNT:</b></span> <br/>
</body>
</html>
