<!DOCTYPE html>
<html>
<head>
<title>Wed Oct 28, 2020 : #operations (osg)</title>
</head>
<body>
<h3>Wed Oct 28, 2020 : #operations (osg)</h3>
<span style="color: #9e3997"><span style="font-size: small">(08:28:36)</span> <b>bbockelm:</b></span> Does anyone have a link for the Nagios monitoring at UNL?<br/>
<span style="color: #235e5b"><span style="font-size: small">(08:48:01)</span> <b>dweitzel:</b></span> <a href="https://hcc-mon2.unl.edu/osgmon/check_mk/index.py?start_url=%2Fosgmon%2Fcheck_mk%2Fdashboard.py">https://hcc-mon2.unl.edu/osgmon/check_mk/index.py?start_url=%2Fosgmon%2Fcheck_mk%2Fdashboard.py</a><br/>
<span style="color: #9d8eee"><span style="font-size: small">(09:14:33)</span> <b>cat:</b></span> BTW, we already have a request from NSF to produce a 1-page summary and evaluation of this outage, so keep that in mind and maybe write down some notes now about timelines, etc.<br/>
<span style="color: #9d8eee"><span style="font-size: small">(09:14:54)</span> <b>cat:</b></span> Well, technically, the 1-page idea comes from Frank, but the NSF request is still there.<br/>
<span style="color: #c386df"><span style="font-size: small">(09:17:15)</span> <b>matyas:</b></span> @efajardo ok _now_ it's fixed. <a href="https://topology-itb.opensciencegrid.org/stashcache/scitokens?cache_fqdn=xcache.cr.cnaf.infn.it">https://topology-itb.opensciencegrid.org/stashcache/scitokens?cache_fqdn=xcache.cr.cnaf.infn.it</a><br/>
<span style="color: #c386df"><span style="font-size: small">(09:17:57)</span> <b>matyas:</b></span> ... if this is what you're expecting:<br/><pre>[Global]<br/>audience = HCC, GLOW<br/><br/>[Issuer /hcc/PROTECTED]<br/>issuer = <a href="https://scitokens.org/hcc">https://scitokens.org/hcc</a><br/>base_path = /hcc<br/><br/><br/>[Issuer /chtc/PROTECTED]<br/>issuer = <a href="https://scitokens.org/chtc">https://scitokens.org/chtc</a><br/>base_path = /chtc</pre><br/><br/>
<span style="color: #235e5b"><span style="font-size: small">(10:39:44)</span> <b>dweitzel:</b></span> Things are quickly come back online here at Nebraska.  GRACC is at ~25% back, growing about a percent a minute.<br/>
<span style="color: #53b759"><span style="font-size: small">(10:40:07)</span> <b>marian:</b></span> thanks for a note, I'll watch gracc ...<br/>
<span style="color: #53b759"><span style="font-size: small">(10:41:42)</span> <b>marian:</b></span> are we expecting guys doing UPS maintenance (or any other electric work) causing any shutdowns today?<br/>
<span style="color: #53b759"><span style="font-size: small">(10:42:18)</span> <b>marian:</b></span> they were about to come at 11am to PKI ... or are they already gone?<br/>
<span style="color: #385a86"><span style="font-size: small">(10:42:21)</span> <b>jdost321:</b></span> Stephan Lammel opened a ticket stating the topology feed is broken <a href="https://my.opensciencegrid.org/rgsummary/xml">https://my.opensciencegrid.org/rgsummary/xml</a> is this somethign that should be back up with the topology-itb instance?<br/>
<span style="color: #385a86"><span style="font-size: small">(10:42:29)</span> <b>jdost321:</b></span> <a href="https://opensciencegrid.freshdesk.com/a/tickets/65950">https://opensciencegrid.freshdesk.com/a/tickets/65950</a><br/>
<span style="color: #235e5b"><span style="font-size: small">(10:42:33)</span> <b>dweitzel:</b></span> Nope, UPS guy was there already this morning, and the work is done.<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:42:52)</span> <b>dweitzel:</b></span> Also, topology and repo are back.<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:43:07)</span> <b>dweitzel:</b></span> Please revert any temporary fixes.  I see repo is going "mash" crazy.<br/>
<span style="color: #385a86"><span style="font-size: small">(10:43:10)</span> <b>jdost321:</b></span> i'm getting "Internal Server Error" when visiting that link<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:43:12)</span> <b>dweitzel:</b></span> which is a good thing.<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:44:19)</span> <b>dweitzel:</b></span> @matyas could you take a look at topology.  There are application errors in the logs.<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:44:33)</span> <b>dweitzel:</b></span> Maybe things didn't startup in the correct order?<br/>
<span style="color: #c386df"><span style="font-size: small">(10:45:15)</span> <b>matyas:</b></span> I forget which one's the topology host and which one's the topology-itb host<br/>
<span style="color: #c386df"><span style="font-size: small">(10:45:27)</span> <b>matyas:</b></span> is hcc-osg-topology the production one?<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:45:35)</span> <b>dweitzel:</b></span> yes, hcc-osg-topology<br/>
<span style="color: #43761b"><span style="font-size: small">(10:46:34)</span> <b>blin:</b></span> should i revert the repo/repo-itb switch? <a href="https://support.opensciencegrid.org/a/tickets/65943">https://support.opensciencegrid.org/a/tickets/65943</a><br/>
<span style="color: #235e5b"><span style="font-size: small">(10:47:09)</span> <b>dweitzel:</b></span> yes please.<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:47:12)</span> <b>dweitzel:</b></span> repo looks good.<br/>
<span style="color: #9d8eee"><span style="font-size: small">(10:52:04)</span> <b>cat:</b></span> Thank you, everyone, for the updates. Glad to hear things are going (mostly) well now!<br/>
<span style="color: #9d8eee"><span style="font-size: small">(10:52:56)</span> <b>cat:</b></span> @jdost321, please start preparing an all-clear email. I think it should list major services that were affected and are (will be when the email is actually sent) back to full functioning.<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:53:53)</span> <b>dweitzel:</b></span> GRACC is now in "Yellow" status.  Which means it's still recovering, but all results will be correct when looking at the interface.<br/>
<span style="color: #c386df"><span style="font-size: small">(10:54:02)</span> <b>matyas:</b></span> @dweitzel fixed. the checkout of the contact repo somehow got wedged and gave "fatal: index file smaller than expected" for every git operation<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:54:14)</span> <b>dweitzel:</b></span> interesting, corrupted git repo?<br/>
<span style="color: #53b759"><span style="font-size: small">(10:54:18)</span> <b>marian:</b></span> yeah, 53%, gracc, recovering quickly<br/>
<span style="color: #c386df"><span style="font-size: small">(10:54:23)</span> <b>matyas:</b></span> apparently so<br/>
<span style="color: #9d8eee"><span style="font-size: small">(10:58:29)</span> <b>cat:</b></span> Can the git repository be recovered?<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:01:32)</span> <b>dweitzel:</b></span> authortative git repo is on github, so no danger of losing any data.<br/>
<span style="color: #c386df"><span style="font-size: small">(11:01:38)</span> <b>matyas:</b></span> Yeah it's just a cache.<br/>
<span style="color: #c386df"><span style="font-size: small">(11:01:47)</span> <b>matyas:</b></span> I nuked it and topology recreated it.<br/>
<span style="color: #385a86"><span style="font-size: small">(11:01:59)</span> <b>jdost321:</b></span> I can confirm <a href="https://my.opensciencegrid.org/rgsummary/xml">https://my.opensciencegrid.org/rgsummary/xml</a> is working again<br/>
<span style="color: #c386df"><span style="font-size: small">(11:02:09)</span> <b>matyas:</b></span> :+1::skin-tone-2:<br/>
<span style="color: #9d8eee"><span style="font-size: small">(11:25:42)</span> <b>cat:</b></span> Does someone (@jdost321, @bbockelm?) have a checklist of services to review and sign off on?<br/>
<span style="color: #385a86"><span style="font-size: small">(11:29:46)</span> <b>jdost321:</b></span> here's a list of affected services I aggregated from this thread, I gather all are back, but GRACC is still recovering?<br/><pre>- GRACC<br/>- Topology<br/>- OASIS<br/>- software repository<br/>- data federation</pre><br/>
<span style="color: #c386df"><span style="font-size: small">(11:30:21)</span> <b>matyas:</b></span> service catalog? <a href="https://docs.google.com/spreadsheets/d/1cIu0YcNAT8Kiy5u2xBz8ZzG2zImVK3pRX9iFHegIjUk/edit#gid=0">https://docs.google.com/spreadsheets/d/1cIu0YcNAT8Kiy5u2xBz8ZzG2zImVK3pRX9iFHegIjUk/edit#gid=0</a><br/>
<span style="color: #9e3997"><span style="font-size: small">(11:30:33)</span> <b>bbockelm:</b></span> (that appears correct but please also cross-check against the service catalog - that's what I was doing yesterday)<br/>
<span style="color: #385a86"><span style="font-size: small">(11:34:24)</span> <b>jdost321:</b></span> yes, i've been comparing with the catalog<br/>
<span style="color: #9d8eee"><span style="font-size: small">(12:10:36)</span> <b>cat:</b></span> Ok, so assuming GRACC will be all green soon, letâ€™s hold the all-clear until then.<br/>
<span style="color: #385a86"><span style="font-size: small">(12:12:19)</span> <b>jdost321:</b></span> Tim we just discussed this on the ops stand-up, Derek gave us the green light for GRACC (it still is healing replicas in the background but is up from the perspective of end users)<br/>
<span style="color: #385a86"><span style="font-size: small">(12:12:48)</span> <b>jdost321:</b></span> I'm in the process of sending the email update, but my mail client is being slow today<br/>
<span style="color: #53b759"><span style="font-size: small">(12:26:11)</span> <b>marian:</b></span> GRACC is 97% health status<br/>
<span style="color: #53b759"><span style="font-size: small">(12:26:18)</span> <b>marian:</b></span> still recovering, slowly lasts bits<br/>
<span style="color: #53b759"><span style="font-size: small">(12:26:47)</span> <b>marian:</b></span> otherwise, yeah, we can consider GRACC good for the users<br/>
</body>
</html>
