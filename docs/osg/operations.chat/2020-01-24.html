<!DOCTYPE html>
<html>
<head>
<title>Fri Jan 24, 2020 : #operations (osg)</title>
</head>
<body>
<h3>Fri Jan 24, 2020 : #operations (osg)</h3>
<span style="color: #53b759"><span style="font-size: small">(12:25:08)</span> <b>marian:</b></span> anybody familiar with ARA VO recently added to the topology?<br/>
<span style="color: #53b759"><span style="font-size: small">(12:26:03)</span> <b>marian:</b></span> they have listed OASISRepoURLs in the topology but didn't request create them on particular servers ...<br/>
<span style="color: #53b759"><span style="font-size: small">(12:26:17)</span> <b>marian:</b></span> <a href="https://github.com/opensciencegrid/topology/blob/master/virtual-organizations/ARA.yaml#L26-L27">https://github.com/opensciencegrid/topology/blob/master/virtual-organizations/ARA.yaml#L26-L27</a><br/>
<span style="color: #43761b"><span style="font-size: small">(12:27:35)</span> <b>blin:</b></span> ah, i think we dropped the ball on that then<br/>
<span style="color: #43761b"><span style="font-size: small">(12:27:46)</span> <b>blin:</b></span> are there docs for requesting a new CVMFS OASIS repo?<br/>
<span style="color: #53b759"><span style="font-size: small">(12:27:53)</span> <b>marian:</b></span> that makes our monitoring of <tt>Stratum1mon osg=CRITICAL</tt> as the repo "repo": "<a href="http://ara.opensciencegrid.org">ara.opensciencegrid.org</a>" can't be updated<br/>
<span style="color: #53b759"><span style="font-size: small">(12:28:36)</span> <b>marian:</b></span> yes, that should follow <a href="https://opensciencegrid.org/docs/data/external-oasis-repos/#hosting-a-repository-on-oasis">https://opensciencegrid.org/docs/data/external-oasis-repos/#hosting-a-repository-on-oasis</a><br/>
<span style="color: #53b759"><span style="font-size: small">(12:28:43)</span> <b>marian:</b></span> on the admin side<br/>
<span style="color: #43761b"><span style="font-size: small">(12:29:20)</span> <b>blin:</b></span> what do we have to do between steps 3 and 4?<br/>
<span style="color: #43761b"><span style="font-size: small">(12:31:48)</span> <b>blin:</b></span> (other than topology registration)<br/>
<span style="color: #53b759"><span style="font-size: small">(12:53:01)</span> <b>marian:</b></span> actually, I see it should include also OASIS manager, i.e. update the .yaml with:<br/><pre>OASIS:<br/>  Managers:<br/>    - Name:<br/>      DNs:<br/>      - <br/>      ID:</pre><br/>
<span style="color: #53b759"><span style="font-size: small">(13:02:49)</span> <b>marian:</b></span> @blin, there is an example how freshdesk look like when new repo comes in: <a href="https://support.opensciencegrid.org/a/tickets/7533">https://support.opensciencegrid.org/a/tickets/7533</a> ... other than that, just #2 on the external-oasis-repos page I sent you (I also double-checked with @dwd).  So just register in the topology, and after we have the ticket we send also tje request to replicate at BNL. @dwd can correct me if there is anything to add.<br/>
<span style="color: #43761b"><span style="font-size: small">(13:30:05)</span> <b>blin:</b></span> ok so since ARA is registered in topology, you just have to send the request to BNL?<br/>
<span style="color: #43761b"><span style="font-size: small">(13:30:29)</span> <b>blin:</b></span> @jdost321 in the future, should we just re-assign all of these CVMFS repo requests to Operations?<br/>
<span style="color: #385a86"><span style="font-size: small">(13:56:20)</span> <b>jdost321:</b></span> @blin @marian is there already a freshdesk for this ARA request? Usually when CVMFS items come in via the Operations freshdesk we assign them to Marian anyway, whatever he prefers to track this<br/>
<span style="color: #43761b"><span style="font-size: small">(13:57:47)</span> <b>blin:</b></span> i don't recall there being one, i think we just got the PR: <a href="https://github.com/opensciencegrid/topology/pull/953">https://github.com/opensciencegrid/topology/pull/953</a><br/>
<span style="color: #385a86"><span style="font-size: small">(14:08:40)</span> <b>jdost321:</b></span> sorry, i'm a little confused so what were you referring to here? "in the future, should we just re-assign all of these CVMFS repo requests to Operations?" what repo requests if we don't have freshdesk for it?<br/>
<span style="color: #99a949"><span style="font-size: small">(14:14:19)</span> <b>dwd:</b></span> In this case it wasn’t a CVMFS repo request, it was a request to add a new VO, and I assume David Schultz started from the icecube VO that he was most familiar with and that included an OASIS repository.   The problem that we’re having at the moment and which is causing the alarm is that there isn’t actually any such repository created.  I think the solution in this case is to just delete the OASISRepoURLs entry of <a href="http://cvmfs-stratum0.wipac.wisc.edu/cvmfs/ara.opensciencegrid.org">http://cvmfs-stratum0.wipac.wisc.edu/cvmfs/ara.opensciencegrid.org</a> at least for now, until the repository is created.  Then go through the usual process of adding a repo.<br/>
<span style="color: #99a949"><span style="font-size: small">(14:16:04)</span> <b>dwd:</b></span> Check with David Schultz of course first.  There’s also another URL for <a href="http://ara.osgstorage.org">ara.osgstorage.org</a>, and it doesn’t exist either.  I’m not sure why we haven’t seen the error for that though …<br/>
<span style="color: #99a949"><span style="font-size: small">(14:16:53)</span> <b>dwd:</b></span> Oh, it’s still failing to add that every 15 minutes, and we don’t have an alarm for that.   Now I’m wondering how <a href="http://ara.opensciencegrid.org">ara.opensciencegrid.org</a> made it past that step …<br/>
<span style="color: #99a949"><span style="font-size: small">(14:19:13)</span> <b>dwd:</b></span> According to the logs, there was an <a href="http://ara.opensciencegrid.org">ara.opensciencegrid.org</a> repository created on January 8, but it was deleted yesterday.<br/>
<span style="color: #99a949"><span style="font-size: small">(14:19:58)</span> <b>dwd:</b></span> Here’s my summary of action items:<br/>
<span style="color: #99a949"><span style="font-size: small">(14:20:49)</span> <b>dwd:</b></span> 1. Don’t accept OASISRepoURLs in topology PRs that don’t include involving Operations.<br/>
<span style="color: #99a949"><span style="font-size: small">(14:23:48)</span> <b>dwd:</b></span> 2. Contact David Schultz about what to do with the <a href="http://ara.opensciencegrid.org">ara.opensciencegrid.org</a> repo registration, and get him to confirm that it’s OK to delete the <a href="http://ara.osgstorage.org">ara.osgstorage.org</a> repo URL because there’s been no request to create it.<br/>
<span style="color: #99a949"><span style="font-size: small">(14:25:28)</span> <b>dwd:</b></span> @marian @blin @jdost321 Does that sound right to you?<br/>
<span style="color: #43761b"><span style="font-size: small">(14:26:53)</span> <b>blin:</b></span> that sounds reasonable to me, thanks<br/>
<span style="color: #385a86"><span style="font-size: small">(14:27:04)</span> <b>jdost321:</b></span> Any reason to wait for David S approval to just remove the line in topology immediately, to prevent the errors?<br/>
<span style="color: #43761b"><span style="font-size: small">(14:27:09)</span> <b>blin:</b></span> i can follow up with dave since i assume @efajardo’s ayout tod<br/>
<span style="color: #385a86"><span style="font-size: small">(14:27:26)</span> <b>jdost321:</b></span> Thne let him know to do the correct repo registration w/ freshdesk<br/>
<span style="color: #43761b"><span style="font-size: small">(14:27:48)</span> <b>blin:</b></span> yeah because it sounds like it may have disappeared by accident:<br/>&gt;  According to the logs, there was an <a href="http://ara.opensciencegrid.org">ara.opensciencegrid.org</a> repository created on January 8, but it was deleted yesterday.<br/>
<span style="color: #385a86"><span style="font-size: small">(14:28:20)</span> <b>jdost321:</b></span> ok, makes sense to me<br/>
<span style="color: #99a949"><span style="font-size: small">(14:28:53)</span> <b>dwd:</b></span> Yes currently /cvmfs/ara.opensciencegrid.org can be mounted, it is copied on OSG &amp; FNAL stratum 1s.  Removing it from topology would cause it to be deleted from stratum 1s<br/>
<span style="color: #385a86"><span style="font-size: small">(14:30:16)</span> <b>jdost321:</b></span> Ok, Brian L if you can follow up with Dave S, that would be great. Edgar told me he'd be busy w/ chep papers this week<br/>
<span style="color: #43761b"><span style="font-size: small">(14:54:42)</span> <b>blin:</b></span> @marian just sent the utah factory entry email. could you take a look?<br/>
<span style="color: #43761b"><span style="font-size: small">(15:00:09)</span> <b>blin:</b></span> @jdost321 @marian @dwd i forgot to mention that we got another CVMFS repo request that it sounds like i mishandled: <a href="https://support.opensciencegrid.org/public/tickets/8e855cb8348aee4b4567b2f720dec3cf7de2d003016d6c42f89128929a7a7817">https://support.opensciencegrid.org/public/tickets/8e855cb8348aee4b4567b2f720dec3cf7de2d003016d6c42f89128929a7a7817</a><br/>
<span style="color: #43761b"><span style="font-size: small">(15:00:39)</span> <b>blin:</b></span> i added this: <a href="https://github.com/opensciencegrid/topology/blob/master/virtual-organizations/LArSoft.yaml#L33">https://github.com/opensciencegrid/topology/blob/master/virtual-organizations/LArSoft.yaml#L33</a><br/>
<span style="color: #99a949"><span style="font-size: small">(15:09:07)</span> <b>dwd:</b></span> Your reference to the <a href="https://opensciencegrid.org/docs/data/update-oasis/">https://opensciencegrid.org/docs/data/update-oasis/</a> was incorrect, because this was adding a new external repository, not adding to the oasis repository.  It would have been better to have directed to Marian, but the only thing that’s really missing was the last step to contact BNL to replicate.<br/>
<span style="color: #43761b"><span style="font-size: small">(15:10:09)</span> <b>blin:</b></span> well i thought they'd be updating the repo via OASIS login<br/>
<span style="color: #43761b"><span style="font-size: small">(15:11:00)</span> <b>blin:</b></span> is that not the case if they have OASISRepoURLs, i.e. an external repo?<br/>
<span style="color: #99a949"><span style="font-size: small">(16:36:25)</span> <b>dwd:</b></span> @blin Correct, that’s not the case if they are using an external repo.  The oasis-login machine is only for the <a href="http://oasis.opensciencegrid.org">oasis.opensciencegrid.org</a> repository.<br/>
<span style="color: #43761b"><span style="font-size: small">(16:36:44)</span> <b>blin:</b></span> makes sense. thanks<br/>
</body>
</html>
