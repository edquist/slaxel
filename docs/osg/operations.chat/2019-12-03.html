<!DOCTYPE html>
<html>
<head>
<title>Tue Dec 3, 2019 : #operations (osg)</title>
</head>
<body>
<h3>Tue Dec 3, 2019 : #operations (osg)</h3>
<span style="color: #9e3997"><span style="font-size: small">(08:03:11)</span> <b>bbockelm:</b></span> @marco.mascheroni - any update on the Milwaukee CE (<tt>ce32</tt>)?<br/>
<span style="color: #e23f99"><span style="font-size: small">(08:11:48)</span> <b>marco.mascheroni:</b></span> Let me start working on it now before I get distracted by something else again..<br/>
<span style="color: #9e3997"><span style="font-size: small">(08:56:45)</span> <b>bbockelm:</b></span> thanks!<br/>
<span style="color: #e23f99"><span style="font-size: small">(10:35:32)</span> <b>marco.mascheroni:</b></span> @blin I am getting this for the UWM ce:<br/><pre>[osg01@hosted-ce32 root]$ bosco_cluster -a <a href="mailto:osg01@submit.ligo.uwm.edu">osg01@submit.ligo.uwm.edu</a> condor<br/>Enter the password to copy the ssh keys to <a href="mailto:osg01@submit.ligo.uwm.edu">osg01@submit.ligo.uwm.edu</a>:<br/>ControlSocket <a href="mailto:/tmp/bosco_ssh_control.osg01@submit.ligo.uwm.edu">/tmp/bosco_ssh_control.osg01@submit.ligo.uwm.edu</a>:22 already exists, disabling multiplexing<br/>Traceback (most recent call last):<br/>  File "/usr/bin/bosco_findplatform", line 34, in &lt;module&gt;<br/>    UBUNTU14: "<a href="https://research.cs.wisc.edu/htcondor/bosco/1.3/bosco-1.3-x86_64_Ubuntu14.tar.gz">https://research.cs.wisc.edu/htcondor/bosco/1.3/bosco-1.3-x86_64_Ubuntu14.tar.gz</a>",<br/>NameError: name 'UBUNTU14' is not defined<br/>BOSCO does not support the remote host's OS.<br/>Aborting installation to <a href="mailto:osg01@submit.ligo.uwm.edu">osg01@submit.ligo.uwm.edu</a>.</pre><br/>
<span style="color: #e23f99"><span style="font-size: small">(10:36:17)</span> <b>marco.mascheroni:</b></span> Actually I was having osg-configure hanging indefinitely on:<br/><pre>root       845  0.0  0.3 110232  3764 ?        Ss   Sep09   0:59 /usr/sbin/sshd -D -4<br/>root      2989  0.0  0.4 117176  4816 ?        Ss   09:46   0:00  \_ sshd: root@pts/2<br/>root      2993  0.0  0.2 115384  2084 pts/2    Ss   09:46   0:00  |   \_ -bash<br/>root      4444  0.0  1.7 283644 17564 pts/2    S+   10:28   0:00  |       \_ /usr/bin/python2 /usr/sbin/osg-configure -c -d<br/>osg01     4445  0.0  0.0      0     0 pts/2    Z+   10:28   0:00  |           \_ [bosco_cluster] &lt;defunct&gt;</pre><br/>
<span style="color: #e23f99"><span style="font-size: small">(10:38:23)</span> <b>marco.mascheroni:</b></span> should be an easy fix, trying it out adding <tt>UBUNTU14="UBUNTU14"</tt>manually<br/>
<span style="color: #43761b"><span style="font-size: small">(10:39:54)</span> <b>blin:</b></span> er this is some iffy territory<br/>
<span style="color: #43761b"><span style="font-size: small">(10:40:11)</span> <b>blin:</b></span> @bbockelm UWM is running Ubuntu?<br/>
<span style="color: #e23f99"><span style="font-size: small">(10:40:31)</span> <b>marco.mascheroni:</b></span> there is a variable missing in bosco_cluster<br/>
<span style="color: #e23f99"><span style="font-size: small">(10:40:36)</span> <b>marco.mascheroni:</b></span> UBUNTU14<br/>
<span style="color: #e23f99"><span style="font-size: small">(10:40:57)</span> <b>marco.mascheroni:</b></span> it's not UWM running ubuntu<br/>
<span style="color: #e23f99"><span style="font-size: small">(10:41:13)</span> <b>marco.mascheroni:</b></span> look at the bosco_cluster code<br/>
<span style="color: #43761b"><span style="font-size: small">(10:41:15)</span> <b>blin:</b></span> i'm confused...how has this not come up before?<br/>
<span style="color: #e23f99"><span style="font-size: small">(10:41:45)</span> <b>marco.mascheroni:</b></span> good question, I installed all the packages from scratch today<br/>
<span style="color: #43761b"><span style="font-size: small">(10:41:47)</span> <b>blin:</b></span> we've at least set up the new jersey CE, no?<br/>
<span style="color: #e23f99"><span style="font-size: small">(10:42:00)</span> <b>marco.mascheroni:</b></span> in September, yes<br/>
<span style="color: #43761b"><span style="font-size: small">(10:43:07)</span> <b>blin:</b></span> what condor rpm do you have installed on the CE?<br/>
<span style="color: #e23f99"><span style="font-size: small">(10:45:21)</span> <b>marco.mascheroni:</b></span> <pre>[root@hosted-ce32 ~]# yum list installed condor<br/>Loaded plugins: fastestmirror, priorities<br/>Loading mirror speeds from cached hostfile<br/> * base: <a href="http://mirror.steadfastnet.com">mirror.steadfastnet.com</a><br/> * epel: <a href="http://ord.mirror.rackspace.com">ord.mirror.rackspace.com</a><br/> * extras: <a href="http://mirror.steadfastnet.com">mirror.steadfastnet.com</a><br/> * osg: <a href="http://mirror.hep.wisc.edu">mirror.hep.wisc.edu</a><br/> * updates: <a href="http://mirror.steadfastnet.com">mirror.steadfastnet.com</a><br/>69 packages excluded due to repository priority protections<br/>Installed Packages<br/>condor.x86_64  8.8.6-1.osg35.el7                                                                       @osg-testing</pre><br/>
<span style="color: #e23f99"><span style="font-size: small">(10:46:25)</span> <b>marco.mascheroni:</b></span> <pre>[root@hosted-ce32 ~]# rpm -q --whatprovides /usr/bin/bosco_cluster<br/>condor-bosco-8.8.6-1.osg35.el7.x86_64</pre><br/>
<span style="color: #43761b"><span style="font-size: small">(10:49:45)</span> <b>blin:</b></span> don't install it out of testing<br/>
<span style="color: #43761b"><span style="font-size: small">(10:50:08)</span> <b>blin:</b></span> you should use what's in osg-release now<br/>
<span style="color: #c386df"><span style="font-size: small">(10:50:29)</span> <b>matyas:</b></span> Is there a difference in this case?<br/>
<span style="color: #43761b"><span style="font-size: small">(10:50:58)</span> <b>blin:</b></span> yeah, release has 8.8.5-1.7 and testing has 8.8.6-1 (without any of our patches)<br/>
<span style="color: #c386df"><span style="font-size: small">(10:51:18)</span> <b>matyas:</b></span> oh<br/>
<span style="color: #c386df"><span style="font-size: small">(10:51:21)</span> <b>matyas:</b></span> how/why did that happen?<br/>
<span style="color: #43761b"><span style="font-size: small">(10:51:22)</span> <b>blin:</b></span> <b>@edquist</b> needs to rebuild 8.8.6 with our patches<br/>
<span style="color: #43761b"><span style="font-size: small">(10:51:24)</span> <b>blin:</b></span> dunno<br/>
<span style="color: #e06b56"><span style="font-size: small">(10:51:45)</span> <b>jthiltges:</b></span> Issue might be a mistake in OSG's bosco_https.patch. Need to drop UBUNTU14, maybe.<br/>
<span style="color: #e23f99"><span style="font-size: small">(10:51:46)</span> <b>marco.mascheroni:</b></span> ok, I'll update the installation guide<br/>
<span style="color: #c386df"><span style="font-size: small">(10:52:17)</span> <b>matyas:</b></span> did upstream drop the ubuntu 14 bosco tarball? @tim.theisen<br/>
<span style="color: #43761b"><span style="font-size: small">(10:53:05)</span> <b>blin:</b></span> @marco.mascheroni sorry about that but we had you installing out of testing in september to get the new condor that supports the new bosco version<br/>
<span style="color: #43761b"><span style="font-size: small">(10:53:08)</span> <b>blin:</b></span> and that has since been released<br/>
<span style="color: #e23f99"><span style="font-size: small">(10:53:31)</span> <b>marco.mascheroni:</b></span> yeah, I did not even notice I still had --enablerepo=osg-testing in the instructions<br/>
<span style="color: #c386df"><span style="font-size: small">(10:53:46)</span> <b>matyas:</b></span> sorry I don't think we remembered to tell you to take it out<br/>
<span style="color: #e23f99"><span style="font-size: small">(10:53:52)</span> <b>marco.mascheroni:</b></span> should I reinstall everything?<br/>
<span style="color: #e23f99"><span style="font-size: small">(10:54:16)</span> <b>marco.mascheroni:</b></span> or with the fix it should work<br/>
<span style="color: #c386df"><span style="font-size: small">(10:54:28)</span> <b>matyas:</b></span> <tt>yum downgrade condor\*</tt> ought to work to downgrade it to 8.8.5-1.7<br/>
<span style="color: #e23f99"><span style="font-size: small">(10:54:34)</span> <b>marco.mascheroni:</b></span> (adding the UBUNTU14 variable)<br/>
<span style="color: #73769d"><span style="font-size: small">(10:54:38)</span> <b>tim.theisen:</b></span> Ubuntu dropped their 14.04 repositories. Can't even update the OS. So, we are not building for Ubuntu 14 any longer.<br/>
<span style="color: #e23f99"><span style="font-size: small">(10:55:22)</span> <b>marco.mascheroni:</b></span> but the site is not useng ubuntu, it's just that the bosco_cluster script was not even starting because of a missing variable. I fixed that and I was able to run osg-configure<br/>
<span style="color: #e23f99"><span style="font-size: small">(10:55:59)</span> <b>marco.mascheroni:</b></span> (I am fine with continuing with testing and reporting if I find other issues if you think it is useful)<br/>
<span style="color: #e06b56"><span style="font-size: small">(10:56:08)</span> <b>jthiltges:</b></span> I'm a fan of <tt>yum distro-sync</tt> for cases like this. It'll upgrade or downgrade to match the currently enabled repos.<br/>
<span style="color: #43761b"><span style="font-size: small">(10:56:24)</span> <b>blin:</b></span> nah, i don't think testing will necessarily be stable enough<br/>
<span style="color: #e23f99"><span style="font-size: small">(10:56:53)</span> <b>marco.mascheroni:</b></span> ok, distro-sync it is<br/>
<span style="color: #43761b"><span style="font-size: small">(10:56:56)</span> <b>blin:</b></span> i think you should use release as the default and only dip into testing or development if there are pressing fixes or features that you need<br/>
<span style="color: #43761b"><span style="font-size: small">(10:57:54)</span> <b>blin:</b></span> ah it's not that our testing build doesn't have our patches applied, it's just that our patch is broken like you said @marco.mascheroni<br/>
<span style="color: #43761b"><span style="font-size: small">(10:58:59)</span> <b>blin:</b></span> <b>@edquist</b> please rebuild condor 8.8.5 and drop the <tt>UBUNTU14</tt> line from the <tt>bosco_https.patch</tt><br/>
<span style="color: #43761b"><span style="font-size: small">(10:59:15)</span> <b>blin:</b></span> and make sure to set the release number to 1.x!<br/>
<span style="color: #e23f99"><span style="font-size: small">(11:17:10)</span> <b>marco.mascheroni:</b></span> @blin Just to be sure, I should still use osg  3.5, not 3.4, right?<br/>
<span style="color: #43761b"><span style="font-size: small">(11:17:34)</span> <b>blin:</b></span> correct<br/>
<span style="color: #73769d"><span style="font-size: small">(11:24:37)</span> <b>tim.theisen:</b></span> @blin, <b>@edquist</b>: Don't forget to rebuild 8.8.6 as well, since it is ready for testing.<br/>
<span style="color: #43761b"><span style="font-size: small">(11:24:50)</span> <b>blin:</b></span> err sorry, i meant 8.8.6 above<br/>>  <b>@edquist</b> please rebuild condor 8.8.6 and drop the <tt>UBUNTU14</tt> line from the <tt>bosco_https.patch</tt><br/>
<span style="color: #16569E"><span style="font-size: small">(12:26:19)</span> <b>edquist:</b></span> new builds complete, will lick off vmu tests<br/>
<span style="color: #e23f99"><span style="font-size: small">(12:36:08)</span> <b>marco.mascheroni:</b></span> Never seen this:<br/><pre>12/03/19 12:23:43 [9108] Found job 12.0 --- inserting<br/>12/03/19 12:23:44 [9108] gahp server not up yet, delaying ping<br/>12/03/19 12:23:44 [9108] (12.0) doEvaluateState called: gmState GM_INIT, remoteState 0<br/>12/03/19 12:23:44 [9108] GAHP server pid = 9115<br/>12/03/19 12:23:46 [9108] GAHP server pid = 9138<br/>12/03/19 12:23:49 [9108] resource <a href="mailto:osg01@submit.ligo.uwm.edu">osg01@submit.ligo.uwm.edu</a> is now up<br/>12/03/19 12:23:49 [9108] (12.0) doEvaluateState called: gmState GM_SAVE_SANDBOX_ID, remoteState 0<br/>12/03/19 12:23:51 [9108] File transfer completed successfully.<br/>12/03/19 12:23:51 [9108] (12.0) doEvaluateState called: gmState GM_TRANSFER_INPUT, remoteState 0<br/>12/03/19 12:23:51 [9108] (12.0) doEvaluateState called: gmState GM_SUBMIT, remoteState 0<br/>12/03/19 12:23:54 [9108] (12.0) doEvaluateState called: gmState GM_SUBMIT_SAVE, remoteState 0<br/>12/03/19 12:24:54 [9108] (12.0) doEvaluateState called: gmState GM_SUBMITTED, remoteState 0<br/>12/03/19 12:24:54 [9108] (12.0) doEvaluateState called: gmState GM_POLL_ACTIVE, remoteState 0<br/>12/03/19 12:25:54 [9108] (12.0) doEvaluateState called: gmState GM_SUBMITTED, remoteState 0<br/>12/03/19 12:25:54 [9108] (12.0) doEvaluateState called: gmState GM_POLL_ACTIVE, remoteState 0<br/>12/03/19 12:26:54 [9108] (12.0) doEvaluateState called: gmState GM_SUBMITTED, remoteState 0<br/>12/03/19 12:26:54 [9108] (12.0) doEvaluateState called: gmState GM_POLL_ACTIVE, remoteState 0<br/>12/03/19 12:27:54 [9108] (12.0) doEvaluateState called: gmState GM_SUBMITTED, remoteState 0<br/>12/03/19 12:27:55 [9108] (12.0) doEvaluateState called: gmState GM_POLL_ACTIVE, remoteState 0<br/>12/03/19 12:28:55 [9108] (12.0) doEvaluateState called: gmState GM_SUBMITTED, remoteState 0<br/>12/03/19 12:28:55 [9108] (12.0) doEvaluateState called: gmState GM_POLL_ACTIVE, remoteState 0<br/>12/03/19 12:28:55 [9108] (12.0) blah_job_status() failed: status command failed: grep: /cache.osg.: No such file or directory-Error: Collector has no record of schedd/submitter-/usr/bin/condor_config_val: unknown host osg-Error: Collector has no record of schedd/submitter-<br/>12/03/19 12:28:55 [9108] No jobs left, shutting down<br/>12/03/19 12:28:55 [9108] Got SIGTERM. Performing graceful shutdown.<br/>12/03/19 12:28:55 [9108] **** condor_gridmanager (condor_GRIDMANAGER) pid 9108 EXITING WITH STATUS 0</pre><br/>
<span style="color: #e23f99"><span style="font-size: small">(12:36:26)</span> <b>marco.mascheroni:</b></span> Looks like on the (condor) batch sustem the job is still running<br/>
<span style="color: #e23f99"><span style="font-size: small">(12:37:05)</span> <b>marco.mascheroni:</b></span> short test jobs were successful, is the condor_ce not able to query the status of the job on the batch system for some reason?<br/>
<span style="color: #e23f99"><span style="font-size: small">(12:37:16)</span> <b>marco.mascheroni:</b></span> (gotta go now, I'll check this later)<br/>
<span style="color: #43761b"><span style="font-size: small">(12:51:00)</span> <b>blin:</b></span> that's a weird one<br/>
<span style="color: #43761b"><span style="font-size: small">(12:51:09)</span> <b>blin:</b></span> is the remote user osg or osg01?<br/>
<span style="color: #e23f99"><span style="font-size: small">(13:36:00)</span> <b>marco.mascheroni:</b></span> osg01<br/>
<span style="color: #43761b"><span style="font-size: small">(14:10:01)</span> <b>blin:</b></span> hrm, looking at the code i would expect that to be looking for /tmp/cache.osg<br/>
<span style="color: #43761b"><span style="font-size: small">(14:16:19)</span> <b>blin:</b></span> <b>@edquist</b> any ideas?<br/>
<span style="color: #16569E"><span style="font-size: small">(14:19:44)</span> <b>edquist:</b></span> It says it's looking for <tt>/cache/osg.</tt> - that looks suspicious<br/>
<span style="color: #43761b"><span style="font-size: small">(14:20:03)</span> <b>blin:</b></span> yeah, <tt>/cache.osg</tt><br/>
<span style="color: #43761b"><span style="font-size: small">(14:20:44)</span> <b>blin:</b></span> from what i can tell, that's coming from this line: <a href="https://github.com/htcondor/BLAH/blob/devel/src/scripts/condor_status.sh#L48">https://github.com/htcondor/BLAH/blob/devel/src/scripts/condor_status.sh#L48</a><br/>
<span style="color: #43761b"><span style="font-size: small">(14:21:34)</span> <b>blin:</b></span> but <tt>GAHP_TEMP</tt>  should have a default of <tt>/tmp</tt> from what i can tell: <a href="https://github.com/htcondor/BLAH/blob/devel/src/server.c#L374-L377">https://github.com/htcondor/BLAH/blob/devel/src/server.c#L374-L377</a><br/>
<span style="color: #43761b"><span style="font-size: small">(14:22:47)</span> <b>blin:</b></span> looking at some of the other error messages, <tt>Error: Collector has no record of schedd/submitter</tt> comes from the condor_q code but I'm not sure exactly what triggers it<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:28:33)</span> <b>marco.mascheroni:</b></span> Ah wait, I think I know what it is<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:30:34)</span> <b>marco.mascheroni:</b></span> In the form the admin said he wanted to set the scratch area to $_CONDOR_SCRATCH_DIR, which possibly due to missing escaping from my side makes: worker_node_temp =<br/>
<blockquote>
<span style="color: #43761b"><span style="font-size: small">(14:34:09)</span> <b>blin:</b></span> @marco.mascheroni i'm curious do you have this type of dynamic WN type stuff working on other CEs?<br/>
<span style="color: #43761b"><span style="font-size: small">(14:35:42)</span> <b>blin:</b></span> because i was looking at the CE code and it really doesn't look like it should work, at least how we document it<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:36:21)</span> <b>marco.mascheroni:</b></span> No, it's the first CE that is using this<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:37:27)</span> <b>marco.mascheroni:</b></span> to be honest I double checked, and since I got confused by some warnings I set <tt>worker_node_temp = </tt><br/>
<span style="color: #e23f99"><span style="font-size: small">(14:37:42)</span> <b>marco.mascheroni:</b></span> now I set it to <tt>worker_node_temp = \$_CONDOR_SCRATCH_DIR</tt><br/>
<span style="color: #e23f99"><span style="font-size: small">(14:38:13)</span> <b>marco.mascheroni:</b></span> I seem to remember that it was evaluating the variable and setting the tmdir to empty anyhow<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:38:28)</span> <b>marco.mascheroni:</b></span> but it's late here, so I am not so sure anymore<br/>
<span style="color: #43761b"><span style="font-size: small">(14:39:00)</span> <b>blin:</b></span> yeah, i'm concerned that this doesn't work at all with our current CE<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:40:00)</span> <b>marco.mascheroni:</b></span> The other important piece of the puzzle is that we need to set <tt>&lt;entry name="OSG_US_UWM_NEMO" ... work_dir="Condor"&gt;</tt><br/>
<span style="color: #e23f99"><span style="font-size: small">(14:40:13)</span> <b>marco.mascheroni:</b></span> instead of <tt>work_dir=OSG</tt> as usual<br/>
<span style="color: #43761b"><span style="font-size: small">(14:40:57)</span> <b>blin:</b></span> what's that mean in the factory again?<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:42:28)</span> <b>marco.mascheroni:</b></span> from <a href="https://glideinwms.fnal.gov/doc.prd/factory/configuration.html">https://glideinwms.fnal.gov/doc.prd/factory/configuration.html</a><br/>
<span style="color: #e23f99"><span style="font-size: small">(14:42:37)</span> <b>marco.mascheroni:</b></span> <pre>&lt;glidein&gt;&lt;entries&gt;&lt;entry name="entry name" work_dir="WN dir"&gt;<br/>Recommended: This argument defines where the glidein should run once on the worker node.<br/>Options are: ".", Condor (CONDOR), OSG, TMPDIR, AUTO<br/><br/>    ".": run in pwd<br/>    Condor (CONDOR): will run in $_CONDOR_SCRATCH_DIR<br/>    OSG: will run in $OSG_WN_TMP<br/>    TMPDIR: will run in $TMPDIR<br/>    AUTO: will try to determine which direcotry has enogh space (at least 1 GB of free space). Directory checked are $_CONDOR_SCRATCH_DIR, $OSG_WN_TMP $TG_NODE_SCRATCH, $TG_CLUSTER_SCRATCH, $SCRATCH $TMPDIR, $TMP, $PWD (in this order) </pre><br/><br/>
<span style="color: #e23f99"><span style="font-size: small">(14:43:10)</span> <b>marco.mascheroni:</b></span> but that's the glidein_startup.sh stuff<br/>
<span style="color: #43761b"><span style="font-size: small">(14:51:34)</span> <b>blin:</b></span> yeah, i'd ultimately want everything to use OSG_WN_TMP that's in the OSG<br/>
<span style="color: #43761b"><span style="font-size: small">(14:51:51)</span> <b>blin:</b></span> because we support things that aren't GlideinWMS or Condor<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:57:29)</span> <b>marco.mascheroni:</b></span> ok<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:57:49)</span> <b>marco.mascheroni:</b></span> I'll change it back to OSG<br/>
</blockquote>
<span style="color: #43761b"><span style="font-size: small">(14:32:17)</span> <b>blin:</b></span> ah ok<br/>
<span style="color: #16569E"><span style="font-size: small">(14:32:24)</span> <b>edquist:</b></span> ah, i typed wrong with the extra slash, but one weird part that got my attention was the trailing . in the error message for <tt>/cache.osg.</tt><br/>
<span style="color: #43761b"><span style="font-size: small">(14:32:48)</span> <b>blin:</b></span> ah good catch, i missed that trailing <tt>.</tt><br/>
<span style="color: #16569E"><span style="font-size: small">(14:33:05)</span> <b>edquist:</b></span> but anyway with the linked code i guess it makes sense if some of those variables are not set<br/>
<span style="color: #43761b"><span style="font-size: small">(14:33:42)</span> <b>blin:</b></span> ya<br/>
<span style="color: #16569E"><span style="font-size: small">(14:34:36)</span> <b>edquist:</b></span> <tt>GAHP_TEMP="" CACHE_PREFIX="cache" queue="osg" pool=""</tt><br/>
<span style="color: #43761b"><span style="font-size: small">(14:34:55)</span> <b>blin:</b></span> yeah<br/>
<span style="color: #16569E"><span style="font-size: small">(14:35:00)</span> <b>edquist:</b></span> <a href="https://github.com/htcondor/BLAH/blob/devel/src/scripts/condor_status.sh#L42-L43">https://github.com/htcondor/BLAH/blob/devel/src/scripts/condor_status.sh#L42-L43</a><br/>
<span style="color: #16569E"><span style="font-size: small">(14:35:04)</span> <b>edquist:</b></span> this is a lie btw<br/>
<span style="color: #16569E"><span style="font-size: small">(14:35:14)</span> <b>edquist:</b></span> about an empty string being returned<br/>
<span style="color: #43761b"><span style="font-size: small">(14:35:22)</span> <b>blin:</b></span> lol yeah<br/>
<span style="color: #43761b"><span style="font-size: small">(14:35:24)</span> <b>blin:</b></span> very much so<br/>
<span style="color: #16569E"><span style="font-size: small">(14:39:10)</span> <b>edquist:</b></span> lol the race condition described in here is kind of funny<br/>
<span style="color: #16569E"><span style="font-size: small">(14:39:11)</span> <b>edquist:</b></span> <a href="https://github.com/htcondor/BLAH/blob/devel/src/scripts/condor_status.sh#L169">https://github.com/htcondor/BLAH/blob/devel/src/scripts/condor_status.sh#L169</a><br/>
<span style="color: #16569E"><span style="font-size: small">(14:39:44)</span> <b>edquist:</b></span> it runs the grep twice, to hope for the best a little harder<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:49:27)</span> <b>marco.mascheroni:</b></span> Anyway, on the cluster head node:<br/><pre>[osg01@submit ~]$ echo $_CONDOR_SCRATCH_DIR</pre><br/>
<span style="color: #e23f99"><span style="font-size: small">(14:49:30)</span> <b>marco.mascheroni:</b></span> it's empty<br/>
<span style="color: #43761b"><span style="font-size: small">(14:50:01)</span> <b>blin:</b></span> yeah, i'm not sure if that's necessarily related to the errors you're seeing<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:50:17)</span> <b>marco.mascheroni:</b></span> ok, it is set on the WN FWIW<br/>
<span style="color: #43761b"><span style="font-size: small">(14:52:34)</span> <b>blin:</b></span> yeah, are you doing it through osg-configure and the worker_node_temp or via factory entry?<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:57:01)</span> <b>marco.mascheroni:</b></span> I set work_dir="Condor" in the factory entry<br/>
<span style="color: #43761b"><span style="font-size: small">(15:01:26)</span> <b>blin:</b></span> ok, like i mentioned, i'd like to move away from that in the US but that'll have to do for now<br/>
<span style="color: #43761b"><span style="font-size: small">(15:01:35)</span> <b>blin:</b></span> does condor_status.sh work now?<br/>
<span style="color: #e23f99"><span style="font-size: small">(15:01:42)</span> <b>marco.mascheroni:</b></span> yeah, I reverted to work_dir=OSG already<br/>
<span style="color: #43761b"><span style="font-size: small">(15:02:00)</span> <b>blin:</b></span> ah but the dynamic worker node temp dir may be buggy<br/>
<span style="color: #43761b"><span style="font-size: small">(15:02:09)</span> <b>blin:</b></span> so you may have to set it to condor to get it to work<br/>
<span style="color: #e23f99"><span style="font-size: small">(15:02:42)</span> <b>marco.mascheroni:</b></span> nope, with OSG_WN_TMP="\$_CONDOR_SCRATCH_DIR" id does not work (from <tt>/var/lib/osg/osg-job-environment.conf</tt> )<br/>
<span style="color: #e23f99"><span style="font-size: small">(15:03:07)</span> <b>marco.mascheroni:</b></span> I remember something like that, do you have the ticket handy?<br/>
<span style="color: #e23f99"><span style="font-size: small">(15:30:52)</span> <b>marco.mascheroni:</b></span> (I meant this ticket <a href="https://opensciencegrid.atlassian.net/browse/SOFTWARE-2521">https://opensciencegrid.atlassian.net/browse/SOFTWARE-2521</a>). will continue tomorrow<br/>
</body>
</html>
