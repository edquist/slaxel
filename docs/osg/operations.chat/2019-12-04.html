<!DOCTYPE html>
<html>
<head>
<title>Wed Dec 4, 2019 : #operations (osg)</title>
</head>
<body>
<h3>Wed Dec 4, 2019 : #operations (osg)</h3>
<span style="color: #e23f99"><span style="font-size: small">(08:18:12)</span> <b>marco.mascheroni:</b></span> Hi @blin, I was able to temporarily fix the condor_status.sh script by adding:<br/><tt>export GAHP_TEMP=/tmp</tt><br/>at the beginning, and<br/><pre>            local target="-name $queue"<br/>            local target="-name <a href="http://submit.nemo.uwm.edu">submit.nemo.uwm.edu</a>"</pre><br/>
<span style="color: #e23f99"><span style="font-size: small">(08:18:36)</span> <b>marco.mascheroni:</b></span> on a couple of places. Do we understand why the queue is wrong?<br/>
<span style="color: #e23f99"><span style="font-size: small">(08:20:53)</span> <b>marco.mascheroni:</b></span> About the dynamic worker node tmp dir, I can't find a way to make this work other than using work_dir="Condor" in the factory, or manually hardcoding OSG_WN_TMP to a value.. Any suggestion?<br/>
<span style="color: #43761b"><span style="font-size: small">(08:29:39)</span> <b>blin:</b></span> I think dynamic wn tmp is severely broken and has been for years<br/>
<span style="color: #43761b"><span style="font-size: small">(08:29:50)</span> <b>blin:</b></span> so for now, set <tt>work_dir="Condor"</tt> in the factory until we have a fix<br/>
<span style="color: #43761b"><span style="font-size: small">(08:30:21)</span> <b>blin:</b></span> for the <tt>condor_status.sh</tt> brokenness, can you open a freshdesk ticket and assign it to Software/Carl?<br/>
<span style="color: #9e3997"><span style="font-size: small">(10:11:10)</span> <b>bbockelm:</b></span> (How is the UWM CE going?)<br/>
<span style="color: #e23f99"><span style="font-size: small">(10:20:42)</span> <b>marco.mascheroni:</b></span> Few issues, the, automatic discovery of the tmpdir is not working, and condor_status.sh being broken, but I have the workarounds for that. I just launched a test pilot from the factory, if it succeds we are good<br/>
<span style="color: #9e3997"><span style="font-size: small">(11:48:01)</span> <b>bbockelm:</b></span> great.  I'll ping Shawn again about the correct ligo tag.<br/>
<span style="color: #9e3997"><span style="font-size: small">(11:48:26)</span> <b>bbockelm:</b></span> actually, @efajardo probably knows that -- Edgar, what's the accounting tag being used for pilots at the LIGO CIT cluster?<br/>
<span style="color: #a63024"><span style="font-size: small">(11:51:02)</span> <b>efajardo:</b></span> They do not use any<br/>
<span style="color: #a63024"><span style="font-size: small">(11:51:04)</span> <b>efajardo:</b></span> <pre>condor_q -all -l 217544.0 | grep tag -i<br/>Arguments = "-v std -name gfactory_instance -entry LIGO_US_Caltech_ldas-grid -clientname osg-ligo-1-t2-ucsd-edu_OSG_gWMSFrontend.itb-ligo -schedd <a href="mailto:schedd_glideins2@gfactory-itb-1.opensciencegrid.org">schedd_glideins2@gfactory-itb-1.opensciencegrid.org</a> -proxy OSG -factory OSG-ITB -web <a href="http://gfactory-itb-1.opensciencegrid.org/factory/stage">http://gfactory-itb-1.opensciencegrid.org/factory/stage</a> -sign 0972f2b5d0656f868cb714cde8931a72961c610d -signentry db481cd3c28a00ce5ccebcb0d37b086a08fe9920 -signtype sha1 -descript description.jc47xp.cfg -descriptentry description.jc47xp.cfg -dir Condor -param_GLIDEIN_Client osg-ligo-1-t2-ucsd-edu_OSG_gWMSFrontend.itb-ligo -submitcredid 534414 -slotslayout fixed -clientweb <a href="http://osg-ligo-1.t2.ucsd.edu/vofrontend/stage">http://osg-ligo-1.t2.ucsd.edu/vofrontend/stage</a> -clientsign 86c7c294d94fcf3dae59db50f8812137716ac585 -clientsigntype sha1 -clientdescript description.jc2n1i.cfg -clientgroup itb-ligo -clientwebgroup <a href="http://osg-ligo-1.t2.ucsd.edu/vofrontend/stage/group_itb-ligo">http://osg-ligo-1.t2.ucsd.edu/vofrontend/stage/group_itb-ligo</a> -clientsigngroup 0880f4dce593d2e4acf603ba1a2536c296b57dac -clientdescriptgroup description.jc2n1i.cfg -param_CONDOR_VERSION 8.dot,8.dot,x -param_GLIDEIN_CLAIM_WORKLIFE 10800 -param_GLIDEIN_Job_Max_Time 36200 -param_GLIDECLIENT_ReqNode gfactory.minus,itb.minus,1.dot,opensciencegrid.dot,org -param_GLIDECLIENT_Rank 1 -param_GLIDEIN_Report_Failed NEVER -param_MIN_DISK_GBS 1 -param_UPDATE_COLLECTOR_WITH_TCP True -param_GLIDEIN_Glexec_Use NEVER -param_GLIDEIN_Max_Idle 2400 -param_GLIDEIN_Monitoring_Enabled False -param_CONDOR_ARCH default -param_OSG_SINGULARITY_EL7_PERCENT 100 -param_STARTD_JOB_ATTRS x509userproxysubject.comma,x509UserProxyFQAN.comma,x509UserProxyVOName.comma,x509UserProxyEmail.comma,x509UserProxyExpiration.comma,ProjectName -param_USE_MATCH_AUTH True -param_CONDOR_OS default -param_GLIDEIN_Collector osg.minus,ligo.minus,1.dot,t2.dot,ucsd.dot,edu.colon,9620.minus,9630 -cluster 68177 -subcluster 1"<br/>GlideinWebBase = "<a href="http://gfactory-itb-1.opensciencegrid.org/factory/stage">http://gfactory-itb-1.opensciencegrid.org/factory/stage</a>"<br/>LigoSearchTag = "None"</pre><br/>
<span style="color: #9e3997"><span style="font-size: small">(12:12:26)</span> <b>bbockelm:</b></span> Ok, so they use <tt>LigoSearchTag</tt> then.<br/>
<span style="color: #e23f99"><span style="font-size: small">(12:48:28)</span> <b>marco.mascheroni:</b></span> @blin <b>@edquist</b> I am getting:<br/><tt>&lt;blah&gt; execute_cmd: 30 seconds timeout expired, killing child process.- &lt;blah&gt; killed by signal  15.-</tt><br/><br/>because of a stale <tt><a href="http://cache.submit.nemo.uwm.edu">cache.submit.nemo.uwm.edu</a>..barrier</tt> lock file. Not sure though if it is my fault because I am messing up with the names trying to fix. what I did was to add this line (the one that starts with MM):<br/><br/><pre><br/>for job in $* ; do<br/># The job's format is: condor/Id/Queue/Pool<br/>    job=${job#con*/} # Strip off the leading "con(dor)/"<br/>    id=${job%%/*} # Id, everything before the first / in Id/Queue/Pool<br/>    queue_pool=${job#*/} # Queue/Pool, everything after the first /  in Id/Queue/Pool<br/>    queue=${queue_pool%/*} # Queue, everything before the first / in Queue/Pool<br/>    #MM Added because of issues with queue being "osg"<br/>    queue="<a href="http://submit.nemo.uwm.edu">submit.nemo.uwm.edu</a>"<br/>    pool=${queue_pool#*/} # Pool, everything after the first / in Queue/Pool<br/><br/>    line=$(search $id $queue $pool)<br/>    if  [ ! -z "$line" ] ; then</pre> ```<br/>
<span style="color: #e23f99"><span style="font-size: small">(12:50:04)</span> <b>marco.mascheroni:</b></span> do you guys know some trick to duplicate the stdout/stderr to a file?<br/>
<span style="color: #43761b"><span style="font-size: small">(12:50:26)</span> <b>blin:</b></span> <b>@edquist</b> can you take point on this one? i've got a quarterly report to write this afternoon<br/>
<span style="color: #c386df"><span style="font-size: small">(12:51:16)</span> <b>matyas:</b></span> @marco.mascheroni <tt>man tee</tt><br/>
<span style="color: #16569E"><span style="font-size: small">(12:51:36)</span> <b>edquist:</b></span> sure<br/>
<span style="color: #16569E"><span style="font-size: small">(12:52:05)</span> <b>edquist:</b></span> marco<br/>
<span style="color: #16569E"><span style="font-size: small">(12:52:20)</span> <b>edquist:</b></span> i usually use the <tt>tee</tt> command<br/>
<span style="color: #e23f99"><span style="font-size: small">(12:52:49)</span> <b>marco.mascheroni:</b></span> k let me try to replicate and save the stdout and err somewhere<br/>
<span style="color: #16569E"><span style="font-size: small">(12:52:50)</span> <b>edquist:</b></span> do you want stderr + stdout to go to the file?<br/>
<span style="color: #e23f99"><span style="font-size: small">(12:53:13)</span> <b>marco.mascheroni:</b></span> yes, lke I put set -x at the beginning and get at least the stderr<br/>
<span style="color: #16569E"><span style="font-size: small">(12:54:11)</span> <b>edquist:</b></span> oh<br/>
<span style="color: #16569E"><span style="font-size: small">(12:54:13)</span> <b>edquist:</b></span> i see<br/>
<span style="color: #16569E"><span style="font-size: small">(12:54:40)</span> <b>edquist:</b></span> if you want to run the entire script, and have all its stdout+stderr go to a file<br/>
<span style="color: #16569E"><span style="font-size: small">(12:54:41)</span> <b>edquist:</b></span> then<br/>
<span style="color: #16569E"><span style="font-size: small">(12:54:56)</span> <b>edquist:</b></span> ./script 2&gt;&amp;1 | tee log.txt<br/>
<span style="color: #16569E"><span style="font-size: small">(12:55:03)</span> <b>edquist:</b></span> <tt>./script 2&gt;&amp;1 | tee log.txt</tt><br/>
<span style="color: #16569E"><span style="font-size: small">(12:55:11)</span> <b>edquist:</b></span> is the simplest way to do it<br/>
<span style="color: #16569E"><span style="font-size: small">(12:56:04)</span> <b>edquist:</b></span> that will attach the script's stderr to its stdout, which goes into the pipe to <tt>tee</tt><br/>
<span style="color: #16569E"><span style="font-size: small">(12:56:36)</span> <b>edquist:</b></span> and <tt>tee</tt> will send it to the file you specify (<tt>log.txt</tt>, here), as well as copy it to your stdout<br/>
<span style="color: #16569E"><span style="font-size: small">(12:56:46)</span> <b>edquist:</b></span> (which is maybe a terminal)<br/>
<span style="color: #e23f99"><span style="font-size: small">(12:56:50)</span> <b>marco.mascheroni:</b></span> ok, so I can mv condor_status.sh to condor_status_tmp.sh and then use the trick<br/>
<span style="color: #e23f99"><span style="font-size: small">(12:57:08)</span> <b>marco.mascheroni:</b></span> or is there a way of doint it "in place"<br/>
<span style="color: #c386df"><span style="font-size: small">(12:57:22)</span> <b>matyas:</b></span> I think you can do <tt>exec 2&gt;&amp;1 | tee log.txt</tt><br/>
<span style="color: #16569E"><span style="font-size: small">(12:57:44)</span> <b>edquist:</b></span> i dunna think that does what you think it does<br/>
<span style="color: #16569E"><span style="font-size: small">(12:57:50)</span> <b>edquist:</b></span> :-p<br/>
<span style="color: #c386df"><span style="font-size: small">(12:58:05)</span> <b>matyas:</b></span> I don't know if the <tt>| tee</tt> part works<br/>
<span style="color: #c386df"><span style="font-size: small">(12:58:24)</span> <b>matyas:</b></span> but you can use <tt>exec</tt> without a separate command to call in order to change the redirections of the running script<br/>
<span style="color: #c386df"><span style="font-size: small">(12:58:34)</span> <b>matyas:</b></span> weird, but true<br/>
<span style="color: #16569E"><span style="font-size: small">(12:58:43)</span> <b>edquist:</b></span> conceptually i like to do a wrapper scripts<br/>
<span style="color: #16569E"><span style="font-size: small">(12:58:44)</span> <b>edquist:</b></span> so<br/>
<span style="color: #c386df"><span style="font-size: small">(12:58:58)</span> <b>matyas:</b></span> a wrapper script is certainly clearer<br/>
<span style="color: #e23f99"><span style="font-size: small">(12:59:07)</span> <b>marco.mascheroni:</b></span> ok will do, thx guys<br/>
<span style="color: #16569E"><span style="font-size: small">(12:59:20)</span> <b>edquist:</b></span> you could have a <tt>condor_status_tmp.sh</tt> that is just<br/><pre><br/>#!/bin/bash<br/>condor_status.sh 2&gt;&amp;1 | tee log.txt<br/></pre><br/>
<span style="color: #e23f99"><span style="font-size: small">(12:59:46)</span> <b>marco.mascheroni:</b></span> yes yes, I got the idea<br/>
<span style="color: #16569E"><span style="font-size: small">(13:00:38)</span> <b>edquist:</b></span> but yeah if you want to avoid making a separate script, somewhere at the top of your main script you can do<br/><pre><br/>exec 2&gt;&amp;1 &gt; &gt;(tee log.txt)<br/></pre>`<br/>which i think is what @matyas had in mind ;)<br/>
<span style="color: #16569E"><span style="font-size: small">(13:01:12)</span> <b>edquist:</b></span> or did i get that wrong!<br/>
<span style="color: #16569E"><span style="font-size: small">(13:01:36)</span> <b>edquist:</b></span> probably just<br/><pre><br/>exec &amp;&gt; &gt;(tee log.txt)<br/></pre><br/>
<span style="color: #16569E"><span style="font-size: small">(13:02:02)</span> <b>edquist:</b></span> yeah<br/>
<span style="color: #16569E"><span style="font-size: small">(13:02:04)</span> <b>edquist:</b></span> that last one<br/>
<span style="color: #16569E"><span style="font-size: small">(13:02:11)</span> <b>edquist:</b></span> is probably the easiest way<br/>
<span style="color: #c386df"><span style="font-size: small">(13:02:32)</span> <b>matyas:</b></span> yeah <tt>exec | tee</tt> doesn't work but Carl's second thing does<br/>
<span style="color: #16569E"><span style="font-size: small">(13:03:01)</span> <b>edquist:</b></span> the thing is if you go the <tt>exec</tt> route, you lose the ability to distinguish stdout / stderr outside the script<br/>
<span style="color: #16569E"><span style="font-size: small">(13:03:42)</span> <b>edquist:</b></span> but maybe that doesn't matter for your purposes<br/>
<span style="color: #e23f99"><span style="font-size: small">(13:04:31)</span> <b>marco.mascheroni:</b></span> I can do the separate script, no problem :slightly_smiling_face:<br/>
<span style="color: #c386df"><span style="font-size: small">(13:04:53)</span> <b>matyas:</b></span> yeah sorry we're bothering you with voodoo :slightly_smiling_face:<br/>
<span style="color: #e23f99"><span style="font-size: small">(13:05:02)</span> <b>marco.mascheroni:</b></span> :smile:<br/>
<span style="color: #e23f99"><span style="font-size: small">(13:06:57)</span> <b>marco.mascheroni:</b></span> In any case, the removal of the .barrier lock file is not inside a trap, which makes me nervous. But looking at the code I can't understand why sometimes it does not get deleted (and then successive condor_status calls time out waiting for it)<br/>
<span style="color: #e23f99"><span style="font-size: small">(13:20:09)</span> <b>marco.mascheroni:</b></span> I settled for the tmp script and this:<br/><pre>#!/bin/bash<br/>/home/osg01/bosco/glite/bin/condor_status_tmp.sh $@ &gt; &gt;(tee -a /home/osg01/$$stdout.log) 2&gt; &gt;(tee -a /home/osg01/$$stderr.log &gt;&amp;2)</pre><br/><br/>
<blockquote>
<span style="color: #e23f99"><span style="font-size: small">(13:43:47)</span> <b>marco.mascheroni:</b></span> Hey @matyas <b>@edquist</b> Not a lot of details on why the barrier file is not cleared. The stderr of the process that leaked it finish with:<br/><pre>++ update_cache <a href="http://submit.nemo.uwm.edu">submit.nemo.uwm.edu</a><br/>++ local queue=<a href="http://submit.nemo.uwm.edu">submit.nemo.uwm.edu</a><br/>++ local pool=<br/>+++ identify_cache <a href="http://submit.nemo.uwm.edu">submit.nemo.uwm.edu</a><br/>+++ local queue=<a href="http://submit.nemo.uwm.edu">submit.nemo.uwm.edu</a><br/>+++ local pool=<br/>+++ echo /tmp/cache.submit.nemo.uwm.edu.<br/>++ local cache=/tmp/cache.submit.nemo.uwm.edu.<br/>++ set -o noclobber<br/>+++ date +%s<br/>++ echo 1575487924<br/>++ '[' 0 == 1 ']'<br/>++ '[' -z <a href="http://submit.nemo.uwm.edu">submit.nemo.uwm.edu</a> ']'<br/>++ '[' -z '' ']'<br/>++ local 'target=-name <a href="http://submit.nemo.uwm.edu">submit.nemo.uwm.edu</a>'<br/>+++ echo -format '"%d"' ClusterId -format '","' ALWAYS -format '"%d"' JobStatus -format '","' ALWAYS -format '"%f"' RemoteSysCpu -format '","' ALWAYS -format '"%f"' RemoteUserCpu -format '","' ALWAYS -format '"%f"' BytesSent -format '","' ALWAYS -format '"%f"' BytesRecvd -format '","' ALWAYS -format '"%f"' RemoteWallClockTime -format '","' ALWAYS -format '"%d"' ExitBySignal -format '","' ALWAYS -format '"%d"' ExitCode -format '"%d"' ExitSignal -format '"\n"' ALWAYS<br/>+++ xargs /usr/bin/condor_q -name <a href="http://submit.nemo.uwm.edu">submit.nemo.uwm.edu</a></pre><br/><br/>
<span style="color: #e23f99"><span style="font-size: small">(13:44:20)</span> <b>marco.mascheroni:</b></span> So it looks like the process exited after the condor_q without removing the lock file (.barrier)<br/>
<span style="color: #e23f99"><span style="font-size: small">(13:45:29)</span> <b>marco.mascheroni:</b></span> could the condor_q have taken more than 30 secs and the process being killed?<br/>
<span style="color: #c386df"><span style="font-size: small">(13:59:08)</span> <b>matyas:</b></span> what's the script?<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:03:12)</span> <b>marco.mascheroni:</b></span> this is the condor_status.sh<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:04:09)</span> <b>marco.mascheroni:</b></span> New executions are indefinitely doing:<br/><pre>+++ local pool=<br/>+++ echo /tmp/cache.submit.nemo.uwm.edu.<br/>++ '[' '!' -s /tmp/cache.submit.nemo.uwm.edu. ']'<br/>+++ date +%s<br/>++ local seconds=1575488388<br/>++++ wait_on_cache <a href="http://submit.nemo.uwm.edu">submit.nemo.uwm.edu</a><br/>++++ local queue=<a href="http://submit.nemo.uwm.edu">submit.nemo.uwm.edu</a><br/>++++ local pool=<br/>+++++ identify_cache <a href="http://submit.nemo.uwm.edu">submit.nemo.uwm.edu</a><br/>+++++ local queue=<a href="http://submit.nemo.uwm.edu">submit.nemo.uwm.edu</a><br/>+++++ local pool=<br/>+++++ echo /tmp/cache.submit.nemo.uwm.edu.<br/>++++ local cache=/tmp/cache.submit.nemo.uwm.edu.<br/>++++ '[' -f /tmp/cache.submit.nemo.uwm.edu..barrier ']'<br/>++++ sleep 1<br/>++++ '[' -f /tmp/cache.submit.nemo.uwm.edu..barrier ']'<br/>++++ sleep 1<br/>++++ '[' -f /tmp/cache.submit.nemo.uwm.edu..barrier ']'<br/>++++ sleep 1<br/>++++ '[' -f /tmp/cache.submit.nemo.uwm.edu..barrier ']'<br/>++++ sleep 1<br/>++++ '[' -f /tmp/cache.submit.nemo.uwm.edu..barrier ']'<br/>++++ sleep 1<br/>++++ '[' -f /tmp/cache.submit.nemo.uwm.edu..barrier ']'<br/>++++ sleep 1</pre><br/><br/>
<span style="color: #e23f99"><span style="font-size: small">(14:04:27)</span> <b>marco.mascheroni:</b></span> basically waiting for parallel condor_status executions to delete the .barrier file<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:04:57)</span> <b>marco.mascheroni:</b></span> the one I posted above is the condor_status.sh stderr that is not deleting the .barrier file<br/>
<span style="color: #c386df"><span style="font-size: small">(14:05:22)</span> <b>matyas:</b></span> what creates the .barrier file in the first place?<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:05:40)</span> <b>marco.mascheroni:</b></span> I can't find anything interesitng in the bosco/glite/log/FTGahpLog either<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:06:23)</span> <b>marco.mascheroni:</b></span> not sure what happened to that damn condor_status.sh process<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:06:53)</span> <b>marco.mascheroni:</b></span> I assume somebody killed.. but no idea how to check and verify that<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:09:01)</span> <b>marco.mascheroni:</b></span> @matyas the .barrier is created here <a href="https://github.com/htcondor/BLAH/blob/devel/src/scripts/condor_status.sh#L84">https://github.com/htcondor/BLAH/blob/devel/src/scripts/condor_status.sh#L84</a><br/>
<span style="color: #e23f99"><span style="font-size: small">(14:10:13)</span> <b>marco.mascheroni:</b></span> I am hardcoding the queue variable here <a href="https://github.com/htcondor/BLAH/blob/devel/src/scripts/condor_status.sh#L236">https://github.com/htcondor/BLAH/blob/devel/src/scripts/condor_status.sh#L236</a> to<br/><pre>queue="<a href="http://submit.nemo.uwm.edu">submit.nemo.uwm.edu</a>"</pre><br/><br/>
<span style="color: #c386df"><span style="font-size: small">(14:11:02)</span> <b>matyas:</b></span> that code is only gonna prevent concurrent writes if they're from different users<br/>
<span style="color: #c386df"><span style="font-size: small">(14:14:21)</span> <b>matyas:</b></span> wait I'm wrong<br/>
<span style="color: #c386df"><span style="font-size: small">(14:14:53)</span> <b>matyas:</b></span> (it works because of the <tt>set -o noclobber</tt><br/>
<span style="color: #e23f99"><span style="font-size: small">(14:16:21)</span> <b>marco.mascheroni:</b></span> ok<br/>
<span style="color: #c386df"><span style="font-size: small">(14:16:36)</span> <b>matyas:</b></span> <b>@edquist</b> any ideas?<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:17:07)</span> <b>marco.mascheroni:</b></span> I think I'll just put a trap and remove the file in the function<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:17:45)</span> <b>marco.mascheroni:</b></span> and not care whye that condor_status.sh did not print anything to the stderr after the condor_q<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:19:11)</span> <b>marco.mascheroni:</b></span> do you guys know if strace would tell me if the process was killed?<br/>
<span style="color: #c386df"><span style="font-size: small">(14:20:31)</span> <b>matyas:</b></span> hey, from the output, it looks like $pool is blank<br/>
<span style="color: #c386df"><span style="font-size: small">(14:20:48)</span> <b>matyas:</b></span> er nvm that's valid<br/>
<span style="color: #c386df"><span style="font-size: small">(14:21:28)</span> <b>matyas:</b></span> I don't think it should matter if <tt>condor_q</tt> was killed... the script should continue on and remove the .barrier file<br/>
<span style="color: #c386df"><span style="font-size: small">(14:21:48)</span> <b>matyas:</b></span> or are you saying the script is killed because condor_q is hanging?<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:21:48)</span> <b>marco.mascheroni:</b></span> I  meant the condor_status was killed<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:22:59)</span> <b>marco.mascheroni:</b></span> There are few executions that are successful, then this happens (condor_status killed while it waits for condor_q?), and then the other times out waiting on the .barrier<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:23:16)</span> <b>marco.mascheroni:</b></span> I do not know why/if the script  is killed<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:23:25)</span> <b>marco.mascheroni:</b></span> I am assuming it is killed<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:26:06)</span> <b>marco.mascheroni:</b></span> anyway, I hope this helps:<br/><pre>function finish {<br/>    local cache=$(identify_cache $queue $pool)<br/>    rm -f $cache.barrier<br/>}<br/>trap finish EXIT</pre><br/>
<span style="color: #e23f99"><span style="font-size: small">(14:26:26)</span> <b>marco.mascheroni:</b></span> I'll send a new pilot<br/>
<span style="color: #c386df"><span style="font-size: small">(14:26:47)</span> <b>matyas:</b></span> might need <tt>trap finish EXIT TERM</tt> so it catches SIGTERM as well<br/>
<span style="color: #c386df"><span style="font-size: small">(14:27:22)</span> <b>matyas:</b></span> IIRC EXIT only gets hit if the script exits by itself, instead of getting killed<br/>
<span style="color: #16569E"><span style="font-size: small">(14:27:33)</span> <b>edquist:</b></span> mmm<br/>
<span style="color: #16569E"><span style="font-size: small">(14:27:56)</span> <b>edquist:</b></span> might wanna double check that<br/>
<span style="color: #c386df"><span style="font-size: small">(14:29:14)</span> <b>matyas:</b></span> ah you're right<br/>
<span style="color: #c386df"><span style="font-size: small">(14:29:25)</span> <b>matyas:</b></span> wow I'm like 0 for 5 today :stuck_out_tongue:<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:30:58)</span> <b>marco.mascheroni:</b></span> Going home now guys. It's 9:30 PM and still need to have dinner :joy:<br/>
<span style="color: #c386df"><span style="font-size: small">(14:31:29)</span> <b>matyas:</b></span> yikes<br/>
<span style="color: #c386df"><span style="font-size: small">(14:31:32)</span> <b>matyas:</b></span> have a good night!<br/>
<span style="color: #e23f99"><span style="font-size: small">(14:32:24)</span> <b>marco.mascheroni:</b></span> even if this succeeds I am not sure how to proceed. Should I just summarize what was happening and what I did on a Jira? And then you guys take care? @blin<br/>
<span style="color: #c386df"><span style="font-size: small">(14:34:08)</span> <b>matyas:</b></span> yeah that's a good idea<br/>
<span style="color: #e23f99"><span style="font-size: small">(15:27:59)</span> <b>marco.mascheroni:</b></span> FYI: seems the trap is working, I'll report everything in a Jira tomorrow<br/>
<span style="color: #e23f99"><span style="font-size: small">(15:28:13)</span> <b>marco.mascheroni:</b></span> or maybe two tickets for the two different issues<br/>
<span style="color: #c386df"><span style="font-size: small">(15:29:23)</span> <b>matyas:</b></span> let's keep it in one ticket for now because they may be related; we can split it up later<br/>
<span style="color: #e23f99"><span style="font-size: small">(2019-12-05 05:14:39)</span> <b>marco.mascheroni:</b></span> FYI: I understood why we were querying osg schedd on the batch system with <tt>condor_q -name os</tt> , I had this in my template for the factory <tt>&lt;submit_attr name="+queue" value="&amp;quot;osg&amp;quot;"/&gt;</tt><br/>
<span style="color: #e23f99"><span style="font-size: small">(2019-12-05 05:15:33)</span> <b>marco.mascheroni:</b></span> Still, I do not think it explains why GAHP_TEMP was not using "/tmp" as defaul. I am trying from scratch with the proper entry confing and see what happes.<br/>
<span style="color: #e23f99"><span style="font-size: small">(2019-12-05 08:13:44)</span> <b>marco.mascheroni:</b></span> Yeah, I think the error <tt>grep: /cache..: No such file or directory</tt> is always there and we simply never use the cache. And then by setting GAHP_TMP manually I uncovered the fact that the cache management is broken because of the missing trap. Anyway, time to write the ticket now that everything is clear<br/>
<span style="color: #e23f99"><span style="font-size: small">(2019-12-05 09:34:03)</span> <b>marco.mascheroni:</b></span> @blin @matyas <b>@edquist</b> I created this <a href="https://opensciencegrid.atlassian.net/browse/SOFTWARE-3930">https://opensciencegrid.atlassian.net/browse/SOFTWARE-3930</a> to summarize what happened.<br/>
<span style="color: #43761b"><span style="font-size: small">(2019-12-05 09:36:28)</span> <b>blin:</b></span> beautiful description, thank you!<br/>
</blockquote>
<span style="color: #e23f99"><span style="font-size: small">(13:20:23)</span> <b>marco.mascheroni:</b></span> I need to keep stdout and err separate<br/>
<span style="color: #e96699"><span style="font-size: small">(13:36:31)</span> <b>lincoln:</b></span> hi folks. We want to switch our origin from our EL6 Stash to an EL7 stash with the latest OSG 3.5 and stash-origin packages. What do I need to do to move the Stash origin from the existing host to a new one, and expose it to the redirectors etc?<br/>
<span style="color: #43761b"><span style="font-size: small">(13:39:13)</span> <b>blin:</b></span> i don't know the answer to that (@dweitzel @marian maybe)? but how would you feel about trying out our stash-origin image?<br/>
<span style="color: #43761b"><span style="font-size: small">(13:39:17)</span> <b>blin:</b></span> it's new! it's untested!<br/>
<span style="color: #43761b"><span style="font-size: small">(13:39:25)</span> <b>blin:</b></span> there's a dearth of documentation!<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:40:07)</span> <b>dweitzel:</b></span> The existing stash origin packages should be enough.<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:40:34)</span> <b>dweitzel:</b></span> make sure you export the same thing, but it should automatically subscribe the the correct redirector.<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:40:47)</span> <b>dweitzel:</b></span> and you can run both el6 and el7 in parallel to make sure it works.<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:41:02)</span> <b>dweitzel:</b></span> multiple hosts serving the same data is fine in the XRootD redirector world.<br/>
<span style="color: #e96699"><span style="font-size: small">(13:41:09)</span> <b>lincoln:</b></span> ok great<br/>
<span style="color: #e96699"><span style="font-size: small">(13:41:23)</span> <b>lincoln:</b></span> i could try an image<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:41:54)</span> <b>dweitzel:</b></span> yeah, docker images are fine.  There is always the complication at chicago about exporting Ceph into the image...<br/>
<span style="color: #e23f99"><span style="font-size: small">(13:41:56)</span> <b>marco.mascheroni:</b></span> (continuing in a private chat our debugging)<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:42:03)</span> <b>dweitzel:</b></span> but I'm sure you know how to do that from before.<br/>
<span style="color: #e96699"><span style="font-size: small">(13:42:19)</span> <b>lincoln:</b></span> does XRootD need to be aware of the users at all?<br/>
<span style="color: #e96699"><span style="font-size: small">(13:42:26)</span> <b>lincoln:</b></span> ie do i need to also get /etc/passwd into the image?<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:43:10)</span> <b>dweitzel:</b></span> for the origin, no.  As long as xrootd + ceph is ok.<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:43:31)</span> <b>dweitzel:</b></span> for the writable bits, yes it does need to know about users.  But that is a completely separate host.<br/>
<span style="color: #43761b"><span style="font-size: small">(13:44:11)</span> <b>blin:</b></span> @lincoln what's your timeline for the update?<br/>
<span style="color: #e96699"><span style="font-size: small">(13:44:18)</span> <b>lincoln:</b></span> well<br/>
<span style="color: #e96699"><span style="font-size: small">(13:44:24)</span> <b>lincoln:</b></span> sooner would be better because the EL6 box keeps crashing :slightly_smiling_face:<br/>
<span style="color: #e96699"><span style="font-size: small">(13:44:34)</span> <b>lincoln:</b></span> I already have installed stash-origin so I can just run it hopefully<br/>
<span style="color: #e96699"><span style="font-size: small">(13:44:47)</span> <b>lincoln:</b></span> but I could in parallel test a container-based image<br/>
<span style="color: #43761b"><span style="font-size: small">(13:45:12)</span> <b>blin:</b></span> mmk, i could probably help with image-specific issues<br/>
<span style="color: #e96699"><span style="font-size: small">(13:45:25)</span> <b>lincoln:</b></span> can we make it a SLATE app? :slightly_smiling_face:<br/>
<span style="color: #43761b"><span style="font-size: small">(13:47:47)</span> <b>blin:</b></span> sure, why not<br/>
<span style="color: #43761b"><span style="font-size: small">(13:47:52)</span> <b>blin:</b></span> i don't think i have the cycles to do that, though<br/>
<span style="color: #e96699"><span style="font-size: small">(13:52:27)</span> <b>lincoln:</b></span> uhhh halp<br/>
<span style="color: #e96699"><span style="font-size: small">(13:52:29)</span> <b>lincoln:</b></span> <pre>[root@stash-el7 config.d]# ls /stash<br/>gratia  project  public  sys  test  tmp  user<br/>[root@stash-el7 config.d]# cat 10-common-site-local.cfg  | grep -v '^#'<br/><br/><br/>set rootdir = /stash<br/><br/>set resourcename = OSG_Connect_Stash-Origin<br/>[root@stash-el7 config.d]# tail -fn20 /var/log/xrootd/stash-origin/xrootd.log <br/>=====> continue /etc/xrootd/config.d<br/>Config continuing with file /etc/xrootd/config.d/10-common-site-local.cfg ...<br/>Config continuing with file /etc/xrootd/config.d/10-origin-site-local.cfg ...<br/>Config continuing with file /etc/xrootd/config.d/10-xrootd-lcmaps.cfg ...<br/>Config continuing with file /etc/xrootd/config.d/40-xcache-auth.cfg ...<br/>Config continuing with file /etc/xrootd/config.d/40-xrootd-lcmaps.cfg ...<br/>Config continuing with file /etc/xrootd/config.d/50-osg-http.cfg ...<br/>Config continuing with file /etc/xrootd/config.d/50-osg-monitoring.cfg ...<br/>Config continuing with file /etc/xrootd/config.d/50-osg-paths.cfg ...<br/>=====> all.adminpath /var/spool/xrootd<br/>Config continuing with file /etc/xrootd/config.d/50-stash-origin-authz.cfg ...<br/>Config continuing with file /etc/xrootd/config.d/50-stash-origin-paths.cfg ...<br/>Config continuing with file /etc/xrootd/config.d/90-xcache-logging.cfg ...<br/>=====> cms.trace all<br/>Config Global System Identification: <a href="mailto:s-stash-origin@stash-el7.osgconnect.net">s-stash-origin@stash-el7.osgconnect.net</a> <a href="http://1213hcc-osg-redirector11213hcc-osg-redirector2.unl.edu">1213hcc-osg-redirector11213hcc-osg-redirector2.unl.edu</a><br/>------ File system server initialization failed.<br/>191204 13:50:51 188712 XrootdConfig: Unable to load file system.<br/>------ xrootd protocol initialization failed.<br/>191204 13:50:51 188712 XrdProtocol: Protocol xrootd could not be loaded<br/>------ xrootd <a href="mailto:stash-origin@stash-el7.osgconnect.net">stash-origin@stash-el7.osgconnect.net</a>:1094 initialization failed.</pre><br/>
<span style="color: #e96699"><span style="font-size: small">(13:52:42)</span> <b>lincoln:</b></span> @blin yeah no worries, I can put one together<br/>
<span style="color: #e96699"><span style="font-size: small">(13:55:13)</span> <b>lincoln:</b></span> I also did<br/><pre>set originexport = /</pre><br/><br/>
<span style="color: #43761b"><span style="font-size: small">(13:55:36)</span> <b>blin:</b></span> was just about to ask<br/>
<span style="color: #e96699"><span style="font-size: small">(13:55:37)</span> <b>lincoln:</b></span> oh i also see<br/>
<span style="color: #e96699"><span style="font-size: small">(13:56:09)</span> <b>lincoln:</b></span> <pre>191204 13:50:51 188712 acc_AuthFile: Unable to find /run/stash-origin/Authfile; no such file or directory<br/>------ Authorization system initialization failed.</pre><br/><br/>
<span style="color: #e96699"><span style="font-size: small">(13:56:21)</span> <b>lincoln:</b></span> not sure if that kills the whole XRootD startup or not<br/>
<span style="color: #43761b"><span style="font-size: small">(13:56:32)</span> <b>blin:</b></span> i think it does<br/>
<span style="color: #e96699"><span style="font-size: small">(13:56:38)</span> <b>lincoln:</b></span> oh<br/>
<span style="color: #e96699"><span style="font-size: small">(13:56:44)</span> <b>lincoln:</b></span> I didn't see anything in the docs to create that<br/>
<span style="color: #43761b"><span style="font-size: small">(13:57:07)</span> <b>blin:</b></span> yeah, this is the incredibly annoying thing about stash* installations<br/>
<span style="color: #43761b"><span style="font-size: small">(13:57:20)</span> <b>blin:</b></span> that file is generated via a service, which queries topology<br/>
<span style="color: #e96699"><span style="font-size: small">(13:57:42)</span> <b>lincoln:</b></span> o<br/>
<span style="color: #43761b"><span style="font-size: small">(13:57:43)</span> <b>blin:</b></span> if you don't have your new stash* host registered, i think that fails? gives you an empty file?<br/>
<span style="color: #43761b"><span style="font-size: small">(13:57:46)</span> <b>blin:</b></span> @matyas would know<br/>
<span style="color: #e96699"><span style="font-size: small">(13:57:54)</span> <b>lincoln:</b></span> well okay<br/>
<span style="color: #43761b"><span style="font-size: small">(13:57:57)</span> <b>blin:</b></span> try copying over your authfile from the el6 host to that path and try again<br/>
<span style="color: #e96699"><span style="font-size: small">(13:57:59)</span> <b>lincoln:</b></span> can I have 2 in topology for the same resource?<br/>
<span style="color: #e96699"><span style="font-size: small">(13:58:28)</span> <b>lincoln:</b></span> :thinking_face: I don't have an Authfile in EL6 :slightly_smiling_face:<br/>
<span style="color: #e96699"><span style="font-size: small">(13:58:37)</span> <b>lincoln:</b></span> <tt>stashcache-origin-server-0.6-2.osg33.el6.noarch</tt><br/>
<span style="color: #e96699"><span style="font-size: small">(13:58:47)</span> <b>lincoln:</b></span> :disappointed:<br/>
<span style="color: #43761b"><span style="font-size: small">(13:59:03)</span> <b>blin:</b></span> *cries inside*<br/>
<span style="color: #c386df"><span style="font-size: small">(14:00:16)</span> <b>matyas:</b></span> correct, if your host is not registered, the update fails and kills the xrootd startup<br/>
<span style="color: #43761b"><span style="font-size: small">(14:00:37)</span> <b>blin:</b></span> can lincoln just try use this temporarily? <a href="https://topology.opensciencegrid.org/stashcache/authfile-public">https://topology.opensciencegrid.org/stashcache/authfile-public</a><br/>
<span style="color: #c386df"><span style="font-size: small">(14:01:34)</span> <b>matyas:</b></span> you can try... not sure it will work<br/>
<span style="color: #c386df"><span style="font-size: small">(14:01:45)</span> <b>matyas:</b></span> you could just register your host in topology<br/>
<span style="color: #e96699"><span style="font-size: small">(14:02:08)</span> <b>lincoln:</b></span> i will just register it<br/>
<span style="color: #e96699"><span style="font-size: small">(14:02:13)</span> <b>lincoln:</b></span> if i can register two for the same resource<br/>
<span style="color: #43761b"><span style="font-size: small">(14:02:29)</span> <b>blin:</b></span> lol i don't think you can for this<br/>
<span style="color: #e96699"><span style="font-size: small">(14:02:43)</span> <b>lincoln:</b></span> :disappointed:<br/>
<span style="color: #c386df"><span style="font-size: small">(14:03:04)</span> <b>matyas:</b></span> *sigh* this system sucks<br/>
<span style="color: #c386df"><span style="font-size: small">(14:03:17)</span> <b>matyas:</b></span> (i helped write it i'm allowed to say that)<br/>
<span style="color: #43761b"><span style="font-size: small">(14:03:53)</span> <b>blin:</b></span> yeah, we need to provide a dummy authfile so that users can set up a new host and validate it as best they can<br/>
<span style="color: #43761b"><span style="font-size: small">(14:04:03)</span> <b>blin:</b></span> then they register it in topology when they're ready to go to prod<br/>
<span style="color: #c386df"><span style="font-size: small">(14:04:04)</span> <b>matyas:</b></span> check if there's a ticket for that<br/>
<span style="color: #c386df"><span style="font-size: small">(14:04:25)</span> <b>matyas:</b></span> registration is literally the first step in the setup document<br/>
<span style="color: #43761b"><span style="font-size: small">(14:04:55)</span> <b>blin:</b></span> i know, i'm saying that it shouldn't be.<br/>
<span style="color: #c386df"><span style="font-size: small">(14:05:05)</span> <b>matyas:</b></span> yeah i'm not a big fan either<br/>
<span style="color: #43761b"><span style="font-size: small">(14:07:43)</span> <b>blin:</b></span> anyway, @lincoln looking at our auth file, i think this may work if you just drop it in?<br/><pre>u * /user/ligo -rl \<br/>    /Gluex rl \<br/>    /chtc/PUBLIC rl \<br/>    /gwdata rl \<br/>    /hcc/PUBLIC rl \<br/>    /icecube/PUBLIC rl \<br/>    /pnfs/fnal.gov rl \<br/>    /user rl </pre><br/>
<span style="color: #c386df"><span style="font-size: small">(14:08:29)</span> <b>matyas:</b></span> I think you'll also need to override the systemd service file to not require the authfile generator<br/>
<span style="color: #e96699"><span style="font-size: small">(14:11:34)</span> <b>lincoln:</b></span> okie dokie i can try it<br/>
<span style="color: #16569E"><span style="font-size: small">(14:31:24)</span> <b>edquist:</b></span> goodnight there!<br/>
<span style="color: #c386df"><span style="font-size: small">(14:32:17)</span> <b>matyas:</b></span> wrong window Carl?<br/>
<span style="color: #e96699"><span style="font-size: small">(15:41:00)</span> <b>lincoln:</b></span> @blin that seemed to let XRootD start<br/>
<span style="color: #e96699"><span style="font-size: small">(15:41:10)</span> <b>lincoln:</b></span> I did not have to modify the systemd unit file, FWIW<br/>
<span style="color: #43761b"><span style="font-size: small">(15:41:27)</span> <b>blin:</b></span> (for the time being)<br/>
<span style="color: #43761b"><span style="font-size: small">(15:41:47)</span> <b>blin:</b></span> iirc, it runs on a timer and it'll stomp on the Authfile<br/>
<span style="color: #e96699"><span style="font-size: small">(15:41:59)</span> <b>lincoln:</b></span> nice<br/>
<span style="color: #e96699"><span style="font-size: small">(15:42:09)</span> <b>lincoln:</b></span> its OK, I'm already seeing file accesses<br/>
<span style="color: #e96699"><span style="font-size: small">(15:42:13)</span> <b>lincoln:</b></span> <pre>191204 15:42:00 189643 XrootdXeq: icecube1.1196:<a href="mailto:104@lcg-ce2.sfu.computecanada.ca">104@lcg-ce2.sfu.computecanada.ca</a> pub IPv4 login<br/>191204 15:42:00 189645 icecube1.1196:<a href="mailto:103@lcg-ce2.sfu.computecanada.ca">103@lcg-ce2.sfu.computecanada.ca</a> ofs_open: 0-600 fn=/user/rynge/public/test.txt<br/>191204 15:42:00 189645 acc_Audit: icecube1.1196:<a href="mailto:103@lcg-ce2.sfu.computecanada.ca">103@lcg-ce2.sfu.computecanada.ca</a> grant host *@lcg-ce2.sfu.computecanada.ca read /user/rynge/public/test.txt<br/>191204 15:42:00 189645 icecube1.1196:<a href="mailto:103@lcg-ce2.sfu.computecanada.ca">103@lcg-ce2.sfu.computecanada.ca</a> ofs_fstat:  fn=/user/rynge/public/test.txt<br/>191204 15:42:00 189643 icecube1.1196:<a href="mailto:104@lcg-ce2.sfu.computecanada.ca">104@lcg-ce2.sfu.computecanada.ca</a> ofs_open: 0-600 fn=/user/rynge/public/test.txt<br/>191204 15:42:00 189643 acc_Audit: icecube1.1196:<a href="mailto:104@lcg-ce2.sfu.computecanada.ca">104@lcg-ce2.sfu.computecanada.ca</a> grant host *@lcg-ce2.sfu.computecanada.ca read /user/rynge/public/test.txt<br/>191204 15:42:00 189643 icecube1.1196:<a href="mailto:104@lcg-ce2.sfu.computecanada.ca">104@lcg-ce2.sfu.computecanada.ca</a> ofs_open: attach use=2 fn=/user/rynge/public/test.txt<br/>191204 15:42:00 189643 icecube1.1196:<a href="mailto:104@lcg-ce2.sfu.computecanada.ca">104@lcg-ce2.sfu.computecanada.ca</a> ofs_fstat:  fn=/user/rynge/public/test.txt<br/>191204 15:42:00 189645 icecube1.1196:<a href="mailto:103@lcg-ce2.sfu.computecanada.ca">103@lcg-ce2.sfu.computecanada.ca</a> ofs_close: use=2 fn=/user/rynge/public/test.txt<br/>191204 15:42:00 189645 icecube1.1196:<a href="mailto:103@lcg-ce2.sfu.computecanada.ca">103@lcg-ce2.sfu.computecanada.ca</a> ofs_close: use=0 fn=dummy<br/>191204 15:42:00 189643 icecube1.1196:<a href="mailto:104@lcg-ce2.sfu.computecanada.ca">104@lcg-ce2.sfu.computecanada.ca</a> ofs_close: use=1 fn=/user/rynge/public/test.txt<br/>191204 15:42:00 189643 icecube1.1196:<a href="mailto:104@lcg-ce2.sfu.computecanada.ca">104@lcg-ce2.sfu.computecanada.ca</a> ofs_close: use=0 fn=dummy<br/>191204 15:42:00 189645 XrootdXeq: icecube1.1196:<a href="mailto:103@lcg-ce2.sfu.computecanada.ca">103@lcg-ce2.sfu.computecanada.ca</a> disc 0:00:00<br/>191204 15:42:00 189645 icecube1.1196:<a href="mailto:103@lcg-ce2.sfu.computecanada.ca">103@lcg-ce2.sfu.computecanada.ca</a> XrdPoll: FD 103 detached from poller 2; num=0<br/>191204 15:42:00 189643 XrootdXeq: icecube1.1196:<a href="mailto:104@lcg-ce2.sfu.computecanada.ca">104@lcg-ce2.sfu.computecanada.ca</a> disc 0:00:00<br/>191204 15:42:00 189643 icecube1.1196:<a href="mailto:104@lcg-ce2.sfu.computecanada.ca">104@lcg-ce2.sfu.computecanada.ca</a> XrdPoll: FD 104 detached from poller 0; num=1<br/>191204 15:42:00 189640 XrdInet: Accepted connection from <a href="mailto:107@lcg-ce2.sfu.computecanada.ca">107@lcg-ce2.sfu.computecanada.ca</a><br/>191204 15:42:00 189640 XrdProtocol: matched protocol xrootd<br/>191204 15:42:00 189640 ?:<a href="mailto:107@lcg-ce2.sfu.computecanada.ca">107@lcg-ce2.sfu.computecanada.ca</a> XrdPoll: FD 107 attached to poller 1; num=1<br/>191204 15:42:00 189640 XrootdXeq: icecube1.1196:<a href="mailto:107@lcg-ce2.sfu.computecanada.ca">107@lcg-ce2.sfu.computecanada.ca</a> pub IPv4 login<br/>191204 15:42:00 189640 icecube1.1196:<a href="mailto:107@lcg-ce2.sfu.computecanada.ca">107@lcg-ce2.sfu.computecanada.ca</a> ofs_open: 0-600 fn=/user/rynge/public/test.txt<br/>191204 15:42:00 189640 acc_Audit: icecube1.1196:<a href="mailto:107@lcg-ce2.sfu.computecanada.ca">107@lcg-ce2.sfu.computecanada.ca</a> grant host *@lcg-ce2.sfu.computecanada.ca read /user/rynge/public/test.txt<br/>191204 15:42:00 189640 icecube1.1196:<a href="mailto:107@lcg-ce2.sfu.computecanada.ca">107@lcg-ce2.sfu.computecanada.ca</a> ofs_fstat:  fn=/user/rynge/public/test.txt<br/>191204 15:42:00 189640 icecube1.1196:<a href="mailto:107@lcg-ce2.sfu.computecanada.ca">107@lcg-ce2.sfu.computecanada.ca</a> ofs_close: use=1 fn=/user/rynge/public/test.txt<br/>191204 15:42:00 189640 icecube1.1196:<a href="mailto:107@lcg-ce2.sfu.computecanada.ca">107@lcg-ce2.sfu.computecanada.ca</a> ofs_close: use=0 fn=dummy<br/>191204 15:42:00 189640 XrootdXeq: icecube1.1196:<a href="mailto:107@lcg-ce2.sfu.computecanada.ca">107@lcg-ce2.sfu.computecanada.ca</a> disc 0:00:00<br/>191204 15:42:00 189640 icecube1.1196:<a href="mailto:107@lcg-ce2.sfu.computecanada.ca">107@lcg-ce2.sfu.computecanada.ca</a> XrdPoll: FD 107 detached from poller 1; num=0<br/>^C</pre><br/>
<span style="color: #e96699"><span style="font-size: small">(15:42:13)</span> <b>lincoln:</b></span> <br/>
<span style="color: #e96699"><span style="font-size: small">(15:42:21)</span> <b>lincoln:</b></span> so thats great<br/>
<span style="color: #43761b"><span style="font-size: small">(15:43:06)</span> <b>blin:</b></span> In <tt>/etc/systemd/system/stash-origion-authfile.service.override/</tt> or whatever<br/><pre>ExecStart=<br/>ExecStart=/bin/true</pre><br/>
<span style="color: #43761b"><span style="font-size: small">(15:43:15)</span> <b>blin:</b></span> nice!<br/>
<span style="color: #c386df"><span style="font-size: small">(16:11:20)</span> <b>matyas:</b></span> it's not gonna stomp on the authfile if it fails to download<br/>
<span style="color: #c386df"><span style="font-size: small">(16:13:59)</span> <b>matyas:</b></span> i think<br/>
</body>
</html>
