<!DOCTYPE html>
<html>
<head>
<title>Mon Jan 6, 2020 : #operations (osg)</title>
</head>
<body>
<h3>Mon Jan 6, 2020 : #operations (osg)</h3>
<span style="color: #a63024"><span style="font-size: small">(15:18:22)</span> <b>paschos:</b></span> <b>@here</b> We are getting errors such as the following:<br/>error: globus_ftp_control: gss_init_sec_context failed<br/>globus_gsi_gssapi: Error with gss credential handle<br/>globus_credential: Valid credentials could not be found in any of the possible locations specified by the credential search order.<br/>Valid credentials could not be found in any of the possible locations specified by the credential search order.<br/>in jobs that landed on: HCC_US_Wisconsin_osg01_rhel7 and OSG_US_NMSU_DISCOVERY<br/>
<span style="color: #235e5b"><span style="font-size: small">(15:20:22)</span> <b>dweitzel:</b></span> where are you seeing that error?  what error file?<br/>
<span style="color: #a63024"><span style="font-size: small">(15:20:43)</span> <b>paschos:</b></span> in the error file of a submitted job<br/>
<span style="color: #a63024"><span style="font-size: small">(15:20:48)</span> <b>paschos:</b></span> i'll cut and paste<br/>
<span style="color: #235e5b"><span style="font-size: small">(15:21:09)</span> <b>dweitzel:</b></span> I presume that job is trying to do a gridftp transfer?<br/>
<span style="color: #235e5b"><span style="font-size: small">(15:21:13)</span> <b>dweitzel:</b></span> given the error output?<br/>
<span style="color: #a63024"><span style="font-size: small">(15:21:35)</span> <b>paschos:</b></span> --2020-01-06 11:41:06-- <a href="http://stash.ci-connect.net/spt/public/panz/spt3g_py3-v2.tgz">http://stash.ci-connect.net/spt/public/panz/spt3g_py3-v2.tgz</a><br/>Resolving <a href="http://osgsquid.hep.wisc.edu">osgsquid.hep.wisc.edu</a> (<a href="http://osgsquid.hep.wisc.edu">osgsquid.hep.wisc.edu</a>)... 144.92.180.227, 144.92.180.230<br/>Connecting to <a href="http://osgsquid.hep.wisc.edu">osgsquid.hep.wisc.edu</a> (<a href="http://osgsquid.hep.wisc.edu">osgsquid.hep.wisc.edu</a>)|144.92.180.227|:3128... connected.<br/>Proxy request sent, awaiting response... 200 OK<br/>Length: 13662017 (13M) [application/octet-stream]<br/>Saving to: 'code/spt3g.tgz'<br/>.....<br/>2020-01-06 11:41:06 (81.2 MB/s) - 'code/spt3g.tgz' saved [13662017/13662017]<br/><br/><br/>error: globus_ftp_control: gss_init_sec_context failed<br/>globus_gsi_gssapi: Error with gss credential handle<br/>globus_credential: Valid credentials could not be found in any of the possible locations specified by the credential search order.<br/>Valid credentials could not be found in any of the possible locations specified by the credential search order.<br/>Attempt 1<br/>globus_credential: Error reading host credential<br/>globus_sysconfig: Could not find a valid certificate file: The host cert could not be found in:<br/>1) env. var. X509_USER_CERT<br/>2) /etc/grid-security/hostcert.pem<br/>3) $GLOBUS_LOCATION/etc/hostcert.pem<br/>4) $HOME/.globus/hostcert.pem<br/><br/>The host key could not be found in:<br/>1) env. var. X509_USER_KEY<br/>2) /etc/grid-security/hostkey.pem<br/>3) $GLOBUS_LOCATION/etc/hostkey.pem<br/>4) $HOME/.globus/hostkey.pem<br/>
<span style="color: #a63024"><span style="font-size: small">(15:23:01)</span> <b>paschos:</b></span> i think, it is trying to do an gridftp transfer to the remote site...<br/>
<span style="color: #a63024"><span style="font-size: small">(15:23:31)</span> <b>paschos:</b></span> *Derek Weitzel*:face_with_thermometer: [3:21 PM]<br/>I presume that job is trying to do a gridftp transfer?<br/><br/>*new messages*<br/>[3:21 PM]<br/>given the error output?<br/>yes<br/>
<span style="color: #a63024"><span style="font-size: small">(15:25:04)</span> <b>paschos:</b></span> same error with the other site...<br/>
<span style="color: #235e5b"><span style="font-size: small">(15:25:05)</span> <b>dweitzel:</b></span> I'm no expert on gridftp, but it surprises me that it's not looking for a proxy, but rather a cert / key.  Also, is this SPT job using singularity?  Do we know if the X509_USER_PROXY env variable is being set within the job AND being copied over to singularity env?<br/>
<span style="color: #a63024"><span style="font-size: small">(15:25:36)</span> <b>paschos:</b></span> i'll need to trace the answers to the above --- gimme a min<br/>
<span style="color: #a63024"><span style="font-size: small">(15:29:38)</span> <b>paschos:</b></span> while i am looking, fyi these 'failures' represented about 4% of the total jobs submitted by the user. 96% of their jobs run successfully elsewhere. that's why i assumed it was something specific to those two sites<br/>
<span style="color: #a63024"><span style="font-size: small">(15:44:40)</span> <b>paschos:</b></span> so --- no singularity ...<br/>use has these requirements:<br/>Requirements = ( ( HAS_CVMFS_spt_opensciencegrid_org ) &amp;&amp; ( ( ( TARGET.GLIDEIN_ResourceName =!= MY.MachineAttrGLIDEIN_ResourceName1 ) || ( RCC_Factory == "ciconnect" ) ) &amp;&amp; ( ( TARGET.GLIDEIN_ResourceName =!= MY.MachineAttrGLIDEIN_ResourceName2 ) || ( RCC_Factory == "ciconnect" ) ) &amp;&amp; ( ( TARGET.GLIDEIN_ResourceName =!= MY.MachineAttrGLIDEIN_ResourceName3 ) || ( RCC_Factory == "ciconnect" ) ) &amp;&amp; ( ( TARGET.GLIDEIN_ResourceName =!= MY.MachineAttrGLIDEIN_ResourceName4 ) || ( RCC_Factory == "ciconnect" ) ) ) &amp;&amp; ( OSGVO_OS_STRING == "RHEL 7" || ( RCC_Factory == "ciconnect" ) ) &amp;&amp; (GLIDEIN_ResourceName =!= "NPX") )<br/>+WANT_RCC_ciconnect = True<br/>+ProjectName = "spt.all"<br/>+AccountingGroup = "group_opportunistic.spt.all.panz"<br/>run_as_owner = False<br/><br/>request_cpus = 1<br/>request_memory = 2048MB<br/>request_disk = 15360MB<br/><br/>use_x509userproxy = True<br/>x509userproxy = /home/panz/panz_proxy<br/>
<span style="color: #43761b"><span style="font-size: small">(15:44:53)</span> <b>blin:</b></span> yeah that seems weird that it's complaining about a hostcert/hostkey<br/>
<span style="color: #a63024"><span style="font-size: small">(15:45:01)</span> <b>paschos:</b></span> and it transfer files as:<br/># Get input files<br/>globus-url-copy -rst -cd gsi<a href="ftp://ceph-gridftp1.grid.uchicago.edu:2811/cephfs/spt/user/panz/lens3g_2arcmin_condor/lensing_qcl_ncl_366_366.tar.gz">ftp://ceph-gridftp1.grid.uchicago.edu:2811/cephfs/spt/user/panz/lens3g_2arcmin_condor/lensing_qcl_ncl_366_366.tar.gz</a> file://$PWD/lensing_qcl_ncl_366_366.tar.gz<br/>
<span style="color: #43761b"><span style="font-size: small">(15:45:12)</span> <b>blin:</b></span> i would think that only the gridftp server would care about hostcert/key<br/>
<span style="color: #a63024"><span style="font-size: small">(15:45:44)</span> <b>paschos:</b></span> yeah--- user is transferring files using gridftp<br/>
<span style="color: #c386df"><span style="font-size: small">(15:50:03)</span> <b>matyas:</b></span> I might be misremembering but I think it might display that hostcert/hostkey complaint if it can't find a proxy<br/>
<span style="color: #a63024"><span style="font-size: small">(15:51:31)</span> <b>paschos:</b></span> on the remote server?<br/>
<span style="color: #c386df"><span style="font-size: small">(15:51:42)</span> <b>matyas:</b></span> no, on the client<br/>
<span style="color: #a63024"><span style="font-size: small">(15:51:46)</span> <b>paschos:</b></span> hmm<br/>
<span style="color: #a63024"><span style="font-size: small">(15:52:22)</span> <b>paschos:</b></span> yeah-- i see what you mean<br/>
</body>
</html>
