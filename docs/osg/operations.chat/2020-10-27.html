<!DOCTYPE html>
<html>
<head>
<title>Tue Oct 27, 2020 : #operations (osg)</title>
</head>
<body>
<h3>Tue Oct 27, 2020 : #operations (osg)</h3>
<span style="color: #235e5b"><span style="font-size: small">(09:28:17)</span> <b>dweitzel:</b></span> Networking (both the primary and backup) appears to be down to Nebraska's Omaha datacenter.<br/>
<span style="color: #9d8eee"><span style="font-size: small">(09:31:19)</span> <b>cat:</b></span> Thanks! I’ve been chatting with John, due to Frank’s email about GRACC.<br/>
<span style="color: #9d8eee"><span style="font-size: small">(09:31:27)</span> <b>cat:</b></span> Sounds like people are aware and working on it.<br/>
<span style="color: #99a949"><span style="font-size: small">(10:00:54)</span> <b>dwd:</b></span> Can somebody move <a href="http://repo.opensciencegrid.org">repo.opensciencegrid.org</a> to <a href="http://repo-itb.opensciencegrid.org">repo-itb.opensciencegrid.org</a>?<br/>
<span style="color: #99a949"><span style="font-size: small">(10:02:01)</span> <b>dwd:</b></span> The latter is responding, presumably it is in Lincoln<br/>
<span style="color: #99a949"><span style="font-size: small">(10:02:35)</span> <b>dwd:</b></span> @dweitzel @blin<br/>
<span style="color: #53b759"><span style="font-size: small">(10:04:49)</span> <b>marian:</b></span> Derek is out of office, I think ... so @blin may do the change if he can?<br/>
<span style="color: #99a949"><span style="font-size: small">(10:05:03)</span> <b>dwd:</b></span> BrianL is working on it<br/>
<span style="color: #53b759"><span style="font-size: small">(10:05:08)</span> <b>marian:</b></span> cool<br/>
<span style="color: #53b759"><span style="font-size: small">(10:06:35)</span> <b>marian:</b></span> just on a general note: there is probably bigger issue going on, not just random networking trobleshooting ... it means several other OSG hosted services in Nebraska (especially in Omaha datacenter) can be unreachable for currently unknown time ... but hopefully just a short time<br/>
<span style="color: #99a949"><span style="font-size: small">(10:16:36)</span> <b>dwd:</b></span> Further discussion on this topic is on #software<br/>
<span style="color: #e06b56"><span style="font-size: small">(10:17:51)</span> <b>jthiltges:</b></span> The UPS for the Nebraska PKI datacenter failed. Just switched it over to bypass, so we'll be hopefully moving onto the next exciting issues caused by the outage.<br/>
<span style="color: #53b759"><span style="font-size: small">(10:18:40)</span> <b>marian:</b></span> btw, I have this ready to send off to OSG people:<br/>
<span style="color: #53b759"><span style="font-size: small">(10:18:47)</span> <b>marian:</b></span> <pre>Subject: Several OSG services partially unavailable<br/><br/>An issue has been reported for the Holland Computing Center (HCC), the facility that hosts most of the OSG services that are currently unavailable.<br/> <br/>The root cause is unknown at this time (mentions of power issues) but HCC's datacenter in Omaha is unreachable at this time.<br/><br/>An ETA is unknown but we will certainly prioritize diagnosing and correcting the issue. We will continue to post updates whenever they become available.<br/><br/>Should you have any question, please contact <a href="mailto:help@opensciencegrid.org">help@opensciencegrid.org</a>.</pre><br/>
<span style="color: #53b759"><span style="font-size: small">(10:19:15)</span> <b>marian:</b></span> I largerly modified what we sent to HCC users but can serve to OSG community ... @jdost321, good to go to send it off?<br/>
<span style="color: #385a86"><span style="font-size: small">(10:20:32)</span> <b>jdost321:</b></span> I think it's good, although is it easy enough to list some of the obvious services that are possible affected?<br/>
<span style="color: #53b759"><span style="font-size: small">(10:21:05)</span> <b>marian:</b></span> yeah, thought of ... but didn't want to as we're aslo switching some to their itb hosts to continue that are in LIncoln<br/>
<span style="color: #385a86"><span style="font-size: small">(10:21:06)</span> <b>jdost321:</b></span> i'm guessing GRACC, xrd redirectors, parts of oasis?<br/>
<span style="color: #385a86"><span style="font-size: small">(10:21:28)</span> <b>jdost321:</b></span> ah ok, if we have alternate routes to keep a subset up that's great<br/>
<span style="color: #53b759"><span style="font-size: small">(10:21:30)</span> <b>marian:</b></span> but rather we mention few and people may ask in parcticular what else?<br/>
<span style="color: #53b759"><span style="font-size: small">(10:21:45)</span> <b>marian:</b></span> thats' why in the subject "partially unavailable"<br/>
<span style="color: #53b759"><span style="font-size: small">(10:21:54)</span> <b>marian:</b></span> I'd rather keep in generic<br/>
<span style="color: #53b759"><span style="font-size: small">(10:21:59)</span> <b>marian:</b></span> than listing everything<br/>
<span style="color: #385a86"><span style="font-size: small">(10:22:00)</span> <b>jdost321:</b></span> ok, well people can always contact us about specific services<br/>
<span style="color: #53b759"><span style="font-size: small">(10:22:09)</span> <b>marian:</b></span> as we're still discovering what else may be down<br/>
<span style="color: #53b759"><span style="font-size: small">(10:22:16)</span> <b>marian:</b></span> they can<br/>
<span style="color: #53b759"><span style="font-size: small">(10:22:40)</span> <b>marian:</b></span> so tell me, want to note on some of services or none is OK<br/>
<span style="color: #385a86"><span style="font-size: small">(10:22:51)</span> <b>jdost321:</b></span> i would changge the woring "the facility that hosts most of the OSG services that are currently unavailable." to "the facility that hosts many of the OSG services that are currently unavailable."<br/>
<span style="color: #385a86"><span style="font-size: small">(10:23:00)</span> <b>jdost321:</b></span> most -&gt; many<br/>
<span style="color: #53b759"><span style="font-size: small">(10:23:18)</span> <b>marian:</b></span> sure<br/>
<span style="color: #53b759"><span style="font-size: small">(10:23:22)</span> <b>marian:</b></span> anything else?<br/>
<span style="color: #385a86"><span style="font-size: small">(10:23:51)</span> <b>jdost321:</b></span> sorry i think the grammar needs to be fixed beyond the word let me think of it<br/>
<span style="color: #53b759"><span style="font-size: small">(10:23:58)</span> <b>marian:</b></span> sure<br/>
<span style="color: #53b759"><span style="font-size: small">(10:24:13)</span> <b>marian:</b></span> please post full revision here<br/>
<span style="color: #385a86"><span style="font-size: small">(10:24:57)</span> <b>jdost321:</b></span> <tt>An issue has been reported for the Holland Computing Center (HCC), a facility that hosts many OSG services which is currently unavailable.</tt><br/>
<span style="color: #53b759"><span style="font-size: small">(10:25:26)</span> <b>marian:</b></span> ok, rest of lines are ok?<br/>
<span style="color: #53b759"><span style="font-size: small">(10:25:41)</span> <b>marian:</b></span> <pre>An issue has been reported for the Holland Computing Center (HCC), a facility that hosts many OSG services which is currently unavailable.<br/><br/>The root cause is unknown at this time (mentions of power issues) but HCC's datacenter in Omaha is unreachable at this time.<br/><br/>An ETA is unknown but we will certainly prioritize diagnosing and correcting the issue. We will continue to post updates whenever they become available.<br/><br/>Should you have any question, please contact <a href="mailto:help@opensciencegrid.org">help@opensciencegrid.org</a>.</pre><br/>
<span style="color: #385a86"><span style="font-size: small">(10:25:43)</span> <b>jdost321:</b></span> <tt>Should you have any questions, please contact <a href="mailto:help@opensciencegrid.org">help@opensciencegrid.org</a>.</tt><br/>
<span style="color: #385a86"><span style="font-size: small">(10:25:46)</span> <b>jdost321:</b></span> question -&gt; questions<br/>
<span style="color: #385a86"><span style="font-size: small">(10:26:04)</span> <b>jdost321:</b></span> then i think the rest is fine, better to get this out ASAP so people are at least aware<br/>
<span style="color: #53b759"><span style="font-size: small">(10:27:43)</span> <b>marian:</b></span> ok, it's going out now<br/>
<span style="color: #53b759"><span style="font-size: small">(10:28:21)</span> <b>marian:</b></span> subject is OK?<br/>
<span style="color: #53b759"><span style="font-size: small">(10:28:23)</span> <b>marian:</b></span> <tt>Several OSG services partially unavailable</tt><br/>
<span style="color: #385a86"><span style="font-size: small">(10:28:32)</span> <b>jdost321:</b></span> yes<br/>
<span style="color: #53b759"><span style="font-size: small">(10:29:28)</span> <b>marian:</b></span> oh shoot, can't even sent this out from my UNL VM!<br/>
<span style="color: #53b759"><span style="font-size: small">(10:29:33)</span> <b>marian:</b></span> <pre>requests.exceptions.ConnectionError: ('Connection aborted.', error(113, 'No route to host'))</pre><br/>
<span style="color: #53b759"><span style="font-size: small">(10:30:05)</span> <b>marian:</b></span> I don't know what osg-notify script contacts ... I'd guess somebody else should it send out then<br/>
<span style="color: #53b759"><span style="font-size: small">(10:30:09)</span> <b>marian:</b></span> @blin?<br/>
<span style="color: #9e3997"><span style="font-size: small">(10:30:26)</span> <b>bbockelm:</b></span> (the script should connect to topology which is probably also down?)<br/>
<span style="color: #43761b"><span style="font-size: small">(10:30:34)</span> <b>blin:</b></span> topology is slow per mat, not down<br/>
<span style="color: #c386df"><span style="font-size: small">(10:30:56)</span> <b>matyas:</b></span> no, it's down<br/>
<span style="color: #43761b"><span style="font-size: small">(10:30:58)</span> <b>blin:</b></span> marian, do you have access to osgsub?<br/>
<span style="color: #43761b"><span style="font-size: small">(10:30:59)</span> <b>blin:</b></span> argh<br/>
<span style="color: #53b759"><span style="font-size: small">(10:31:29)</span> <b>marian:</b></span> the command issues if that may help for somebody that have access to the host which can send it out<br/>
<span style="color: #385a86"><span style="font-size: small">(10:31:31)</span> <b>jdost321:</b></span> how about an email to osg staff list at least for now?<br/>
<span style="color: #53b759"><span style="font-size: small">(10:31:36)</span> <b>marian:</b></span> <pre>PYTHONPATH=src python bin/osg-notify --cert ../.globus/usercert.pem --key ../.globus/userkey.pem --no-sign --type production --message ../outage.txt --subject 'Several OSG services partially unavailable' --recipients "<a href="mailto:osg-general@opensciencegrid.org">osg-general@opensciencegrid.org</a> <a href="mailto:osg-operations@opensciencegrid.org">osg-operations@opensciencegrid.org</a> <a href="mailto:osg-sites@opensciencegrid.org">osg-sites@opensciencegrid.org</a> <a href="mailto:operations@opensciencegrid.org">operations@opensciencegrid.org</a>" --oim-recipients resources --oim-contact-type administrative --allow-non-ascii </pre><br/>
<span style="color: #53b759"><span style="font-size: small">(10:31:50)</span> <b>marian:</b></span> ah, actually, can use list of recipient<br/>
<span style="color: #53b759"><span style="font-size: small">(10:32:04)</span> <b>marian:</b></span> but you do it, as head of Ops, preferably ...<br/>
<span style="color: #53b759"><span style="font-size: small">(10:32:10)</span> <b>marian:</b></span> outage.txt:<br/>
<span style="color: #53b759"><span style="font-size: small">(10:32:25)</span> <b>marian:</b></span> <pre>An issue has been reported for the Holland Computing Center (HCC), a facility that hosts many OSG services which is currently unavailable.<br/><br/>The root cause is unknown at this time (mentions of power issues) but HCC's datacenter in Omaha is unreachable at this time. <br/><br/>An ETA is unknown but we will certainly prioritize diagnosing and correcting the issue. We will continue to post updates whenever they become available.<br/><br/>Should you have any questions, please contact <a href="mailto:help@opensciencegrid.org">help@opensciencegrid.org</a>.</pre><br/>
<span style="color: #53b759"><span style="font-size: small">(10:32:46)</span> <b>marian:</b></span> Subject: Several OSG services partially unavailable<br/>
<span style="color: #53b759"><span style="font-size: small">(10:32:54)</span> <b>marian:</b></span> ^ @jdost321?<br/>
<span style="color: #385a86"><span style="font-size: small">(10:33:16)</span> <b>jdost321:</b></span> i probably don't have send privileges to most of those lists, hence our notify tool but i'll send this directly to staff for now<br/>
<span style="color: #53b759"><span style="font-size: small">(10:33:32)</span> <b>marian:</b></span> to: <a href="mailto:osg-general@opensciencegrid.org">osg-general@opensciencegrid.org</a>,<a href="mailto:osg-operations@opensciencegrid.org">osg-operations@opensciencegrid.org</a>,<a href="mailto:osg-sites@opensciencegrid.org">osg-sites@opensciencegrid.org</a>,<a href="mailto:operations@opensciencegrid.org">operations@opensciencegrid.org</a><br/>
<span style="color: #53b759"><span style="font-size: small">(10:33:40)</span> <b>marian:</b></span> plus staff list<br/>
<span style="color: #53b759"><span style="font-size: small">(10:33:50)</span> <b>marian:</b></span> ah, OK, thanks<br/>
<span style="color: #c386df"><span style="font-size: small">(10:34:54)</span> <b>matyas:</b></span> osg-notify depends on topology<br/>
<span style="color: #53b759"><span style="font-size: small">(10:35:22)</span> <b>marian:</b></span> yeah, which is, hosted also at UNL<br/>
<span style="color: #c386df"><span style="font-size: small">(10:36:03)</span> <b>matyas:</b></span> topology-itb still works<br/>
<span style="color: #43761b"><span style="font-size: small">(10:37:39)</span> <b>blin:</b></span> i can switch DNS over for those hosts, too but i'm a little concerned about the state of the ITB host<br/>
<span style="color: #43761b"><span style="font-size: small">(10:37:48)</span> <b>blin:</b></span> and if we'll run into similar cert issues as we did with repo<br/>
<span style="color: #c386df"><span style="font-size: small">(10:38:50)</span> <b>matyas:</b></span> yeah probably<br/>
<span style="color: #9e3997"><span style="font-size: small">(10:38:57)</span> <b>bbockelm:</b></span> I think it'd be reasonable to sit tight for a bit until we get an ETA.  Recall, none of these require a high-availability for the SLA.  Can we simply tweak the notify tool to point at the ITB host/<br/>
<span style="color: #385a86"><span style="font-size: small">(10:39:19)</span> <b>jdost321:</b></span> I just manually sent out the email to all the lists.. better than not sending at all<br/>
<span style="color: #53b759"><span style="font-size: small">(10:40:05)</span> <b>marian:</b></span> sure, thanks, Jeff<br/>
<span style="color: #53b759"><span style="font-size: small">(10:40:52)</span> <b>marian:</b></span> BrianB is also right, but this is also ongoing for an hour now ... we probably don't want to get asked people what's going on before we tell them something is up<br/>
<span style="color: #53b759"><span style="font-size: small">(10:41:29)</span> <b>marian:</b></span> especially, GRACC for instance<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:41:53)</span> <b>dweitzel:</b></span> I’m in the Omaha data center. Servers are back up and running. Now the process of getting the services back in an orderly fashion. <br/>
<span style="color: #e06b56"><span style="font-size: small">(10:54:32)</span> <b>jthiltges:</b></span> An electrician working on the alarm panel accidentally triggered the emergency power off, which took out the UPS and machine room power. As designed. _facepalm.jpg_<br/>
<span style="color: #385a86"><span style="font-size: small">(10:55:11)</span> <b>jdost321:</b></span> at least we know the emergency switch works!<br/>
<span style="color: #e06b56"><span style="font-size: small">(10:55:46)</span> <b>jthiltges:</b></span> Haha, indeed. You press it, and it causes an emergency.<br/>
<span style="color: #674b1b"><span style="font-size: small">(10:56:03)</span> <b>rynge:</b></span> Those big red buttons are always so tempting!<br/>
<span style="color: #9e3997"><span style="font-size: small">(10:58:01)</span> <b>bbockelm:</b></span> That's up there with "if you turn off the cooling the machine room gets hot ... quickly!"<br/>
<span style="color: #99a949"><span style="font-size: small">(10:59:06)</span> <b>dwd:</b></span> Are any Omaha services up yet?<br/>
<span style="color: #e06b56"><span style="font-size: small">(11:04:32)</span> <b>jthiltges:</b></span> I'm trying to get the UPS back online. Then will be working up the layers. Switching, DNS, LDAP, etc. :disappointed:<br/>
<span style="color: #99a949"><span style="font-size: small">(11:18:22)</span> <b>dwd:</b></span> Meanwhile, who has root access on <a href="http://repo.opensciencegrid.org">repo.opensciencegrid.org</a> / <a href="http://hcc-osg-software2.unl.edu">hcc-osg-software2.unl.edu</a>?  It needs a new hostcert with a <a href="http://repo.opensciencegrid.org">repo.opensciencegrid.org</a> SAN<br/>
<span style="color: #43761b"><span style="font-size: small">(11:23:17)</span> <b>blin:</b></span> i think someone at UNL is going to have to request the cert if we want it to have a UNL SAN<br/>
<span style="color: #43761b"><span style="font-size: small">(11:23:38)</span> <b>blin:</b></span> UW DoIT has balked at doing the OSG + UNL SAN<br/>
<span style="color: #c386df"><span style="font-size: small">(11:23:41)</span> <b>matyas:</b></span> Can you make repo-itb also point to the same host?<br/>
<span style="color: #9e3997"><span style="font-size: small">(11:23:56)</span> <b>bbockelm:</b></span> I suspect that's also John and Derek... will defer to them whether the quickest time to resolution is to just reboot everything or to tinker with the certs.  Again, it's not a high-availability service by SLA.<br/>
<span style="color: #c386df"><span style="font-size: small">(11:24:04)</span> <b>matyas:</b></span> then you can yum install <a href="http://repo-itb.opensciencegrid.org/osg/3.5/el7/release/x86_64/osg-release-itb-3.5-2.osg35.el7.noarch.rpm">http://repo-itb.opensciencegrid.org/osg/3.5/el7/release/x86_64/osg-release-itb-3.5-2.osg35.el7.noarch.rpm</a><br/>
<span style="color: #235e5b"><span style="font-size: small">(11:33:32)</span> <b>dweitzel:</b></span> SSL cert fixed on repo<br/>
<span style="color: #99a949"><span style="font-size: small">(11:33:33)</span> <b>dwd:</b></span> It would surely be helpful to system admins if we could make it work without them having to know to install a different osg-release.  Maybe Garhan isn’t as busy and he could do it?<br/>
<span style="color: #99a949"><span style="font-size: small">(11:33:38)</span> <b>dwd:</b></span> Oh great, thanks Derek<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:33:43)</span> <b>dweitzel:</b></span> I need to install the release?<br/>
<span style="color: #99a949"><span style="font-size: small">(11:33:55)</span> <b>dwd:</b></span> No, that was a workaround that Mat suggested<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:34:10)</span> <b>dweitzel:</b></span> ok<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:34:39)</span> <b>dweitzel:</b></span> anything else I can do?<br/>
<span style="color: #99a949"><span style="font-size: small">(11:35:13)</span> <b>dwd:</b></span> It would be good to get topology working on its itb, I think<br/>
<span style="color: #9d8eee"><span style="font-size: small">(11:35:19)</span> <b>cat:</b></span> @dweitzel, well, for one: Don’t claim this as a vacation day?<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:36:12)</span> <b>dweitzel:</b></span> I forget how that monolith is installed and run.  I do have root to <a href="http://hcc-osg-topology2.unl.edu">hcc-osg-topology2.unl.edu</a> though.<br/>
<span style="color: #99a949"><span style="font-size: small">(11:37:01)</span> <b>dwd:</b></span> Maybe it’s running, we just need to move the DNS alias and likely update the cert<br/>
<span style="color: #99a949"><span style="font-size: small">(11:37:32)</span> <b>dwd:</b></span> It has an expired cert currently :disappointed:<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:38:23)</span> <b>dweitzel:</b></span> Ugh, does topology require a IGTF cert?<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:38:33)</span> <b>dweitzel:</b></span> I know Europe connects to it for some purposes.<br/>
<span style="color: #c386df"><span style="font-size: small">(11:38:43)</span> <b>matyas:</b></span> no, it's Let's Encrypt<br/>
<span style="color: #c386df"><span style="font-size: small">(11:39:04)</span> <b>matyas:</b></span> at least topology-itb is.<br/>
<span style="color: #99a949"><span style="font-size: small">(11:39:05)</span> <b>dwd:</b></span> Oh but <a href="http://topology-itb.opensciencegrid.org">topology-itb.opensciencegrid.org</a>’s cert is not expired.  Maybe they come from different places<br/>
<span style="color: #99a949"><span style="font-size: small">(14:15:37)</span> <b>dwd:</b></span> @dweitzel The cert on <a href="http://repo.opensciencegrid.org">repo.opensciencegrid.org</a> has reverted to <a href="http://repo-itb.opensciencegrid.org">repo-itb.opensciencegrid.org</a> only<br/>
<span style="color: #9d8eee"><span style="font-size: small">(15:02:53)</span> <b>cat:</b></span> Any updates on the situation in Nebraska?<br/>
<span style="color: #9d8eee"><span style="font-size: small">(15:49:57)</span> <b>cat:</b></span> @jthiltges, @gattebury, @marian: Any updates?<br/>
<span style="color: #d1707d"><span style="font-size: small">(15:53:27)</span> <b>gattebury:</b></span> Sure — chaos monkeys should be employed everywhere and not just Netflix!<br/><br/>… but seriously, we have non-protected power restored and scheduled maintenance tomorrow ~noon Central to determine why the UPS is failing to do things. Whether switching back to the whole room UPS will cause another outage tomorrow is completely unknown.<br/><br/>CEPH/Anvil are recovering and we have some instances up but John/Eric/Josh others are still working on things. I would hope the OSG things can be restored within a few hours but I’m not there nor doing the poking, so take that with a grain of salt.<br/>
<span style="color: #d1707d"><span style="font-size: small">(15:54:09)</span> <b>gattebury:</b></span> (accidental hitting of the emergency cutoff switch seems to be the ultimate cause by the way … for alarm maintenance we weren’t even aware of)<br/>
<span style="color: #8d4b84"><span style="font-size: small">(15:55:31)</span> <b>kherner:</b></span> Don't you have the "Never Use" sign next to the emergency stop?<br/>
<span style="color: #c386df"><span style="font-size: small">(15:55:36)</span> <b>matyas:</b></span> ... so is the alarm working?<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:55:50)</span> <b>bbockelm:</b></span> @matyas @blin - can you put together a quick "outage page" on <a href="http://osg.org">osg.org</a> and add redirect for that for externally-visible URLs (I'm thinking GRACC&gt;..)<br/>
<span style="color: #9d8eee"><span style="font-size: small">(15:56:38)</span> <b>cat:</b></span> Thank you, @gattebury. Sounds like it’s been a pretty unpleasant day.<br/>
<span style="color: #c386df"><span style="font-size: small">(15:58:02)</span> <b>matyas:</b></span> @bbockelm would that be <a href="https://github.com/opensciencegrid/opensciencegrid.github.io">https://github.com/opensciencegrid/opensciencegrid.github.io</a> this repo?<br/>
<span style="color: #9d8eee"><span style="font-size: small">(15:59:00)</span> <b>cat:</b></span> Maybe the alarm maintenance person _was_ a chaos monkey! :monkey: :red_circle: :zap:<br/>
<span style="color: #9d8eee"><span style="font-size: small">(15:59:22)</span> <b>cat:</b></span> @matyas, yes.<br/>
<span style="color: #9e3997"><span style="font-size: small">(16:02:05)</span> <b>bbockelm:</b></span> @matyas - Yeah, let's just add a page to that repo.<br/>
<span style="color: #9e3997"><span style="font-size: small">(16:02:31)</span> <b>bbockelm:</b></span> I think we can do the redirect via CF?<br/>
<span style="color: #43761b"><span style="font-size: small">(16:02:59)</span> <b>blin:</b></span> sorta, we can do it with page rules but we're limited to 3<br/>
<span style="color: #43761b"><span style="font-size: small">(16:03:13)</span> <b>blin:</b></span> unless we shell out for more<br/>
<span style="color: #43761b"><span style="font-size: small">(16:04:50)</span> <b>blin:</b></span> i can delete the 3 existing ones we have: comanage registry, some old user school one, and for <a href="http://jira.opensiencegrid.org">jira.opensiencegrid.org</a> -&gt; atlassian<br/>
<span style="color: #9d8eee"><span style="font-size: small">(16:05:25)</span> <b>cat:</b></span> Uh, I use the last one… maybe other people do, too.<br/>
<span style="color: #c386df"><span style="font-size: small">(16:05:33)</span> <b>matyas:</b></span> yeah I totally use it<br/>
<span style="color: #9d8eee"><span style="font-size: small">(16:05:53)</span> <b>cat:</b></span> The OSG User School one can certainly be replaced.<br/>
<span style="color: #43761b"><span style="font-size: small">(16:06:05)</span> <b>blin:</b></span> this would ust be temporary while our services are on fire<br/>
<span style="color: #43761b"><span style="font-size: small">(16:06:17)</span> <b>blin:</b></span> (unless we can pay for more page rules)<br/>
<span style="color: #9d8eee"><span style="font-size: small">(16:06:25)</span> <b>cat:</b></span> What is your priority list of services to redirect for?<br/>
<span style="color: #9d8eee"><span style="font-size: small">(16:06:31)</span> <b>cat:</b></span> I know of GRACC<br/>
<span style="color: #43761b"><span style="font-size: small">(16:06:39)</span> <b>blin:</b></span> gracc, repo, topology?<br/>
<span style="color: #9e3997"><span style="font-size: small">(16:06:53)</span> <b>bbockelm:</b></span> Right now, GRACC &amp; topology is the priority.  I assume we can alternately fix the <tt>repo-itb</tt> issue?<br/>
<span style="color: #9d8eee"><span style="font-size: small">(16:06:57)</span> <b>cat:</b></span> Does anyone access repo with a web browser?<br/>
<span style="color: #43761b"><span style="font-size: small">(16:07:12)</span> <b>blin:</b></span> yeah, i do from time to time<br/>
<span style="color: #9d8eee"><span style="font-size: small">(16:07:26)</span> <b>cat:</b></span> Ok, does anyone *real* do it? :grin:<br/>
<span style="color: #9e3997"><span style="font-size: small">(16:07:40)</span> <b>bbockelm:</b></span> Let's leave repo for now.  @gattebury - can you disable puppet on <tt>repo-itb</tt> and fix the SAN again?<br/>
<span style="color: #d1707d"><span style="font-size: small">(16:12:29)</span> <b>gattebury:</b></span> puppet is disabled on 129.93.244.200 (which I hope is repo-itb — y’all should get the hostnames on the systems inline with DNS :wink:<br/>
<span style="color: #d1707d"><span style="font-size: small">(16:12:39)</span> <b>gattebury:</b></span> I didn’t touch the SAN before — who did that?<br/>
<blockquote>
<span style="color: #43761b"><span style="font-size: small">(16:16:30)</span> <b>blin:</b></span> derek did it before -- i think he added a <a href="http://repo.opensciencegrid.org">repo.opensciencegrid.org</a> SAN<br/>
</blockquote>
<span style="color: #c386df"><span style="font-size: small">(16:13:17)</span> <b>matyas:</b></span> Should topology really be a redirect? If I were a robot, I'd rather get a connection timeout than a 200 with bogus data...<br/>
<span style="color: #43761b"><span style="font-size: small">(16:16:40)</span> <b>blin:</b></span> hrmmm, i don't think we can do that with cloudflare<br/>
<span style="color: #d1707d"><span style="font-size: small">(16:19:55)</span> <b>gattebury:</b></span> <tt><a href="http://repo.opensciencegrid.org">repo.opensciencegrid.org</a></tt> is probably good again — on the itb host, puppet is disabled, <a href="http://repo.opensciencegrid.org">repo.opensciencegrid.org</a> has been added to domains.txt for dehydrated, and the nginx config manually adjusted to point at the new cert files.<br/>
<span style="color: #43761b"><span style="font-size: small">(16:20:43)</span> <b>blin:</b></span> @matyas one thing about topology: we point users to the downtime form so we should probably redirect to the outage page<br/>
<span style="color: #c386df"><span style="font-size: small">(16:21:22)</span> <b>matyas:</b></span> can we make topology a redirect to topology-itb?<br/>
<span style="color: #43761b"><span style="font-size: small">(16:21:50)</span> <b>blin:</b></span> we could just update the CNAME in that case<br/>
<span style="color: #c386df"><span style="font-size: small">(16:22:13)</span> <b>matyas:</b></span> then we'd have cert issues again<br/>
<span style="color: #43761b"><span style="font-size: small">(16:22:15)</span> <b>blin:</b></span> but i'd like to make sure that the ITB is prod ready -- <b>@edquist</b> can you work on that?<br/>
<span style="color: #c386df"><span style="font-size: small">(16:22:41)</span> <b>matyas:</b></span> looks OK to me. I switched the data branch over to master<br/>
<span style="color: #c386df"><span style="font-size: small">(16:22:58)</span> <b>matyas:</b></span> oh I guess I dunno about the downtime webhook<br/>
<span style="color: #16569E"><span style="font-size: small">(16:32:39)</span> <b>edquist:</b></span> <a href="https://github.com/opensciencegrid/topology/settings/hooks/84481772">https://github.com/opensciencegrid/topology/settings/hooks/84481772</a><br/>
<span style="color: #16569E"><span style="font-size: small">(16:32:44)</span> <b>edquist:</b></span> @blin <br/>
<span style="color: #a63024"><span style="font-size: small">(16:44:36)</span> <b>efajardo:</b></span> <b>@here</b> topology seems to be still down<br/>
<span style="color: #a63024"><span style="font-size: small">(16:44:37)</span> <b>efajardo:</b></span> <a href="https://topology-itb.opensciencegrid.org/stashcache/scitokens?cache_fqdn=xcache.cr.cnaf.infn.it">https://topology-itb.opensciencegrid.org/stashcache/scitokens?cache_fqdn=xcache.cr.cnaf.infn.it</a><br/>
<span style="color: #43761b"><span style="font-size: small">(16:45:59)</span> <b>blin:</b></span> GRACC redirects to the outage page, topology redirects to topology-itb but we're working on some minor issues<br/>
<span style="color: #99a949"><span style="font-size: small">(16:50:07)</span> <b>dwd:</b></span> I confirm that <a href="http://repo.opensciencegrid.org">repo.opensciencegrid.org</a> is good.<br/>
<span style="color: #c386df"><span style="font-size: small">(16:51:10)</span> <b>matyas:</b></span> @efajardo fixed<br/>
<span style="color: #a63024"><span style="font-size: small">(16:56:19)</span> <b>efajardo:</b></span> Why does still show empty<br/>
<blockquote>
<span style="color: #43761b"><span style="font-size: small">(17:02:34)</span> <b>blin:</b></span> i think that means it's just unrestricted in scope?<br/>
</blockquote>
<span style="color: #a63024"><span style="font-size: small">(16:56:20)</span> <b>efajardo:</b></span> <a href="https://topology-itb.opensciencegrid.org/stashcache/scitokens?cache_fqdn=xcache.cr.cnaf.infn.it">https://topology-itb.opensciencegrid.org/stashcache/scitokens?cache_fqdn=xcache.cr.cnaf.infn.it</a><br/>
<span style="color: #a63024"><span style="font-size: small">(16:56:20)</span> <b>efajardo:</b></span> ?<br/>
<span style="color: #9e3997"><span style="font-size: small">(16:56:32)</span> <b>bbockelm:</b></span> <a href="https://display.opensciencegrid.org/">https://display.opensciencegrid.org/</a> - hm, this seems to be out?<br/>
<span style="color: #43761b"><span style="font-size: small">(16:58:36)</span> <b>blin:</b></span> that's weird. i thought display was on tiger now<br/>
<span style="color: #9e3997"><span style="font-size: small">(16:59:09)</span> <b>bbockelm:</b></span> Looks like the <tt>osg-display-data</tt> has thrown it into a CrashBackoffLoop (crashing trying to connect to GRACC, of course).<br/>
<span style="color: #43761b"><span style="font-size: small">(16:59:51)</span> <b>blin:</b></span> :man-facepalming:<br/>
<span style="color: #43761b"><span style="font-size: small">(17:01:17)</span> <b>blin:</b></span> we're out of page rules unless we drop the jira one<br/>
<span style="color: #9d8eee"><span style="font-size: small">(17:02:40)</span> <b>cat:</b></span> But display isn’t down, just broken — can we change it so that it just displays a static page?<br/>
<span style="color: #9e3997"><span style="font-size: small">(17:03:46)</span> <b>bbockelm:</b></span> Hold on... pushed a fix.  Let's wait on it.<br/>
<span style="color: #9e3997"><span style="font-size: small">(17:04:10)</span> <b>bbockelm:</b></span> (FWIW, I was just looking through the service catalog and seeing what else is located at Nebraska)<br/>
<span style="color: #9d8eee"><span style="font-size: small">(17:05:14)</span> <b>cat:</b></span> Has no one in Operations done that already?<br/>
<span style="color: #9e3997"><span style="font-size: small">(17:31:13)</span> <b>bbockelm:</b></span> The other thing that is likely affected is the gridcf repo.<br/>
<span style="color: #9e3997"><span style="font-size: small">(17:31:19)</span> <b>bbockelm:</b></span> everything else is probably fine.<br/>
<span style="color: #9e3997"><span style="font-size: small">(17:35:23)</span> <b>bbockelm:</b></span> and the automated deploy works!  <a href="http://display.opensciencegrid.org">display.opensciencegrid.org</a> is mostly back.<br/>
<span style="color: #c386df"><span style="font-size: small">(17:41:51)</span> <b>matyas:</b></span> <a href="https://github.com/opensciencegrid/topology/pull/1416">https://github.com/opensciencegrid/topology/pull/1416</a><br/>
<span style="color: #53b759"><span style="font-size: small">(18:04:05)</span> <b>marian:</b></span> so it seems we may remain in an downtime mode for GRACC over the night ... plus other services still under risk of getting down again if I understood correctly from internal UNL channels ... there are still ongoing thing to do and some work scheduled with other people that can visit datacenter tomorrow we probably expect few things going down again ... I'm not entirely sure atm if trying to bring up GRACC makes sense as the CEPH storage is still under recovery mode ... that could be finished tonight but waiting for it doesn't guarantee it helps ... I'd better check on things early in the morning hoping thing settle a bit by then ... so, @jdost321 or other leaders (@cat), are we calling it a emergency night or is it acceptable close the day with some services as unavailable? especially, GRACC service I'm talking about.<br/>
<span style="color: #385a86"><span style="font-size: small">(18:08:53)</span> <b>jdost321:</b></span> I think best to stay down then and resume tomorrow after the power issues are sorted. Give me some prose ideally with a list of effected OSG services and I'll reply to my initial announcement I sent this morning<br/>
<span style="color: #d1707d"><span style="font-size: small">(18:28:44)</span> <b>gattebury:</b></span> FWIW Anvil instances do seem to work and CEPH does seem happy at the moment, but Marian’s comment on power being an unknown tomorrow is still quite valid. We simply don’t know what is going to be involved investigating the whole-room UPS tomorrow. That’s scheduled for 11am, so it would probably be ~1pm in the afternoon before we could really guarantee having an update of any significance. Just an FYI.<br/>
<span style="color: #9e3997"><span style="font-size: small">(18:30:18)</span> <b>bbockelm:</b></span> What about repo and topology?<br/>
<span style="color: #9e3997"><span style="font-size: small">(18:31:10)</span> <b>bbockelm:</b></span> Given the first person to report the outage was from NSF because they were looking at GRACC, even something read-only would be beneficial <br/>
<span style="color: #9e3997"><span style="font-size: small">(18:34:06)</span> <b>bbockelm:</b></span> Much more useful to be visible but not taking data.<br/>
<span style="color: #53b759"><span style="font-size: small">(18:35:02)</span> <b>marian:</b></span> we've put outage message out there for gracc, too: <a href="https://gracc.opensciencegrid.org/">https://gracc.opensciencegrid.org/</a> ... most things redirect to an outage message at the moment<br/>
<span style="color: #53b759"><span style="font-size: small">(18:35:09)</span> <b>marian:</b></span> ¯\_(ツ)_/¯<br/>
<span style="color: #53b759"><span style="font-size: small">(18:36:17)</span> <b>marian:</b></span> but I guess this isn't in the category "something read-only"?<br/>
<span style="color: #9e3997"><span style="font-size: small">(18:37:40)</span> <b>bbockelm:</b></span> Yes - I was thinking getting Grafana working along with ES but not the data ingest components.<br/>
<span style="color: #385a86"><span style="font-size: small">(18:38:41)</span> <b>jdost321:</b></span> @bbockelm isn't ther risk if not all the ES nodes are back online that will provide garbage results?<br/>
<span style="color: #9e3997"><span style="font-size: small">(18:39:47)</span> <b>bbockelm:</b></span> The storage is on Ceph - there shouldn’t be any node-local issues.<br/>
<span style="color: #9e3997"><span style="font-size: small">(18:40:16)</span> <b>bbockelm:</b></span> And by being read-only, there’s not nearly as much loaded added as if it was writing too.<br/>
<span style="color: #385a86"><span style="font-size: small">(18:41:38)</span> <b>jdost321:</b></span> I defer to Marain and co then.. I agree that would be a preferred solution, just not sure what effort that would actually take<br/>
<span style="color: #53b759"><span style="font-size: small">(18:46:45)</span> <b>marian:</b></span> fyi: can't ssh gracc-fe atm ... if we boot it again, switching the context to inform about the outage versus accuracy what we display may result easily during the "maintenance" window as unavailable service again that somebody can complain ... keeping message static in category "we know we have problem we're working on it" could be probably less disturbing ... but you say guys ... I just don't want to stay night up babysit gracc for nothing<br/>
<span style="color: #9e3997"><span style="font-size: small">(18:54:42)</span> <b>bbockelm:</b></span> What’s the status of OASIS and the various Xrootd endpoints (eg, stash redirector?)<br/>
<span style="color: #53b759"><span style="font-size: small">(18:56:00)</span> <b>marian:</b></span> <a href="http://hcc-osg-redirector2.unl.edu">hcc-osg-redirector2.unl.edu</a> is in Shorr, that is up<br/>
<span style="color: #53b759"><span style="font-size: small">(18:56:33)</span> <b>marian:</b></span> so one host behind the alias is alive ... we could maybe take out redirector1 from DNS alias<br/>
<span style="color: #53b759"><span style="font-size: small">(18:56:58)</span> <b>marian:</b></span> so we would have that service running solo on one host for the time being<br/>
<span style="color: #9e3997"><span style="font-size: small">(18:57:12)</span> <b>bbockelm:</b></span> Gotcha.  Just drafting a message, hoping Jeff can send soon.<br/>
<span style="color: #9e3997"><span style="font-size: small">(18:57:22)</span> <b>bbockelm:</b></span> OASIS?<br/>
<span style="color: #53b759"><span style="font-size: small">(18:58:14)</span> <b>marian:</b></span> from John one hour earlier: hcc-cvmfs2 is back up. It was set to DHCP, and the DHCP server (tusker-head) is still not back due to issues with the VM servers. I pinged Dave to let him know.<br/>
<span style="color: #53b759"><span style="font-size: small">(18:58:32)</span> <b>marian:</b></span> that's oasis-replica<br/>
<span style="color: #53b759"><span style="font-size: small">(19:00:05)</span> <b>marian:</b></span> oh, sorry, hcc-cmfs2 is oasis-replica-itb ... but both are up, oasis-replica<br/>
<span style="color: #53b759"><span style="font-size: small">(19:00:44)</span> <b>marian:</b></span> hcc-oasis-login is also up<br/>
<span style="color: #53b759"><span style="font-size: small">(19:01:42)</span> <b>marian:</b></span> same to <a href="http://oasis.opensciencegrid.org">oasis.opensciencegrid.org</a>, up<br/>
<span style="color: #53b759"><span style="font-size: small">(19:02:04)</span> <b>marian:</b></span> but again, this doesn't guarantee much atm ...<br/>
<span style="color: #53b759"><span style="font-size: small">(19:02:19)</span> <b>marian:</b></span> it's just "up"<br/>
<span style="color: #9e3997"><span style="font-size: small">(19:03:31)</span> <b>bbockelm:</b></span> <a href="https://docs.google.com/document/d/1-GjTX_mjJWTGwDjNUlPaB4ZeUHrG9A-qVCeLBhCcaBc/edit">https://docs.google.com/document/d/1-GjTX_mjJWTGwDjNUlPaB4ZeUHrG9A-qVCeLBhCcaBc/edit</a> here’s a draft<br/>
<span style="color: #9e3997"><span style="font-size: small">(19:04:06)</span> <b>bbockelm:</b></span> Can you look over for correctness?<br/>
<span style="color: #53b759"><span style="font-size: small">(19:06:48)</span> <b>marian:</b></span> this looks good to me!<br/>
<span style="color: #53b759"><span style="font-size: small">(19:09:39)</span> <b>marian:</b></span> we used in previous message <a href="mailto:help@opensciencegrid.org">help@opensciencegrid.org</a>, not <a href="mailto:support@opensciencegrid.org">support@opensciencegrid.org</a>. if the message goes on top of previous, maybe we should stay consistent<br/>
<span style="color: #53b759"><span style="font-size: small">(19:10:04)</span> <b>marian:</b></span> regardless both go into same bucket<br/>
<span style="color: #9e3997"><span style="font-size: small">(19:10:23)</span> <b>bbockelm:</b></span> Yes, please change to help@<br/>
<span style="color: #53b759"><span style="font-size: small">(19:10:44)</span> <b>marian:</b></span> I just did<br/>
<span style="color: #385a86"><span style="font-size: small">(19:16:11)</span> <b>jdost321:</b></span> @bbockelm @mariansent<br/>
<span style="color: #53b759"><span style="font-size: small">(19:18:03)</span> <b>marian:</b></span> thanks!<br/>
</body>
</html>
