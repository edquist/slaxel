<!DOCTYPE html>
<html>
<head>
<title>Fri Apr 9, 2021 : #operations (osg)</title>
</head>
<body>
<h3>Fri Apr 9, 2021 : #operations (osg)</h3>
<span style="color: #e475df"><span style="font-size: small">(09:02:34)</span> <b>ajit:</b></span> mirror.hep is back. Had memory/network related issues (it's a VM) yesterday (between 2pm and 11pm).<br/>
<span style="color: #43761b"><span style="font-size: small">(09:03:18)</span> <b>blin:</b></span> Awesome, thanks @ajit!<br/>
<span style="color: #43761b"><span style="font-size: small">(13:35:23)</span> <b>blin:</b></span> hey @rynge: @jpeterson was seeing some of these errors at UTC<br/><pre>WARNING - Could not find CA certificates!<br/>Looked in:<br/>        $X509_CERT_DIR ()<br/>        $HOME/.globus/certificates/ (/opt/share/osg/osg01/bosco_slate/sandbox/6ebb/6ebb89ff/utc-epyc-ce1.svc.opensciencegrid.org_9619_utc-epyc-ce1.s<br/>vc.opensciencegrid.org_23.0_1617830960/home_bl_utc-epyc-ce1.svc.opensciencegrid.org_9619_utc-epyc-ce1.svc.opensciencegrid.org_23.0_1617830960/.globu<br/>s/certificates/)<br/>        /etc/grid-security/certificates/        $GLOBUS_LOCATION/share/certificates/ (/share/certificates/)<br/>        $X509_CADIR ()</pre><br/>and i wasn't sure exactly where they were coming from. I see that message comes from <tt>setup_x509.sh</tt> from glideinwms but didn't see that called anywhere else in the code base so it seems like maybe it has to be enabled somehow in the FE config?<br/>
<span style="color: #43761b"><span style="font-size: small">(13:38:38)</span> <b>blin:</b></span> not sure if it's a red herring but everything in terms of <tt>OSG_GRID</tt> location, CAs, etc all look ok at least on the remote login node<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:05:04)</span> <b>bbockelm:</b></span> @blin - where _should_ the CA certs be?<br/>
<span style="color: #43761b"><span style="font-size: small">(14:05:47)</span> <b>blin:</b></span> for hosted ce login nodes <tt>$HOME/bosco-osg-wn-client/etc/grid-security/certificates/</tt><br/>
<span style="color: #3c8c69"><span style="font-size: small">(14:07:45)</span> <b>jpeterson:</b></span> I see on others that we ended up changing the GridDir to not have $HOME in it<br/>
<span style="color: #3c8c69"><span style="font-size: small">(14:08:30)</span> <b>jpeterson:</b></span> I think where the CE $HOME is not the same as the login/worker $HOME<br/>
<blockquote>
<span style="color: #43761b"><span style="font-size: small">(14:12:40)</span> <b>blin:</b></span> i don't think this is the problem since we're not hardcoding the CE home dir in the generated submit<br/>
</blockquote>
<span style="color: #9e3997"><span style="font-size: small">(14:09:00)</span> <b>bbockelm:</b></span> did you look at the generated submit script and see precisely what variables are defined?<br/>
<span style="color: #43761b"><span style="font-size: small">(14:10:11)</span> <b>blin:</b></span> yup, everything looked good on the CE side<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:10:24)</span> <b>bbockelm:</b></span> was <tt>$X509_CERT_DIR</tt> set?<br/>
<span style="color: #43761b"><span style="font-size: small">(14:10:52)</span> <b>blin:</b></span> AFAIU, that's supposed to get set by <tt>glidein_startup.sh</tt> when it sources <tt>$OSG_GRID/setup.sh</tt><br/>
<span style="color: #43761b"><span style="font-size: small">(14:11:10)</span> <b>blin:</b></span> and <tt>$OSG_GRID=$HOME/bosco-osg-wn-client</tt><br/>
<span style="color: #9e3997"><span style="font-size: small">(14:11:37)</span> <b>bbockelm:</b></span> Yup - I just want to make sure there's nothing that could disrupt that sequence of events.<br/>
<span style="color: #3c8c69"><span style="font-size: small">(14:11:57)</span> <b>jpeterson:</b></span> (side note news, apparently as of yesterday cert-manager is on River)<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:12:05)</span> <b>bbockelm:</b></span> wonderful!<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:15:05)</span> <b>bbockelm:</b></span> @jpeterson - where's an example pilot log?  I'd like to see if it's logging the <tt>$OSG_GRID</tt> location from the worker node point-of-view.<br/>
<span style="color: #3c8c69"><span style="font-size: small">(14:23:34)</span> <b>jpeterson:</b></span> <pre>WARN Fri Apr  9 14:34:50 EDT 2021 OSG_SQUID_LOCATION undefined, not using any Squid URL<br/>------- Initial environment ---------------<br/>SLURM_NODELIST=epyc02<br/>SLURM_JOB_NAME=bl_0eblrW<br/>XDG_SESSION_ID=15001<br/>HOSTNAME=epyc02<br/>SLURM_TOPOLOGY_ADDR=epyc02<br/>SLURMD_NODENAME=epyc02<br/>SLURM_PRIO_PROCESS=0<br/>SLURM_NODE_ALIASES=(null)<br/>SHELL=/bin/bash<br/>HISTSIZE=1000<br/>SLURM_JOB_QOS=normal<br/>SSH_CLIENT=128.104.103.217 53745 22<br/>SLURM_TOPOLOGY_ADDR_PATTERN=node<br/>TMPDIR=/tmp<br/>OSG_WN_TMP=/scr/osg01<br/>NODE_COUNT=1<br/>USER=osg01<br/>SLURM_NNODES=1<br/>OSG_SITE_WRITE=<br/>LD_LIBRARY_PATH=$ORIGIN/../lib:$ORIGIN/../lib/condor<br/>SLURM_JOBID=2124<br/>OSG_SITE_READ=<br/>CONDORCE_COLLECTOR_HOST=<a href="http://utc-epyc-ce1.svc.opensciencegrid.org:9619">utc-epyc-ce1.svc.opensciencegrid.org:9619</a><br/>PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin<br/>MAIL=/var/spool/mail/osg01<br/>SLURM_TASKS_PER_NODE=1<br/>SLURM_CONF=/etc/slurm/slurm.conf<br/>SLURM_WORKING_CLUSTER=epyc:epyc:6817:9216:101<br/>SLURM_JOB_ID=2124<br/>OSG_DATA=UNAVAILABLE<br/>PWD=/opt/share/osg/osg01/bosco_slate/sandbox/2717/2717eda1/utc-epyc-ce1.svc.opensciencegrid.org_9619_utc-epyc-ce1.svc.opensciencegrid.org_6.0_1617993278/home_bl_utc-epyc-ce1.svc.opensciencegrid.org_9619_utc-epyc-ce1.svc.opensciencegrid.org_6.0_1617993278<br/>SLURM_JOB_USER=osg01<br/>OSG_APP=UNAVAILABLE<br/>LANG=C<br/>MODULEPATH=/opt/share/modulefiles<br/>LOADEDMODULES=<br/>SLURM_JOB_UID=2222<br/>SLURM_NODEID=0<br/>SLURM_SUBMIT_DIR=/opt/share/osg/osg01/bosco_slate/sandbox/2717/2717eda1/utc-epyc-ce1.svc.opensciencegrid.org_9619_utc-epyc-ce1.svc.opensciencegrid.org_6.0_1617993278<br/>OSG_GRID=/home//osg01/bosco-osg-wn-client<br/>SLURM_TASK_PID=981<br/>SLURM_CPUS_ON_NODE=1<br/>HISTCONTROL=ignoredups<br/>ENVIRONMENT=BATCH<br/>SLURM_PROCID=0<br/>OSG_HOSTNAME=<a href="http://utc-epyc-ce1.svc.opensciencegrid.org">utc-epyc-ce1.svc.opensciencegrid.org</a><br/>SLURM_JOB_NODELIST=epyc02<br/>HOME=/opt/share/osg/osg01/bosco_slate/sandbox/2717/2717eda1/utc-epyc-ce1.svc.opensciencegrid.org_9619_utc-epyc-ce1.svc.opensciencegrid.org_6.0_1617993278/home_bl_utc-epyc-ce1.svc.opensciencegrid.org_9619_utc-epyc-ce1.svc.opensciencegrid.org_6.0_1617993278<br/>SHLVL=5<br/>SLURM_LOCALID=0<br/>OSG_STORAGE_ELEMENT=False<br/>X509_USER_PROXY=/opt/share/osg/osg01/bosco_slate/sandbox/2717/2717eda1/utc-epyc-ce1.svc.opensciencegrid.org_9619_utc-epyc-ce1.svc.opensciencegrid.org_6.0_1617993278/credential_osg-flock-grid-iu-edu_OSG_gWMSFrontend.main_357657<br/>SLURM_CLUSTER_NAME=epyc<br/>SLURM_JOB_CPUS_PER_NODE=1<br/>SLURM_JOB_GID=2222<br/>SLURM_SUBMIT_HOST=epyc<br/>SLURM_GTIDS=0<br/>SLURM_JOB_PARTITION=general<br/>OSG_DEFAULT_SE=<br/>LOGNAME=osg01<br/>SSH_CONNECTION=128.104.103.217 53745 10.199.0.11 22<br/>OSG_SITE_NAME=UTC-Epyc<br/>MODULESHOME=/usr/share/Modules<br/>SLURM_JOB_NUM_NODES=1<br/>LESSOPEN=||/usr/bin/lesspipe.sh %s<br/>XDG_RUNTIME_DIR=/run/user/2222<br/>GLITE_LOCATION=/opt/share/osg/osg01/bosco_slate/glite<br/>SLURM_MEM_PER_NODE=10240<br/>BASH_FUNC_module()=() {  eval <tt>/usr/bin/modulecmd bash $*</tt><br/>}<br/>_=/usr/bin/env<br/>------- =================== ---------------<br/>WARN Fri Apr  9 14:34:50 EDT 2021 GLOBUS_LOCATION not defined and could not guess it.<br/>WARN Fri Apr  9 14:34:50 EDT 2021 Looked in:<br/>WARN Fri Apr  9 14:34:50 EDT 2021  /opt/globus/etc/globus-user-env.sh<br/>WARN Fri Apr  9 14:34:50 EDT 2021  /osgroot/osgcore/globus/etc/globus-user-env.sh<br/>WARN Fri Apr  9 14:34:50 EDT 2021 Continuing like nothing happened<br/>WARN Fri Apr  9 14:34:50 EDT 2021 GLOBUS_PATH not defined and /etc/globus-user-env.sh does not exist.<br/>WARN Fri Apr  9 14:34:50 EDT 2021 Continuing like nothing happened<br/>Setting X509_USER_PROXY /opt/share/osg/osg01/bosco_slate/sandbox/2717/2717eda1/utc-epyc-ce1.svc.opensciencegrid.org_9619_utc-epyc-ce1.svc.opensciencegrid.org_6.0_1617993278/credential_osg-flock-grid-iu-edu_OSG_gWMSFrontend.main_357657 to canonical path /opt/share/osg/osg01/bosco_slate/sandbox/2717/2717eda1/utc-epyc-ce1.svc.opensciencegrid.org_9619_utc-epyc-ce1.svc.opensciencegrid.org_6.0_1617993278/credential_osg-flock-grid-iu-edu_OSG_gWMSFrontend.main_357657<br/>Fri Apr  9 14:34:50 EDT 2021 log_init: no recipients configured. Logs will still be produced, but not forwarded to remote servers.<br/>Fri Apr  9 14:34:50 EDT 2021: Started logging stderr on file too<br/>signature.l487R1.sha1: OK<br/>signature.l487R1.sha1: OK<br/>signature.l48fOF.sha1: OK<br/>signature.l48fOF.sha1: OK<br/>description.l487R1.cfg: OK<br/>Signature OK for main:description.l487R1.cfg.<br/>description.l487R1.cfg: OK<br/>Signature OK for entry:description.l487R1.cfg.<br/>description.l48fOF.cfg: OK<br/>Signature OK for client:description.l48fOF.cfg.<br/>description.l48fOF.cfg: OK<br/>Signature OK for client_group:description.l48fOF.cfg.<br/>file_list.l487R1.lst: OK<br/>Signature OK for main:file_list.l487R1.lst.<br/>error_gen.l487R1.sh: OK<br/>Signature OK for main:error_gen.l487R1.sh.<br/>error_augment.l487R1.sh: OK<br/>Signature OK for main:error_augment.l487R1.sh.<br/>setup_script.l487R1.sh: OK<br/>Signature OK for main:setup_script.l487R1.sh.<br/>=== validation OK in /scr/osg01/glide_9rXjlI/main/setup_script.sh (0) ===<br/>constants.l1fbEz.cfg: OK<br/>Signature OK for main:constants.l1fbEz.cfg.<br/>condor_vars.kcg7rO.lst: OK<br/>Signature OK for main:condor_vars.kcg7rO.lst.<br/>untar.l1fbEz.cfg: OK<br/>Signature OK for main:untar.l1fbEz.cfg.<br/>grid-mapfile.i54gXK: OK<br/>Signature OK for main:grid-mapfile.i54gXK.<br/>parse_starterlog.l487R1.awk: OK<br/>Signature OK for main:parse_starterlog.l487R1.awk.<br/>advertise_failure.l487R1.helper: OK<br/>Signature OK for main:advertise_failure.l487R1.helper.<br/>condor_config.l487R1: OK<br/>Signature OK for main:condor_config.l487R1.<br/>condor_config.multi_schedd.l487R1.include: OK<br/>Signature OK for main:condor_config.multi_schedd.l487R1.include.<br/>condor_config.dedicated_starter.l487R1.include: OK<br/>Signature OK for main:condor_config.dedicated_starter.l487R1.include.<br/>condor_config.check.l487R1.include: OK<br/>Signature OK for main:condor_config.check.l487R1.include.<br/>condor_config.monitor.l487R1.include: OK<br/>Signature OK for main:condor_config.monitor.l487R1.include.<br/>glidein_lib.l487R1.sh: OK<br/>Signature OK for main:glidein_lib.l487R1.sh.<br/>singularity_lib.l487R1.sh: OK<br/>Signature OK for main:singularity_lib.l487R1.sh.<br/>cat_consts.l487R1.sh: OK<br/>Signature OK for main:cat_consts.l487R1.sh.<br/>=== validation OK in /scr/osg01/glide_9rXjlI/main/cat_consts.sh (0) ===<br/>condor_platform_select.l487R1.sh: OK<br/>Signature OK for main:condor_platform_select.l487R1.sh.<br/>=== validation OK in /scr/osg01/glide_9rXjlI/main/condor_platform_select.sh (0) ===<br/>singularity_wrapper.l487R1.sh: OK<br/>Signature OK for main:singularity_wrapper.l487R1.sh.<br/>=== validation OK in /scr/osg01/glide_9rXjlI/main/singularity_wrapper.sh (0) ===<br/>condor_bin_0.l487R1.tgz: OK<br/>Signature OK for main:condor_bin_0.l487R1.tgz.<br/>collector_setup.l487R1.sh: OK<br/>Signature OK for main:collector_setup.l487R1.sh.<br/>No GLIDEIN_CCB found (will use collectors if CCB is enabled)!<br/>=== validation OK in /scr/osg01/glide_9rXjlI/main/collector_setup.sh (0) ===<br/>create_temp_mapfile.l487R1.sh: OK<br/>Signature OK for main:create_temp_mapfile.l487R1.sh.<br/>=== validation OK in /scr/osg01/glide_9rXjlI/main/create_temp_mapfile.sh (0) ===<br/>gwms-python.l487R1: OK<br/>Signature OK for main:gwms-python.l487R1.<br/>=== validation OK in /scr/osg01/glide_9rXjlI/main/gwms-python (0) ===<br/>condor_startup.l487R1.sh: OK<br/>Signature OK for main:condor_startup.l487R1.sh.<br/>Skipping last script condor_startup.sh<br/>setup_x509.l487R1.sh: OK<br/>Signature OK for main:setup_x509.l487R1.sh.<br/>WARNING - Could not find CA certificates!<br/>Looked in:<br/>	$X509_CERT_DIR ()<br/>	$HOME/.globus/certificates/ (/opt/share/osg/osg01/bosco_slate/sandbox/2717/2717eda1/utc-epyc-ce1.svc.opensciencegrid.org_9619_utc-epyc-ce1.svc.opensciencegrid.org_6.0_1617993278/home_bl_utc-epyc-ce1.svc.opensciencegrid.org_9619_utc-epyc-ce1.svc.opensciencegrid.org_6.0_1617993278/.globus/certificates/)<br/>	/etc/grid-security/certificates/	$GLOBUS_LOCATION/share/certificates/ (/share/certificates/)<br/>	$X509_CADIR ()<br/>grid-proxy-init command not found in path!<br/>voms-proxy-init command not found in path!<br/>Not all x509 commands found in path (2 missing)!<br/>cp: cannot stat '/opt/share/osg/osg01/bosco_slate/sandbox/2717/2717eda1/utc-epyc-ce1.svc.opensciencegrid.org_9619_utc-epyc-ce1.svc.opensciencegrid.org_6.0_1617993278/*idtoken': No such file or directory<br/>=== validation OK in /scr/osg01/glide_9rXjlI/main/setup_x509.sh (60) ===<br/>check_wn_drainstate.l487R1.sh: OK<br/>Signature OK for main:check_wn_drainstate.l487R1.sh.<br/>=== validation OK in /scr/osg01/glide_9rXjlI/main/check_wn_drainstate.sh (60) ===<br/>mjf_setparams.l487R1.sh: OK<br/>Signature OK for main:mjf_setparams.l487R1.sh.<br/>=== validation OK in /scr/osg01/glide_9rXjlI/main/mjf_setparams.sh (1800) ===<br/>htchirp.tar.l487R1.gz: OK<br/>Signature OK for main:htchirp.tar.l487R1.gz.<br/>sethome.l487R1.source: OK<br/>Signature OK for main:sethome.l487R1.source.<br/>preentry_file_list.l48fOF.lst: OK<br/>Signature OK for client:preentry_file_list.l48fOF.lst.<br/>constants.l3mfF5.cfg: OK<br/>Signature OK for client:constants.l3mfF5.cfg.<br/>condor_vars.l31eOH.lst: OK<br/>Signature OK for client:condor_vars.l31eOH.lst.<br/>untar.j8nfaq.cfg: OK<br/>Signature OK for client:untar.j8nfaq.cfg.<br/>No signature for /scr/osg01/glide_9rXjlI/client/nodes.blacklist.<br/>cat_consts.l48fOF.sh: OK<br/>Signature OK for client:cat_consts.l48fOF.sh.</pre><br/>
<span style="color: #3c8c69"><span style="font-size: small">(14:23:40)</span> <b>jpeterson:</b></span> <pre>=== validation OK in /scr/osg01/glide_9rXjlI/client/cat_consts.sh (0) ===<br/>check_blacklist.l48fOF.sh: OK<br/>Signature OK for client:check_blacklist.l48fOF.sh.<br/>=== validation OK in /scr/osg01/glide_9rXjlI/client/check_blacklist.sh (0) ===<br/>setup_prejob.l48fOF.sh: OK<br/>Signature OK for client:setup_prejob.l48fOF.sh.<br/>grid-mapfile.k47bOt: OK<br/>Signature OK for client:grid-mapfile.k47bOt.<br/>preentry_file_list.l48fOF.lst: OK<br/>Signature OK for client_group:preentry_file_list.l48fOF.lst.<br/>constants.jblgTs.cfg: OK<br/>Signature OK for client_group:constants.jblgTs.cfg.<br/>condor_vars.l3gcTy.lst: OK<br/>Signature OK for client_group:condor_vars.l3gcTy.lst.<br/>untar.j8nfaq.cfg: OK<br/>Signature OK for client_group:untar.j8nfaq.cfg.<br/>No signature for /scr/osg01/glide_9rXjlI/client_group_main/nodes.blacklist.<br/>cat_consts.l48fOF.sh: OK<br/>Signature OK for client_group:cat_consts.l48fOF.sh.<br/>=== validation OK in /scr/osg01/glide_9rXjlI/client_group_main/cat_consts.sh (0) ===<br/>check_blacklist.l48fOF.sh: OK<br/>Signature OK for client_group:check_blacklist.l48fOF.sh.<br/>=== validation OK in /scr/osg01/glide_9rXjlI/client_group_main/check_blacklist.sh (0) ===<br/>osgvo-default-image.l1bdfP: OK<br/>Signature OK for client_group:osgvo-default-image.l1bdfP.<br/>INFO   Arguments to the script: glidein_config client_group<br/>INFO   Sourcing /scr/osg01/glide_9rXjlI/add_config_line.source<br/>INFO   All done - time to do some real work!<br/>=== validation OK in /scr/osg01/glide_9rXjlI/client_group_main/osgvo-default-image (0) ===<br/>aftergroup_preentry_file_list.j8nfaq.lst: OK<br/>Signature OK for client:aftergroup_preentry_file_list.j8nfaq.lst.<br/>file_list.l487R1.lst: OK<br/>Signature OK for entry:file_list.l487R1.lst.<br/>constants.l47aK5.cfg: OK<br/>Signature OK for entry:constants.l47aK5.cfg.<br/>condor_vars.l46ch6.lst: OK<br/>Signature OK for entry:condor_vars.l46ch6.lst.<br/>untar.l46ch6.cfg: OK<br/>Signature OK for entry:untar.l46ch6.cfg.<br/>No signature for /scr/osg01/glide_9rXjlI/entry_OSG_US_UTC-Epyc/nodes.blacklist.<br/>cat_consts.l487R1.sh: OK<br/>Signature OK for entry:cat_consts.l487R1.sh.<br/>=== validation OK in /scr/osg01/glide_9rXjlI/entry_OSG_US_UTC-Epyc/cat_consts.sh (0) ===<br/>check_blacklist.l487R1.sh: OK<br/>Signature OK for entry:check_blacklist.l487R1.sh.<br/>=== validation OK in /scr/osg01/glide_9rXjlI/entry_OSG_US_UTC-Epyc/check_blacklist.sh (0) ===<br/>at_file_list.l487R1.lst: OK<br/>Signature OK for main:at_file_list.l487R1.lst.<br/>singularity_setup.l487R1.sh: OK<br/>Signature OK for main:singularity_setup.l487R1.sh.<br/>INFO  Sourcing add config line: /scr/osg01/glide_9rXjlI/add_config_line.source<br/>INFO  Checking for singularity...<br/>ERROR  : Failed to create user namespace: user namespace disabled<br/>INFO  Singularity at /cvmfs/oasis.opensciencegrid.org/mis/singularity/bin/singularity failed<br/>which: no singularity in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin)<br/>which: no singularity in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin)<br/>which: no singularity in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin)<br/>Fri Apr  9 14:35:28 EDT 2021 Singularity not found in OSG_SINGULARITY_BINARY[_DEFAULT], PATH and module<br/>Fri Apr  9 14:35:28 EDT 2021 PATH(/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin), attempt results( OSG(/cvmfs/oasis.opensciencegrid.org/mis/singularity/bin/singularity):TF(3.7.2) PATH(): module(): module(): module():)<br/>=== validation OK in /scr/osg01/glide_9rXjlI/main/singularity_setup.sh (0) ===<br/>condor_chirp.l487R1: OK<br/>Signature OK for main:condor_chirp.l487R1.<br/>=== validation OK in /scr/osg01/glide_9rXjlI/main/condor_chirp (0) ===<br/>file_list.l48fOF.lst: OK<br/>Signature OK for client:file_list.l48fOF.lst.<br/>osgvo-node-validation.k8viuT: OK<br/>Signature OK for client:osgvo-node-validation.k8viuT.<br/>=== Validation error in /scr/osg01/glide_9rXjlI/client/osgvo-node-validation ===<br/>Fri Apr  9 14:35:28 EDT 2021 Error running '/scr/osg01/glide_9rXjlI/client/osgvo-node-validation'<br/>     The test script did not produce an XML file. No further information available.<br/>Fri Apr  9 14:35:29 EDT 2021 Sleeping 337<br/>Fri Apr  9 14:41:06 EDT 2021 Sleeping 268<br/>Fri Apr  9 14:45:34 EDT 2021 Sleeping 322<br/>Fri Apr  9 14:50:56 EDT 2021 Sleeping 271<br/>rm: cannot remove '/scr/osg01/glide_9rXjlI/logs/fa8e9edf-a768-4793-8d1f-92f1467bec9c': Directory not empty<br/>rm: cannot remove '/scr/osg01/glide_9rXjlI/client': Directory not empty</pre><br/>
<span style="color: #3c8c69"><span style="font-size: small">(14:23:52)</span> <b>jpeterson:</b></span> split job.err from factory<br/>
<span style="color: #674b1b"><span style="font-size: small">(14:23:59)</span> <b>rynge:</b></span> Yeah, OSG VO has an extra check... :slightly_smiling_face:<br/>
<span style="color: #674b1b"><span style="font-size: small">(14:25:03)</span> <b>rynge:</b></span> I can probably take that one out<br/>
<span style="color: #43761b"><span style="font-size: small">(14:26:54)</span> <b>blin:</b></span> <pre>condor_startup.l487R1.sh: OK<br/>Signature OK for main:condor_startup.l487R1.sh.<br/>Skipping last script condor_startup.sh<br/>setup_x509.l487R1.sh: OK<br/>Signature OK for main:setup_x509.l487R1.sh.<br/>WARNING - Could not find CA certificates!<br/>Looked in:<br/>	$X509_CERT_DIR ()<br/>	$HOME/.globus/certificates/ (/opt/share/osg/osg01/bosco_slate/sandbox/2717/2717eda1/utc-epyc-ce1.svc.opensciencegrid.org_9619_utc-epyc-ce1.svc.opensciencegrid.org_6.0_1617993278/home_bl_utc-epyc-ce1.svc.opensciencegrid.org_9619_utc-epyc-ce1.svc.opensciencegrid.org_6.0_1617993278/.globus/certificates/)<br/>	/etc/grid-security/certificates/	$GLOBUS_LOCATION/share/certificates/ (/share/certificates/)<br/>	$X509_CADIR ()<br/>grid-proxy-init command not found in path!<br/>voms-proxy-init command not found in path!<br/>Not all x509 commands found in path (2 missing)!<br/>cp: cannot stat '/opt/share/osg/osg01/bosco_slate/sandbox/2717/2717eda1/utc-epyc-ce1.svc.opensciencegrid.org_9619_utc-epyc-ce1.svc.opensciencegrid.org_6.0_1617993278/*idtoken': No such file or directory<br/>=== validation OK in /scr/osg01/glide_9rXjlI/main/setup_x509.sh (60) ===</pre><br/>i think the last line here means that gwms is happy with the warning.<br/>
<span style="color: #674b1b"><span style="font-size: small">(14:27:41)</span> <b>rynge:</b></span> Actually that is not mine - I only check the CRLs<br/>
<span style="color: #43761b"><span style="font-size: small">(14:28:19)</span> <b>blin:</b></span> it's really weird that the heading is /after/ the logs<br/>
<span style="color: #43761b"><span style="font-size: small">(14:30:12)</span> <b>blin:</b></span> the problem seems to be here somewhere:<br/><pre>file_list.l48fOF.lst: OK<br/>Signature OK for client:file_list.l48fOF.lst.<br/>osgvo-node-validation.k8viuT: OK<br/>Signature OK for client:osgvo-node-validation.k8viuT.<br/>=== Validation error in /scr/osg01/glide_9rXjlI/client/osgvo-node-validation ===<br/>Fri Apr  9 14:35:28 EDT 2021 Error running '/scr/osg01/glide_9rXjlI/client/osgvo-node-validation'<br/>     The test script did not produce an XML file. No further information available.</pre><br/>i think the <tt>=== Validation error</tt> is what's important and what causes the pilot to stop<br/>
<span style="color: #674b1b"><span style="font-size: small">(14:30:31)</span> <b>rynge:</b></span> Yeah, definitely seems scrambled<br/>
<span style="color: #674b1b"><span style="font-size: small">(14:33:21)</span> <b>rynge:</b></span> Could it be that the node does not have bash?<br/>
<span style="color: #674b1b"><span style="font-size: small">(14:35:44)</span> <b>rynge:</b></span> Can you try to run <a href="https://github.com/opensciencegrid/osg-flock/blob/master/node-check/osgvo-node-validation">https://github.com/opensciencegrid/osg-flock/blob/master/node-check/osgvo-node-validation</a> by hand?<br/>
<span style="color: #3c8c69"><span style="font-size: small">(14:41:26)</span> <b>jpeterson:</b></span> from the worker node?<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:15:33)</span> <b>bbockelm:</b></span> <pre>OSG_GRID=/home//osg01/bosco-osg-wn-client</pre><br/>versus<br/><pre>HOME=/opt/share/osg/osg01/bosco_slate/sandbox/2717/2717eda1/utc-epyc-ce1.svc.opensciencegrid.org_9619_utc-epyc-ce1.svc.opensciencegrid.org_6.0_1617993278/home_bl_utc-epyc-ce1.svc.opensciencegrid.org_9619_utc-epyc-ce1.svc.opensciencegrid.org_6.0_1617993278</pre><br/>Looks pretty suspicious to me.<br/>
<span style="color: #43761b"><span style="font-size: small">(15:16:28)</span> <b>blin:</b></span> where are you getting the first one from?<br/>
<span style="color: #43761b"><span style="font-size: small">(15:17:12)</span> <b>blin:</b></span> if it's the generated submit script, you should <tt>grep OSG_GRID</tt> instead. we do some hackery to get around condor evaluating env vars itself<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:20:20)</span> <b>bbockelm:</b></span> That was from the logs that @jpeterson copied above.<br/>
<span style="color: #43761b"><span style="font-size: small">(15:21:19)</span> <b>blin:</b></span> ugh :disappointed:<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:21:31)</span> <b>bbockelm:</b></span> Sounds like if <tt>OSG_GRID</tt> is set correctly then the CA cert stuff might go away.<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:22:44)</span> <b>jpeterson:</b></span> should I try the GridDir without variables?<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:23:51)</span> <b>bbockelm:</b></span> That I know less of; I don't know if it affects the deploy as well.<br/>
<span style="color: #43761b"><span style="font-size: small">(15:24:33)</span> <b>blin:</b></span> you can hardcode it if you only have a single user<br/>
<span style="color: #43761b"><span style="font-size: small">(15:25:35)</span> <b>blin:</b></span> i'm stumped why the job would have that, though<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:26:14)</span> <b>jpeterson:</b></span> currently just have an <tt>osg01</tt><br/>
<span style="color: #43761b"><span style="font-size: small">(15:27:08)</span> <b>blin:</b></span> before you redeploy, let me grab a generated slurm submit<br/>
<span style="color: #43761b"><span style="font-size: small">(15:29:00)</span> <b>blin:</b></span> ok i'm set<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:36:32)</span> <b>jpeterson:</b></span> redeployed, job cleared, new starting.<br/>
<span style="color: #43761b"><span style="font-size: small">(15:44:37)</span> <b>blin:</b></span> i see the problem. from the slurm submit<br/><pre>export "OSG_GRID=/root"<br/>export "HOME=/home//osg01"<br/>OSG_GRID="$HOME/bosco-osg-wn-client"<br/>export OSG_GRID</pre><br/><br/>
<span style="color: #43761b"><span style="font-size: small">(15:45:06)</span> <b>blin:</b></span> that goofy HOME is coming from the CE...fixed in unreleased versions of HTCondor-CE :disappointed:<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:49:47)</span> <b>jpeterson:</b></span> and we have registered core usage showing in the graphs<br/>
<span style="color: #9e3997"><span style="font-size: small">(16:02:38)</span> <b>bbockelm:</b></span> see, another set of eyeballs is worth it!<br/>
</body>
</html>
