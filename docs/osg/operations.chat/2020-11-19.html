<!DOCTYPE html>
<html>
<head>
<title>Thu Nov 19, 2020 : #operations (osg)</title>
</head>
<body>
<h3>Thu Nov 19, 2020 : #operations (osg)</h3>
<span style="color: #43761b"><span style="font-size: small">(12:16:50)</span> <b>blin:</b></span> @jdost321 if lincoln gives us the set of potentially affected CEs, we can check if they have existing cert/key secrets and use them if they're not expired yet by specifying them in <tt>HostCertSecret</tt> and <tt>HostKeySecret</tt> again<br/>
<span style="color: #385a86"><span style="font-size: small">(12:21:28)</span> <b>jdost321:</b></span> sure i think thats the simplest way forward<br/>
<span style="color: #385a86"><span style="font-size: small">(12:22:13)</span> <b>jdost321:</b></span> if thye were recently started with both set to null and we didn't manually generate the key, i presume we can just kube ctl exec in to find htem?<br/>
<span style="color: #43761b"><span style="font-size: small">(12:22:56)</span> <b>blin:</b></span> yup<br/>
<span style="color: #385a86"><span style="font-size: small">(12:29:35)</span> <b>jdost321:</b></span> @lincoln rather than the staging thing Ilike what @blin is suggesting here, if you can give me a list of affected CEs, i can just store the current certs as secrets and redoply, let you know they are ready, then they should survive the rolling updates<br/>
<span style="color: #e96699"><span style="font-size: small">(12:29:44)</span> <b>lincoln:</b></span> yes sounds good<br/>
<span style="color: #e96699"><span style="font-size: small">(12:29:53)</span> <b>lincoln:</b></span> I think the answer is 'all of them', to first order<br/>
<span style="color: #e96699"><span style="font-size: small">(12:29:56)</span> <b>lincoln:</b></span> but Ill maek a list<br/>
<span style="color: #385a86"><span style="font-size: small">(12:30:32)</span> <b>jdost321:</b></span> ok, fair enough, i think we only have a subset we've stopped storing them in certs anyway we can just get started on that<br/>
<span style="color: #e96699"><span style="font-size: small">(12:30:42)</span> <b>lincoln:</b></span> <pre><br/>osg-hosted-ce-amnh-ares                   osg-ops              uchicago-river-v2    instance_Q-1hr1M8AKg<br/>osg-hosted-ce-amnh-hel                    osg-ops              uchicago-river-v2    instance_1Jgg3bG-YnI<br/>osg-hosted-ce-amnh-mendel                 osg-ops              uchicago-river-v2    instance_ibCvroG2nmA<br/>osg-hosted-ce-asu-dell-m240               osg-ops              uchicago-river-v2    instance_ieT6A6m0fUg<br/>osg-hosted-ce-computecanada-cedar         osg-ops              uchicago-river-v2    instance_fJ_1B3XurlM<br/>osg-hosted-ce-fsu-hnpgrid                 osg-ops              uchicago-river-v2    instance_4DXPwRqnjhM<br/>osg-hosted-ce-gsu-acore                   osg-ops              uchicago-river-v2    instance__DNdH4SnFPk<br/>osg-hosted-ce-nd-caml-gpu                 osg-ops              uchicago-river-v2    instance_sWAI3_GMWDM<br/>osg-hosted-ce-psc-bridges                 osg-ops              uchicago-river-v2    instance_clG4zpsZu98<br/>osg-hosted-ce-sdsc-expanse                osg-ops              uchicago-river-v2    instance_IgRmTTan4o0<br/>osg-hosted-ce-sdsc-triton-stratus         osg-ops              uchicago-river-v2    instance_DtFyxew3_o8<br/>osg-hosted-ce-tacc-frontera               osg-hepcloud-ops     uchicago-river-v2    instance_ZKBN7nCW1hI<br/>osg-hosted-ce-tacc-stampede2              osg-hepcloud-ops     uchicago-river-v2    instance_2HPeDWIHjug<br/>osg-hosted-ce-tcnj-elsa                   osg-ops              uchicago-river-v2    instance_8LjJdBS_yQo<br/>osg-hosted-ce-uci-gpatlas                 osg-ops              uchicago-river-v2    instance_I9uDzE8ZAOQ<br/>osg-hosted-ce-uconn-xanadu                osg-ops              uchicago-river-v2    instance_1K6S9Q_ollg<br/>osg-hosted-ce-ucsd-comet                  osg-ops              uchicago-river-v2    instance_ykxyAE-23M8<br/>osg-hosted-ce-usf-sc                      osg-ops              uchicago-river-v2    instance_l4ocFFA8P-4<br/>osg-hosted-ce-uwm-nemo                    osg-ops              uchicago-river-v2    instance_jnLemCsWwzY<br/>osg-hosted-ce-wsu-grid                    osg-ops              uchicago-river-v2    instance_uo5HDOfBxnQ</pre><br/><br/>
<span style="color: #385a86"><span style="font-size: small">(12:30:43)</span> <b>jdost321:</b></span> *storing them in secrets<br/>
<span style="color: #e96699"><span style="font-size: small">(12:30:45)</span> <b>lincoln:</b></span> yeah<br/>
<span style="color: #e96699"><span style="font-size: small">(12:30:51)</span> <b>lincoln:</b></span> <tt>osg-hosted-ce-uci-gpatlas</tt> accidentally got restarted yesterday<br/>
<span style="color: #3c8c69"><span style="font-size: small">(12:41:45)</span> <b>jpeterson:</b></span> amnh-Mendel, nd-caml-gpu, tufts-cluster were all restarted this morning, but donâ€™t know if they started back up on new or old hosts<br/>
<span style="color: #e96699"><span style="font-size: small">(12:42:09)</span> <b>lincoln:</b></span> happy to check-<br/>
<span style="color: #385a86"><span style="font-size: small">(12:45:57)</span> <b>jdost321:</b></span> we have 8 that aren't currently in secrets, i'll just take a pass thru all of them and request a new cert for ones that may be close to expiring<br/>
<span style="color: #385a86"><span style="font-size: small">(12:47:25)</span> <b>jdost321:</b></span> Lincoln I'll let you know when i finish<br/>
<span style="color: #385a86"><span style="font-size: small">(16:55:06)</span> <b>jdost321:</b></span> @lincoln well that took way too long but all our host certs are in secrets, go ahead with your rolling updates when you're ready!<br/>
</body>
</html>
