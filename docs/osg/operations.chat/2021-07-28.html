<!DOCTYPE html>
<html>
<head>
<title>Wed Jul 28, 2021 : #operations (osg)</title>
</head>
<body>
<h3>Wed Jul 28, 2021 : #operations (osg)</h3>
<span style="color: #53b759"><span style="font-size: small">(11:51:36)</span> <b>marian:</b></span> @blin: could you trigger image build for gracc-apel, please? Huijun submitted PR which I reviewed and merged but I seem like it doesn't autobuild: <a href="https://hub.docker.com/r/opensciencegrid/gracc-apel/builds">https://hub.docker.com/r/opensciencegrid/gracc-apel/builds</a> ... on another note, BrianB mentioned you have somebody who is migrating things to github actions from docker? maybe gracc-apel is a good candidate...<br/>
<span style="color: #43761b"><span style="font-size: small">(11:52:22)</span> <b>blin:</b></span> i can't trigger an image build, docker hub stopped doing those<br/>
<span style="color: #43761b"><span style="font-size: small">(11:52:28)</span> <b>blin:</b></span> it'll have to be migrated to a GHA<br/>
<span style="color: #53b759"><span style="font-size: small">(11:53:00)</span> <b>marian:</b></span> ah, ok ... should we stick with local builds for now or how soon we can have gracc-apel in GHA?<br/>
<span style="color: #43761b"><span style="font-size: small">(11:53:25)</span> <b>blin:</b></span> check out steps 6-8 here <a href="https://opensciencegrid.org/technology/software/container-development-guide/#prepare-the-github-repository">https://opensciencegrid.org/technology/software/container-development-guide/#prepare-the-github-repository</a><br/>
<blockquote>
<span style="color: #53b759"><span style="font-size: small">(15:40:18)</span> <b>marian:</b></span> hey Brian ... I think I initiated workflow but I get stuck on "6. Give write permissions to the "osg-bot" user for this GitHub repo, navigating to:" ... can't find a. Settings?<br/>
<span style="color: #43761b"><span style="font-size: small">(15:43:21)</span> <b>blin:</b></span> do you have a link to the docker repo?<br/>
<span style="color: #43761b"><span style="font-size: small">(16:05:12)</span> <b>blin:</b></span> @marian ^^<br/>
<span style="color: #53b759"><span style="font-size: small">(17:48:18)</span> <b>marian:</b></span> gracc-apel under OSG github<br/>
<span style="color: #53b759"><span style="font-size: small">(17:49:04)</span> <b>marian:</b></span> That’s source repo, for dockerhub repo it’s also gracc-apel, though <br/>
<span style="color: #53b759"><span style="font-size: small">(17:49:58)</span> <b>marian:</b></span> In source repo I created initial workflow that I don’t expect to build properly yet but thought I could do steps 6-8, but can’t find “settings”<br/>
<span style="color: #53b759"><span style="font-size: small">(17:50:24)</span> <b>marian:</b></span> Maybe I don’t have enough permissions for that, don’t know<br/>
<span style="color: #43761b"><span style="font-size: small">(2021-07-29 09:04:40)</span> <b>blin:</b></span> @marian permissions should be good now<br/>
<span style="color: #53b759"><span style="font-size: small">(2021-07-29 10:40:27)</span> <b>marian:</b></span> Thanks! I try out later… day off today but I eventually get to it…<br/>
<span style="color: #53b759"><span style="font-size: small">(2021-07-30 17:55:32)</span> <b>marian:</b></span> ehm, not sure what I'm doing wrong, but not seeing any "settings" in gracc-apel project in <a href="https://github.com/opensciencegrid/gracc-apel/">https://github.com/opensciencegrid/gracc-apel/</a> to do step 7 from instructions ... follow up on Monday ...<br/>
<span style="color: #43761b"><span style="font-size: small">(2021-07-30 18:53:01)</span> <b>blin:</b></span> I already handled the dockerhub and github settings so you just need to commit the gha yaml<br/>
<span style="color: #53b759"><span style="font-size: small">(2021-08-02 10:57:00)</span> <b>marian:</b></span> ah, good to know, thanks<br/>
<span style="color: #53b759"><span style="font-size: small">(2021-08-02 15:36:04)</span> <b>marian:</b></span> starring at workflow yaml, which is default and pretty much just a template since I created it, is there a good example that I can take a peak and suggest how it should look like?<br/>
<span style="color: #43761b"><span style="font-size: small">(2021-08-02 15:36:56)</span> <b>blin:</b></span> you really shouldn't need to change anything if you just click the buttons in the github UI to add + commit the yaml<br/>
<span style="color: #43761b"><span style="font-size: small">(2021-08-02 15:41:16)</span> <b>blin:</b></span> looks like it's failling <a href="https://github.com/opensciencegrid/gracc-apel/runs/3185879744?check_suite_focus=true">https://github.com/opensciencegrid/gracc-apel/runs/3185879744?check_suite_focus=true</a><br/>
<span style="color: #43761b"><span style="font-size: small">(2021-08-02 15:41:59)</span> <b>blin:</b></span> i kicked off a new run from here <a href="https://github.com/opensciencegrid/gracc-apel/actions/workflows/build-sw-container.yml">https://github.com/opensciencegrid/gracc-apel/actions/workflows/build-sw-container.yml</a> since the secret settings look right<br/>
<span style="color: #43761b"><span style="font-size: small">(2021-08-02 15:53:12)</span> <b>blin:</b></span> looks good<br/>
<span style="color: #43761b"><span style="font-size: small">(2021-08-02 15:53:22)</span> <b>blin:</b></span> <a href="https://github.com/opensciencegrid/gracc-apel/actions/workflows/build-sw-container.yml">https://github.com/opensciencegrid/gracc-apel/actions/workflows/build-sw-container.yml</a><br/>
</blockquote>
<span style="color: #7d414c"><span style="font-size: small">(12:14:27)</span> <b>bockjoo:</b></span> My redirector went down yesterday so I had to replace it with a different host. So, I created a PR for the topology to change the xrootd endpoint from <a href="http://cmsio5.rc.ufl.edu">cmsio5.rc.ufl.edu</a> to <a href="http://cmsio7.rc.ufl.edu">cmsio7.rc.ufl.edu</a>.<br/>
<span style="color: #43761b"><span style="font-size: small">(16:20:11)</span> <b>blin:</b></span> hey @didavila do you have the container GHA in a specific branch?<br/>
<span style="color: #a2a5dc"><span style="font-size: small">(16:22:04)</span> <b>didavila:</b></span> the FE one has 2 very similar but different GHS workflows, one per branch (dev and main)<br/>
<span style="color: #a2a5dc"><span style="font-size: small">(16:22:27)</span> <b>didavila:</b></span> <pre><a href="https://github.com/glideinWMS/containers/blob/main/.github/workflows/docker_build.yml">https://github.com/glideinWMS/containers/blob/main/.github/workflows/docker_build.yml</a></pre><br/>
<span style="color: #43761b"><span style="font-size: small">(16:22:31)</span> <b>blin:</b></span> gotcha, thanks<br/>
<span style="color: #a2a5dc"><span style="font-size: small">(16:22:40)</span> <b>didavila:</b></span> <a href="https://github.com/glideinWMS/containers/blob/dev/.github/workflows/docker_build.yml">https://github.com/glideinWMS/containers/blob/dev/.github/workflows/docker_build.yml</a><br/>
<blockquote>
<span style="color: #43761b"><span style="font-size: small">(16:26:56)</span> <b>blin:</b></span> aha, it looks like you're smart and are already using PATH-based contexts <a href="https://github.com/glideinWMS/containers/blob/dev/.github/workflows/docker_build.yml#L34">https://github.com/glideinWMS/containers/blob/dev/.github/workflows/docker_build.yml#L34</a><br/>
<span style="color: #43761b"><span style="font-size: small">(16:27:26)</span> <b>blin:</b></span> if you don't specify <tt>context: PATH</tt>, it'll use a URL-based context and for whatever reason the permissions are all screwed up. it's why the crons were world writable<br/>
</blockquote>
</body>
</html>
