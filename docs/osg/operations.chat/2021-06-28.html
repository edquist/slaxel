<!DOCTYPE html>
<html>
<head>
<title>Mon Jun 28, 2021 : #operations (osg)</title>
</head>
<body>
<h3>Mon Jun 28, 2021 : #operations (osg)</h3>
<span style="color: #e96699"><span style="font-size: small">(09:27:28)</span> <b>lincoln:</b></span> Hi folks, we have a user who is submitting glideins to MWT2 to connect back to the <tt><a href="http://uclhc-1.ps.uci.edu">uclhc-1.ps.uci.edu</a></tt> pool<br/>
<span style="color: #e96699"><span style="font-size: small">(09:27:44)</span> <b>lincoln:</b></span> They were submitting at our site several months ago under the <tt>usatlas3</tt> user and were banned for crashing our nodes<br/>
<span style="color: #e96699"><span style="font-size: small">(09:27:48)</span> <b>lincoln:</b></span> now they are submitting  via the <tt>osg</tt> user<br/>
<span style="color: #e96699"><span style="font-size: small">(09:28:06)</span> <b>lincoln:</b></span> I am not sure how to filter out these jobs without banning all OSG jobs<br/>
<span style="color: #e96699"><span style="font-size: small">(09:28:08)</span> <b>lincoln:</b></span> advice?<br/>
<span style="color: #235e5b"><span style="font-size: small">(09:30:35)</span> <b>dweitzel:</b></span> @lincoln Ban OSG, like any site would, and pester the OSG to figure things out.<br/>
<span style="color: #e96699"><span style="font-size: small">(09:30:39)</span> <b>lincoln:</b></span> will do<br/>
<span style="color: #235e5b"><span style="font-size: small">(09:30:40)</span> <b>dweitzel:</b></span> Also, jeez, what did I miss?<br/>
<span style="color: #c386df"><span style="font-size: small">(09:33:31)</span> <b>matyas:</b></span> tiger went down<br/>
<span style="color: #c386df"><span style="font-size: small">(09:33:48)</span> <b>matyas:</b></span> like, all of it<br/>
<span style="color: #c386df"><span style="font-size: small">(09:34:43)</span> <b>matyas:</b></span> and apparently etcd is not... corruption resistant...<br/>
<span style="color: #e96699"><span style="font-size: small">(09:36:53)</span> <b>lincoln:</b></span> The k3s guys have the right idea with just replacing it with sqlite :slightly_smiling_face:<br/>
<span style="color: #e96699"><span style="font-size: small">(09:37:35)</span> <b>lincoln:</b></span> sqlite is annoying about ensuring data integrity to the point where it'll be greatly unhappy and refuse to start up if you put it on, e.g., NFS.<br/>
<span style="color: #c386df"><span style="font-size: small">(09:40:57)</span> <b>matyas:</b></span> unfortunately it does not complain about AFS<br/>
<span style="color: #c386df"><span style="font-size: small">(09:41:17)</span> <b>matyas:</b></span> which lies about having byte-range locking<br/>
<span style="color: #e96699"><span style="font-size: small">(09:41:24)</span> <b>lincoln:</b></span> ha!<br/>
<span style="color: #c386df"><span style="font-size: small">(09:41:37)</span> <b>matyas:</b></span> I've lost my firefox profile that way<br/>
<span style="color: #e96699"><span style="font-size: small">(09:41:49)</span> <b>lincoln:</b></span> storage and filesystems are so funny like that.<br/>
<span style="color: #e96699"><span style="font-size: small">(09:41:54)</span> <b>lincoln:</b></span> filesystems lie, hard disk controllers definitely lie<br/>
<span style="color: #e96699"><span style="font-size: small">(09:42:02)</span> <b>lincoln:</b></span> and it's all fine until you lose power!<br/>
<span style="color: #c386df"><span style="font-size: small">(09:42:06)</span> <b>matyas:</b></span> yep!<br/>
<span style="color: #c386df"><span style="font-size: small">(11:45:34)</span> <b>matyas:</b></span> did we use to have upcoming -&gt; 3.5-upcoming symlinks on repo?<br/>
<span style="color: #c386df"><span style="font-size: small">(11:47:51)</span> <b>matyas:</b></span> they might have been made manually and lost during the rebuild...<br/>
<span style="color: #e06b56"><span style="font-size: small">(11:52:32)</span> <b>jthiltges:</b></span> Looks like there _should_ be. (SOFTWARE-4420) Might have been a mistake I made in the docker conversion.<br/><a href="https://github.com/opensciencegrid/osg-repo-scripts/commit/614d00f7259ee6092f97300efed7da3ae6fb8d76">https://github.com/opensciencegrid/osg-repo-scripts/commit/614d00f7259ee6092f97300efed7da3ae6fb8d76</a><br/>
<span style="color: #c386df"><span style="font-size: small">(11:56:35)</span> <b>matyas:</b></span> Can you add it back? People deploying their repo files via Puppet might still have the old path in there.<br/>
<blockquote>
<span style="color: #e06b56"><span style="font-size: small">(12:08:16)</span> <b>jthiltges:</b></span> Working on it. There was some symlink madness because the scripts wrote to <tt>/usr/local</tt>, and I think a symlink didn't get recreated properly.<br/>
<span style="color: #e06b56"><span style="font-size: small">(12:12:32)</span> <b>jthiltges:</b></span> Hmm. Maaaybe it's OK? The upcoming symlink is present in the mirrorlist data:<br/>E.g. <a href="https://repo.opensciencegrid.org/mirror/osg/upcoming/el7/release/">https://repo.opensciencegrid.org/mirror/osg/upcoming/el7/release/</a><br/>I'd hope puppet is pointing there.<br/>
<span style="color: #c386df"><span style="font-size: small">(12:13:14)</span> <b>matyas:</b></span> not CHTC's!<br/>
<span style="color: #c386df"><span style="font-size: small">(12:13:21)</span> <b>matyas:</b></span> :disappointed:<br/>
<span style="color: #c386df"><span style="font-size: small">(12:14:38)</span> <b>matyas:</b></span> also would the mirrors keep the symlink around if it vanished at the source?<br/>
<span style="color: #e06b56"><span style="font-size: small">(12:23:51)</span> <b>jthiltges:</b></span> Ah, probably not. I assume rsync would zap it. There was a indeed a symlink on the old Nebraska VM. <a href="http://hcc-osg-repo.unl.edu/osg/upcoming/">http://hcc-osg-repo.unl.edu/osg/upcoming/</a><br/><br/>I'm in favor of removing cruft where possible. But I'm good with just adding a symlink if that's the right direction. Your call!<br/><br/>However it goes, it'd be great to roll into the existing repo scripts. Maybe even a single config knob for both repo and mirrorlist so they stay in sync.<br/>
<span style="color: #e06b56"><span style="font-size: small">(12:29:35)</span> <b>jthiltges:</b></span> Symlink added manually.<br/><br/>I do need to recreate the repo pod to move the storage back onto ceph (currently local). So we'll have a chance to test out a change to generate the symlink!<br/>
<span style="color: #c386df"><span style="font-size: small">(12:37:05)</span> <b>matyas:</b></span> I'm making a ticket. So is <a href="https://repo.opensciencegrid.org/mirror/osg/upcoming/">https://repo.opensciencegrid.org/mirror/osg/upcoming/</a> a symlink to <a href="https://repo.opensciencegrid.org/mirror/osg/3.5-upcoming/">https://repo.opensciencegrid.org/mirror/osg/3.5-upcoming/</a> and <a href="https://repo.opensciencegrid.org/osg/upcoming/">https://repo.opensciencegrid.org/osg/upcoming/</a> to <a href="https://repo.opensciencegrid.org/osg/3.5-upcoming/">https://repo.opensciencegrid.org/osg/3.5-upcoming/</a> ?<br/>
<span style="color: #c386df"><span style="font-size: small">(12:41:48)</span> <b>matyas:</b></span> <a href="https://opensciencegrid.atlassian.net/browse/SOFTWARE-4689">https://opensciencegrid.atlassian.net/browse/SOFTWARE-4689</a><br/>
<span style="color: #e06b56"><span style="font-size: small">(12:58:19)</span> <b>jthiltges:</b></span> Correct on both symlinks, to my knowledge.<br/>
<span style="color: #e06b56"><span style="font-size: small">(12:58:37)</span> <b>jthiltges:</b></span> And thanks for opening the ticket.<br/>
<span style="color: #c386df"><span style="font-size: small">(12:59:04)</span> <b>matyas:</b></span> sure, no problem. Thanks for fixing it by hand<br/>
</blockquote>
<span style="color: #674b1b"><span style="font-size: small">(13:22:13)</span> <b>rynge:</b></span> Probably a question for @tannenba and @gthain  - what is a good way to blacklist a single user from a host flocking to you? I basically want to say "do not schedule any jobs from this user" with the caveat that I only have admin on the CM, and not on the schedd<br/>
<blockquote>
<span style="color: #de5f24"><span style="font-size: small">(15:32:13)</span> <b>tannenba:</b></span> @rynge @gthain Hi Mats, I suggest you use <tt>NEGOTIATOR_SUBMITTER_CONSTRAINT</tt> knob on your central manager.<br/>
<span style="color: #674b1b"><span style="font-size: small">(15:33:08)</span> <b>rynge:</b></span> Ok, will look at that<br/>
<span style="color: #674b1b"><span style="font-size: small">(15:33:30)</span> <b>rynge:</b></span> What about already running jobs, can I can kick them out somehow?<br/>
<span style="color: #de5f24"><span style="font-size: small">(15:35:04)</span> <b>tannenba:</b></span> Re already running jobs:  if you don't have access to the schedd, perhaps you do have access to the startd?  If yes, then you could issue <tt>condor_vacate &lt;slotname&gt;</tt>.`<br/>
<span style="color: #de5f24"><span style="font-size: small">(15:35:24)</span> <b>tannenba:</b></span> Ie just tell the startd to kick off the job running on that slot.<br/>
<span style="color: #de5f24"><span style="font-size: small">(15:35:42)</span> <b>tannenba:</b></span> Of course you will need to have permissions to do this...<br/>
<span style="color: #de5f24"><span style="font-size: small">(15:38:03)</span> <b>tannenba:</b></span> So an example of kicking off one user:<br/><pre>NEGOTIATOR_SUBMITTER_CONSTRAINT = Name != "<a href="mailto:batch_processing.cer246@cyverse.org">batch_processing.cer246@cyverse.org</a>"</pre><br/>
</blockquote>
<span style="color: #53b759"><span style="font-size: small">(15:02:51)</span> <b>marian:</b></span> <pre>026 (6209602.002.000) 06/28 12:13:05 Detected Down Grid Resource<br/>    GridResource: condor <a href="http://sut-ozstar-ce1.svc.opensciencegrid.org">sut-ozstar-ce1.svc.opensciencegrid.org</a> <a href="http://sut-ozstar-ce1.svc.opensciencegrid.org:9619">sut-ozstar-ce1.svc.opensciencegrid.org:9619</a></pre><br/>can someone poke hosted-CE above? or do you want file a ticket, @jpeterson?<br/>
<blockquote>
<span style="color: #c386df"><span style="font-size: small">(16:29:44)</span> <b>matyas:</b></span> Probably one of the casualties of Friday's outage -- seems to be having trouble connecting to the internet.<br/><pre>Err:1 <a href="http://deb.debian.org/debian">http://deb.debian.org/debian</a> stretch InRelease<br/>Temporary failure resolving '<a href="http://deb.debian.org">deb.debian.org</a>'<br/>Err:2 <a href="http://security.debian.org/debian-security">http://security.debian.org/debian-security</a> stretch/updates InRelease<br/>Temporary failure resolving '<a href="http://security.debian.org">security.debian.org</a>'<br/>Err:3 <a href="http://deb.debian.org/debian">http://deb.debian.org/debian</a> stretch-updates InRelease<br/>Temporary failure resolving '<a href="http://deb.debian.org">deb.debian.org</a>'</pre><br/>
<span style="color: #53b759"><span style="font-size: small">(16:41:02)</span> <b>marian:</b></span> ok, who can re-crank up this host or anything I can do about it, please?<br/>
<span style="color: #c386df"><span style="font-size: small">(16:41:39)</span> <b>matyas:</b></span> Jeff's working on them<br/>
<span style="color: #53b759"><span style="font-size: small">(16:41:45)</span> <b>marian:</b></span> thanks!<br/>
<span style="color: #c386df"><span style="font-size: small">(16:41:58)</span> <b>matyas:</b></span> (it's not the only hosted CE that's broken right now)<br/>
<span style="color: #53b759"><span style="font-size: small">(16:43:16)</span> <b>marian:</b></span> yeah, I can imagine, thanks for the update!<br/>
</blockquote>
<span style="color: #5a4592"><span style="font-size: small">(16:15:30)</span> <b>lmichael:</b></span> Hi everyone helping Mats. The PATh PIs will review steps taken to address the over-memory jobs from UCI, so please help document steps taken and communication with sites/admin/user, by tomorrow morning 12pm CT.<br/><a href="https://docs.google.com/document/d/1rOEqSQ_aX2R1BKSNbMDz9jS3ziT9jN37KLQWJyGBsLw/edit">https://docs.google.com/document/d/1rOEqSQ_aX2R1BKSNbMDz9jS3ziT9jN37KLQWJyGBsLw/edit</a><br/>
<span style="color: #53b759"><span style="font-size: small">(16:42:27)</span> <b>marian:</b></span> trying to troubleshoot JLAB FE that hosts CLAS12 and EIC pilot requests - I see common pattern for both in an separate err logs as follows:<br/><pre>[2021-06-28 20:55:52,578] ERROR: glideinFrontendInterface:872: Advertising failed for factory pool <a href="http://gfactory-2.opensciencegrid.org">gfactory-2.opensciencegrid.org</a>:<br/>Traceback (most recent call last):<br/>  File "/usr/lib/python3.6/site-packages/glideinwms/lib/condorExe.py", line 154, in iexe_cmd<br/>    stdout_data = subprocessSupport.iexe_cmd(cmd, stdin_data=stdin_data, child_env=child_env)<br/>  File "/usr/lib/python3.6/site-packages/glideinwms/lib/subprocessSupport.py", line 103, in iexe_cmd<br/>    raise CalledProcessError(exitStatus, cmd, output="".join(stderrdata))<br/>subprocess.CalledProcessError: Command '/usr/sbin/condor_advertise -pool <a href="http://gfactory-2.opensciencegrid.org">gfactory-2.opensciencegrid.org</a> -tcp -multiple UPDATE_MASTER_AD /tmp/gfi_ad_batch_574913745_28037_gfactory-2.opensciencegrid.org' returned non-zero exit status 1.<br/><br/>During handling of the above exception, another exception occurred:<br/><br/>Traceback (most recent call last):<br/>  File "/usr/lib/python3.6/site-packages/glideinwms/frontend/glideinFrontendInterface.py", line 870, in do_advertize_batch_one<br/>    advertizeWorkFromFile(factory_pool, filename, remove_file=remove_files, is_multi=frontendConfig.advertise_use_multi)<br/>  File "/usr/lib/python3.6/site-packages/glideinwms/frontend/glideinFrontendInterface.py", line 738, in advertizeWorkFromFile<br/>    exe_condor_advertise(fname, "UPDATE_MASTER_AD", factory_pool, is_multi=is_multi)<br/>  File "/usr/lib/python3.6/site-packages/glideinwms/frontend/glideinFrontendInterface.py", line 1692, in exe_condor_advertise<br/>    is_multi, pool)<br/>  File "/usr/lib/python3.6/site-packages/glideinwms/lib/condorManager.py", line 162, in condorAdvertise<br/>    return condorExe.exe_cmd_sbin("condor_advertise", cmd_opts)<br/>  File "/usr/lib/python3.6/site-packages/glideinwms/lib/condorExe.py", line 93, in exe_cmd_sbin<br/>    return iexe_cmd(cmd, stdin_data, env)<br/>  File "/usr/lib/python3.6/site-packages/glideinwms/lib/condorExe.py", line 162, in iexe_cmd<br/>    raise ExeError(msg)<br/>glideinwms.lib.condorExe.ExeError: Unexpected Error running '/usr/sbin/condor_advertise -pool <a href="http://gfactory-2.opensciencegrid.org">gfactory-2.opensciencegrid.org</a> -tcp -multiple UPDATE_MASTER_AD /tmp/gfi_ad_batch_574913745_28037_gfactory-2.opensciencegrid.org'. Details: Command '/usr/sbin/condor_advertise -pool <a href="http://gfactory-2.opensciencegrid.org">gfactory-2.opensciencegrid.org</a> -tcp -multiple UPDATE_MASTER_AD /tmp/gfi_ad_batch_574913745_28037_gfactory-2.opensciencegrid.org' returned non-zero exit status 1.. Stdout:<br/>[2021-06-28 20:55:52,648] ERROR: condorExe:158: Unexpected Error running '/usr/sbin/condor_advertise -tcp -multiple UPDATE_AD_GENERIC /tmp/gfi_ar_574913745_28073'. Details: Command '/usr/sbin/condor_advertise -tcp -multiple UPDATE_AD_GENERIC /tmp/gfi_ar_574913745_28073' returned non-zero exit status 1.. Stdout:<br/>[2021-06-28 20:55:52,654] DEBUG: condorExe:159: script to reproduce failure:<br/>-------------------- begin script --------------------<br/>#!/bin/bash<br/>OSGDEV_HARBOR_HARBOR_REGISTRY_PORT_8443_TCP=<a href="tcp://10.99.223.196:8443">tcp://10.99.223.196:8443</a><br/>OPEN_SCIENCE_CE_WENMR_CE1_PORT_9619_TCP_ADDR=10.96.185.47<br/>ELASTICSEARCH_ES_HTTP_PORT_9200_TCP_ADDR=10.99.91.122<br/>OSG_DISPLAY_SERVICE_PORT=<a href="tcp://10.110.242.105:80">tcp://10.110.242.105:80</a><br/>UBUNTU_SUBMIT_PORT=<a href="tcp://10.100.236.229:9618">tcp://10.100.236.229:9618</a><br/>OSGDEV_HARBOR_HARBOR_REGISTRY_SERVICE_PORT_CONTROLLER=8443<br/>OSG_HOSTED_CE_LSUHSC_TF_CE1_SERVICE_PORT=9619<br/>TRAEFIK_INGRESS_SERVICE_SERVICE_PORT_HTTP=80<br/>OSGDEV_HARBOR_HARBOR_CHARTMUSEUM_SERVICE_HOST=10.106.88.15<br/>TRAEFIK_INGRESS_SERVICE_PORT_443_TCP_ADDR=10.106.103.242<br/>OSG_HOSTED_CE_LSUHSC_TF_CE1_PORT=<a href="tcp://10.97.128.117:9619">tcp://10.97.128.117:9619</a><br/>...<br/>...</pre><br/>anybody familiar with it?<br/>
<span style="color: #53b759"><span style="font-size: small">(16:53:54)</span> <b>marian:</b></span> I see also another sign of the problem, but probably unrelated to above:<br/><pre>[2021-06-28 21:45:43,803] DEBUG: glideinFrontendLib:666: Running glidein ids at ('<a href="http://gfactory-2.opensciencegrid.org">gfactory-2.opensciencegrid.org</a>', 'OSG_US_UConn_gluskap@gfactory_instance@OSG', '<a href="mailto:fejlab@gfactory-2.opensciencegrid.org">fejlab@gfactory-2.opensciencegrid.org</a>') (total glideins: 0, total jobs 0, cluster matches: 0):<br/>[2021-06-28 21:45:43,829] DEBUG: glideinFrontendLib:423: There were 1 exceptions in countMatch subprocess. Most recent traceback: ['Traceback (most recent call last):\n', '  File "/usr/lib/python3.6/site-packages/glideinwms/frontend/glideinFrontendLib.py", line 377, in countMatch\n    match = eval(match_obj)\n', '  File "&lt;string&gt;", line 1, in &lt;module&gt;\n', "TypeError: '&lt;=' not supported between instances of 'int' and 'str'\n"]</pre><br/>this looks to me more like to the <tt>frontend.xml</tt> , somewhere ... @marcom, any hints? to first as well as second issue?<br/>
<blockquote>
<span style="color: #dd8527"><span style="font-size: small">(17:20:37)</span> <b>marcom:</b></span> This error was fixed with the commit (RequestCpus from string to int), correct?<br/>
</blockquote>
<span style="color: #53b759"><span style="font-size: small">(16:56:27)</span> <b>marian:</b></span> running FE v3.9.2-1 and condor v9.0.0 on that particular frontend ... from Tiger osgdev namespace<br/>
<span style="color: #c386df"><span style="font-size: small">(16:58:16)</span> <b>matyas:</b></span> which frontend is that?<br/>
<span style="color: #c386df"><span style="font-size: small">(17:02:46)</span> <b>matyas:</b></span> one of the match expressions in the frontend.xml is trying to compare an int (on the left) with a str (on the right)<br/>
<span style="color: #dd8527"><span style="font-size: small">(17:11:37)</span> <b>marcom:</b></span> Hi Marian, about the second one. When updating to Python 3 (v3.9.x) we have a script checking the match expression, but it is missing the type declarations in the match_attrs for factory and jobs. Probably you have something that should be int and python2 was more forgiving about it. Can you paste here your configuration (whole match section)?<br/>
<span style="color: #53b759"><span style="font-size: small">(17:14:04)</span> <b>marian:</b></span> JLAB FE: <a href="https://github.com/opensciencegrid/tiger-osg-config/blob/master/manifests/development/vo-frontend-jlab/frontend.xml">https://github.com/opensciencegrid/tiger-osg-config/blob/master/manifests/development/vo-frontend-jlab/frontend.xml</a> ... note, I had similar issue upon start of this FE last week but it made it start up after this commit: <a href="https://github.com/opensciencegrid/tiger-osg-config/commit/edb00319d3a3ea150458925ff3a8de1e6c62ccaf">https://github.com/opensciencegrid/tiger-osg-config/commit/edb00319d3a3ea150458925ff3a8de1e6c62ccaf</a><br/>
<span style="color: #dd8527"><span style="font-size: small">(17:15:38)</span> <b>marcom:</b></span> I have no access. Either someone can add me as a watcher for those repo or paste the code? I'm "mambelli" on GitHub<br/>
<span style="color: #53b759"><span style="font-size: small">(17:15:51)</span> <b>marian:</b></span> this is global section of the <tt>match</tt> part:<br/>
<span style="color: #53b759"><span style="font-size: small">(17:15:55)</span> <b>marian:</b></span> <pre>   &lt;match match_expr='(job.get("RequestCpus",1)&lt;=glidein["attrs"]["GLIDEIN_CPUS"]) and ((job.get("DESIRED_Sites","nosite")=="nosite") or (glidein["attrs"]["GLIDEIN_Site"] in job.get("DESIRED_Sites","nosite").split(","))) and (glidein["attrs"]["GLIDEIN_MaxMemMBs"]==0 or job.get("RequestMemory", 1024)&lt;=glidein["attrs"]["GLIDEIN_MaxMemMBs"]) and (job.get("UNDESIRED_Sites","nosite")=="nosite" or (glidein["attrs"]["GLIDEIN_Site"] not in job.get("UNDESIRED_Sites","").split(",")))' start_expr='((DESIRED_Sites=?=undefined) || stringListMember(GLIDEIN_Site,DESIRED_Sites,","))&amp;&amp;(UNDESIRED_Sites=?=undefined || !stringListMember(GLIDEIN_Site,UNDESIRED_Sites,","))'&gt;<br/>      &lt;factory query_expr='true'&gt;<br/>         &lt;match_attrs&gt;<br/>            &lt;match_attr name="GLIDEIN_CPUS" type="int"/&gt;<br/>            &lt;match_attr name="GLIDEIN_MaxMemMBs" type="int"/&gt;<br/>            &lt;match_attr name="GLIDEIN_Site" type="string"/&gt;<br/>            &lt;match_attr name="UNDESIRED_Sites" type="string"/&gt;<br/>         &lt;/match_attrs&gt;<br/>         &lt;collectors&gt;<br/>            &lt;collector DN="/DC=org/DC=incommon/C=US/ST=WI/L=Madison/O=University of Wisconsin-Madison/OU=OCIS/CN=gfactory-2.opensciencegrid.org" comment="Second OSG Factory" factory_identity="gfactory@gfactory-2.opensciencegrid.org" my_identity="fejlab@gfactory-2.opensciencegrid.org" node="gfactory-2.opensciencegrid.org"/&gt;<br/>            &lt;collector DN="/DC=org/DC=incommon/C=US/ST=Wisconsin/L=Madison/O=University of Wisconsin-Madison/OU=OCIS/CN=gfactory-2.opensciencegrid.org" comment="Second OSG Factory" factory_identity="gfactory@gfactory-2.opensciencegrid.org" my_identity="fejlab@gfactory-2.opensciencegrid.org" node="gfactory-2.opensciencegrid.org"/&gt;<br/>         &lt;/collectors&gt;<br/>      &lt;/factory&gt;<br/>      &lt;job comment="Define job constraint and schedds globally for simplicity" query_expr="(JobUniverse==5)&amp;&amp;(GLIDEIN_Is_Monitor =!= TRUE)&amp;&amp;(JOB_Is_Monitor =!= TRUE)"&gt;<br/>         &lt;match_attrs&gt;<br/>            &lt;match_attr name="DESIRED_Sites" type="string"/&gt;<br/>            &lt;match_attr name="RequestCpus" type="int"/&gt;<br/>            &lt;match_attr name="RequestMemory" type="int"/&gt;<br/>         &lt;/match_attrs&gt;<br/>         &lt;schedds&gt;<br/>            &lt;schedd DN="/CN=scosg16.jlab.org" fullname="scosg16.jlab.org"/&gt;<br/>            &lt;schedd DN="/DC=org/DC=incommon/C=US/ST=Virginia/L=Newport News/O=Thomas Jefferson National Accelerator Facility/OU=SciComp/CN=scosg20.jlab.org" fullname="scosg20.jlab.org"/&gt;<br/>         &lt;/schedds&gt;<br/>      &lt;/job&gt;<br/>   &lt;/match&gt;</pre><br/>
<span style="color: #53b759"><span style="font-size: small">(17:16:38)</span> <b>marian:</b></span> there I've changed last week <tt>RequestCpus</tt> from type="string" to "int" ... commit I referenced where you don't have access<br/>
<span style="color: #53b759"><span style="font-size: small">(17:17:10)</span> <b>marian:</b></span> the error I posted is from clas12 group configured in the fronten.xml where <tt>match</tt> section has:<br/>
<span style="color: #53b759"><span style="font-size: small">(17:17:26)</span> <b>marian:</b></span> <pre>         &lt;match match_expr="True" start_expr='(toLower(projectName) =?= "clas12")'&gt;<br/>            &lt;factory query_expr='((stringListMember("CLAS12", GLIDEIN_Supported_VOs)))'&gt;<br/>               &lt;match_attrs&gt;<br/>               &lt;/match_attrs&gt;<br/>	       &lt;collectors&gt;<br/>	       &lt;/collectors&gt;<br/>            &lt;/factory&gt;<br/>            &lt;job query_expr='(toLower(projectName) =?= "clas12")'&gt;<br/>               &lt;match_attrs&gt;<br/>               &lt;/match_attrs&gt;<br/>               &lt;schedds&gt;<br/>               &lt;/schedds&gt;<br/>            &lt;/job&gt;<br/>         &lt;/match&gt;</pre><br/><br/>
<span style="color: #53b759"><span style="font-size: small">(17:17:37)</span> <b>marian:</b></span> anything obvious to change/experiment with?<br/>
<span style="color: #53b759"><span style="font-size: small">(17:20:12)</span> <b>marian:</b></span> (I have to step away from laptop for a bit but I'll be back)<br/>
<span style="color: #53b759"><span style="font-size: small">(17:22:51)</span> <b>marian:</b></span> can somebody grant acccess to the <tt>tiger-osg-config</tt> to @marcom, would help share the config with, @matyas? or somebody else can grant it?<br/>
<span style="color: #dd8527"><span style="font-size: small">(17:22:58)</span> <b>marcom:</b></span> The error in clas12 is the one with "Unexpected Error running '/usr/sbin/condor_advertise -tcp -multiple UPDATE_AD_GENERIC /tmp/gfi_ar_574913745_28073'. Details: Command '/usr/sbin/condor_advertise -tcp -multiple UPDATE_AD_GENERIC /tmp/gfi_ar_574913745_28073' returned non-zero exit status 1.. Stdout:", correct? To me this one seems an authentication error where the advertising is failing. Something in the condor configuration?<br/>
<span style="color: #53b759"><span style="font-size: small">(17:23:51)</span> <b>marian:</b></span> in which part of condor, on the FE, schedd connecting to it or central manager?<br/>
<span style="color: #53b759"><span style="font-size: small">(17:24:00)</span> <b>marian:</b></span> I'll poke around...<br/>
<span style="color: #53b759"><span style="font-size: small">(17:24:53)</span> <b>marian:</b></span> we've changed couple of certificates to renew proxy for that FE last week, but I think we're updated all other pieces with the DNs involved...<br/>
<span style="color: #dd8527"><span style="font-size: small">(17:28:08)</span> <b>marcom:</b></span> The frontend should trust the collector and vice-versa, so both mapfiles should be checked. Then I saw auth problems also if the CA of a certificate was not in the CA list or had CRLs expired<br/>
<span style="color: #dd8527"><span style="font-size: small">(17:30:02)</span> <b>marcom:</b></span> The condor tool log and the collector log (on the central manager) may help. they should show the failure and what you were mapped into (with d_authdebug)<br/>
<span style="color: #dd8527"><span style="font-size: small">(17:31:00)</span> <b>marcom:</b></span> (sorry d_security)<br/>
<span style="color: #50a0cf"><span style="font-size: small">(20:03:28)</span> <b>timm:</b></span> In higher versions of condor there are some defaults that changed.. to successfully advertise the ALLOW_DAEMON condition has to be true.  I would do D_SECURITY D_FULLDEBUG on the collector side if you can.<br/>
</body>
</html>
