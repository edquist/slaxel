<!DOCTYPE html>
<html>
<head>
<title>Thu Jul 27, 2017 : #osg-rmacc17 (osg)</title>
</head>
<body>
<h3>Thu Jul 27, 2017 : #osg-rmacc17 (osg)</h3>
<span style="color: #5b89d5"><span style="font-size: small">(09:38:30)</span> <b>sthapa:</b></span> initial website and git repo up at <a href="https://swc-osg-workshop.github.io/OSG-HostedCE-RMACC17/">https://swc-osg-workshop.github.io/OSG-HostedCE-RMACC17/</a><br/>
<span style="color: #965d1b"><span style="font-size: small">(12:36:10)</span> <b>briedel:</b></span> for the training host... i want to name it <a href="http://rmacc17.osgconnet.net">rmacc17.osgconnet.net</a><br/>
<span style="color: #674b1b"><span style="font-size: small">(12:39:20)</span> <b>rynge:</b></span> Long term, I would love to do training on out regular login machines. That way we train them in the environment they will be using the system. However, it will not work at this point due to the aws requirements.<br/>
<span style="color: #965d1b"><span style="font-size: small">(12:40:30)</span> <b>briedel:</b></span> yeah<br/>
<span style="color: #965d1b"><span style="font-size: small">(12:40:45)</span> <b>briedel:</b></span> anyway any objections to the name?<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:46:50)</span> <b>rynge:</b></span> No, but why are we not using the <a href="http://training.osgconnect.net">training.osgconnect.net</a> host?<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:47:11)</span> <b>rynge:</b></span> Are we doing custom VMs for each event?<br/>
<span style="color: #965d1b"><span style="font-size: small">(12:48:17)</span> <b>briedel:</b></span> is there this polar science event<br/>
<span style="color: #965d1b"><span style="font-size: small">(12:48:20)</span> <b>briedel:</b></span> that might be using training?<br/>
<span style="color: #965d1b"><span style="font-size: small">(12:58:53)</span> <b>briedel:</b></span> i prefer we dont do a custom vm<br/>
<span style="color: #965d1b"><span style="font-size: small">(12:59:06)</span> <b>briedel:</b></span> but i wasnt sure if we have any hosts left<br/>
<span style="color: #e96699"><span style="font-size: small">(12:59:31)</span> <b>lincoln:</b></span> right now there are <tt><a href="http://user-training.osgconnect.net">user-training.osgconnect.net</a></tt> and <tt><a href="http://training.osgconnect.net">training.osgconnect.net</a></tt> i beleive<br/>
<span style="color: #e96699"><span style="font-size: small">(12:59:59)</span> <b>lincoln:</b></span> both are not being used at the moment<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:00:26)</span> <b>briedel:</b></span> which one is the large host with 128 GB RAM?<br/>
<span style="color: #e96699"><span style="font-size: small">(13:00:38)</span> <b>lincoln:</b></span> user-training, it has 64G<br/>
<span style="color: #674b1b"><span style="font-size: small">(13:01:38)</span> <b>rynge:</b></span> Are they identical? training might have some aws special sauce (I think we put it all in puppet, but I'm not 100% sure)<br/>
<span style="color: #e96699"><span style="font-size: small">(13:02:11)</span> <b>lincoln:</b></span> nope, they aren't identical<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:02:28)</span> <b>briedel:</b></span> i guess user-training doesnt have the bleeding edge condor on it<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:14:59)</span> <b>briedel:</b></span> so can we do user-training for the polar science thing<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:15:05)</span> <b>briedel:</b></span> and training for RMACC17?<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:15:17)</span> <b>briedel:</b></span> i think it will be about the same crowd size<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:15:23)</span> <b>briedel:</b></span> as pearc17<br/>
<span style="color: #e7392d"><span style="font-size: small">(13:26:52)</span> <b>bala:</b></span> ok, finalize on which machine will be used for rmac. Because Kyle  needs to run the tests tomorrow and I am going to create accounts today.<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:27:32)</span> <b>briedel:</b></span> @lincoln which one has the AWS magic?<br/>
<span style="color: #e96699"><span style="font-size: small">(13:28:27)</span> <b>lincoln:</b></span> <tt><a href="http://training.osgconnect.net">training.osgconnect.net</a></tt> i believe<br/>
<span style="color: #e96699"><span style="font-size: small">(13:28:30)</span> <b>lincoln:</b></span> that was used for PEARC<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:28:56)</span> <b>briedel:</b></span> <pre><br/>[root@training ~]# condor_version<br/>$CondorVersion: 8.7.2 Jun 21 2017 BuildID: 408717 $<br/>$CondorPlatform: x86_64_RedHat6 $<br/></pre><br/>
<span style="color: #965d1b"><span style="font-size: small">(13:28:59)</span> <b>briedel:</b></span> seems like it<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:29:10)</span> <b>briedel:</b></span> @bala kyle gets <a href="http://user-training.osgconnect.net">user-training.osgconnect.net</a><br/>
<span style="color: #965d1b"><span style="font-size: small">(13:29:22)</span> <b>briedel:</b></span> we will use <a href="http://training.osgconnect.net">training.osgconnect.net</a> for rmacc17<br/>
<span style="color: #e7392d"><span style="font-size: small">(13:30:32)</span> <b>bala:</b></span> ok sounds good. any preference on usernames. I am going to create osguser200..osguser299<br/>
<span style="color: #e7392d"><span style="font-size: small">(13:31:31)</span> <b>bala:</b></span> we will be creating the user dirs in /stash/user/usernames.<br/>
<span style="color: #e7392d"><span style="font-size: small">(13:31:39)</span> <b>bala:</b></span> so they need to be different.<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:31:43)</span> <b>briedel:</b></span> why do they need stash access?<br/>
<span style="color: #e7392d"><span style="font-size: small">(13:32:03)</span> <b>bala:</b></span> hm.. good q? let me check<br/>
<span style="color: #e7392d"><span style="font-size: small">(13:32:22)</span> <b>bala:</b></span> i thought it will be same as the regular workshops<br/>
<span style="color: #e7392d"><span style="font-size: small">(13:32:45)</span> <b>bala:</b></span> let me check<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:35:21)</span> <b>briedel:</b></span> do people need stash access for a regular workshop?<br/>
<span style="color: #e7392d"><span style="font-size: small">(13:36:08)</span> <b>bala:</b></span> yes, indeed.<br/>
<span style="color: #e7392d"><span style="font-size: small">(13:36:23)</span> <b>bala:</b></span> Kyle says stash is required<br/>
<span style="color: #5b89d5"><span style="font-size: small">(13:37:05)</span> <b>sthapa:</b></span> @bala are we really expecting 300 users?<br/>
<span style="color: #e7392d"><span style="font-size: small">(13:37:11)</span> <b>bala:</b></span> no<br/>
<span style="color: #5b89d5"><span style="font-size: small">(13:37:26)</span> <b>sthapa:</b></span> if not, why not wipe and reuse osguser01 -&gt; osguser99 ?<br/>
<span style="color: #e7392d"><span style="font-size: small">(13:37:30)</span> <b>bala:</b></span> we already have old user accounts took that numbers<br/>
<span style="color: #5b89d5"><span style="font-size: small">(13:37:57)</span> <b>sthapa:</b></span> Can we reuse them?  Clear the accounts and reset the password?<br/>
<span style="color: #e7392d"><span style="font-size: small">(13:38:23)</span> <b>bala:</b></span> osguser100..199 will stay for another 2 weeks (userschool17).<br/>
<span style="color: #e7392d"><span style="font-size: small">(13:38:51)</span> <b>bala:</b></span> osguser01..99 are pearc17 accounts, ok to clear?<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:39:09)</span> <b>briedel:</b></span> they should be<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:39:26)</span> <b>briedel:</b></span> pearc will be 4+ weeks before rmacc<br/>
<span style="color: #5b89d5"><span style="font-size: small">(13:39:30)</span> <b>sthapa:</b></span> yes<br/>
<span style="color: #5b89d5"><span style="font-size: small">(13:39:54)</span> <b>sthapa:</b></span> we didn’t promise accounts that last for a while at pearc<br/>
<span style="color: #5b89d5"><span style="font-size: small">(13:40:13)</span> <b>sthapa:</b></span> at least I don’t think we did, @rynge correct me if I’m wrong here<br/>
<span style="color: #674b1b"><span style="font-size: small">(13:40:25)</span> <b>rynge:</b></span> No, we told them 2 days<br/>
<span style="color: #e7392d"><span style="font-size: small">(13:40:32)</span> <b>bala:</b></span> cool!<br/>
<span style="color: #e7392d"><span style="font-size: small">(13:40:43)</span> <b>bala:</b></span> we will clean them up<br/>
<span style="color: #674b1b"><span style="font-size: small">(13:40:51)</span> <b>rynge:</b></span> Yeah, let's keep it simple<br/>
<span style="color: #5b89d5"><span style="font-size: small">(13:40:51)</span> <b>sthapa:</b></span> I’d prefer to keep the # of user accounts on the machine to the smallest number possible<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:41:35)</span> <b>briedel:</b></span> so just reset the passwords<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:41:40)</span> <b>briedel:</b></span> and clean out the directories<br/>
<span style="color: #e96699"><span style="font-size: small">(13:41:51)</span> <b>lincoln:</b></span> i prefer to just remove/re-add<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:42:02)</span> <b>briedel:</b></span> okay<br/>
<span style="color: #e96699"><span style="font-size: small">(13:42:10)</span> <b>lincoln:</b></span> simply<br/>
<span style="color: #e96699"><span style="font-size: small">(13:42:14)</span> <b>lincoln:</b></span> <pre><br/>#!/bin/sh<br/>for i in $(seq -w 1 99); do<br/>    userdel -r osguser$i<br/>    find /stash/user/osguser$i -type f -exec rm {} \;<br/>    find /stash/user/osguser$i -type d -empty -delete<br/>done<br/></pre><br/>
<span style="color: #674b1b"><span style="font-size: small">(13:42:18)</span> <b>rynge:</b></span> Have we seen any attendee counts for RMACC yet?<br/>
<span style="color: #5b89d5"><span style="font-size: small">(13:42:38)</span> <b>sthapa:</b></span> Not really, but I’d say about 20-30 for each session<br/>
<span style="color: #674b1b"><span style="font-size: small">(13:42:45)</span> <b>rynge:</b></span> I have 23 AWS codes<br/>
<span style="color: #e96699"><span style="font-size: small">(13:42:47)</span> <b>lincoln:</b></span> <tt>rm -rf</tt> scares me so id prefer to use find here if youre deleting user stuff<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:42:52)</span> <b>briedel:</b></span> we havent<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:43:04)</span> <b>briedel:</b></span> i will <tt>userdel</tt> them<br/>
<span style="color: #e96699"><span style="font-size: small">(13:43:09)</span> <b>lincoln:</b></span> yea<br/>
<span style="color: #e96699"><span style="font-size: small">(13:43:50)</span> <b>lincoln:</b></span> note the <tt> echo osguser$i:$(cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 12 | head -n 1) | tee -a /root/accounts-new | chpasswd &amp;&amp; \</tt> as well writes a password file to /root/accounts-new<br/>
<span style="color: #e96699"><span style="font-size: small">(13:43:58)</span> <b>lincoln:</b></span> the <tt>fold -w 12</tt> specifies the password length<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:50:49)</span> <b>briedel:</b></span> thanks<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:51:06)</span> <b>briedel:</b></span> training host is ready<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:51:09)</span> <b>briedel:</b></span> who wants to try<br/>
<span style="color: #e96699"><span style="font-size: small">(13:51:28)</span> <b>lincoln:</b></span> you got the DN and such into place?<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:55:08)</span> <b>briedel:</b></span> DN?<br/>
<span style="color: #e96699"><span style="font-size: small">(13:55:15)</span> <b>lincoln:</b></span> distinguished name<br/>
<span style="color: #e96699"><span style="font-size: small">(13:55:19)</span> <b>lincoln:</b></span> to submit jobs and auth via x509<br/>
<span style="color: #e96699"><span style="font-size: small">(13:55:21)</span> <b>lincoln:</b></span> to osg-flock<br/>
<span style="color: #e96699"><span style="font-size: small">(13:55:36)</span> <b>lincoln:</b></span> you need a host certificate for this machine<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:55:45)</span> <b>briedel:</b></span> i though the machine already has one<br/>
<span style="color: #e96699"><span style="font-size: small">(13:55:52)</span> <b>lincoln:</b></span> sorry, which machine is it?<br/>
<span style="color: #e7392d"><span style="font-size: small">(13:55:53)</span> <b>bala:</b></span> is it required when you change the hostname?<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:56:02)</span> <b>briedel:</b></span> <a href="http://training.osgconnect.net">training.osgconnect.net</a><br/>
<span style="color: #e96699"><span style="font-size: small">(13:56:04)</span> <b>lincoln:</b></span> @bala the DN has to match the hostname, yeah<br/>
<span style="color: #e96699"><span style="font-size: small">(13:56:05)</span> <b>lincoln:</b></span> ah ok<br/>
<span style="color: #e96699"><span style="font-size: small">(13:56:07)</span> <b>lincoln:</b></span> my bad<br/>
<span style="color: #e96699"><span style="font-size: small">(13:56:12)</span> <b>lincoln:</b></span> i thought you were calling something rmacc17<br/>
<span style="color: #e96699"><span style="font-size: small">(13:56:18)</span> <b>lincoln:</b></span> yes then it already has what it needs<br/>
<span style="color: #965d1b"><span style="font-size: small">(13:56:35)</span> <b>briedel:</b></span> i was going to if i couldnt get <a href="http://training.osgconnet.net">training.osgconnet.net</a><br/>
<span style="color: #e96699"><span style="font-size: small">(13:56:43)</span> <b>lincoln:</b></span> got it<br/>
<span style="color: #e7392d"><span style="font-size: small">(13:56:56)</span> <b>bala:</b></span> ah, ok.<br/>
</body>
</html>
