<!DOCTYPE html>
<html>
<head>
<title>Tue Nov 17, 2020 : #facilitation (osg)</title>
</head>
<body>
<h3>Tue Nov 17, 2020 : #facilitation (osg)</h3>
<span style="color: #3c989f"><span style="font-size: small">(09:53:17)</span> <b>emelie:</b></span> Don’t we need to verify their affiliation with the institution somehow using their email?  I got an email address from him.  If I want to be really picky I can make him reply from that address.  Or just take people at their word.  Not sure what is the right way to go…<br/>
<span style="color: #db3150"><span style="font-size: small">(09:57:37)</span> <b>christinalk:</b></span> I have asked people to reply to the thread (or send us a fresh email) from their institutional address just to verify.<br/>
<span style="color: #db3150"><span style="font-size: small">(09:57:54)</span> <b>christinalk:</b></span> You could also change the address associated w/ the thread to the given address + reply to that instead of the original gmail address.<br/>
<span style="color: #3c989f"><span style="font-size: small">(10:03:31)</span> <b>emelie:</b></span> Thanks @christinalk.  I cc-d my response to the address he gave and asked him to reply from that one.<br/>
<span style="color: #3c989f"><span style="font-size: small">(10:05:14)</span> <b>emelie:</b></span> Another question:  How similar do research projects have to be to be combined in the same OSG Connect “project”?  A new user seems to think I should create a new project for him because his research is different than another user in his group that already has an OSG account (same P.I.).<br/>
<span style="color: #db3150"><span style="font-size: small">(10:10:16)</span> <b>christinalk:</b></span> that’s a good question. At some point, I remember that there was the idea of nested projects (so you could create topical projects underneath each PI project), but I don’t know if that is actually possible.<br/>
<span style="color: #db3150"><span style="font-size: small">(10:11:09)</span> <b>christinalk:</b></span> I think the only argument to create a separate project is if there’s a strong reason to be able to account separately for those hours.<br/>
<span style="color: #3c989f"><span style="font-size: small">(10:12:06)</span> <b>emelie:</b></span> I’ll try to get an idea of how similar they are when I meet with him.  I know within the same research group grad students often (usually) each have a different focus/topic.<br/>
<span style="color: #5a4592"><span style="font-size: small">(10:43:53)</span> <b>lmichael:</b></span> Let’s avoid the nested aspect. However, it can help to explain that what we call a ‘project’ is really representative of a research group. If it’s important to the PI that hey have two distinct research groups, then a second project (no need for the concept of nesting) might be appropriate, but I doubt it in this case.<br/>
<span style="color: #5a4592"><span style="font-size: small">(10:43:56)</span> <b>lmichael:</b></span> Make sense?<br/>
<span style="color: #3c989f"><span style="font-size: small">(10:44:38)</span> <b>emelie:</b></span> Yep, I agree.  Plus then I don’t have to create a new project.  :wink:<br/>
<span style="color: #4cc091"><span style="font-size: small">(11:35:02)</span> <b>cbrown58:</b></span> @rynge @blin In one of our last workshops, when running the <a href="https://github.com/OSGConnect/tutorial-osg-locations">osg-locations example</a> (also <a href="https://opensciencegrid.org/virtual-school-pilot-2020/#materials/osg/ex1-submit-refresher/">VSP Grid Exercise #1</a>), we encountered a number of <tt>0, 0</tt> locations returned (I just reran this and only encountered this in 1 out of 5000 jobs - so I’m not sure how widespread this issue is).<br/>
<span style="color: #4cc091"><span style="font-size: small">(11:35:03)</span> <b>cbrown58:</b></span> We are hoping to use this example for a class using OSG. Do either of you know what the source of this error would be and whether there is a fix we can implement relatively quickly (today if possible)?<br/>
<span style="color: #43761b"><span style="font-size: small">(11:37:31)</span> <b>blin:</b></span> iirc, that's just reflective of an IP that isn't in the geoip location lookup<br/>
<span style="color: #4cc091"><span style="font-size: small">(11:39:19)</span> <b>cbrown58:</b></span> Ok. There was a theory that perhaps these were jobs that are running within a container and couldn’t identify the hostname properly. I just want to ensure that this is more of a transient error rather than something widespread that we should try to workaround.<br/>
<span style="color: #674b1b"><span style="font-size: small">(11:40:20)</span> <b>rynge:</b></span> Yeah, that will not work well anymore<br/>
<span style="color: #674b1b"><span style="font-size: small">(11:40:34)</span> <b>rynge:</b></span> A lot of our resources use private IPs<br/>
<span style="color: #43761b"><span style="font-size: small">(11:40:40)</span> <b>blin:</b></span> well technically it's potentially a widespread issue but i don't think there's much we can do except have the scripts ignore IP lookups that resolve to (0, 0)<br/>
<span style="color: #674b1b"><span style="font-size: small">(11:40:56)</span> <b>rynge:</b></span> What you can do is figure out the public IP, and then look up that one<br/>
<span style="color: #43761b"><span style="font-size: small">(11:41:00)</span> <b>blin:</b></span> @rynge iirc, i wrote the lookup so that it grabs the CE hostname and looks that IP up<br/>
<span style="color: #674b1b"><span style="font-size: small">(11:41:43)</span> <b>rynge:</b></span> Hmm, maybe I'm misremembering<br/>
<span style="color: #674b1b"><span style="font-size: small">(11:42:22)</span> <b>rynge:</b></span> We did have an IP lookup problem in stash as well, where a lot of locations mapped to Minnesota<br/>
<span style="color: #674b1b"><span style="font-size: small">(11:42:40)</span> <b>rynge:</b></span> So not (0, 0), but center of US<br/>
<span style="color: #674b1b"><span style="font-size: small">(11:47:57)</span> <b>rynge:</b></span> I think we can steer the jobs or something like that to fix the example<br/>
<span style="color: #4cc091"><span style="font-size: small">(11:50:27)</span> <b>cbrown58:</b></span> I’d be happy to test some possible fixes and make the necessary changes to the repo and other publicly facing files, but I’ll need some guidance on how to do that.<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:03:09)</span> <b>rynge:</b></span> I'll have to run it to see<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:03:14)</span> <b>rynge:</b></span> When do you need it?<br/>
<span style="color: #4cc091"><span style="font-size: small">(12:21:29)</span> <b>cbrown58:</b></span> I am giving the handout to Dan tomorrow.<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:29:23)</span> <b>rynge:</b></span> Ok<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:29:31)</span> <b>rynge:</b></span> I ran 5k jobs and it seems to work for me as well<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:29:53)</span> <b>rynge:</b></span> Was it maybe on Jetstream we had issues?<br/>
<span style="color: #5a4592"><span style="font-size: small">(13:03:48)</span> <b>lmichael:</b></span> potentially. Are we not using Jetstream resources right now?<br/>
<span style="color: #5a4592"><span style="font-size: small">(13:04:08)</span> <b>lmichael:</b></span> What about kubernetes resources? Would they cause problems too?<br/>
<span style="color: #674b1b"><span style="font-size: small">(13:08:53)</span> <b>rynge:</b></span> Same container<br/>
<span style="color: #674b1b"><span style="font-size: small">(13:09:24)</span> <b>rynge:</b></span> This requirement expression should avoid those resources: <tt>OSG_OS_STRING == "RHEL 7" &amp;&amp; HAS_MODULES == True &amp;&amp; IsOsgVoContainer =!= True</tt><br/>
<span style="color: #674b1b"><span style="font-size: small">(13:44:14)</span> <b>rynge:</b></span> @cbrown58 Here is a better version: <tt>requirements = OSG_OS_STRING == "RHEL 7" &amp;&amp; HAS_MODULES &amp;&amp; GLIDEIN_Gatekeeper =!= UNDEFINED</tt><br/>
<span style="color: #674b1b"><span style="font-size: small">(13:44:27)</span> <b>rynge:</b></span> Can we update the instructions to say use an expression like that?<br/>
<span style="color: #5a4592"><span style="font-size: small">(13:47:12)</span> <b>lmichael:</b></span> Let’s start with a list of which docs need the change, so we don’t miss any.<br/>
<span style="color: #674b1b"><span style="font-size: small">(13:48:15)</span> <b>rynge:</b></span> I only looked at <a href="https://opensciencegrid.org/virtual-school-pilot-2020/#materials/osg/ex1-submit-refresher/">https://opensciencegrid.org/virtual-school-pilot-2020/#materials/osg/ex1-submit-refresher/</a><br/>
<span style="color: #4cc091"><span style="font-size: small">(14:10:51)</span> <b>cbrown58:</b></span> Should just be the submit file and README in the repo at <a href="https://github.com/OSGConnect/tutorial-osg-locations">https://github.com/OSGConnect/tutorial-osg-locations</a> (then the VSP materials if that is desired)<br/>
<span style="color: #674b1b"><span style="font-size: small">(14:20:58)</span> <b>rynge:</b></span> Ah, ok, I can edit that<br/>
<span style="color: #674b1b"><span style="font-size: small">(14:21:22)</span> <b>rynge:</b></span> Putting out a fire now, but will get to it later today for sure<br/>
<span style="color: #674b1b"><span style="font-size: small">(14:57:35)</span> <b>rynge:</b></span> @cbrown58 Fix committed.<br/>
<span style="color: #674b1b"><span style="font-size: small">(14:58:06)</span> <b>rynge:</b></span> I ran 5k jobs, and none came back 0,0<br/>
<span style="color: #4cc091"><span style="font-size: small">(14:59:25)</span> <b>cbrown58:</b></span> Thanks Mats! Yeah, it looks like it’s not very frequent now. Hopefully that fix will circumvent it completely in the future.<br/>
<span style="color: #674b1b"><span style="font-size: small">(15:00:24)</span> <b>rynge:</b></span> I'm fairly confident :slightly_smiling_face:<br/>
<span style="color: #5a4592"><span style="font-size: small">(15:08:39)</span> <b>lmichael:</b></span> :+1:<br/>
<span style="color: #db3150"><span style="font-size: small">(17:17:41)</span> <b>christinalk:</b></span> @rynge can I give you this ticket re: adding a docker container to our sync list? <a href="https://support.opensciencegrid.org/a/tickets/66220">https://support.opensciencegrid.org/a/tickets/66220</a><br/>
<span style="color: #674b1b"><span style="font-size: small">(17:18:44)</span> <b>rynge:</b></span> Anytime<br/>
<span style="color: #db3150"><span style="font-size: small">(17:19:49)</span> <b>christinalk:</b></span> it is yours. :slightly_smiling_face:<br/>
</body>
</html>
