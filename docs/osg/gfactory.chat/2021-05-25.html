<!DOCTYPE html>
<html>
<head>
<title>Tue May 25, 2021 : #gfactory (osg)</title>
</head>
<body>
<h3>Tue May 25, 2021 : #gfactory (osg)</h3>
<span style="color: #674b1b"><span style="font-size: small">(10:09:52)</span> <b>rynge:</b></span> Changing my attr to expr, changes the error a little bit:<br/>
<span style="color: #674b1b"><span style="font-size: small">(10:09:55)</span> <b>rynge:</b></span> <pre>05/25/21 09:08:30 (pid:14386) CONFIGURATION PROBLEM: Failed to insert ClassAd attribute STARTD_JOB_ATTRS = x509userproxysubject,x509UserProxyFQAN,x509UserProxyVOName,x509UserProxyEmail,x509UserProxyExpiration,ProjectName GPUsUsage GPUsMemoryUsage GPUsUsage GPUsMemoryUsage.  The most common reason for this is that you forgot to quote a string value in the list of attributes being added to the STARTD ad.</pre><br/><br/>
<span style="color: #674b1b"><span style="font-size: small">(10:10:08)</span> <b>rynge:</b></span> Should those attribute be comma or space separated?<br/>
<span style="color: #674b1b"><span style="font-size: small">(10:10:49)</span> <b>rynge:</b></span> @marcom Any thoughts on the other one? <tt>Failed to insert ClassAd attribute GLIDEIN_Resource_Slots = GPUs,1,type=main.  The most common reason for this is that you forgot to quote a string value in the list of attributes being added to the STARTD ad.</tt><br/>
<span style="color: #674b1b"><span style="font-size: small">(10:12:00)</span> <b>rynge:</b></span> What is odd is that we are getting a few GPU slots in a few places, but in general, we get slots without any gpus listed<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:04:50)</span> <b>bbockelm:</b></span> @rynge - where can I find an example log?<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:06:05)</span> <b>bbockelm:</b></span> Just took a look at the log, the failure noted above is ignored in the code.<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:13:36)</span> <b>rynge:</b></span> <a href="http://flock.opensciencegrid.org/overview/glideins.php">http://flock.opensciencegrid.org/overview/glideins.php</a><br/>
<span style="color: #674b1b"><span style="font-size: small">(12:13:46)</span> <b>rynge:</b></span> <tt>OSG_US_GATech_osg-sched2_gpu</tt> entry<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:14:23)</span> <b>rynge:</b></span> I think the glidien gets confused and does not try to set up the gpu config<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:15:00)</span> <b>rynge:</b></span> Alternatively, the GPUs are not exposed correctly from the site<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:15:08)</span> <b>rynge:</b></span> But I don't see anything like that in the logs<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:18:06)</span> <b>bbockelm:</b></span> Here's the problem:<br/><pre>05/25/21 11:08:50 (pid:125952) Local machine resource GPUs = 0<br/>05/25/21 11:08:50 (pid:125952) Allocating auto shares for slot type 1: Cpus: 1.000000, Memory: auto, Swap: auto, Disk: auto, GPUs: 0<br/>05/25/21 11:08:50 (pid:125952)   slot type 1: Cpus: 1.000000, Memory: 4000, Swap: 100.00%, Disk: 100.00%, GPUs: 0</pre><br/>
<span style="color: #9e3997"><span style="font-size: small">(12:19:10)</span> <b>bbockelm:</b></span> The prior problem at GA Tech was improper routing that caused the GPU pilots to land on non-GPU hosts.  Is it safe to assume that is fixed?<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:20:31)</span> <b>bbockelm:</b></span> I see that 9.0.0 is working on this entry point: <a href="http://xd-login.opensciencegrid.org/monitoring/glideins/entry_OSG_US_WSU-GRID_gpu/StartdLog.txt">http://xd-login.opensciencegrid.org/monitoring/glideins/entry_OSG_US_WSU-GRID_gpu/StartdLog.txt</a><br/>
<span style="color: #43761b"><span style="font-size: small">(12:21:34)</span> <b>blin:</b></span> GA Tech couldn't support GPUs at all previously because the version of Bosco they were running didn't support it. @paschos may know if they have the routing right<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:24:59)</span> <b>bbockelm:</b></span> @rynge - if you want to continue debugging though, I see the same problem at UCSD<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:25:08)</span> <b>bbockelm:</b></span> <a href="http://xd-login.opensciencegrid.org/monitoring/glideins/entry_Glow_US_UCSD_xcache_gpu/StartdLog.txt">http://xd-login.opensciencegrid.org/monitoring/glideins/entry_Glow_US_UCSD_xcache_gpu/StartdLog.txt</a> no GPU detected<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:26:55)</span> <b>bbockelm:</b></span> @jdost321 / @isfiligoi should have some insight into this (fwiw, that log is from <tt><a href="http://osg-wn-gpu-opt-699885446d-nsbtx.optiputer.net">osg-wn-gpu-opt-699885446d-nsbtx.optiputer.net</a></tt> and the problem is condor doesn't detect any GPUs)<br/>
<blockquote>
<span style="color: #53b759"><span style="font-size: small">(15:42:38)</span> <b>isfiligoi:</b></span> Sorry, were offline.<br/>That pod is not running anymore, so not sure what physical node it was running on.<br/>
<span style="color: #9e3997"><span style="font-size: small">(19:40:38)</span> <b>bbockelm:</b></span> No problem. Next time we catch it, we will shoot you a line.<br/>
</blockquote>
<span style="color: #9e3997"><span style="font-size: small">(12:28:55)</span> <b>bbockelm:</b></span> @dweitzel - there's a similar problem at Crane: <a href="http://xd-login.opensciencegrid.org/monitoring/glideins/entry_HCC_US_Omaha_crane_gpu/StartdLog.txt">http://xd-login.opensciencegrid.org/monitoring/glideins/entry_HCC_US_Omaha_crane_gpu/StartdLog.txt</a><br/>
<span style="color: #9e3997"><span style="font-size: small">(12:34:00)</span> <b>bbockelm:</b></span> (Mats, just confirmed with Garhan that the host where the pilot ran does *not* have a GPU in it -- CE problem?)<br/>
<span style="color: #43761b"><span style="font-size: small">(12:35:20)</span> <b>blin:</b></span> we recently added some WholeNode GPU logic to the default CE config...maybe that's related?<br/>
<span style="color: #a63024"><span style="font-size: small">(12:57:45)</span> <b>paschos:</b></span> reading the backscroll here from yesterday/today<br/>
<span style="color: #674b1b"><span style="font-size: small">(13:37:36)</span> <b>rynge:</b></span> Looks like routing is not correct at WSU then<br/>
<span style="color: #43761b"><span style="font-size: small">(13:39:46)</span> <b>blin:</b></span> native GPU support in the CE requires a newer blahp so WSU is perhaps just not up to date on packages<br/>
<span style="color: #9e3997"><span style="font-size: small">(13:47:52)</span> <b>bbockelm:</b></span> @rynge - you sure about that?  <a href="http://xd-login.opensciencegrid.org/monitoring/glideins/entry_OSG_US_WSU-GRID_gpu/StartdLog.txt">http://xd-login.opensciencegrid.org/monitoring/glideins/entry_OSG_US_WSU-GRID_gpu/StartdLog.txt</a> shows <tt>05/24/21 14:58:12 (pid:223013) Local machine resource GPUs = 1</tt><br/>
<span style="color: #674b1b"><span style="font-size: small">(13:49:10)</span> <b>rynge:</b></span> The discussion is in #collaboration-support - the site provided a list of machines and the one we landed on is not in there<br/>
<span style="color: #9e3997"><span style="font-size: small">(13:49:47)</span> <b>bbockelm:</b></span> The collab-support discussion is about GA Tech; you wrote WSU above.<br/>
<span style="color: #674b1b"><span style="font-size: small">(13:51:14)</span> <b>rynge:</b></span> Sorry got confused!<br/>
<span style="color: #674b1b"><span style="font-size: small">(13:51:30)</span> <b>rynge:</b></span> GATech is what started this debugging session<br/>
<span style="color: #9e3997"><span style="font-size: small">(13:51:52)</span> <b>bbockelm:</b></span> Ok, indeed.  Your statement is correct with <tt>s|WSU|GATech|</tt><br/>
<span style="color: #674b1b"><span style="font-size: small">(13:51:54)</span> <b>rynge:</b></span> But yeah, we have other sites where we have similar problem (not convinced it is the same one though)<br/>
<span style="color: #674b1b"><span style="font-size: small">(13:52:55)</span> <b>rynge:</b></span> WSU is intersting - we find GPUs on some nodes, others not<br/>
<span style="color: #a63024"><span style="font-size: small">(13:55:46)</span> <b>paschos:</b></span> ok so the routing to the gpu nodes is incorrect --- the redeployment of the CE with the new version of bosco made no differrence<br/>
<span style="color: #674b1b"><span style="font-size: small">(13:55:49)</span> <b>rynge:</b></span> Nevermind - WSU is good<br/>
<span style="color: #a63024"><span style="font-size: small">(13:55:53)</span> <b>paschos:</b></span> for gatecch<br/>
<span style="color: #a63024"><span style="font-size: small">(13:56:46)</span> <b>paschos:</b></span> it would be useful to know the gpu nodes should include in their startd parameters<br/>
<span style="color: #a63024"><span style="font-size: small">(13:58:46)</span> <b>paschos:</b></span> the config rright now is this:<br/><pre>## Compute configuration<br/><br/>DAEMON_LIST   = $(DAEMON_LIST), STARTD<br/><br/># Jobs are allowed to run as long as they'd like<br/>SUSPEND = FALSE<br/>PREEMPT = FALSE<br/>KILL = FALSE<br/>START = TRUE<br/><br/># TCN added 12/2/2020 per OSG ticket <a href="https://support.opensciencegrid.org/support/tickets/65765">https://support.opensciencegrid.org/support/tickets/65765</a><br/># RL updated 03/10/2021 after LOOOONG troubleshooting with OSG<br/># - The resource name should be Georgia_Tech_PACE_CE_2<br/># - The STARTD_ATTRS are updated to use the already defined attributes<br/># - Add parameters to mark the node with GPU<br/>use feature : gpus<br/>START = (TARGET.WantGPU == True) &amp;&amp; ( $(START) )<br/>HasGPU = True<br/>STARTD_ATTRS = $(STARTD_ATTRS),HasGPU<br/>GLIDEIN_ResourceName = "Georgia_Tech_PACE_CE_2"<br/>STARTD_ATTRS = $(STARTD_ATTRS),GLIDEIN_ResourceName<br/><br/>COUNT_HYPERTHREAD_CPUS = False<br/><br/># Setup partionable slots on this node<br/>SLOT_TYPE_1               = 100%<br/>SLOT_TYPE_1_PARTITIONABLE = TRUE<br/>NUM_SLOTS                 = 1<br/>NUM_SLOTS_TYPE_1          = 1<br/>SlotWeight                = Cpus<br/><br/>DEFAULT_DOMAIN_NAME       = <a href="http://pace.gatech.edu">pace.gatech.edu</a></pre><br/><br/>
<span style="color: #43761b"><span style="font-size: small">(14:00:34)</span> <b>blin:</b></span> @paschos that looks good to me. so this looks like a CE issue<br/>
<span style="color: #a63024"><span style="font-size: small">(14:02:44)</span> <b>paschos:</b></span> yeah --- unfortunately i don’t have access t othe CE itself so i can’t check things there<br/>
<span style="color: #43761b"><span style="font-size: small">(14:05:41)</span> <b>blin:</b></span> you have access to the login host, though, right? if you can find a pilot job in that schedd, i'd be interested in the job ad<br/>
<span style="color: #a63024"><span style="font-size: small">(14:07:39)</span> <b>paschos:</b></span> i do have access to.  the loogin node--- ii can look for a gpu. pilot<br/>
<span style="color: #a63024"><span style="font-size: small">(14:07:55)</span> <b>paschos:</b></span> and see what it has fo RequestGPUs<br/>
<span style="color: #385a86"><span style="font-size: small">(14:09:09)</span> <b>jdost321:</b></span> Getting caught up here.. If related I'm also concerned about this ocurring at UCSD_xcache_gpu and CRANE as those are not hosted CEs<br/>
<span style="color: #a63024"><span style="font-size: small">(14:16:46)</span> <b>paschos:</b></span> <tt>[ppaschos3@osg-login2 ~]$ condor_q -long 382348.0</tt>  <br/><tt>Args = "-v std -name gfactory_instance -entry OSG_US_GATech_osg-sched2_gpu -clientname chtc2.IceCubeGPU -schedd <a href="mailto:schedd_glideins8@gfactory-2.opensciencegrid.org">schedd_glideins8@gfactory-2.opensciencegrid.org</a> -proxy OSG -factory OSG -web <a href="http://gfactory-2.opensciencegrid.org/factory/stage">http://gfactory-2.opensciencegrid.org/factory/stage</a> -sign 98e3299d86e9659ffe2ff636b9cb9652102b3916 -signentry 6f97882c6d1cdcd9844aad0c46e62088403799db -signtype sha1 -descript description.l5pbJi.cfg -descriptentry description.l5pbJi.cfg -dir OSG -param_GLIDEIN_Client chtc2.IceCubeGPU -submitcredid DUPAC7D3 -slotslayout fixed -clientweb <a href="https://vo-frontend-glow.chtc.wisc.edu/vofrontend/stage">https://vo-frontend-glow.chtc.wisc.edu/vofrontend/stage</a> -clientsign dc2cc9f1c262b72c4e71a119883d2c0eb1fc5047 -clientsigntype sha1 -clientdescript description.l5pghu.cfg -clientgroup IceCubeGPU -clientwebgroup <a href="https://vo-frontend-glow.chtc.wisc.edu/vofrontend/stage/group_IceCubeGPU">https://vo-frontend-glow.chtc.wisc.edu/vofrontend/stage/group_IceCubeGPU</a> -clientsigngroup 77fe444296a9df6bf44883f9992a496f760aca78 -clientdescriptgroup description.l5pghu.cfg -param_CONDOR_VERSION 8.dot,9.dot,x -param_GLIDEIN_Glexec_Use NEVER -param_GLIDEIN_Job_Max_Time 28800 -param_GLIDECLIENT_ReqNode gfactory.minus,2.dot,opensciencegrid.dot,org -param_GLIDECLIENT_Rank 1 -param_MIN_DISK_GBS 1 -param_UPDATE_COLLECTOR_WITH_TCP True -param_GLIDEIN_Monitoring_Enabled False -param_CONDOR_OS auto -param_OSG_SINGULARITY_EL7_PERCENT 100 -param_STARTD_JOB_ATTRS .dollar,.open,STARTD_JOB_ATTRS.close,.comma,x509userproxysubject.comma,x509UserProxyFQAN.comma,x509UserProxyVOName.comma,x509UserProxyEmail.comma,x509UserProxyExpiration -param_CONDOR_ARCH default -param_USE_MATCH_AUTH True -param_GLIDEIN_Report_Failed NEVER -param_GLIDEIN_Collector glidein.minus,cm.dot,chtc.dot,wisc.dot,edu.colon,9618.question,sock.eq,collector0.minus,8 -cluster 6058356 -subcluster 5"</tt><br/><tt>AutoClusterAttrs = "_condor_RequestCpus,_condor_RequestDisk,_condor_RequestGPUs,_condor_RequestMemory,JobUniverse,LastCheckpointPlatform,MachineLastMatchTime,NumCkpts,Offline,RemoteOwner,RequestCpus,RequestDisk,RequestGPUs,RequestMemory,TotalJobRuntime,WantGPU,ConcurrencyLimits,FlockTo,Rank,Requirements,DESIRED_Sites,DynamicSlot,HasJava,IDTOKEN,ITB_Factory,ITB_Sites,LastHeardFrom,Memory,PartitionableSlot,ProjectName,SleepSlot,Slot1_SelfMonitorAge,Slot1_TotalTimeClaimedBusy,SUBMITTER_stash_osgstorage_org_REVISION,UNDESIRED_Sites,User,WantsStashCvmfs,Slot1_TotalTimeUnclaimedIdle,_cp_orig_RequestCpus,_cp_orig_RequestDisk,_cp_orig_RequestMemory,CVMFS_stash_osgstorage_org_REVISION,FirstUpdateUptimeGPUsSeconds,LastUpdateUptimeGPUsSeconds,QDate,RunOnSubmitNode,Slot10_RemoteOwner,Slot1_RemoteOwner,Slot2_RemoteOwner,Slot3_RemoteOwner,Slot4_RemoteOwner,Slot5_RemoteOwner,Slot6_RemoteOwner,Slot7_RemoteOwner,Slot8_RemoteOwner,Slot9_RemoteOwner,StartOfJobUptimeGPUsSeconds,UptimeGPUsSeconds,WantsXSEDE,WantTigerBackfill,undeined,XENON_DESIRED_Sites"</tt><br/><tt>AutoClusterId = 1419</tt><br/><tt>BytesRecvd = 80635.0</tt><br/><tt>BytesSent = 0.0</tt><br/><tt>ClusterId = 382348</tt><br/><tt>Cmd = "/storage/home/hicecube1/icecube/bosco/sandbox/4b42/4b4222f8/osg-sched2.pace.gatech.edu_<a href="http://9619_osg-sched2.pace.gatech.edu">9619_osg-sched2.pace.gatech.edu</a>_43348.0_1621969684/condor_exec.exe"</tt><br/><tt>CommittedSlotTime = 0</tt><br/><tt>CommittedSuspensionTime = 0</tt><br/><tt>CommittedTime = 0</tt><br/><tt>CompletionDate = 0</tt><br/><tt>CondorPlatform = "$CondorPlatform: X86_64-CentOS_7.9 $"</tt><br/><tt>CondorVersion = "$CondorVersion: 9.0.1 May 18 2021 PackageID: 9.0.1-1 $"</tt><br/><tt>CoreSize = 0</tt><br/><tt>CpusProvisioned = 1</tt><br/><tt>CumulativeRemoteSysCpu = 0.0</tt><br/><tt>CumulativeRemoteUserCpu = 0.0</tt><br/><tt>CumulativeSlotTime = 0</tt><br/><tt>CumulativeSuspensionTime = 0</tt><br/><tt>CurrentHosts = 1</tt><br/><tt>DelegatedProxyExpiration = 1622056093</tt><br/><tt>DiskProvisioned = 1409549</tt><br/><tt>DiskUsage = 100</tt><br/><tt>DiskUsage_RAW = 81</tt><br/><tt>EncryptExecuteDirectory = false</tt><br/><tt>EnteredCurrentStatus = 1621969694</tt><br/><tt>Environment = "OSG_HOSTNAME=<a href="http://osg-sched2.pace.gatech.edu">osg-sched2.pace.gatech.edu</a> OSG_APP=UNAVAILABLE OSG_SITE_READ= OSG_DATA=UNAVAILABLE OSG_WN_TMP=/scratch OSG_SITE_WRITE= OSG_SITE_NAME=Georgia_Tech_PACE_CE_2 OSG_GRID=/cvmfs/oasis.opensciencegrid.org/osg-software/osg-wn-client/3.5/current/el7-x86_64 CONDORCE_COLLECTOR_HOST=<a href="http://osg-sched2.pace.gatech.edu:9619">osg-sched2.pace.gatech.edu:9619</a> PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin OSG_STORAGE_ELEMENT=False OSG_SQUID_LOCATION=128.61.166.231:31200 OSG_DEFAULT_SE="</tt><br/><tt>Err = "_condor_stderr"</tt><br/><tt>ExecutableSize = 100</tt><br/><tt>ExecutableSize_RAW = 79</tt><br/><tt>ExitBySignal = false</tt><br/><tt>ExitStatus = 0</tt><br/><tt>GlobalJobId = "<a href="http://osg-login2.pace.gatech.edu#382348.0#1621969693">osg-login2.pace.gatech.edu#382348.0#1621969693</a>"</tt><br/><tt>GPUsProvisioned = 0</tt><br/><tt>ImageSize = 100</tt><br/><tt>ImageSize_RAW = 79</tt><br/><tt>In = "/dev/null"</tt><br/><tt>Iwd = "/storage/home/hicecube1/icecube/bosco/sandbox/4b42/4b4222f8/osg-sched2.pace.gatech.edu_<a href="http://9619_osg-sched2.pace.gatech.edu">9619_osg-sched2.pace.gatech.edu</a>_43348.0_1621969684"</tt><br/><tt>JobCurrentStartDate = 1621969694</tt><br/><tt>JOBGLIDEIN_ResourceName = "$$([IfThenElse(IsUndefined(TARGET.GLIDEIN_ResourceName), IfThenElse(IsUndefined(TARGET.GLIDEIN_Site), \"Local Job\", TARGET.GLIDEIN_Site), TARGET.GLIDEIN_ResourceName)])"</tt><br/><tt>JobLeaseDuration = 2400</tt><br/><tt>JobNotification = 3</tt><br/><tt>JobPrio = 0</tt><br/><tt>JobRunCount = 1</tt><br/><tt>JobStartDate = 1621969694</tt><br/><tt>JobStatus = 2</tt><br/><tt>JobUniverse = 5</tt><br/><tt>LastJobLeaseRenewal = 1621969941</tt><br/><tt>LastJobStatus = 1</tt><br/><tt>LastMatchTime = 1621969694</tt><br/><tt>LastSuspensionTime = 0</tt><br/><tt>LeaveJobInQueue = JobStatus == 4 &amp;&amp; (CompletionDate =?= undefined || CompletionDate == 0 || ((CurrentTime - CompletionDate) &lt; 1800))</tt><br/><tt>LigoSearchTag = "None"</tt><br/><tt>LigoSearchUser = "icecube"</tt><br/><tt>MachineAttrCpus0 = 1</tt><br/><tt>MachineAttrSlotWeight0 = 1</tt><br/><tt>MATCH_EXP_JOBGLIDEIN_ResourceName = "Georgia_Tech_PACE_CE_2"</tt><br/><tt>MaxHosts = 1</tt><br/><tt>MemoryProvisioned = 4096</tt><br/><tt>MinHosts = 1</tt><br/><tt>MyType = "Job"</tt><br/><tt>Notification = Never</tt><br/><tt>NumCkpts = 0</tt><br/><tt>NumCkpts_RAW = 0</tt><br/><tt>NumJobCompletions = 0</tt><br/><tt>NumJobMatches = 1</tt><br/><tt>NumJobStarts = 0</tt><br/><tt>NumRestarts = 0</tt><br/><tt>NumShadowStarts = 1</tt><br/><tt>NumSystemHolds = 0</tt><br/><tt>OnExitHold = false</tt><br/><tt>OnExitRemove = true</tt><br/><tt>OrigMaxHosts = 1</tt><br/><tt>Out = "_condor_stdout"</tt><br/><tt>Owner = "icecube"</tt><br/><tt>PeriodicHold = false</tt><br/><tt>PeriodicRelease = false</tt><br/><tt>PeriodicRemove = JobStatus == 2 &amp;&amp; (time() - JobCurrentStartExecutingDate &gt; 86400) =?= true</tt><br/><tt>ProcId = 0</tt><br/><tt>PublicClaimId = "&lt;172.27.144.26:9618?addrs=172.27.144.26-9618&amp;noUDP&amp;sock=334526_96fc_3&gt;#1621524118#1364#..."</tt><br/><tt>QDate = 1621969693</tt><br/><tt>Rank = 0.0</tt><br/><tt>RemoteHost = "<a href="mailto:slot1_17@atl1-1-01-002-21.pace.gatech.edu">slot1_17@atl1-1-01-002-21.pace.gatech.edu</a>"</tt><br/><tt>RemoteSlotID = 1</tt><br/><tt>RemoteSysCpu = 0.0</tt><br/><tt>RemoteUserCpu = 0.0</tt><br/><tt>RemoteWallClockTime = 0.0</tt><br/><tt>RequestCpus = 1</tt><br/><tt>RequestDisk = 1</tt><br/><tt>RequestMemory = 4000</tt><br/><tt>Requirements = (TARGET.Arch == "X86_64") &amp;&amp; (TARGET.OpSys == "LINUX") &amp;&amp; (TARGET.Disk &gt;= RequestDisk) &amp;&amp; (TARGET.Memory &gt;= RequestMemory) &amp;&amp; (TARGET.HasFileTransfer)</tt><br/><tt>RootDir = "/"</tt><br/><tt>ServerTime = 1621970067</tt><br/><tt>ShadowBday = 1621969694</tt><br/><tt>ShouldTransferFiles = "YES"</tt><br/><tt>StartdIpAddr = "&lt;172.27.144.26:9618?addrs=172.27.144.26-9618&amp;noUDP&amp;sock=334526_96fc_3&gt;"</tt><br/><tt>StartdPrincipal = "execute-side@matchsession/172.27.144.26"</tt><br/><tt>StreamErr = false</tt><br/><tt>StreamOut = false</tt><br/><tt>TargetType = "Machine"</tt><br/><tt>TotalSubmitProcs = 1</tt><br/><tt>TotalSuspensions = 0</tt><br/><tt>TransferIn = false</tt><br/><tt>TransferInFinished = 1621969694</tt><br/><tt>TransferInput = "/storage/home/hicecube1/icecube/bosco/sandbox/4b42/4b4222f8/osg-sched2.pace.gatech.edu_<a href="http://9619_osg-sched2.pace.gatech.edu">9619_osg-sched2.pace.gatech.edu</a>_43348.0_1621969684/OSG_US_GATech_osg-sched2_gpu.idtoken,/storage/home/hicecube1/icecube/bosco/sandbox/4b42/4b4222f8/osg-sched2.pace.gatech.edu_<a href="http://9619_osg-sched2.pace.gatech.edu">9619_osg-sched2.pace.gatech.edu</a>_43348.0_1621969684/tokens.tgz,/storage/home/hicecube1/icecube/bosco/sandbox/4b42/4b4222f8/osg-sched2.pace.gatech.edu_<a href="http://9619_osg-sched2.pace.gatech.edu">9619_osg-sched2.pace.gatech.edu</a>_43348.0_1621969684/url_dirs.desc"</tt><br/><tt>TransferInputSizeMB = 0</tt><br/><tt>TransferInStarted = 1621969694</tt><br/><tt>TransferQueued = false</tt><br/><tt>TransferringInput = false</tt><br/><tt>User = "<a href="mailto:icecube@osg-login2.pace.gatech.edu">icecube@osg-login2.pace.gatech.edu</a>"</tt><br/><tt>WantCheckpoint = false</tt><br/><tt>WantRemoteIO = true</tt><br/><tt>WantRemoteSyscalls = false</tt><br/><tt>WhenToTransferOutput = "ON_EXIT"</tt><br/><tt>x509userproxy = "/storage/home/hicecube1/icecube/bosco/sandbox/4b42/4b4222f8/osg-sched2.pace.gatech.edu_<a href="http://9619_osg-sched2.pace.gatech.edu">9619_osg-sched2.pace.gatech.edu</a>_43348.0_1621969684/credential_chtc2.IceCubeGPU_DUPAC7D3"</tt><br/><tt>x509UserProxyExpiration = 1622056093</tt><br/><tt>x509UserProxyFirstFQAN = "/icecube/Role=pilot/Capability=NULL"</tt><br/><tt>x509UserProxyFQAN = "/DC=org/DC=incommon/C=US/ST=Wisconsin/L=Madison/O=University of Wisconsin-Madison/OU=OCIS/CN=<a href="http://vo-frontend-glow.chtc.wisc.edu">vo-frontend-glow.chtc.wisc.edu</a>,/icecube/Role=pilot/Capability=NULL,/icecube/Role=NULL/Capability=NULL"</tt><br/><tt>x509userproxysubject = "/DC=org/DC=incommon/C=US/ST=Wisconsin/L=Madison/O=University of Wisconsin-Madison/OU=OCIS/CN=<a href="http://vo-frontend-glow.chtc.wisc.edu">vo-frontend-glow.chtc.wisc.edu</a>"</tt><br/><tt>x509UserProxyVOName = "icecube"</tt><br/>
<span style="color: #a63024"><span style="font-size: small">(14:18:06)</span> <b>paschos:</b></span> @blin<br/>
<span style="color: #43761b"><span style="font-size: small">(14:19:39)</span> <b>blin:</b></span> ok, thanks. looks like we'll need the CE view<br/>
<span style="color: #43761b"><span style="font-size: small">(14:19:57)</span> <b>blin:</b></span> is there a ticket for this? starting to feel like this should be taken to an FD ticket<br/>
<span style="color: #a63024"><span style="font-size: small">(14:23:26)</span> <b>paschos:</b></span> under enable gpu jobs for gatech ---<br/>
<span style="color: #a63024"><span style="font-size: small">(14:23:56)</span> <b>paschos:</b></span> noticed that none of the pilots had any RequestGPUs in the job<br/>
<span style="color: #a63024"><span style="font-size: small">(14:24:46)</span> <b>paschos:</b></span> 67015<br/>
<span style="color: #43761b"><span style="font-size: small">(14:24:55)</span> <b>blin:</b></span> yeah, so we need to track down where in the CE it's losing that request: either the CE job router layer or the Bosco layer<br/>
<span style="color: #43761b"><span style="font-size: small">(14:25:53)</span> <b>blin:</b></span> i'll follow up in the ticket<br/>
<span style="color: #a63024"><span style="font-size: small">(14:25:55)</span> <b>paschos:</b></span> ok --- i’ll see if i can get access therer to help speed this along<br/>
<span style="color: #a63024"><span style="font-size: small">(14:41:47)</span> <b>paschos:</b></span> also just. noting that the. pilot above is being sent a. gpu node - <tt>RemoteHost = "<a href="mailto:slot1_17@atl1-1-01-002-21.pace.gatech.edu">slot1_17@atl1-1-01-002-21.pace.gatech.edu</a>"</tt> <br/>but if requestgpus default.s to 0, it’s not going to work<br/>
<span style="color: #43761b"><span style="font-size: small">(14:42:36)</span> <b>blin:</b></span> so they want to allow non-GPU jobs to run on GPU nodes?<br/>
<span style="color: #a63024"><span style="font-size: small">(14:43:17)</span> <b>paschos:</b></span> not intentionally --- policy wise, it makes sense<br/>
<span style="color: #a63024"><span style="font-size: small">(14:43:43)</span> <b>paschos:</b></span> but no special setup is in place<br/>
<span style="color: #a63024"><span style="font-size: small">(14:44:13)</span> <b>paschos:</b></span> what is in place is a RANK that for local jobs will prioritize gpus jobs to run on gpus<br/>
<span style="color: #16569E"><span style="font-size: small">(15:42:38)</span> <b>edquist:</b></span> -l<br/>
<span style="color: #235e5b"><span style="font-size: small">(15:43:24)</span> <b>dweitzel:</b></span> For UNL's crane resource, we didn't add in the GPU route when we re-installed the CE. It's in now.<br/>
<span style="color: #235e5b"><span style="font-size: small">(15:43:33)</span> <b>dweitzel:</b></span> (as of an hour or so ago)<br/>
<span style="color: #43761b"><span style="font-size: small">(16:15:23)</span> <b>blin:</b></span> @jdost321 for CPU requests, does the factory set <tt>xcount</tt> in the job ad?<br/>
<span style="color: #385a86"><span style="font-size: small">(16:16:06)</span> <b>jdost321:</b></span> where required, yes. are you referring to a specific entry?<br/>
<span style="color: #43761b"><span style="font-size: small">(16:17:28)</span> <b>blin:</b></span> SIUE: i want to give him job router config so that he can filter jobs based on their incoming CPU requests<br/>
<span style="color: #385a86"><span style="font-size: small">(16:18:27)</span> <b>jdost321:</b></span> yes, for SIUE we have <tt>&lt;submit_attr name="+xcount" value="32"/&gt;</tt><br/>
<span style="color: #43761b"><span style="font-size: small">(16:43:03)</span> <b>blin:</b></span> @jdost321 how about GPU requests?<br/>
<span style="color: #385a86"><span style="font-size: small">(16:44:00)</span> <b>jdost321:</b></span> i haven't created the SIUE gpu entry yet, waiting for Mitchell to tell us the node configuration<br/>
<span style="color: #43761b"><span style="font-size: small">(16:45:12)</span> <b>blin:</b></span> sure but what attribute would you set?<br/>
<span style="color: #385a86"><span style="font-size: small">(16:46:15)</span> <b>jdost321:</b></span> Request_GPUs<br/>
<span style="color: #43761b"><span style="font-size: small">(16:47:33)</span> <b>blin:</b></span> not <tt>RequestGPUs</tt>? I believe the underscore version is the submit file command<br/>
<span style="color: #385a86"><span style="font-size: small">(16:47:54)</span> <b>jdost321:</b></span> oops right let me check a classad to see if it changes<br/>
<span style="color: #385a86"><span style="font-size: small">(16:48:47)</span> <b>jdost321:</b></span> right, so we set it w/ underscore, it becomes RequestGPUs in the classad<br/>
<span style="color: #385a86"><span style="font-size: small">(16:48:57)</span> <b>jdost321:</b></span> i never understood why it works that way<br/>
<span style="color: #43761b"><span style="font-size: small">(16:49:53)</span> <b>blin:</b></span> ah so stuff you set in the factory is going into the generated submit file<br/>
<span style="color: #385a86"><span style="font-size: small">(16:50:01)</span> <b>jdost321:</b></span> right<br/>
</body>
</html>
