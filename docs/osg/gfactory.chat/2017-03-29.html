<!DOCTYPE html>
<html>
<head>
<title>Wed Mar 29, 2017 : #gfactory (osg)</title>
</head>
<body>
<h3>Wed Mar 29, 2017 : #gfactory (osg)</h3>
<span style="color: #674b1b"><span style="font-size: small">(10:05:53)</span> <b>rynge:</b></span> Re the CCIN2P34 issues - the site says they fixed something and we should try again<br/>
<span style="color: #674b1b"><span style="font-size: small">(10:06:06)</span> <b>rynge:</b></span> However, my gridftp test is still failing<br/>
<span style="color: #674b1b"><span style="font-size: small">(10:06:15)</span> <b>rynge:</b></span> Can you check if the error is still the same?<br/>
<span style="color: #674b1b"><span style="font-size: small">(10:06:39)</span> <b>rynge:</b></span> Do you have a host with glite-ce-service-info installed?<br/>
<span style="color: #bd9336"><span style="font-size: small">(11:14:43)</span> <b>mkandes:</b></span> Yes, still same hold reason ...<br/>
<span style="color: #bd9336"><span style="font-size: small">(11:14:44)</span> <b>mkandes:</b></span> 3766544.4   feosgflock      3/29 16:11 CREAM_Delegate Error: Authorization failure: Authorization error: Failed to get the local user id via glexec: glexec error: [gLExec]:  LCAS failed.           The reason can be found in the logfile.\nVO osg: LSC validation failed: LSC file matching VOMS attributes not found in store.\nVO osg: AC signature verification failure: no valid VOMS server credential found.\n<br/>
<span style="color: #bd9336"><span style="font-size: small">(11:15:29)</span> <b>mkandes:</b></span> Regarding glite-ce-service-info ... I don't know.<br/>
<span style="color: #674b1b"><span style="font-size: small">(11:47:31)</span> <b>rynge:</b></span> Ok, thanks<br/>
<span style="color: #8d4b84"><span style="font-size: small">(11:51:09)</span> <b>kherner:</b></span> @mkandes Shot in the dark: could they have an outdated vomses file for OSG where they're expecting the DigiCert DNs?<br/>
<span style="color: #bd9336"><span style="font-size: small">(11:55:17)</span> <b>mkandes:</b></span> Quite possible. Or they never had OSG VOMs setup. I'm not exactly sure what LIGO/VIRGO does at the site. Maybe @efajardo remembers?<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:03:25)</span> <b>rynge:</b></span> Any ideas on how to debug this?<br/>
<span style="color: #bd9336"><span style="font-size: small">(12:04:02)</span> <b>mkandes:</b></span> Do we have a ticket/email chain open with the site?<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:04:24)</span> <b>rynge:</b></span> I have emailed back and forth, but no formal ticket.<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:04:32)</span> <b>rynge:</b></span> Can we move it to one?<br/>
<span style="color: #bd9336"><span style="font-size: small">(12:05:13)</span> <b>mkandes:</b></span> Yes, I think we can probably do a ticket exchange with GOC/GGUS<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:05:53)</span> <b>rynge:</b></span> So open a goc ticket?<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:07:17)</span> <b>rynge:</b></span> Or ggus and then let the exchange happen that way?<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:07:25)</span> <b>rynge:</b></span> (I have no idea how this works)<br/>
<span style="color: #bd9336"><span style="font-size: small">(12:10:40)</span> <b>mkandes:</b></span> I can open a ticket and perform the exchange. At least then we can get everyone communicating in the same place. But, in general, I don't know exactly what they need to fix on their side. I don't know much about CREAM, lac files, VOMS attributes, etc.<br/>
<span style="color: #bd9336"><span style="font-size: small">(12:10:45)</span> <b>mkandes:</b></span> *lsc<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:13:47)</span> <b>rynge:</b></span> Please do - at least the ticket will help keep everybody on the same page<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:14:17)</span> <b>rynge:</b></span> Just give them the error above and let them know whatever they changed in the VOMS last night did not help<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:14:20)</span> <b>rynge:</b></span> Thanks!<br/>
<span style="color: #bd9336"><span style="font-size: small">(13:29:15)</span> <b>mkandes:</b></span> @jdost321 @blin - Can you remind me what the glidein Startd is trying to update the HTCondor-CE Collector with?<br/>
<span style="color: #bd9336"><span style="font-size: small">(13:29:16)</span> <b>mkandes:</b></span> 03/29/17 14:33:41 (pid:50178) SECMAN: required authentication with collector <a href="http://js-156-186.jetstream-cloud.org:9619">js-156-186.jetstream-cloud.org:9619</a> failed, so aborting command INVALIDATE_STARTD_ADS.<br/>03/29/17 14:33:41 (pid:50178) ERROR: AUTHENTICATE:1003:Failed to authenticate with any method<br/>03/29/17 14:33:41 (pid:50178) Failed to send update to collector <a href="http://js-156-186.jetstream-cloud.org:9619">js-156-186.jetstream-cloud.org:9619</a>.<br/>
<span style="color: #43761b"><span style="font-size: small">(13:30:10)</span> <b>blin:</b></span> they're trying to report their ads to the collector<br/>
<span style="color: #bd9336"><span style="font-size: small">(13:30:11)</span> <b>mkandes:</b></span> I don't see how the glidein is suppose to authenticate with the collector.<br/>
<span style="color: #bd9336"><span style="font-size: small">(13:30:29)</span> <b>mkandes:</b></span> Using the proxy they are submitted with?<br/>
<span style="color: #43761b"><span style="font-size: small">(13:30:55)</span> <b>blin:</b></span> <tt>condor_status -pool <a href="http://red.unl.edu:9619">red.unl.edu:9619</a></tt><br/>
<span style="color: #43761b"><span style="font-size: small">(13:31:00)</span> <b>blin:</b></span> yea, it should be the pilot proxy, iirc<br/>
<span style="color: #43761b"><span style="font-size: small">(13:33:37)</span> <b>blin:</b></span> relevant config in default ce: <a href="https://github.com/brianhlin/htcondor-ce/blob/master/config/01-ce-auth.conf#L30">https://github.com/brianhlin/htcondor-ce/blob/master/config/01-ce-auth.conf#L30</a><br/>
<span style="color: #bd9336"><span style="font-size: small">(13:34:14)</span> <b>mkandes:</b></span> Yeah, so they should be trying to authenticate as USERS = *@users.opensciencegrid.org<br/>
<span style="color: #43761b"><span style="font-size: small">(13:35:01)</span> <b>blin:</b></span> yea<br/>
<span style="color: #43761b"><span style="font-size: small">(13:35:26)</span> <b>blin:</b></span> which is what happens when they get authenticated via lcmaps (either gums or gridmap)<br/>
<span style="color: #bd9336"><span style="font-size: small">(13:36:39)</span> <b>mkandes:</b></span> Hmm. So does the proxy get forwarded to the worker node with the glidein?<br/>
<span style="color: #bd9336"><span style="font-size: small">(13:36:51)</span> <b>mkandes:</b></span> i.e., no shared file system here.<br/>
<span style="color: #43761b"><span style="font-size: small">(13:40:22)</span> <b>blin:</b></span> it definitely should<br/>
<span style="color: #43761b"><span style="font-size: small">(13:40:40)</span> <b>blin:</b></span> otherwise frontends wouldn't be able to authenticate the glidein<br/>
<span style="color: #43761b"><span style="font-size: small">(13:40:50)</span> <b>blin:</b></span> right?<br/>
<span style="color: #bd9336"><span style="font-size: small">(13:42:35)</span> <b>mkandes:</b></span> Gotchya. Hmmm. Okay, I'll keep digging around. Everything else seems to be working fine other than this error in the glidein startd log. But I've seen this same authentication problem at other sites as well .... which also never seemed to cause a problem.<br/>
<span style="color: #bd9336"><span style="font-size: small">(13:43:59)</span> <b>mkandes:</b></span> But I think you're saying that I may see nothing if I do a remote condor_status -pool <a href="http://red.unl.edu:9619">red.unl.edu:9619</a> at my CE because the glidein class ad is not updated according to this error.<br/>
<span style="color: #bd9336"><span style="font-size: small">(13:48:39)</span> <b>mkandes:</b></span> Which is what I now see ....<br/>
<span style="color: #bd9336"><span style="font-size: small">(13:48:42)</span> <b>mkandes:</b></span> condor_status -pool <a href="http://js-156-186.jetstream-cloud.org:9619">js-156-186.jetstream-cloud.org:9619</a><br/>
<span style="color: #bd9336"><span style="font-size: small">(13:49:10)</span> <b>mkandes:</b></span> But ...<br/>
<span style="color: #bd9336"><span style="font-size: small">(13:49:12)</span> <b>mkandes:</b></span> -- Schedd: <a href="http://js-156-186.jetstream-cloud.org">js-156-186.jetstream-cloud.org</a> : &lt;10.10.10.9:9619?...<br/> ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               <br/>  14.0   mis             3/29 18:42   0+00:06:10 R  0   0.1  glidein_startup.sh<br/><br/>1 jobs; 0 completed, 0 removed, 0 idle, 1 running, 0 held, 0 suspended<br/>[centos@js-156-186 condor-ce]$ condor_q<br/><br/><br/>-- Schedd: <a href="http://js-156-186.jetstream-cloud.org">js-156-186.jetstream-cloud.org</a> : &lt;10.10.10.9:24422&gt;<br/> ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               <br/>  14.0   mis             3/29 18:42   0+00:06:13 R  0   0.1  glidein_startup.sh<br/><br/>1 jobs; 0 completed, 0 removed, 0 idle, 1 running, 0 held, 0 suspended<br/>
<span style="color: #bd9336"><span style="font-size: small">(13:49:58)</span> <b>mkandes:</b></span> [1149] mkandes@test-frontend-1 ~/submit$ condor_q -wide<br/><br/><br/>-- Schedd: <a href="http://test-frontend-1.t2.ucsd.edu">test-frontend-1.t2.ucsd.edu</a> : &lt;169.228.130.121:9615?...<br/> ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD               <br/><br/>  33.0   mkandes         3/29 11:38   0+00:06:07 R  0   0.0  test.sh 3600 OSG_US_XSEDE_Jetstream<br/>  33.1   mkandes         3/29 11:38   0+00:06:07 R  0   0.0  test.sh 3600 OSG_US_XSEDE_Jetstream<br/>  33.2   mkandes         3/29 11:38   0+00:06:07 R  0   0.0  test.sh 3600 OSG_US_XSEDE_Jetstream<br/>  33.3   mkandes         3/29 11:38   0+00:06:07 R  0   0.0  test.sh 3600 OSG_US_XSEDE_Jetstream<br/>  33.4   mkandes         3/29 11:38   0+00:06:05 R  0   0.0  test.sh 3600 OSG_US_XSEDE_Jetstream<br/>  33.5   mkandes         3/29 11:38   0+00:06:05 R  0   0.0  test.sh 3600 OSG_US_XSEDE_Jetstream<br/>  33.6   mkandes         3/29 11:38   0+00:06:05 R  0   0.0  test.sh 3600 OSG_US_XSEDE_Jetstream<br/>  33.7   mkandes         3/29 11:38   0+00:06:05 R  0   0.0  test.sh 3600 OSG_US_XSEDE_Jetstream<br/>  33.8   mkandes         3/29 11:38   0+00:00:00 I  0   0.0  test.sh 3600 OSG_US_XSEDE_Jetstream<br/>  33.9   mkandes         3/29 11:38   0+00:00:00 I  0   0.0  test.sh 3600 OSG_US_XSEDE_Jetstream<br/><br/>30 jobs; 0 completed, 0 removed, 22 idle, 8 running, 0 held, 0 suspended<br/>[1149] mkandes@test-frontend-1 ~/submit$ condor_status<br/>Name               OpSys      Arch   State     Activity LoadAv Mem   ActvtyTime<br/><br/>slot1@glidein_2472 LINUX      X86_64 Claimed   Busy      0.000 2048  0+00:05:28<br/>slot2@glidein_2472 LINUX      X86_64 Claimed   Busy      0.000 2048  0+00:05:29<br/>slot3@glidein_2472 LINUX      X86_64 Claimed   Busy      0.000 2048  0+00:05:30<br/>slot4@glidein_2472 LINUX      X86_64 Claimed   Busy      0.000 2048  0+00:05:30<br/>slot5@glidein_2472 LINUX      X86_64 Claimed   Busy      0.000 2048  0+00:05:31<br/>slot6@glidein_2472 LINUX      X86_64 Claimed   Busy      0.000 2048  0+00:05:33<br/>slot7@glidein_2472 LINUX      X86_64 Claimed   Busy      0.000 2048  0+00:05:33<br/>slot8@glidein_2472 LINUX      X86_64 Claimed   Busy      0.000 2048  0+00:05:26<br/>                     Machines Owner Claimed Unclaimed Matched Preempting<br/><br/>        X86_64/LINUX        8     0       8         0       0          0<br/><br/>               Total        8     0       8         0       0          0<br/>
<span style="color: #bd9336"><span style="font-size: small">(13:50:34)</span> <b>mkandes:</b></span> [1149] mkandes@test-frontend-1 ~/submit$ condor_status -wide<br/>Name                                                          OpSys      Arch   State     Activity LoadAv Mem  ActivityTime<br/><br/>slot1@glidein_247277_764553350@osg-jetstream-worker.novalocal LINUX      X86_64 Claimed   Busy      0.000 2048   0+00:05:28<br/>slot2@glidein_247277_764553350@osg-jetstream-worker.novalocal LINUX      X86_64 Claimed   Busy      0.000 2048   0+00:05:29<br/>slot3@glidein_247277_764553350@osg-jetstream-worker.novalocal LINUX      X86_64 Claimed   Busy      0.000 2048   0+00:05:30<br/>slot4@glidein_247277_764553350@osg-jetstream-worker.novalocal LINUX      X86_64 Claimed   Busy      0.000 2048   0+00:05:30<br/>slot5@glidein_247277_764553350@osg-jetstream-worker.novalocal LINUX      X86_64 Claimed   Busy      0.000 2048   0+00:05:31<br/>slot6@glidein_247277_764553350@osg-jetstream-worker.novalocal LINUX      X86_64 Claimed   Busy      0.000 2048   0+00:05:33<br/>slot7@glidein_247277_764553350@osg-jetstream-worker.novalocal LINUX      X86_64 Claimed   Busy      0.000 2048   0+00:05:33<br/>slot8@glidein_247277_764553350@osg-jetstream-worker.novalocal LINUX      X86_64 Claimed   Busy      0.000 2048   0+00:05:26<br/>             Machines Owner Claimed Unclaimed Matched Preempting<br/><br/>X86_64/LINUX        8     0       8         0       0          0<br/><br/>       Total        8     0       8         0       0          0<br/>
<span style="color: #43761b"><span style="font-size: small">(13:53:27)</span> <b>blin:</b></span> CAs and CRLs all good? do the pilots have access to the CA that issued the CE host cert? does the CE have access to the CA that issued the pilot certs?<br/>
<span style="color: #bd9336"><span style="font-size: small">(15:18:37)</span> <b>mkandes:</b></span> CAs and CRLs should all be up-to-date. Is there an easy way to test "access to the CA"?<br/>
<span style="color: #43761b"><span style="font-size: small">(15:49:12)</span> <b>blin:</b></span> that's a good question, let me think about it<br/>
</body>
</html>
