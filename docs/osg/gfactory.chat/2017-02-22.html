<!DOCTYPE html>
<html>
<head>
<title>Wed Feb 22, 2017 : #gfactory (osg)</title>
</head>
<body>
<h3>Wed Feb 22, 2017 : #gfactory (osg)</h3>
<span style="color: #bd9336"><span style="font-size: small">(14:41:34)</span> <b>mkandes:</b></span> @rynge: It looks like you made the DN switch, yes? <a href="http://glidein.grid.iu.edu/factory/monitor/factoryStatus.html?entry=total&amp;frontend=OSG_Flock_frontend&amp;infoGroup=running&amp;elements=StatusRunning,ClientGlideRunning,ClientGlideIdle,&amp;rra=0&amp;window_min=1487740864146.8682&amp;window_max=1487767200000&amp;timezone=-8">http://glidein.grid.iu.edu/factory/monitor/factoryStatus.html?entry=total&amp;frontend=OSG_Flock_frontend&amp;infoGroup=running&amp;elements=StatusRunning,ClientGlideRunning,ClientGlideIdle,&amp;rra=0&amp;window_min=1487740864146.8682&amp;window_max=1487767200000&amp;timezone=-8</a><br/>
<span style="color: #674b1b"><span style="font-size: small">(14:46:26)</span> <b>rynge:</b></span> Yes. Any issues?<br/>
<span style="color: #bd9336"><span style="font-size: small">(14:49:06)</span> <b>mkandes:</b></span> Well, for example, I think glideins that were already out at sites waiting gin local batch queue are showing authentication problems because they are probably expecting old DN. e.g., Was checking on Syracuse.<br/>
<span style="color: #bd9336"><span style="font-size: small">(14:49:08)</span> <b>mkandes:</b></span> 02/22/17 13:03:11 (pid:6081) AUTHENTICATE: handshake failed!<br/>02/22/17 13:03:11 (pid:6081) SECMAN: required authentication with collector <a href="http://osg-flock.grid.iu.edu:9730">osg-flock.grid.iu.edu:9730</a> failed, so aborting command CCB_REGISTER.<br/>02/22/17 13:03:11 (pid:6081) ERROR: AUTHENTICATE:1002:Failure performing handshake<br/>02/22/17 13:03:11 (pid:6081) CCBListener: connection to CCB server <a href="http://osg-flock.grid.iu.edu:9730">osg-flock.grid.iu.edu:9730</a> failed; will try to reconnect in 60 seconds.<br/>
<span style="color: #bd9336"><span style="font-size: small">(14:49:31)</span> <b>mkandes:</b></span> If you'd like, I can go ahead and clear out all idle glideins to refresh.<br/>
<span style="color: #bd9336"><span style="font-size: small">(14:50:11)</span> <b>mkandes:</b></span> Or we can just let older glideins work their way through the system and die off.<br/>
<span style="color: #bd9336"><span style="font-size: small">(14:50:46)</span> <b>mkandes:</b></span> P.S. Heading to lunch right now. Let me know if you have a preference. I think clearing out all idle glideins on all factories is what we typically do.<br/>
<span style="color: #674b1b"><span style="font-size: small">(14:57:00)</span> <b>rynge:</b></span> Let's just leave it for now. Both dns should work for a while<br/>
<span style="color: #bd9336"><span style="font-size: small">(15:57:10)</span> <b>mkandes:</b></span> Ah, okay. Will leave as is.<br/>
<span style="color: #674b1b"><span style="font-size: small">(17:04:15)</span> <b>rynge:</b></span> At least one node at CMS_T3_US_UCR_top starts glideins in a full directory:<br/>
<span style="color: #674b1b"><span style="font-size: small">(17:04:44)</span> <b>rynge:</b></span> Running on <a href="http://boson0003.hep.int">boson0003.hep.int</a><br/>
<span style="color: #674b1b"><span style="font-size: small">(17:04:55)</span> <b>rynge:</b></span> INFO:    Checking disk space - 1 GB free is required<br/>INFO:       ...  0 GB space available<br/>
<span style="color: #674b1b"><span style="font-size: small">(17:22:58)</span> <b>rynge:</b></span> CMS_T3_US_UCD_cms seems to have a bad squid<br/>
<span style="color: #674b1b"><span style="font-size: small">(17:24:06)</span> <b>rynge:</b></span> Failed to load file 'description.h2mbsT.cfg' from '<a href="http://gfactory-1.t2.ucsd.edu/factory/stage">http://gfactory-1.t2.ucsd.edu/factory/stage</a>' using proxy '<a href="http://agent.tier3.ucdavis.edu:3128">agent.tier3.ucdavis.edu:3128</a>'.<br/>
<span style="color: #bd9336"><span style="font-size: small">(17:33:52)</span> <b>mkandes:</b></span> Thanks, Mats. Look into both sites when I get a chance.<br/>
<span style="color: #674b1b"><span style="font-size: small">(17:36:25)</span> <b>rynge:</b></span> Thanks<br/>
<span style="color: #674b1b"><span style="font-size: small">(18:20:17)</span> <b>rynge:</b></span> @mkandes Do you have a squid server which can be used while running on Comet? I have a user which is pounding my Squid at ISI<br/>
<span style="color: #bd9336"><span style="font-size: small">(18:31:53)</span> <b>mkandes:</b></span> @efajardo or @tmartin would know where you can probably point them.<br/>
<span style="color: #674b1b"><span style="font-size: small">(18:34:36)</span> <b>rynge:</b></span> I just need a straight squid for user jobs<br/>
<span style="color: #bd9336"><span style="font-size: small">(18:36:53)</span> <b>mkandes:</b></span> Yeah, I'm sure we have one that is configured to handle traffic from comet, but I don't know the setup. I don't have one myself available.<br/>
<span style="color: #bd9336"><span style="font-size: small">(18:40:32)</span> <b>mkandes:</b></span> Actually, I forgot. Maybe I do have access to one on <a href="http://pcf-osg.t2.ucsd.edu">pcf-osg.t2.ucsd.edu</a>.<br/>
<span style="color: #bd9336"><span style="font-size: small">(18:43:29)</span> <b>mkandes:</b></span> Doesn't look like ports are open though.<br/>
<span style="color: #bd9336"><span style="font-size: small">(18:43:31)</span> <b>mkandes:</b></span> [1641] root@pcf-osg ~# service iptables status<br/>Table: filter<br/>Chain INPUT (policy ACCEPT)<br/>num  target     prot opt source               destination         <br/>1    ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0           state RELATED,ESTABLISHED <br/>2    ACCEPT     icmp --  0.0.0.0/0            0.0.0.0/0           <br/>3    ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0           <br/>4    ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:22 <br/>5    ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:9615 <br/>6    ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:9618 <br/>7    ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:1093 <br/>8    ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:1094 <br/>9    ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:4094 <br/>10   ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:4095 <br/>11   ACCEPT     tcp  --  169.228.130.0/23     0.0.0.0/0           state NEW tcp dpt:5201 <br/>12   REJECT     all  --  0.0.0.0/0            0.0.0.0/0           reject-with icmp-host-prohibited <br/><br/>Chain FORWARD (policy ACCEPT)<br/>num  target     prot opt source               destination         <br/>1    REJECT     all  --  0.0.0.0/0            0.0.0.0/0           reject-with icmp-host-prohibited <br/><br/>Chain OUTPUT (policy ACCEPT)<br/>num  target     prot opt source               destination<br/>
<span style="color: #bd9336"><span style="font-size: small">(18:43:47)</span> <b>mkandes:</b></span> May not be configured.<br/>
<span style="color: #b14cbc"><span style="font-size: small">(20:13:43)</span> <b>tmartin:</b></span> hey are you guys wanting ports open on pcf-osg? Which ones?<br/>
<span style="color: #b14cbc"><span style="font-size: small">(20:14:02)</span> <b>tmartin:</b></span> Oh also all squid on comet can use ours<br/>
<span style="color: #b14cbc"><span style="font-size: small">(20:14:49)</span> <b>tmartin:</b></span> not pcg-osg just use <a href="http://cvmfs-2.t2.ucsd.edu:3128">cvmfs-2.t2.ucsd.edu:3128</a> and <a href="http://cvmfs-1.t2.ucsd.edu:3128">cvmfs-1.t2.ucsd.edu:3128</a><br/>
<span style="color: #b14cbc"><span style="font-size: small">(20:16:12)</span> <b>tmartin:</b></span> I am assuming you are running on comet via our gatekeeper mats?<br/>
<span style="color: #674b1b"><span style="font-size: small">(20:17:57)</span> <b>rynge:</b></span> No this user is using custom glideins<br/> He has his own xsede allocation<br/>
<span style="color: #b14cbc"><span style="font-size: small">(20:18:19)</span> <b>tmartin:</b></span> Oh ok, well the rule is the same, you want to use one of our two cvmfs servers<br/>
<span style="color: #674b1b"><span style="font-size: small">(20:18:31)</span> <b>rynge:</b></span> OK, thanks!!<br/>
<span style="color: #b14cbc"><span style="font-size: small">(20:18:44)</span> <b>tmartin:</b></span> Do you know what the network is?<br/>
<span style="color: #bd9336"><span style="font-size: small">(20:19:06)</span> <b>mkandes:</b></span> @tmartin: Thanks for the assistance.<br/>
<span style="color: #674b1b"><span style="font-size: small">(20:19:20)</span> <b>rynge:</b></span> He is hovering a little but under  a Gb now.<br/>
<span style="color: #674b1b"><span style="font-size: small">(20:19:33)</span> <b>rynge:</b></span> Out of the squid that is<br/>
<span style="color: #674b1b"><span style="font-size: small">(20:19:42)</span> <b>rynge:</b></span> The stuff caches well<br/>
<span style="color: #b14cbc"><span style="font-size: small">(20:20:04)</span> <b>tmartin:</b></span> That is fine both of ours are 10Gbps squids<br/>
<span style="color: #674b1b"><span style="font-size: small">(20:20:13)</span> <b>rynge:</b></span> Perfect<br/>
<span style="color: #bd9336"><span style="font-size: small">(20:20:44)</span> <b>mkandes:</b></span> @tmartin: Do you need to know the ip space for the regular Comet nodes?<br/>
<span style="color: #b14cbc"><span style="font-size: small">(20:20:47)</span> <b>tmartin:</b></span> I do<br/>
<span style="color: #b14cbc"><span style="font-size: small">(20:20:57)</span> <b>tmartin:</b></span> I need to both open the firewall and the ports for squid<br/>
<span style="color: #b14cbc"><span style="font-size: small">(20:21:50)</span> <b>tmartin:</b></span> Unless it is this  67.58.55.0/25<br/>
<span style="color: #674b1b"><span style="font-size: small">(20:21:58)</span> <b>rynge:</b></span> So what are comet using for cvmfs now?<br/>
<span style="color: #b14cbc"><span style="font-size: small">(20:22:04)</span> <b>tmartin:</b></span> us<br/>
<span style="color: #674b1b"><span style="font-size: small">(20:22:04)</span> <b>rynge:</b></span> Just curious<br/>
<span style="color: #674b1b"><span style="font-size: small">(20:22:08)</span> <b>rynge:</b></span> Ok<br/>
<span style="color: #bd9336"><span style="font-size: small">(20:22:40)</span> <b>mkandes:</b></span> We are sending glideins into their virtual cluster setup.<br/>
<span style="color: #b14cbc"><span style="font-size: small">(20:22:42)</span> <b>tmartin:</b></span> SDSC does not run all these fancy OSG services, so we handle it :slightly_smiling_face:<br/>
<span style="color: #674b1b"><span style="font-size: small">(20:23:29)</span> <b>rynge:</b></span> Yeah thank you for that. Having cvmfs on comet has helped me on multiple projects<br/>
<span style="color: #674b1b"><span style="font-size: small">(20:23:41)</span> <b>rynge:</b></span> It has been great<br/>
<span style="color: #b14cbc"><span style="font-size: small">(20:23:54)</span> <b>tmartin:</b></span> Is that the network I need to grant access  67.58.55.0/25?<br/>
<span style="color: #674b1b"><span style="font-size: small">(20:24:27)</span> <b>rynge:</b></span> Not sure. I can find out tomorrow<br/>
<span style="color: #b14cbc"><span style="font-size: small">(20:24:30)</span> <b>tmartin:</b></span> oh ok :slightly_smiling_face:<br/>
<span style="color: #bd9336"><span style="font-size: small">(20:24:59)</span> <b>mkandes:</b></span> I'll email some people I know who might be able to get us a quick answer and cc you both on it.<br/>
<span style="color: #b14cbc"><span style="font-size: small">(20:25:04)</span> <b>tmartin:</b></span> Well I ask about  67.58.55.0/25 because I have this in my firewall config :slightly_smiling_face: <br/># Comet<br/>-A INPUT -m state --state NEW -m tcp -p tcp --source 67.58.55.0/25 --dport 3128 -j ACCEPT<br/><br/>So if that is the case just need to config your jobs<br/>
<span style="color: #b14cbc"><span style="font-size: small">(20:25:18)</span> <b>tmartin:</b></span> If not I will config as necessary<br/>
<span style="color: #674b1b"><span style="font-size: small">(20:25:31)</span> <b>rynge:</b></span> But if you already had the white list for cvmfs, it would be the same, right?<br/>
<span style="color: #b14cbc"><span style="font-size: small">(20:26:27)</span> <b>tmartin:</b></span> It should but I do not know if something has changed. However we were always supporting comet cvmfs afaik<br/>
<span style="color: #674b1b"><span style="font-size: small">(20:26:37)</span> <b>rynge:</b></span> OK cool<br/>
<span style="color: #bd9336"><span style="font-size: small">(20:27:12)</span> <b>mkandes:</b></span> Give that a try. I'll send email to double check anyway, in case something is different between "regular" Comet and "virtual" Comet.<br/>
<span style="color: #b14cbc"><span style="font-size: small">(20:27:22)</span> <b>tmartin:</b></span> Exactly :slightly_smiling_face:<br/>
</body>
</html>
