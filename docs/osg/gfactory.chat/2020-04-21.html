<!DOCTYPE html>
<html>
<head>
<title>Tue Apr 21, 2020 : #gfactory (osg)</title>
</head>
<body>
<h3>Tue Apr 21, 2020 : #gfactory (osg)</h3>
<span style="color: #43761b"><span style="font-size: small">(13:38:50)</span> <b>blin:</b></span> @matyas @jdost321 @efajardo @rynge @marian the glow frontend has seen pilots fall off a cliff in the past few hours (<a href="http://gfactory-2.opensciencegrid.org/factory/monitor/factoryStatus.html">http://gfactory-2.opensciencegrid.org/factory/monitor/factoryStatus.html</a>). we replaced the VO cert yesterday (new DN that's already in the vo-client)<br/>
<span style="color: #43761b"><span style="font-size: small">(13:39:08)</span> <b>blin:</b></span> are we seeing submission failures with the new VO cert?<br/>
<span style="color: #53b759"><span style="font-size: small">(13:39:54)</span> <b>marian:</b></span> Ugh, could be, most likely, condor mapping on the factory side to update, too<br/>
<span style="color: #53b759"><span style="font-size: small">(13:40:28)</span> <b>marian:</b></span> Can you please send and email to factory list with new DN?<br/>
<span style="color: #385a86"><span style="font-size: small">(13:40:45)</span> <b>jdost321:</b></span> spike in held, but the FE is still in hte monitoring so it's still requesting to the factory<br/>
<span style="color: #385a86"><span style="font-size: small">(13:40:56)</span> <b>jdost321:</b></span> makes me think a bunch of sites have to update their vo-client<br/>
<span style="color: #385a86"><span style="font-size: small">(13:41:37)</span> <b>jdost321:</b></span> or maybe its temporary.. the dn swap could make pilots that were running go held<br/>
<span style="color: #43761b"><span style="font-size: small">(13:42:04)</span> <b>blin:</b></span> ya, just a VO cert update and not a host cert update so i wouldn't expect us to have to give you guys the new DN<br/>
<span style="color: #53b759"><span style="font-size: small">(13:42:30)</span> <b>marian:</b></span> Yes, that too ... that was similar to osg flock DN update... we may send announcement to wider audience about vo-client update on the CEs?<br/>
<span style="color: #53b759"><span style="font-size: small">(13:42:44)</span> <b>marian:</b></span> In osg flock case I just added new DN, didn’t swap<br/>
<span style="color: #53b759"><span style="font-size: small">(13:43:00)</span> <b>marian:</b></span> And let it map to the same user on the factory side<br/>
<span style="color: #385a86"><span style="font-size: small">(13:43:11)</span> <b>jdost321:</b></span> marian the dn we updated on the factory is just factory fe communication, in general the pilot dn could be diff<br/>
<span style="color: #43761b"><span style="font-size: small">(13:43:54)</span> <b>blin:</b></span> i'll monitor it for a little while and if pilots don't pick back up then maybe we have to reach out to sites to get their vo-clients updated<br/>
<span style="color: #53b759"><span style="font-size: small">(13:43:54)</span> <b>marian:</b></span> Ah, I thought we’re talking about yet another FE DN update<br/>
<span style="color: #a63024"><span style="font-size: small">(13:44:06)</span> <b>efajardo:</b></span> and might aslo need to update the DN in the frontend.xml<br/>
<span style="color: #a63024"><span style="font-size: small">(13:44:11)</span> <b>efajardo:</b></span> if the DN changed<br/>
<span style="color: #43761b"><span style="font-size: small">(13:44:35)</span> <b>blin:</b></span> do we need to do that for the VO cert?<br/>
<span style="color: #385a86"><span style="font-size: small">(13:44:35)</span> <b>jdost321:</b></span> after an hour or so I'll clear all the held glow pilots, then we can see if it's still happening to fresh submissions<br/>
<span style="color: #53b759"><span style="font-size: small">(13:44:40)</span> <b>marian:</b></span> Disregard me then, not on the factory shift today either :)<br/>
<blockquote>
<span style="color: #43761b"><span style="font-size: small">(13:45:08)</span> <b>blin:</b></span> do you guys have a calendar or something i could consult for factory shifts?<br/>
<span style="color: #43761b"><span style="font-size: small">(13:45:20)</span> <b>blin:</b></span> i always @ all of you because idk who's actually on factory duty<br/>
<span style="color: #53b759"><span style="font-size: small">(13:47:29)</span> <b>marian:</b></span> Yes, I let @jdost321 to share with you, but in general ping the channel with ‘here’ or email list should suffice and we pick it up<br/>
<span style="color: #385a86"><span style="font-size: small">(13:48:35)</span> <b>jdost321:</b></span> it's not documented anywhere, i'm MWF, Marian is Thur Fri<br/>
<span style="color: #43761b"><span style="font-size: small">(13:48:57)</span> <b>blin:</b></span> ah ok<br/>
<span style="color: #385a86"><span style="font-size: small">(13:49:01)</span> <b>jdost321:</b></span> also we have the concept of "cold days" where we only respond to urgent things, that's Mon for me, THur for Marian<br/>
<span style="color: #43761b"><span style="font-size: small">(13:49:03)</span> <b>blin:</b></span> i'll try to remember that!<br/>
</blockquote>
<span style="color: #43761b"><span style="font-size: small">(13:44:41)</span> <b>blin:</b></span> i thought we only needed to do that if the FE or pilot cert changed<br/>
<span style="color: #43761b"><span style="font-size: small">(13:46:31)</span> <b>blin:</b></span> (update the frontend.xml that is)<br/>
<span style="color: #385a86"><span style="font-size: small">(13:46:35)</span> <b>jdost321:</b></span> right, i don't think the VO cert gets anywhere in the factory / frontend configs,<br/>
<span style="color: #385a86"><span style="font-size: small">(13:57:58)</span> <b>jdost321:</b></span> @blin do you have a date / time it was actually switched over? i should probably remove the idle pilots as well that were submitted before the change<br/>
<span style="color: #43761b"><span style="font-size: small">(13:58:23)</span> <b>blin:</b></span> @matyas when'd you replace the VO cert? yesterday afternoon some time?<br/>
<span style="color: #c386df"><span style="font-size: small">(13:59:20)</span> <b>matyas:</b></span> at around 14:10 yesterday<br/>
<span style="color: #43761b"><span style="font-size: small">(13:59:25)</span> <b>blin:</b></span> CDT<br/>
<span style="color: #385a86"><span style="font-size: small">(13:59:52)</span> <b>jdost321:</b></span> thats really strange, the falling off a cliff behavior hapened in the last 2h only<br/>
<span style="color: #385a86"><span style="font-size: small">(13:59:59)</span> <b>jdost321:</b></span> any other changes made today?<br/>
<span style="color: #385a86"><span style="font-size: small">(14:01:13)</span> <b>jdost321:</b></span> how often is voms-proxy-init run on your pilot certs?<br/>
<span style="color: #43761b"><span style="font-size: small">(14:04:20)</span> <b>blin:</b></span> aha, it looks like our proxy expired<br/>
<span style="color: #385a86"><span style="font-size: small">(14:05:07)</span> <b>jdost321:</b></span> yep<br/><pre>subject   : /DC=org/DC=incommon/C=US/ST=WI/L=Madison/O=University of Wisconsin-Madison/OU=OCIS/CN=<a href="http://glidein2.chtc.wisc.edu/CN=proxy">glidein2.chtc.wisc.edu/CN=proxy</a><br/>issuer    : /DC=org/DC=incommon/C=US/ST=WI/L=Madison/O=University of Wisconsin-Madison/OU=OCIS/CN=<a href="http://glidein2.chtc.wisc.edu">glidein2.chtc.wisc.edu</a><br/>identity  : /DC=org/DC=incommon/C=US/ST=WI/L=Madison/O=University of Wisconsin-Madison/OU=OCIS/CN=<a href="http://glidein2.chtc.wisc.edu">glidein2.chtc.wisc.edu</a><br/>type      : proxy<br/>strength  : 1024 bits<br/>path      : /var/lib/gwms-factory/client-proxies/user_feglow/glidein_gfactory_instance/credential_chtc2.main_528300<br/>timeleft  : 0:00:00<br/>key usage : Digital Signature, Key Encipherment, Data Encipherment<br/>=== VO GLOW extension information ===<br/>VO        : GLOW<br/>subject   : /DC=org/DC=incommon/C=US/ST=WI/L=Madison/O=University of Wisconsin-Madison/OU=OCIS/CN=<a href="http://glidein2.chtc.wisc.edu">glidein2.chtc.wisc.edu</a><br/>issuer    : /DC=org/DC=incommon/C=US/ST=WI/L=Madison/O=University of Wisconsin-Madison/OU=OCIS/CN=<a href="http://voms.chtc.wisc.edu">voms.chtc.wisc.edu</a><br/>attribute : /GLOW/Role=htpc/Capability=NULL<br/>timeleft  : 0:00:00<br/>uri       : <a href="http://voms.chtc.wisc.edu:15001">voms.chtc.wisc.edu:15001</a></pre><br/><br/>
<span style="color: #385a86"><span style="font-size: small">(14:05:28)</span> <b>jdost321:</b></span> it must be failing to issue the new one after the change<br/>
<span style="color: #43761b"><span style="font-size: small">(14:05:52)</span> <b>blin:</b></span> yeah, it looks like /our/ vo-client package hasn't been updated<br/>
<span style="color: #43761b"><span style="font-size: small">(14:06:11)</span> <b>blin:</b></span> if i generate a proper proxy, will it automatically get forwarded to the factory?<br/>
<span style="color: #385a86"><span style="font-size: small">(14:06:30)</span> <b>jdost321:</b></span> yes, as soon as the fe notices its different<br/>
<span style="color: #43761b"><span style="font-size: small">(14:06:40)</span> <b>blin:</b></span> great, thanks<br/>
<span style="color: #43761b"><span style="font-size: small">(14:16:02)</span> <b>blin:</b></span> ok @jdost321 new proxy was generated and you should see it shortly<br/>
<span style="color: #385a86"><span style="font-size: small">(14:18:03)</span> <b>jdost321:</b></span> got it! i'll remove all held glow pilots now<br/>
<span style="color: #43761b"><span style="font-size: small">(14:18:30)</span> <b>blin:</b></span> great, thanks<br/>
<span style="color: #235e5b"><span style="font-size: small">(16:21:58)</span> <b>dweitzel:</b></span> Another factory question.  Any idea why the jobs are held for this entrypoint: LSST_T2_US_BELLARMINE ?<br/>
<span style="color: #385a86"><span style="font-size: small">(16:25:16)</span> <b>jdost321:</b></span> auth failures<br/><pre>1874731.4   gfactory        4/21 14:03 Error connecting to schedd <a href="http://tier2-osg1.bellarmine.edu">tier2-osg1.bellarmine.edu</a>: SECMAN:2010:Received "DENIED" from server for user <a href="mailto:flock.opensciencegrid.org@daemon.opensciencegrid.org">flock.opensciencegrid.org@daemon.opensciencegrid.org</a> using method GSI.|AUTHENTICATE:1004:Failed to authenticate using FS</pre><br/><br/>
<span style="color: #385a86"><span style="font-size: small">(16:25:29)</span> <b>jdost321:</b></span> i'm guessing they need to update their vo-client since the flock DN change<br/>
<span style="color: #235e5b"><span style="font-size: small">(16:27:33)</span> <b>dweitzel:</b></span> ok<br/>
<span style="color: #235e5b"><span style="font-size: small">(16:27:37)</span> <b>dweitzel:</b></span> I'll open a ticket.<br/>
<span style="color: #385a86"><span style="font-size: small">(16:27:58)</span> <b>jdost321:</b></span> thanks<br/>
</body>
</html>
