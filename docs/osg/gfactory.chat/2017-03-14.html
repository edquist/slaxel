<!DOCTYPE html>
<html>
<head>
<title>Tue Mar 14, 2017 : #gfactory (osg)</title>
</head>
<body>
<h3>Tue Mar 14, 2017 : #gfactory (osg)</h3>
<span style="color: #5b89d5"><span style="font-size: small">(10:49:26)</span> <b>sthapa:</b></span> Hi, how can I grab condor tarballs for the factory?  I need to update the tarballs used by the int factory and ideally want to use the same version that the production factories use<br/>
<span style="color: #bd9336"><span style="font-size: small">(10:50:37)</span> <b>mkandes:</b></span> Do you have access to any of the other factories?<br/>
<span style="color: #5b89d5"><span style="font-size: small">(10:52:09)</span> <b>sthapa:</b></span> no<br/>
<span style="color: #5b89d5"><span style="font-size: small">(10:52:40)</span> <b>sthapa:</b></span> if you put the tarballs in /tmp/ on glidein-int , I can take it from there though<br/>
<span style="color: #bd9336"><span style="font-size: small">(10:53:55)</span> <b>mkandes:</b></span> Okay.<br/>
<span style="color: #bd9336"><span style="font-size: small">(10:54:07)</span> <b>mkandes:</b></span> One second.<br/>
<span style="color: #5b89d5"><span style="font-size: small">(10:55:42)</span> <b>sthapa:</b></span> no rush on this, I just want to update before the testing for the next OSG release<br/>
<span style="color: #bd9336"><span style="font-size: small">(11:00:30)</span> <b>mkandes:</b></span> Ah, no worries. All of the tarballs we have on the GOC factory should now be in /tmp/goc-tarballs.tar.gz.<br/>
<span style="color: #bd9336"><span style="font-size: small">(11:00:56)</span> <b>mkandes:</b></span> Note, however, we only have the following currently advertised in production ....<br/>
<span style="color: #bd9336"><span style="font-size: small">(11:00:58)</span> <b>mkandes:</b></span> &lt;condor_tarballs&gt;<br/>      &lt;condor_tarball arch="default" os="default" tar_file="/var/lib/gwms-factory/condor/gfactory-3.2.13-condor-8.4.8-x86_64_RedHat6-stripped.tar.gz" version="8.4.8,8.4.x,default"/&gt;<br/>      &lt;condor_tarball arch="default" os="default" tar_file="/var/lib/gwms-factory/condor/gfactory-3.2.11.2-3-condor-8.4.6-x86_64_RedHat6-stripped.tar.gz" version="8.4.6"/&gt;<br/>      &lt;condor_tarball arch="default" os="default" tar_file="/var/lib/gwms-factory/condor/gfactory-3.2.11.2-3-condor-8.4.4-x86_64_RedHat6-stripped.tar.gz" version="8.4.4"/&gt;<br/>      &lt;condor_tarball arch="default" os="default" tar_file="/var/lib/gwms-factory/condor/gfactory-3.2.11.2-3-condor-8.4.2-x86_64_RedHat6-stripped.tar.gz" version="8.4.2"/&gt;<br/>      &lt;condor_tarball arch="default" os="rhel5" tar_file="/var/lib/gwms-factory/condor/gfactory-3.2.11.2-3-condor-8.3.7-x86_64_RedHat5-stripped.tar.gz" version="8.3.7,8.3.x"/&gt;<br/>      &lt;condor_tarball arch="default" os="default" tar_file="/var/lib/gwms-factory/condor/gfactory-3.2.11.2-3-condor-8.3.7-x86_64_RedHat6-stripped.tar.gz" version="8.3.7,8.3.x"/&gt;<br/>      &lt;condor_tarball arch="default" os="rhel5" tar_file="/var/lib/gwms-factory/condor/gfactory-3.2.11.2-3-condor-8.3.2-x86_64_RedHat5-stripped.tar.gz" version="8.3.2"/&gt;<br/>      &lt;condor_tarball arch="default" os="default" tar_file="/var/lib/gwms-factory/condor/gfactory-3.2.11.2-3-condor-8.3.2-x86_64_RedHat6-stripped.tar.gz" version="8.3.2"/&gt;<br/>      &lt;condor_tarball arch="default" os="rhel5" tar_file="/var/lib/gwms-factory/condor/gfactory-3.2.11.2-3-condor-8.3.1-x86_64_RedHat5-stripped.tar.gz" version="8.3.1"/&gt;<br/>      &lt;condor_tarball arch="default" os="default" tar_file="/var/lib/gwms-factory/condor/gfactory-3.2.11.2-3-condor-8.3.1-x86_64_RedHat6-stripped.tar.gz" version="8.3.1"/&gt;<br/>      &lt;condor_tarball arch="default" os="rhel5" tar_file="/var/lib/gwms-factory/condor/gfactory-3.2.11.2-3-condor-8.2.8-x86_64_RedHat5-stripped.tar.gz" version="8.2.8,8.2.x,default"/&gt;<br/>      &lt;condor_tarball arch="default" os="default" tar_file="/var/lib/gwms-factory/condor/gfactory-3.2.11.2-3-condor-8.2.8-x86_64_RedHat6-stripped.tar.gz" version="8.2.8,8.2.x"/&gt;<br/>      &lt;condor_tarball arch="default" os="rhel7" tar_file="/var/lib/gwms-factory/condor/gfactory-3.2.16-1-condor-8.4.11-x86_64_RedHat7-stripped.tar.gz" version="8.4.11"/&gt;<br/>      &lt;condor_tarball arch="default" os="default" tar_file="/var/lib/gwms-factory/condor/gfactory-3.2.16-1-condor-8.4.11-x86_64_RedHat6-stripped.tar.gz" version="8.4.11"/&gt;<br/>   &lt;/condor_tarballs&gt;<br/>
<span style="color: #bd9336"><span style="font-size: small">(11:02:14)</span> <b>mkandes:</b></span> I will also drop in unstripped tarballs if you need those as well.<br/>
<span style="color: #5b89d5"><span style="font-size: small">(11:03:04)</span> <b>sthapa:</b></span> that’s fine, I’ll update the factory config<br/>
<span style="color: #5b89d5"><span style="font-size: small">(11:03:54)</span> <b>sthapa:</b></span> thanks for the quick update<br/>
<span style="color: #bd9336"><span style="font-size: small">(11:06:12)</span> <b>mkandes:</b></span> No problem. Just make sure the stripped tarballs are placed in /var/lib/gwms-factory/condor<br/>
<span style="color: #5b89d5"><span style="font-size: small">(11:15:32)</span> <b>sthapa:</b></span> what’s the value of CONDOR_OS for your rhel 7 entries?<br/>
<span style="color: #bd9336"><span style="font-size: small">(11:17:29)</span> <b>mkandes:</b></span> CONDOR_OS = "rhel7"<br/>
<span style="color: #5b89d5"><span style="font-size: small">(11:18:52)</span> <b>sthapa:</b></span> okay, I think I found the issue in my config.  There’s no default tarball for rhel7<br/>
<span style="color: #bd9336"><span style="font-size: small">(11:19:39)</span> <b>mkandes:</b></span> Correct. I think I ran into that problem myself a week or two ago when testing a rhel7 entry. i.e., we only had the one tarball available ....<br/>
<span style="color: #bd9336"><span style="font-size: small">(11:19:41)</span> <b>mkandes:</b></span> &lt;condor_tarball arch="default" os="rhel7" tar_file="/var/lib/gwms-factory/condor/gfactory-3.2.16-1-condor-8.4.11-x86_64_RedHat7-stripped.tar.gz" version="8.4.11"/&gt;<br/>
<span style="color: #5b89d5"><span style="font-size: small">(11:20:02)</span> <b>sthapa:</b></span> yeah, I added ,default to the version on that and it looks like the factory is happy<br/>
<span style="color: #bd9336"><span style="font-size: small">(11:29:32)</span> <b>mkandes:</b></span> P.S. I had to leave unstripped tarballs in /home/gfactory. They were too large.<br/>
<span style="color: #5b89d5"><span style="font-size: small">(12:55:46)</span> <b>sthapa:</b></span> Do I need the unstripped tarballs?<br/>
<span style="color: #bd9336"><span style="font-size: small">(12:59:57)</span> <b>mkandes:</b></span> Only when you strip them again when upgrading version of glideinWMS<br/>
<span style="color: #bd9336"><span style="font-size: small">(13:01:01)</span> <b>mkandes:</b></span> Usually that process doesn't change much ... which is why you see a mixture in glideinWMS.xml tarballs section. In general, though, probably a good practice to strip tarballs with every new version.<br/>
<span style="color: #bd9336"><span style="font-size: small">(13:01:21)</span> <b>mkandes:</b></span> Not exactly sure why we have not been doing so regularly.<br/>
<span style="color: #5b89d5"><span style="font-size: small">(13:32:22)</span> <b>sthapa:</b></span> okay, how do I strip them?  Is there a script or a procedure to do this?  Or do I need to untar the files and strip them manually?<br/>
<span style="color: #bd9336"><span style="font-size: small">(13:35:52)</span> <b>mkandes:</b></span> cd /var/lib/gwms-factory/condor<br/>Append gfactory-g_rel- in front of stripped tarballs where g_rel is the current glideinWMS version. An example for 64-bit rhel6:<br/>
<span style="color: #bd9336"><span style="font-size: small">(13:35:55)</span> <b>mkandes:</b></span> create_condor_tarball gfactory-g_rel-condor-rel-x86_64_RedHat6-stripped.tar.gz /root/Downloads/tarballs/condor-rel-x86_64_RedHat6-stripped.tar.gz<br/>
<span style="color: #bd9336"><span style="font-size: small">(13:39:00)</span> <b>mkandes:</b></span> We should get you access to our documentation: <a href="http://www.t2.ucsd.edu/twiki2/bin/view/UCSDTier2/GlideinFactoryFAQ">http://www.t2.ucsd.edu/twiki2/bin/view/UCSDTier2/GlideinFactoryFAQ</a><br/>
<span style="color: #bd9336"><span style="font-size: small">(13:40:15)</span> <b>mkandes:</b></span> @tmartin: I'm not sure why we have this documentation behind required login. If @jdost321 is okay with it, can we open it up for others to view as well?<br/>
<span style="color: #385a86"><span style="font-size: small">(14:33:51)</span> <b>jdost321:</b></span> it's private for historic reasons, Igor was paranoid. I plan to open it up but I need to check first to make sure there aren't in fact anything we shouldn't be publishing in there first<br/>
<span style="color: #385a86"><span style="font-size: small">(14:34:32)</span> <b>jdost321:</b></span> in the meantime, the proper procedure to update tarballs on Suchandra's factory is for us (factory ops) to do it, that was the agreement.<br/>
<span style="color: #385a86"><span style="font-size: small">(15:58:53)</span> <b>jdost321:</b></span> CMS_T3_US_UCD_cms<br/>
<span style="color: #385a86"><span style="font-size: small">(16:08:36)</span> <b>jdost321:</b></span> \/var/log/gwms-factory/server/entry_CMS_T3_US_UCD_cms/completed_jobs_20170314.log<br/>
<span style="color: #385a86"><span style="font-size: small">(16:09:15)</span> <b>jdost321:</b></span> \/opt/factools/bin/entry_ls<br/>
<span style="color: #385a86"><span style="font-size: small">(16:23:21)</span> <b>jdost321:</b></span> summary xml at the end of .out:<br/>
<span style="color: #385a86"><span style="font-size: small">(16:23:23)</span> <b>jdost321:</b></span> /var/lib/gwms-factory/work-dir/client_log/user_feosgflock/entry_CMS_T3_US_UCD_cms/job.4908892.1.out<br/>
<span style="color: #385a86"><span style="font-size: small">(16:23:48)</span> <b>jdost321:</b></span> as alternative, you can use the xml parsing tool on .err log:<br/>
<span style="color: #385a86"><span style="font-size: small">(16:23:49)</span> <b>jdost321:</b></span> cat_XMLResult /var/lib/gwms-factory/work-dir/client_log/user_feosgflock/entry_CMS_T3_US_UCD_cms/job.4908892.1.err<br/>
</body>
</html>
