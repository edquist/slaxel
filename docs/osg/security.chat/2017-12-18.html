<!DOCTYPE html>
<html>
<head>
<title>Mon Dec 18, 2017 : #security (osg)</title>
</head>
<body>
<h3>Mon Dec 18, 2017 : #security (osg)</h3>
<span style="color: #2b6836"><span style="font-size: small">(11:21:51)</span> <b>jteheran:</b></span> Hello <b>@channel</b><br/>
<span style="color: #99a949"><span style="font-size: small">(11:22:06)</span> <b>dwd:</b></span> Hi<br/>
<span style="color: #2b6836"><span style="font-size: small">(11:22:11)</span> <b>jteheran:</b></span> We have a vulnerability report from EGI, a linux kernel ‘use-after-free’ flaw in XFRM CVE-2017-16939<br/>
<span style="color: #2b6836"><span style="font-size: small">(11:22:27)</span> <b>jteheran:</b></span> <a href="https://access.redhat.com/security/cve/CVE-2017-16939">https://access.redhat.com/security/cve/CVE-2017-16939</a><br/>
<span style="color: #2b6836"><span style="font-size: small">(11:23:45)</span> <b>jteheran:</b></span> @dwd in your last email, you said: One thing to keep in mind is that there’s often a confusion over the<br/>term “unprivileged namespace”.<br/>
<span style="color: #99a949"><span style="font-size: small">(11:24:20)</span> <b>dwd:</b></span> Vincent clarified that it was a problem with unprivileged network namespaces.  I haven't had a chance to look at it in detail yet.<br/>
<span style="color: #2b6836"><span style="font-size: small">(11:26:19)</span> <b>jteheran:</b></span> EGI is under the impression that OSG promotes the use of unprivileged user namespace for Singularity<br/>
<span style="color: #2b6836"><span style="font-size: small">(11:27:00)</span> <b>jteheran:</b></span> I just emailed them: to the best of our knowledge, the non-setuid version of Singularity is not yet used in production by any VO within OSG.<br/>
<span style="color: #2b6836"><span style="font-size: small">(11:27:34)</span> <b>jteheran:</b></span> Is this still the case?<br/>
<span style="color: #674b1b"><span style="font-size: small">(11:53:16)</span> <b>sesons:</b></span> @jteheran I'm not sure that's true, but @bbockelm would be the person to ask.<br/>
<span style="color: #674b1b"><span style="font-size: small">(11:53:31)</span> <b>sesons:</b></span> He looks online, so hopefully he can respond here.<br/>
<span style="color: #2b6836"><span style="font-size: small">(11:53:57)</span> <b>jteheran:</b></span> We used that statement in the recent announcement about the vulnerability in XFRM<br/>
<span style="color: #674b1b"><span style="font-size: small">(11:54:10)</span> <b>sesons:</b></span> How recent?<br/>
<span style="color: #2b6836"><span style="font-size: small">(11:54:26)</span> <b>jteheran:</b></span> End of October<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:03:56)</span> <b>sesons:</b></span> I would check with @bbockelm before proceeding, then, just to be sure it's still the case.<br/>
<span style="color: #99a949"><span style="font-size: small">(13:48:43)</span> <b>dwd:</b></span> Oh sorry I didn't notice what you were discussing.  Yes unprivileged singularity is still not used in production anywhere on the OSG.<br/>
<span style="color: #674b1b"><span style="font-size: small">(13:53:30)</span> <b>sesons:</b></span> Thanks, @dwd<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:03:32)</span> <b>bbockelm:</b></span> Hi - sorry, just saw the discussion.  Indeed, Dave is correct.  We document how to install unprivileged singularity - with the caveat that it isn't used to the best of our knowledge.<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:04:46)</span> <b>bbockelm:</b></span> I'm not aware of much forward progress in that area, actually.  Last I recall, my suggestion to the gWMS team was to perhaps work directly with FIFE (as they could do the full round-trip between devs and ops without leaving the lab...)<br/>
<span style="color: #99a949"><span style="font-size: small">(15:11:37)</span> <b>dwd:</b></span> @bbockelm are you good with us recommending to disable user network namespaces in our instructions for unprivileged singularity?<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:11:57)</span> <b>bbockelm:</b></span> sure.<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:12:32)</span> <b>bbockelm:</b></span> but be aware there will be more kernel CVEs from this area going forward.<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:12:42)</span> <b>bbockelm:</b></span> (user namespaces in general, that is...)<br/>
<span style="color: #99a949"><span style="font-size: small">(15:14:14)</span> <b>dwd:</b></span> Ok I will submit that soon.  Sure, there will be more CVEs.  The CMS Tier 1 admins are planning on using unprivileged singularity on their cluster by disabling setuid in singularity.conf.   I told them to also remove the -suid programs by puppet.<br/>
</body>
</html>
