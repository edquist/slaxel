<!DOCTYPE html>
<html>
<head>
<title>Wed May 24, 2017 : #net-service (osg)</title>
</head>
<body>
<h3>Wed May 24, 2017 : #net-service (osg)</h3>
<span style="color: #9e3997"><span style="font-size: small">(07:38:01)</span> <b>thomlee:</b></span> morning folks!<br/>
<span style="color: #a63024"><span style="font-size: small">(11:52:19)</span> <b>efajardo:</b></span> @smckee would you be able to update rsv-perfsonar on ITB today? Just have to run <pre>service rsv stop<br/>yum updated rsv-perfsonar --enablerepo=osg-testing<br/>service rsv start</pre><br/>
<span style="color: #4ec0d6"><span style="font-size: small">(12:14:16)</span> <b>smckee:</b></span> OK doing that now.<br/>
<span style="color: #4ec0d6"><span style="font-size: small">(12:17:27)</span> <b>smckee:</b></span> unning Transaction<br/>  Updating   : rsv-perfsonar-1.4.1-2.osg33.el6.noarch                       1/2<br/>mkdir: cannot create directory `/var/rsv/localenv': File exists<br/>New python executable in /var/rsv/localenv/bin/python<br/>Installing Setuptools.............................................................................................done.<br/>Installing Pip....................................................................................................................................done.<br/>Requirement already up-to-date: esmond-client in /var/rsv/localenv/lib/python2.7/site-packages<br/>Requirement already up-to-date: requests in /var/rsv/localenv/lib/python2.7/site-packages (from esmond-client)<br/>Requirement already up-to-date: python-dateutil in /var/rsv/localenv/lib/python2.7/site-packages (from esmond-client)<br/>Requirement already up-to-date: six&gt;=1.5 in /var/rsv/localenv/lib/python2.7/site-packages (from python-dateutil-&gt;esmond-client)<br/>Cleaning up...<br/>Requirement already up-to-date: requesocks in /var/rsv/localenv/lib/python2.7/site-packages<br/>Requirement already up-to-date: certifi&gt;=0.0.7 in /var/rsv/localenv/lib/python2.7/site-packages (from requesocks)<br/>Requirement already up-to-date: chardet&gt;=1.0.0 in /var/rsv/localenv/lib/python2.7/site-packages (from requesocks)<br/>Cleaning up...<br/>Requirement already up-to-date: dirq in /var/rsv/localenv/lib/python2.7/site-packages<br/>Cleaning up...<br/>Requirement already up-to-date: messaging in /var/rsv/localenv/lib/python2.7/site-packages<br/>Cleaning up...<br/>Requirement already satisfied (use --upgrade to upgrade): pika in /var/rsv/localenv/lib/python2.7/site-packages<br/>Cleaning up...<br/>  Cleanup    : rsv-perfsonar-1.4.1-1.osg33.el6.noarch                       2/2<br/>  Verifying  : rsv-perfsonar-1.4.1-2.osg33.el6.noarch                       1/2<br/>  Verifying  : rsv-perfsonar-1.4.1-1.osg33.el6.noarch                       2/2<br/><br/>Updated:<br/>  rsv-perfsonar.noarch 0:1.4.1-2.osg33.el6<br/><br/>Complete!<br/>[0] 17:16:56 UTC [root@psds-itb1:~]# service rsv start<br/>Starting RSV: Starting 2 metrics for host '<a href="http://psmsu06.aglt2.org">psmsu06.aglt2.org</a>'.<br/>Starting 2 metrics for host '<a href="http://iut2-net4.iu.edu">iut2-net4.iu.edu</a>'.<br/>Starting 2 metrics for host '<a href="http://iut2-net3.iu.edu">iut2-net3.iu.edu</a>'.<br/>Starting 2 metrics for host '<a href="http://uct2-net3.mwt2.org">uct2-net3.mwt2.org</a>'.<br/>Starting 2 metrics for host '<a href="http://perfsonar.unl.edu">perfsonar.unl.edu</a>'.<br/>Starting 2 metrics for host '<a href="http://psum06.aglt2.org">psum06.aglt2.org</a>'.<br/>Starting 2 metrics for host '<a href="http://perfsonar03-iep-grid.saske.sk">perfsonar03-iep-grid.saske.sk</a>'.<br/>Starting 2 metrics for host '<a href="http://perfsonar.soichi.us">perfsonar.soichi.us</a>'.<br/>Starting 2 metrics for host '<a href="http://mwt2-ps04.campuscluster.illinois.edu">mwt2-ps04.campuscluster.illinois.edu</a>'.<br/>Starting 2 metrics for host '<a href="http://ps-development.bnl.gov">ps-development.bnl.gov</a>'.<br/>Starting 2 metrics for host '<a href="http://netmon2.atlas-swt2.org">netmon2.atlas-swt2.org</a>'.<br/>Starting 2 metrics for host '<a href="http://psonar-bwctl.brazos.tamu.edu">psonar-bwctl.brazos.tamu.edu</a>'.<br/>Starting 2 metrics for host '<a href="http://uct2-net4.mwt2.org">uct2-net4.mwt2.org</a>'.<br/>Starting 2 metrics for host '<a href="http://ps3.ochep.ou.edu">ps3.ochep.ou.edu</a>'.<br/>Starting 2 metrics for host '<a href="http://psum05.aglt2.org">psum05.aglt2.org</a>'.<br/>Starting 2 metrics for host '<a href="http://psmsu05.aglt2.org">psmsu05.aglt2.org</a>'.<br/>Starting 2 metrics for host '<a href="http://mwt2-ps03.campuscluster.illinois.edu">mwt2-ps03.campuscluster.illinois.edu</a>'.<br/>Starting 1 metrics for host 'localhost'.<br/>Starting 2 metrics for host '<a href="http://nettest.lbl.gov">nettest.lbl.gov</a>'.<br/>Starting 2 metrics for host '<a href="http://psonar-owamp.brazos.tamu.edu">psonar-owamp.brazos.tamu.edu</a>'.<br/>Starting 2 metrics for host '<a href="http://netmon1.atlas-swt2.org">netmon1.atlas-swt2.org</a>'.<br/>Starting 2 consumers.<br/>[0] 17:17:13 UTC [root@psds-itb1:~]#<br/>
<span style="color: #4ec0d6"><span style="font-size: small">(12:17:30)</span> <b>smckee:</b></span> Done<br/>
<span style="color: #4ec0d6"><span style="font-size: small">(12:32:26)</span> <b>smckee:</b></span> @thomlee can you check name resolution on perfsonar-itb?   It doesn't seem to be working:\<br/>
<span style="color: #4ec0d6"><span style="font-size: small">(12:32:42)</span> <b>smckee:</b></span> [2] 17:30:29 UTC [smckee@perfsonar-itb:~]$ cat /etc/resolv.conf<br/># Directs DNS queries to the locally-running dnsmasq, which acts as a<br/># caching/forwarding nameserver.  Queries it can't resolve itself are<br/># sent to an upstream server, starting with the local ones.  See<br/># /etc/resolv.conf.upstream.<br/><br/># This file is synchronized by Puppet.  Do not edit this file.<br/>search goc <a href="http://grid.iu.edu">grid.iu.edu</a> <a href="http://uits.indiana.edu">uits.indiana.edu</a> <a href="http://indiana.edu">indiana.edu</a><br/>nameserver 127.0.0.1<br/>[0] 17:30:33 UTC [smckee@perfsonar-itb:~]$ ping <a href="http://www.cnn.com">www.cnn.com</a><br/>ping: unknown host <a href="http://www.cnn.com">www.cnn.com</a><br/>
<span style="color: #9e3997"><span style="font-size: small">(12:32:52)</span> <b>thomlee:</b></span> hm let me see<br/>
<span style="color: #4ec0d6"><span style="font-size: small">(12:32:56)</span> <b>smckee:</b></span> <a href="https://perfsonar-itb.grid.iu.edu/WLCGperfSONAR/check_mk/index.py?start_url=%2FWLCGperfSONAR%2Fcheck_mk%2Fview.py%3Fhost%3Dperfsonar-itb%26service%3DResolve_mathias-kettner.de%26site%3DWLCGperfSONAR%26view_name%3Dservice">https://perfsonar-itb.grid.iu.edu/WLCGperfSONAR/check_mk/index.py?start_url=%2FWLCGperfSONAR%2Fcheck_mk%2Fview.py%3Fhost%3Dperfsonar-itb%26service%3DResolve_mathias-kettner.de%26site%3DWLCGperfSONAR%26view_name%3Dservice</a><br/>
<span style="color: #9e3997"><span style="font-size: small">(12:33:20)</span> <b>thomlee:</b></span> I'm seeing an issue too<br/>
<span style="color: #4ec0d6"><span style="font-size: small">(12:33:33)</span> <b>smckee:</b></span> Good, glad it is not just me :slightly_smiling_face:<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:33:48)</span> <b>thomlee:</b></span> dnsmasq has somehow stopped on perfsonar-itb<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:34:19)</span> <b>thomlee:</b></span> I started it<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:34:31)</span> <b>thomlee:</b></span> now, what stopped it?<br/>
<span style="color: #4ec0d6"><span style="font-size: small">(12:35:50)</span> <b>smckee:</b></span> I have no idea.  Any log for it?<br/>
<span style="color: #4ec0d6"><span style="font-size: small">(12:36:14)</span> <b>smckee:</b></span> DNS resolution is back<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:36:21)</span> <b>thomlee:</b></span> May 16 14:23:42 perfsonar-itb dnsmasq[2280]: no interface with address ::1<br/>May 16 14:23:42 perfsonar-itb dnsmasq[2280]: FAILED to start up<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:36:27)</span> <b>thomlee:</b></span> didn't come up last time it was rebooted<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:36:32)</span> <b>thomlee:</b></span> 8 days ago<br/>
<span style="color: #4ec0d6"><span style="font-size: small">(12:36:44)</span> <b>smckee:</b></span> Something related to IPv6 updating on the VMs?<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:37:21)</span> <b>thomlee:</b></span> Possibly, though I didn't get this error right now when I started it<br/>
<span style="color: #4ec0d6"><span style="font-size: small">(12:37:44)</span> <b>smckee:</b></span> With DNS resolution back we got:<br/>
<span style="color: #4ec0d6"><span style="font-size: small">(12:37:46)</span> <b>smckee:</b></span> FYI, the rate of perfsonar-raw-packet-loss-rate messages received by the netmon-test brokers<br/>is now back to normal.<br/><br/>Regards,<br/><br/>CERN Messaging Team - <a href="mailto:mig@cern.ch">mig@cern.ch</a> - <a href="http://cern.ch/mig">http://cern.ch/mig</a><br/>
<span style="color: #4ec0d6"><span style="font-size: small">(12:37:48)</span> <b>smckee:</b></span> :slightly_smiling_face:<br/>
<span style="color: #4ec0d6"><span style="font-size: small">(12:37:57)</span> <b>smckee:</b></span> So data is flowing to the test instance again<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:38:50)</span> <b>thomlee:</b></span> /etc/sysconfig/network was modified on 5/17 so that's probably when I was enabling IPv6<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:42:26)</span> <b>thomlee:</b></span> Yes, I reenabled IPv6 on 5/17, but it was 5/16 that the machine was last rebooted and dnsmasq didn't come up ...<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:43:02)</span> <b>thomlee:</b></span> so reenabling IPv6 seems to be why dnsmasq works now, but this doesn't explain why it was down before<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:43:20)</span> <b>thomlee:</b></span> It's possible that name resolution has been down for a while on perfsonar-itb, but nobody noticed because it's ITB<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:45:09)</span> <b>thomlee:</b></span> At any rate, it is back up now and appears that it will stay up.<br/>
<span style="color: #4ec0d6"><span style="font-size: small">(13:18:17)</span> <b>smckee:</b></span> Thanks, glad it is working now.   The monitoring we have at least indirectly showed the problem<br/>
<span style="color: #4ec0d6"><span style="font-size: small">(13:57:30)</span> <b>smckee:</b></span> @efajardo can you check the psds-itb1 (rsv host) instance ?   I show rsv starts up ok but I don't see processes running.   I see and error in simplevisor.log as well:<br/>
<span style="color: #4ec0d6"><span style="font-size: small">(13:57:38)</span> <b>smckee:</b></span> [0] 18:56:20 UTC [root@psds-itb1:~]# tail /var/log/simplevisor.log<br/>error writing to status file /var/cache/simplevisor/publisher-simplevisor.json: [Errno 2] No such file or directory: '/var/cache/simplevisor/publisher-simplevisor.json'<br/>
<span style="color: #4ec0d6"><span style="font-size: small">(13:58:02)</span> <b>smckee:</b></span> [0] 18:56:24 UTC [root@psds-itb1:~]# ls -al /var/cache/<br/>total 60<br/>drwxr-xr-x 15 root      root      4096 Oct 25  2016 .<br/>drwxr-xr-x 22 root      root      4096 Sep  1  2015 ..<br/>drwx------  2 root      root      4096 Mar 23 10:33 fetch-crl<br/>drwxr-xr-x  2 root      root      4096 Jun 21  2016 fontconfig<br/>drwxr-xr-x  2 root      root      4096 Mar 22  2016 foomatic<br/>drwx------  2 haldaemon haldaemon 4096 Oct 15  2014 hald<br/>drwxr-xr-x  2 root      root      4096 Mar 22 18:22 krb5rcache<br/>drwx------  2 root      root      4096 May 16 13:10 ldconfig<br/>drwxr-xr-x  9 root      root      4096 May 24 03:37 logwatch<br/>drwxr-xr-x  2 root      root      4096 Dec  3 19:14 lxc<br/>drwxr-xr-x 14 root      root      4096 Mar 22 00:53 man<br/>drwx------  2 apache    apache    4096 Mar 22 06:53 mod_proxy<br/>drwx------  2 rpc       rpc       4096 Apr 18 20:14 rpcbind<br/>drwxr-xr-x  2 root      root      4096 Sep 28  2015 simplevisor<br/>drwxr-xr-x  8 root      root      4096 Mar 22 05:32 yum<br/>[0] 18:57:47 UTC [root@psds-itb1:~]# ls -al /var/cache/simplevisor/<br/>total 8<br/>drwxr-xr-x  2 root root 4096 Sep 28  2015 .<br/>drwxr-xr-x 15 root root 4096 Oct 25  2016 ..<br/>
<span style="color: #a63024"><span style="font-size: small">(15:38:01)</span> <b>efajardo:</b></span> @smckee I see things runnign fine: <a href="http://psds-itb.grid.iu.edu/rsv/">http://psds-itb.grid.iu.edu/rsv/</a><br/>
<span style="color: #9e3997"><span style="font-size: small">(16:31:23)</span> <b>thomlee:</b></span> goodnight<br/>
<span style="color: #a63024"><span style="font-size: small">(17:41:10)</span> <b>efajardo:</b></span> something really funky is going on. I restart rsv and after a few minutes it is as something was turning off the probes of rsv one by one<br/>
</body>
</html>
