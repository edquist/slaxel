<!DOCTYPE html>
<html>
<head>
<title>Thu Oct 10, 2019 : #xcache (osg)</title>
</head>
<body>
<h3>Thu Oct 10, 2019 : #xcache (osg)</h3>
<span style="color: #a63024"><span style="font-size: small">(17:04:58)</span> <b>efajardo:</b></span> <b>@here</b> I am running into a problem doing http redirs with xrootd. I have a stashcache and a redirector on the same node<br/>
<span style="color: #a63024"><span style="font-size: small">(17:05:15)</span> <b>efajardo:</b></span> one is listening on port 8000 and the other one on 9000 but when I do a curl I get this error<br/>
<span style="color: #53b759"><span style="font-size: small">(17:05:26)</span> <b>isfiligoi:</b></span> have you tried wget?<br/>
<span style="color: #a63024"><span style="font-size: small">(17:05:27)</span> <b>efajardo:</b></span> <pre>curl -4 -L -v -O <a href="http://stashcache.t2.ucsd.edu:8000/user/dweitzel/public/blast/queries/query1">http://stashcache.t2.ucsd.edu:8000/user/dweitzel/public/blast/queries/query1</a><br/>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current<br/>                                 Dload  Upload   Total   Spent    Left  Speed<br/>  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0* About to connect() to <a href="http://stashcache.t2.ucsd.edu">stashcache.t2.ucsd.edu</a> port 8000 (#0)<br/>*   Trying 198.17.101.66...<br/>* Connected to <a href="http://stashcache.t2.ucsd.edu">stashcache.t2.ucsd.edu</a> (198.17.101.66) port 8000 (#0)<br/>&gt; GET /user/dweitzel/public/blast/queries/query1 HTTP/1.1<br/>&gt; User-Agent: curl/7.29.0<br/>&gt; Host: <a href="http://stashcache.t2.ucsd.edu:8000">stashcache.t2.ucsd.edu:8000</a><br/>&gt; Accept: */*<br/>&gt; <br/>  0     0    0     0    0     0      0      0 --:--:--  0:00:19 --:--:--     0&lt; HTTP/1.1 404 Not Found<br/>&lt; Connection: Close<br/>&lt; Content-Length: 28<br/>&lt; <br/>{ [data not shown]<br/>100    28  100    28    0     0      1      0  0:00:28  0:00:19  0:00:09     7<br/>* Closing connection 0<br/>[1453] efajardo@uaf-7 ~$ curl -4 -L -v -O <a href="http://stashcache.t2.ucsd.edu:8000/user/dweitzel/public/blast/queries/query1">http://stashcache.t2.ucsd.edu:8000/user/dweitzel/public/blast/queries/query1</a><br/>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current<br/>                                 Dload  Upload   Total   Spent    Left  Speed<br/>  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0* About to connect() to <a href="http://stashcache.t2.ucsd.edu">stashcache.t2.ucsd.edu</a> port 8000 (#0)<br/>*   Trying 198.17.101.66...<br/>* Connected to <a href="http://stashcache.t2.ucsd.edu">stashcache.t2.ucsd.edu</a> (198.17.101.66) port 8000 (#0)<br/>&gt; GET /user/dweitzel/public/blast/queries/query1 HTTP/1.1<br/>&gt; User-Agent: curl/7.29.0<br/>&gt; Host: <a href="http://stashcache.t2.ucsd.edu:8000">stashcache.t2.ucsd.edu:8000</a><br/>&gt; Accept: */*<br/>&gt; <br/>&lt; HTTP/1.1 302 Redirect<br/>&lt; Connection: Keep-Alive<br/>&lt; Content-Length: 0<br/>&lt; Location: http://[::198.17.101.66]:9000/user/dweitzel/public/blast/queries/query1<br/>&lt; <br/>  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0<br/>* Connection #0 to host <a href="http://stashcache.t2.ucsd.edu">stashcache.t2.ucsd.edu</a> left intact<br/>* Issue another request to this URL: 'http://[::198.17.101.66]:9000/user/dweitzel/public/blast/queries/query1'<br/>* About to connect() to ::198.17.101.66 port 9000 (#1)<br/>*   Trying ::198.17.101.66...<br/>* Failed to connect to ::198.17.101.66: No route to host</pre><br/>
<span style="color: #a63024"><span style="font-size: small">(17:05:35)</span> <b>efajardo:</b></span> yea same issue<br/>
<span style="color: #53b759"><span style="font-size: small">(17:05:38)</span> <b>isfiligoi:</b></span> ah IPv6!<br/>
<span style="color: #a63024"><span style="font-size: small">(17:05:49)</span> <b>efajardo:</b></span> notice the weird redir adddress<br/>
<span style="color: #a63024"><span style="font-size: small">(17:05:51)</span> <b>efajardo:</b></span> <pre>'http://[::198.17.101.66]:9000/user/dweitzel/public/blast/queries/query1'</pre><br/>
<span style="color: #a63024"><span style="font-size: small">(17:06:07)</span> <b>efajardo:</b></span> it is almost like it tells it I have Ipv6 but I do not give you the addresss<br/>
<span style="color: #a63024"><span style="font-size: small">(17:08:20)</span> <b>efajardo:</b></span> But the http is fine initliazed<br/>
<span style="color: #a63024"><span style="font-size: small">(17:08:22)</span> <b>efajardo:</b></span> <pre>++++++ HTTP protocol initialization started.<br/>Config Routing for <a href="http://stashcache.t2.ucsd.edu">stashcache.t2.ucsd.edu</a>: local pub4 prv4 pub6 prv6<br/>Config Route all4: <a href="http://stashcache.t2.ucsd.edu">stashcache.t2.ucsd.edu</a> Dest=[::198.17.101.66]:9000<br/>Config Route all6: <a href="http://stashcache.t2.ucsd.edu">stashcache.t2.ucsd.edu</a> Dest=[2607:f720:1700:1b30::61]:9000</pre><br/>
<span style="color: #e06b56"><span style="font-size: small">(17:13:37)</span> <b>jthiltges:</b></span> Is xrootd incorrectly converting the IPv4 address to IPv6 format? This version with the <tt>ffff</tt> works for me.<br/><pre>$ curl -4 -vvv http://[::ffff:198.17.101.66]:9000/user/dweitzel/public/blast/queries/query1</pre><br/>
<span style="color: #a63024"><span style="font-size: small">(17:16:00)</span> <b>efajardo:</b></span> hmm ok I will to investiage it further<br/>
</body>
</html>
