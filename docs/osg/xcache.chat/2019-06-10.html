<!DOCTYPE html>
<html>
<head>
<title>Mon Jun 10, 2019 : #xcache (osg)</title>
</head>
<body>
<h3>Mon Jun 10, 2019 : #xcache (osg)</h3>
<span style="color: #43761b"><span style="font-size: small">(14:33:23)</span> <b>blin:</b></span> @matyas @efajardo iirc we've run into issues with xrootd config knobs that don't get overriden when specified twice or config where the order matters<br/>
<span style="color: #43761b"><span style="font-size: small">(14:33:33)</span> <b>blin:</b></span> do you guys remember which variables these are?<br/>
<span style="color: #a63024"><span style="font-size: small">(14:33:38)</span> <b>efajardo:</b></span> http port<br/>
<span style="color: #43761b"><span style="font-size: small">(14:34:05)</span> <b>blin:</b></span> ah yeah, thanks<br/>
<span style="color: #c386df"><span style="font-size: small">(14:40:02)</span> <b>matyas:</b></span> also the redirector<br/>
<span style="color: #c386df"><span style="font-size: small">(14:40:31)</span> <b>matyas:</b></span> ("pss.origin")<br/>
<span style="color: #43761b"><span style="font-size: small">(14:49:04)</span> <b>blin:</b></span> were there issues where order of config vars mattered?<br/>
<span style="color: #a63024"><span style="font-size: small">(14:52:23)</span> <b>efajardo:</b></span> well<br/>
<span style="color: #a63024"><span style="font-size: small">(14:52:33)</span> <b>efajardo:</b></span> I could not redifine at all one set<br/>
<span style="color: #a63024"><span style="font-size: small">(14:52:41)</span> <b>efajardo:</b></span> menaning only the valude ifrst asssigned matter<br/>
<blockquote>
<span style="color: #43761b"><span style="font-size: small">(16:06:02)</span> <b>blin:</b></span> i meant more along the lines of having to assign <tt>pss.origin</tt> before another variable<br/>
<span style="color: #43761b"><span style="font-size: small">(16:06:10)</span> <b>blin:</b></span> i seem to remember @matyas running into an issue with that<br/>
<span style="color: #c386df"><span style="font-size: small">(16:06:34)</span> <b>matyas:</b></span> i don't recall _that_<br/>
<span style="color: #43761b"><span style="font-size: small">(16:08:27)</span> <b>blin:</b></span> ah ok, maybe i'm misremembering then<br/>
</blockquote>
<span style="color: #43761b"><span style="font-size: small">(16:00:47)</span> <b>blin:</b></span> why are there so few stashcache's reporting to <a href="http://collector.opensciencegrid.org">collector.opensciencegrid.org</a>?<br/><pre><br/># condor_status -pool <a href="http://collector.opensciencegrid.org:9619">collector.opensciencegrid.org:9619</a><br/>Name                              OpSys      Arch   State     Activity LoadAv Mem   ActvtyTime  <br/><br/><a href="mailto:xrootd@hcc-stash.unl.edu">xrootd@hcc-stash.unl.edu</a>          undefined  undefined undefined undefined [????] [??]18057+20:55:37<br/><a href="mailto:xrootd@its-condor-xrootd1.syr.edu">xrootd@its-condor-xrootd1.syr.edu</a> undefined  undefined undefined undefined [????] [??]18057+20:49:33<br/><a href="mailto:xrootd@sc-cache.chtc.wisc.edu">xrootd@sc-cache.chtc.wisc.edu</a>     undefined  undefined undefined undefined [????] [??]18057+20:54:27<br/><a href="mailto:xrootd@sc-origin.chtc.wisc.edu">xrootd@sc-origin.chtc.wisc.edu</a>    undefined  undefined undefined undefined [????] [??]18057+20:55:12<br/><br/>                     Machines Owner Claimed Unclaimed Matched Preempting  Drain<br/><br/>               Total        0     0       0         0       0          0      0<br/><br/>                    (Omitted 4 malformed ads in computed attribute totals)<br/></pre><br/>
<span style="color: #43761b"><span style="font-size: small">(16:02:25)</span> <b>blin:</b></span> also, @efajardo do you register CMS XCaches with GOCDB?<br/>
<span style="color: #43761b"><span style="font-size: small">(16:06:02)</span> <b>blin:</b></span> i meant more along the lines of having to assign <tt>pss.origin</tt> before another variable<br/>
<blockquote>
<span style="color: #43761b"><span style="font-size: small">(16:06:02)</span> <b>blin:</b></span> i meant more along the lines of having to assign <tt>pss.origin</tt> before another variable<br/>
<span style="color: #43761b"><span style="font-size: small">(16:06:10)</span> <b>blin:</b></span> i seem to remember @matyas running into an issue with that<br/>
<span style="color: #c386df"><span style="font-size: small">(16:06:34)</span> <b>matyas:</b></span> i don't recall _that_<br/>
<span style="color: #43761b"><span style="font-size: small">(16:08:27)</span> <b>blin:</b></span> ah ok, maybe i'm misremembering then<br/>
</blockquote>
<span style="color: #c386df"><span style="font-size: small">(16:07:01)</span> <b>matyas:</b></span> i didn't realize any stashcaches reported to <a href="http://collector.opensciencegrid.org">collector.opensciencegrid.org</a><br/>
<span style="color: #c386df"><span style="font-size: small">(16:07:16)</span> <b>matyas:</b></span> how do they do that?<br/>
<span style="color: #43761b"><span style="font-size: small">(16:09:37)</span> <b>blin:</b></span> <a href="https://github.com/opensciencegrid/xcache/blob/master/src/xcache-reporter">https://github.com/opensciencegrid/xcache/blob/master/src/xcache-reporter</a><br/>
<span style="color: #c386df"><span style="font-size: small">(16:10:03)</span> <b>matyas:</b></span> oh.<br/>
<span style="color: #c386df"><span style="font-size: small">(16:10:10)</span> <b>matyas:</b></span> that's a separate service -- timer, actualy<br/>
<span style="color: #c386df"><span style="font-size: small">(16:10:18)</span> <b>matyas:</b></span> maybe people don't realize they should turn it on?<br/>
<span style="color: #43761b"><span style="font-size: small">(16:11:25)</span> <b>blin:</b></span> yeah, we don't document it <a href="https://opensciencegrid.org/docs/data/stashcache/install-cache/#managing-stashcache-and-associated-services">https://opensciencegrid.org/docs/data/stashcache/install-cache/#managing-stashcache-and-associated-services</a><br/>
<span style="color: #43761b"><span style="font-size: small">(16:12:41)</span> <b>blin:</b></span> idk if this happened because we moved to softer requirements on the reporter timer or what<br/>
<span style="color: #43761b"><span style="font-size: small">(17:11:35)</span> <b>blin:</b></span> @efajardo why does the CMS XCache set <tt>all.sitename</tt>, it doesn't appear to use xrootd monitoring at all<br/>
<span style="color: #43761b"><span style="font-size: small">(17:47:45)</span> <b>blin:</b></span> hrm @matyas should stash-cache and stash-origin conflict?<br/>
<span style="color: #43761b"><span style="font-size: small">(17:48:08)</span> <b>blin:</b></span> they both dump files into and use <tt>config.d</tt><br/>
<span style="color: #c386df"><span style="font-size: small">(17:51:53)</span> <b>matyas:</b></span> nah if they conflicted we couldn't test them<br/>
<span style="color: #c386df"><span style="font-size: small">(17:52:34)</span> <b>matyas:</b></span> we really shoulda used a different config.d for the two services though<br/>
<span style="color: #c386df"><span style="font-size: small">(17:55:30)</span> <b>matyas:</b></span> there should be a :pile_of_regrets:<br/>
<span style="color: #a63024"><span style="font-size: small">(21:00:36)</span> <b>efajardo:</b></span> @blin I have never registered CMS XcCahes<br/>
<span style="color: #a63024"><span style="font-size: small">(21:01:09)</span> <b>efajardo:</b></span> We set it up to this <tt>all.sitename UCSD-XCACHE</tt><br/>
<span style="color: #a63024"><span style="font-size: small">(21:01:34)</span> <b>efajardo:</b></span> We send the monitoring to both places<br/>
<span style="color: #a63024"><span style="font-size: small">(21:01:36)</span> <b>efajardo:</b></span> <pre>xrootd.monitor all auth flush 30s window 5s fstat 60 lfn ops xfr 5 dest files io info user <a href="http://xrootd.t2.ucsd.edu:9930">xrootd.t2.ucsd.edu:9930</a> dest fstat info user xrd-mon.osgstorage\<br/>.org:9930</pre><br/>
<span style="color: #a63024"><span style="font-size: small">(21:02:18)</span> <b>efajardo:</b></span> Regarding why they do not report I do not know. I would chekc if the image that OSG provides actually has the reporter working<br/>
</body>
</html>
