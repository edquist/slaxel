<!DOCTYPE html>
<html>
<head>
<title>Tue Mar 16, 2021 : #xcache (osg)</title>
</head>
<body>
<h3>Tue Mar 16, 2021 : #xcache (osg)</h3>
<span style="color: #e96699"><span style="font-size: small">(12:39:35)</span> <b>lincoln:</b></span> hey all, I am trying to update my stashcache to the latest &amp; greatest but having trouble<br/>
<span style="color: #e96699"><span style="font-size: small">(12:39:54)</span> <b>lincoln:</b></span> the config on <a href="http://stashcache.grid.uchicago.edu">stashcache.grid.uchicago.edu</a> is quite old so I removed <tt>xrootd-server</tt> and swept up the dependencies with it<br/>
<span style="color: #e96699"><span style="font-size: small">(12:40:20)</span> <b>lincoln:</b></span> I moved /etc/xrootd out of the way, and reinstalled from the latest 3.5 release<br/>
<span style="color: #e96699"><span style="font-size: small">(12:40:31)</span> <b>lincoln:</b></span> <pre>Running transaction<br/>  Installing : 1:xrootd-server-4.12.6-1.1.osg35.el7.x86_64                                                                                                                                                                                                                                                                1/7<br/>  Installing : xrootd-scitokens-1.2.2-1.osg35.el7.x86_64                                                                                                                                                                                                                                                                  2/7<br/>  Installing : xrootd-lcmaps-1.7.8-2.osg35.el7.x86_64                                                                                                                                                                                                                                                                     3/7<br/>  Installing : 1:xrootd-4.12.6-1.1.osg35.el7.x86_64                                                                                                                                                                                                                                                                       4/7<br/>  Installing : osg-xrootd-3.5-13.osg35.el7.noarch                                                                                                                                                                                                                                                                         5/7<br/>  Installing : xcache-1.5.2-1.osg35.el7.x86_64                                                                                                                                                                                                                                                                            6/7<br/>  Installing : stash-cache-1.5.2-1.osg35.el7.x86_64                                                                                                                                                                                                                                                                       7/7<br/>  Verifying  : stash-cache-1.5.2-1.osg35.el7.x86_64                                                                                                                                                                                                                                                                       1/7<br/>  Verifying  : 1:xrootd-server-4.12.6-1.1.osg35.el7.x86_64                                                                                                                                                                                                                                                                2/7<br/>  Verifying  : xcache-1.5.2-1.osg35.el7.x86_64                                                                                                                                                                                                                                                                            3/7<br/>  Verifying  : xrootd-scitokens-1.2.2-1.osg35.el7.x86_64                                                                                                                                                                                                                                                                  4/7<br/>  Verifying  : xrootd-lcmaps-1.7.8-2.osg35.el7.x86_64                                                                                                                                                                                                                                                                     5/7<br/>  Verifying  : osg-xrootd-3.5-13.osg35.el7.noarch                                                                                                                                                                                                                                                                         6/7<br/>  Verifying  : 1:xrootd-4.12.6-1.1.osg35.el7.x86_64                                                                                                                                                                                                                                                                       7/7<br/><br/>Installed:<br/>  stash-cache.x86_64 0:1.5.2-1.osg35.el7<br/><br/>Dependency Installed:<br/>  osg-xrootd.noarch 0:3.5-13.osg35.el7              xcache.x86_64 0:1.5.2-1.osg35.el7              xrootd.x86_64 1:4.12.6-1.1.osg35.el7              xrootd-lcmaps.x86_64 0:1.7.8-2.osg35.el7              xrootd-scitokens.x86_64 0:1.2.2-1.osg35.el7              xrootd-server.x86_64 1:4.12.6-1.1.osg35.el7<br/><br/>Complete!<br/>[root@stashcache ~]# systemctl start ^C<br/>[root@stashcache ~]# systemctl restart xrootd@stashcache-cache-server.service<br/>[root@stashcache ~]# systemctl status xrootd@stashcache-cache-servere<br/>‚óè xrootd@stashcache-cache-server\xc2\x81.service - XRootD xrootd daemon instance stashcache/cache/server<br/>   Loaded: loaded (/usr/lib/systemd/system/xrootd@.service; disabled; vendor preset: disabled)<br/>   Active: failed (Result: exit-code) since Tue 2021-03-16 12:34:03 CDT; 5min ago<br/>     Docs: man:xrootd(8)<br/>           <a href="http://xrootd.org/docs.html">http://xrootd.org/docs.html</a><br/> Main PID: 3951308 (code=exited, status=1/FAILURE)<br/><br/>Mar 16 12:34:03 <a href="http://stashcache.grid.uchicago.edu">stashcache.grid.uchicago.edu</a> systemd[1]: [64B blob data]<br/>Mar 16 12:34:03 <a href="http://stashcache.grid.uchicago.edu">stashcache.grid.uchicago.edu</a> systemd[1]: xrootd@stashcache-cache-server\xc2\x81.service: main process exited, code=exited, status=1/FAILURE<br/>Mar 16 12:34:03 <a href="http://stashcache.grid.uchicago.edu">stashcache.grid.uchicago.edu</a> systemd[1]: Unit xrootd@stashcache-cache-server\xc2\x81.service entered failed state.<br/>Mar 16 12:34:03 <a href="http://stashcache.grid.uchicago.edu">stashcache.grid.uchicago.edu</a> systemd[1]: xrootd@stashcache-cache-server\xc2\x81.service failed.</pre><br/>
<span style="color: #e96699"><span style="font-size: small">(12:40:38)</span> <b>lincoln:</b></span> but alas, my cache is not starting<br/>
<span style="color: #e96699"><span style="font-size: small">(12:40:54)</span> <b>lincoln:</b></span> I edited 10-common or whatever and it wouldn't start either<br/>
<span style="color: #e96699"><span style="font-size: small">(12:41:03)</span> <b>lincoln:</b></span> but this is my 2nd reinstall.. so let me try that agian<br/>
<span style="color: #43761b"><span style="font-size: small">(12:41:20)</span> <b>blin:</b></span> what's <tt>/var/log/xrootd/stash-cache/xrootd.log</tt> look like?<br/>
<span style="color: #e96699"><span style="font-size: small">(12:41:30)</span> <b>lincoln:</b></span> <pre>210316 12:39:04 3951655 XrdConfig: Unable to read config file /etc/xrootd/xrootd-stashcache-cache-server.cfg; invalid argument<br/>------ xrootd <a href="mailto:stashcache-cache-server@stashcache.grid.uchicago.edu">stashcache-cache-server@stashcache.grid.uchicago.edu</a>:1094 initialization failed.</pre><br/>
<span style="color: #43761b"><span style="font-size: small">(12:41:31)</span> <b>blin:</b></span> also i'm surprised you're not running this in a container :slightly_smiling_face:<br/>
<span style="color: #e96699"><span style="font-size: small">(12:41:38)</span> <b>lincoln:</b></span> is there a helm chart :disappointed:<br/>
<span style="color: #43761b"><span style="font-size: small">(12:41:47)</span> <b>blin:</b></span> don't you guys ship one? :smile:<br/>
<span style="color: #e96699"><span style="font-size: small">(12:41:55)</span> <b>lincoln:</b></span> not a working one!<br/>
<span style="color: #e96699"><span style="font-size: small">(12:41:58)</span> <b>lincoln:</b></span> maybe it works, I don't know<br/>
<span style="color: #e96699"><span style="font-size: small">(12:42:17)</span> <b>lincoln:</b></span> I wanna get this one un-broken first :slightly_smiling_face:<br/>
<span style="color: #43761b"><span style="font-size: small">(12:43:02)</span> <b>blin:</b></span> try <tt>systemctl start xrootd@stash-cache</tt> instead<br/>
<span style="color: #e96699"><span style="font-size: small">(12:47:42)</span> <b>lincoln:</b></span> <pre>210316 12:47:19 3951848 XrdConfig: Unable to read config file /etc/xrootd/xrootd-stash-cache.cfg; invalid argument<br/>------ xrootd <a href="mailto:stash-cache@stashcache.grid.uchicago.edu">stash-cache@stashcache.grid.uchicago.edu</a>:1094 initialization failed.</pre><br/>
<span style="color: #e96699"><span style="font-size: small">(12:47:57)</span> <b>lincoln:</b></span> that one does exist<br/>
<span style="color: #e96699"><span style="font-size: small">(12:48:00)</span> <b>lincoln:</b></span> so let me go through and edit 10 blah blah again<br/>
<span style="color: #e96699"><span style="font-size: small">(12:48:40)</span> <b>lincoln:</b></span> maybe running now!<br/>
<span style="color: #e96699"><span style="font-size: small">(12:48:49)</span> <b>lincoln:</b></span> i guess you guys changed the service name :slightly_smiling_face:<br/>
<span style="color: #e96699"><span style="font-size: small">(12:49:46)</span> <b>lincoln:</b></span> ok! stuff is happening now maybe.<br/>
<span style="color: #e96699"><span style="font-size: small">(12:49:50)</span> <b>lincoln:</b></span> <pre>210316 12:49:41 3951923 XrdFileCache_Manager: info Cache::Attach() <a href="root://redirector.osgstorage.org:1094//osgconnect/public/rynge/test.data?pss.tid=http&amp;oss.lcl=1">root://redirector.osgstorage.org:1094//osgconnect/public/rynge/test.data?pss.tid=http&amp;oss.lcl=1</a><br/>210316 12:49:41 3951923 XrdFileCache_IO: info IOEntireFile::initCachedStat successfuly read size from info file = 13 <a href="root://redirector.osgstorage.org:1094//osgconnect/public/rynge/test.data?pss.tid=http&amp;oss.lcl=1">root://redirector.osgstorage.org:1094//osgconnect/public/rynge/test.data?pss.tid=http&amp;oss.lcl=1</a><br/>210316 12:49:41 3951923 XrdFileCache_File: info ioActive for io 0x7f00c0003c10, active_prefetches 0, allow_prefetching True, ioactive_false_reported False, ios_in_detach 0<br/>210316 12:49:41 3951923 XrdFileCache_File: info         io_map.size() 1, block_map.size() 0, file /osgconnect/public/rynge/test.data<br/>210316 12:49:41 3951923 XrdFileCache_File: info ioActive for io 0x7f00c0003c10 returning False, file /osgconnect/public/rynge/test.data<br/>210316 12:49:41 3951923 XrdFileCache_IO: info IOEntireFile::Detach() 0x7f00c0003c10<br/>210316 12:49:41 3951923 XrootdXeq: unknown.2:135@hcc-mon2.unl.edu disc 0:00:00 (send failure)<br/>210316 12:49:43 3951904 XrootdXeq: ?:136@hcc-mon2.unl.edu disc 0:00:00</pre><br/>
</body>
</html>
