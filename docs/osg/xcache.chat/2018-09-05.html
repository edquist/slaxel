<!DOCTYPE html>
<html>
<head>
<title>Wed Sep 5, 2018 : #xcache (osg)</title>
</head>
<body>
<h3>Wed Sep 5, 2018 : #xcache (osg)</h3>
<span style="color: #e96699"><span style="font-size: small">(10:17:49)</span> <b>lincoln:</b></span> so just an fyi, this is the second this has happened ..<br/><pre><br/>180905 10:14:36 2740426 XrootdXeq: unknown.408414:48049@gooey.tbc.iit.edu disc 1:15:19 (send failure)<br/>180905 10:14:36 2734437 XrootdBridge: unknown.410368:48083@hcc-mon.unl.edu login as nobody<br/>180905 10:14:37 2715787 XrootdBridge: unknown.410369:48049@its-condor-net.syr.edu login as nobody<br/>180905 10:14:38 2735665 XrootdXeq: unknown.408419:46162@[::ffff:129.74.145.0] disc 1:15:08 (send failure)<br/>180905 10:14:38 2719467 XrootdBridge: unknown.410370:48700@fnpc9016.fnal.gov login as nobody<br/>180905 10:14:40 2738873 XrootdBridge: unknown.410371:46162@its-condor-net7.syr.edu login as nobody<br/>180905 10:14:40 2734681 XrootdXeq: unknown.408422:48840@ccb.tbc.iit.edu disc 1:15:02 (send failure)<br/>180905 10:14:40 2740160 XrootdXeq: unknown.408418:48020@c-9-27.aglt2.org disc 1:15:12 (send failure)<br/>180905 10:14:41 2716753 XrootdBridge: unknown.410372:48701@fnpc9039.fnal.gov login as nobody<br/>180905 10:14:43 2714913 XrootdBridge: unknown.410373:48020@its-condor-net7.syr.edu login as nobody<br/>180905 10:14:45 2720637 XrootdBridge: unknown.410374:48702@gooey.tbc.iit.edu login as nobody<br/>180905 10:14:45 2700136 XrootdBridge: unknown.410375:48704@tier2-osg1.bellarmine.edu login as nobody<br/>180905 10:14:46 2715537 XrootdBridge: unknown.410376:48705@tsa3-wan.fnal.gov login as nobody<br/>180905 10:14:47 2740314 XrootdXeq: unknown.408425:48842@[::ffff:129.74.145.0] disc 1:15:06 (send failure)<br/>180905 10:14:47 2681751 XrootdBridge: unknown.410377:48706@bl-1-5.aglt2.org login as nobody<br/>180905 10:14:48 2739682 XrootdXeq: unknown.408421:48841@hcc-mon.unl.edu disc 1:15:16 (send failure)<br/>180905 10:14:49 2720747 XrootdXeq: unknown.408428:47330@gooey.tbc.iit.edu disc 1:15:03 (send failure)<br/>180905 10:14:50 2738978 XrootdBridge: unknown.410378:48708@fnpc8208.fnal.gov login as nobody<br/>180905 10:14:52 2738848 XrootdXeq: unknown.408426:48844@gooey.tbc.iit.edu disc 1:15:10 (send failure)<br/>180905 10:14:53 2738739 XrootdBridge: unknown.410379:47330@vonneumann.iit.edu login as nobody<br/>180905 10:14:53 2675780 XrootdXeq: unknown.408420:47516@bl-2-8.aglt2.org disc 1:15:21 (send failure)<br/>180905 10:14:54 2698213 XrootdBridge: unknown.410380:48709@its-condor-net.syr.edu login as nobody<br/>180905 10:14:56 2734577 XrootdXeq: unknown.408427:48845@bl-2-8.aglt2.org disc 1:15:12 (send failure)<br/>180905 10:14:57 2717916 XrootdBridge: unknown.410381:47516@gooey.tbc.iit.edu login as nobody<br/></pre><br/>
<span style="color: #e96699"><span style="font-size: small">(10:18:05)</span> <b>lincoln:</b></span> xrootd gets wedged, systemctl etc of course its happily running so we don't notice any errors<br/>
<span style="color: #e96699"><span style="font-size: small">(10:18:09)</span> <b>lincoln:</b></span> but the cache stops working<br/>
<span style="color: #e96699"><span style="font-size: small">(10:18:51)</span> <b>lincoln:</b></span> <a href="http://ganglia.mwt2.org/graph.php?r=hour&amp;z=xlarge&amp;h=stashcache.grid.uchicago.edu&amp;m=load_one&amp;s=by+name&amp;mc=2&amp;g=network_report&amp;c=Head">http://ganglia.mwt2.org/graph.php?r=hour&amp;z=xlarge&amp;h=stashcache.grid.uchicago.edu&amp;m=load_one&amp;s=by+name&amp;mc=2&amp;g=network_report&amp;c=Head</a> restart xroot and things are happy again<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:43:56)</span> <b>dweitzel:</b></span> There's a couple of bugs that are being fixed with the HTTP handling (which is likely a lot of cache hits now).  I don't remember how much of the bugs showed symptoms of freezing the cache.<br/>
<span style="color: #e96699"><span style="font-size: small">(10:48:11)</span> <b>lincoln:</b></span> soo should i just restart xrootd once a day? :slightly_smiling_face:<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:50:24)</span> <b>dweitzel:</b></span> We are building a new version of XRootD with the bug fixes, but I'm not sure if they fix this exact issue...<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:51:48)</span> <b>dweitzel:</b></span> @marian is there an update on a new build of XRootD?<br/>
<span style="color: #53b759"><span style="font-size: small">(10:54:15)</span> <b>marian:</b></span> nope, haven't received response from xrootd-devs on new build<br/>
<span style="color: #53b759"><span style="font-size: small">(10:54:27)</span> <b>marian:</b></span> can ping them again<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:54:45)</span> <b>dweitzel:</b></span> Oh, I thought you were going to build new XRootD in the OSG with just our patches?<br/>
<span style="color: #53b759"><span style="font-size: small">(10:54:46)</span> <b>marian:</b></span> @lincoln, what version you run?<br/>
<span style="color: #e96699"><span style="font-size: small">(10:54:53)</span> <b>lincoln:</b></span> ¯\_(ツ)_/¯<br/>
<span style="color: #e96699"><span style="font-size: small">(10:54:55)</span> <b>lincoln:</b></span> let me check<br/>
<span style="color: #53b759"><span style="font-size: small">(10:55:09)</span> <b>marian:</b></span> ah ... hm, do we have ticket for it? that's good idea, we can do ...<br/>
<span style="color: #e96699"><span style="font-size: small">(10:55:18)</span> <b>lincoln:</b></span> <pre><br/>[root@stashcache ~]# rpm -q xrootd-server<br/>xrootd-server-4.8.2-1.osg34.el7.x86_64<br/></pre><br/>
<span style="color: #53b759"><span style="font-size: small">(10:55:34)</span> <b>marian:</b></span> <a href="https://opensciencegrid.atlassian.net/browse/SOFTWARE-3412">https://opensciencegrid.atlassian.net/browse/SOFTWARE-3412</a><br/>
<span style="color: #53b759"><span style="font-size: small">(10:55:40)</span> <b>marian:</b></span> @sthapa is working it<br/>
<span style="color: #53b759"><span style="font-size: small">(10:55:45)</span> <b>marian:</b></span> should be ready today, it seems<br/>
<span style="color: #e96699"><span style="font-size: small">(10:56:03)</span> <b>lincoln:</b></span> okay<br/>
<span style="color: #9e3997"><span style="font-size: small">(11:04:40)</span> <b>bbockelm:</b></span> @lincoln - none of the HTTP fixes there fix a deadlock.<br/>
<span style="color: #9e3997"><span style="font-size: small">(11:04:52)</span> <b>bbockelm:</b></span> I mean, they are definitely useful (which is why I nudged Suchandra)<br/>
<span style="color: #e96699"><span style="font-size: small">(11:04:55)</span> <b>lincoln:</b></span> daily restart cron it is!<br/>
<span style="color: #9e3997"><span style="font-size: small">(11:05:25)</span> <b>bbockelm:</b></span> It would be super-helpful if we could get a traceback when that occurs.<br/>
<span style="color: #e96699"><span style="font-size: small">(11:05:43)</span> <b>lincoln:</b></span> do i need to turn on some logging flags<br/>
<span style="color: #9e3997"><span style="font-size: small">(11:06:07)</span> <b>bbockelm:</b></span> This sorta stuff is pretty typical:<br/><pre><br/>180905 10:14:40 2738873 XrootdBridge: unknown.410371:46162@its-condor-net7.syr.edu login as nobody<br/>180905 10:14:40 2734681 XrootdXeq: unknown.408422:48840@ccb.tbc.iit.edu disc 1:15:02 (send failure)<br/></pre><br/>That's often just how HTTP clients disconnect.  HTTPS messages look scarier.<br/>
<span style="color: #9e3997"><span style="font-size: small">(11:06:26)</span> <b>bbockelm:</b></span> Hm.<br/><pre><br/>180905 10:14:40 2740160 XrootdXeq: unknown.408418:48020@c-9-27.aglt2.org disc 1:15:12 (send failure)<br/></pre><br/>
<span style="color: #9e3997"><span style="font-size: small">(11:06:41)</span> <b>bbockelm:</b></span> Now, having it all disconnect after exactly 75 minutes ... that's weird.<br/>
<span style="color: #9e3997"><span style="font-size: small">(11:07:15)</span> <b>bbockelm:</b></span> I was thinking more along the lines of <tt>pstack</tt>.<br/>
<span style="color: #e96699"><span style="font-size: small">(11:07:37)</span> <b>lincoln:</b></span> mkay<br/>
<span style="color: #e96699"><span style="font-size: small">(11:08:12)</span> <b>lincoln:</b></span> will do when i see it next<br/>
<span style="color: #9e3997"><span style="font-size: small">(11:08:14)</span> <b>bbockelm:</b></span> especially when it's 100% stuck, a <tt>pstack</tt> would be worth quite a bit.<br/>
</body>
</html>
