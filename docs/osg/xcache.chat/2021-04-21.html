<!DOCTYPE html>
<html>
<head>
<title>Wed Apr 21, 2021 : #xcache (osg)</title>
</head>
<body>
<h3>Wed Apr 21, 2021 : #xcache (osg)</h3>
<span style="color: #235e5b"><span style="font-size: small">(08:05:08)</span> <b>dweitzel:</b></span> ~Bribes~ donuts are appreciated.<br/>
<span style="color: #de5f24"><span style="font-size: small">(11:11:26)</span> <b>justas.balcas:</b></span> Hi Xrootd experts. Can we do throttling based on user in xrootd? Max is 10G, but user <tt>jbalcas</tt>  is allowed only max 1G? user <tt>sixie</tt>  is allowed max 500mb/s ?<br/>
<span style="color: #de5f24"><span style="font-size: small">(11:39:11)</span> <b>justas.balcas:</b></span> We just got hit by our local user tasks (reading RAW over WAN) and reaching max of our gridftp/xrootd doors.<br/>
<span style="color: #7d414c"><span style="font-size: small">(15:03:23)</span> <b>bockjoo:</b></span> Does that result in the SAM test failure as well?<br/>
<span style="color: #de5f24"><span style="font-size: small">(16:07:39)</span> <b>justas.balcas:</b></span> it did<br/>
<span style="color: #de5f24"><span style="font-size: small">(16:08:12)</span> <b>justas.balcas:</b></span> to a few only - it was capable just fine, but any hdfs call wasâ€¦ simply stuck<br/>
<span style="color: #de5f24"><span style="font-size: small">(16:08:53)</span> <b>justas.balcas:</b></span> I created an issue here: <a href="https://github.com/xrootd/xrootd/issues/1446">https://github.com/xrootd/xrootd/issues/1446</a> but if there any workarounds in meantime - I would be happy to apply them<br/>
<span style="color: #7d414c"><span style="font-size: small">(16:30:26)</span> <b>bockjoo:</b></span> I have been barbarically stopping xrood and cmsd if gfal-sum -t $timeout davs://$(/bin/hostname -s).<a href="http://rc.ufl.edu:1094/store/mc/test.root">rc.ufl.edu:1094/store/mc/test.root</a> ADLER32 (run as myself on the xrootd host using su - bockjoo -c "gfal-sum -t ...." and restarting them once the load goes down to a reasonable level.<br/>
<span style="color: #7d414c"><span style="font-size: small">(16:30:44)</span> <b>bockjoo:</b></span> Very infrequently, I had no xrootd servers left to server, though.<br/>
<span style="color: #7d414c"><span style="font-size: small">(16:35:06)</span> <b>bockjoo:</b></span> This is my way of throttling connections.<br/>
<span style="color: #de5f24"><span style="font-size: small">(17:03:35)</span> <b>justas.balcas:</b></span> If this is not our local user doing so - I would add him/her to ban list for a month :smile:<br/>
</body>
</html>
