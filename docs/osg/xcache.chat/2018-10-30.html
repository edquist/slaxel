<!DOCTYPE html>
<html>
<head>
<title>Tue Oct 30, 2018 : #xcache (osg)</title>
</head>
<body>
<h3>Tue Oct 30, 2018 : #xcache (osg)</h3>
<span style="color: #2b6836"><span style="font-size: small">(11:31:36)</span> <b>daues:</b></span> Hello!  following a pointer from @rynge, I was looking for a forum to ask some likely beginner questions on stashcache.  First question relates to whether one can 'list/view' files as present on the ~ 6 geographically distributed caches underlying stashcache.  I can place a sample file in the ~/stash , ~/stash/public spaces provided through OSGConnect, and then list it via<br/><pre><br/>[daues@login03 ~]$ xrdfs <a href="root://stash.osgconnect.net">root://stash.osgconnect.net</a> ls /user/daues/public/<br/>/user/daues/public/registry.sqlite3<br/></pre><br/>Is it now possible to locate/propagate the file to a particular cache, or simply know if the<br/>file is located in one or other of the caches?  Example use case is I was interested in data<br/>being as close as possible to say NASA GSFC, probably the BNL cache.<br/>
<span style="color: #235e5b"><span style="font-size: small">(12:08:28)</span> <b>dweitzel:</b></span> StashCache uses on-demand cache.  So you can't "push" out the file.  Though, you can download the file from a specific cache, which will force it to download that file.<br/>
<span style="color: #235e5b"><span style="font-size: small">(12:09:27)</span> <b>dweitzel:</b></span> I would recommend the Syracuse cache.  If you have CVMFS installed on the worker nodes, then it will likely use the Syracuse cache for you.<br/>
<span style="color: #235e5b"><span style="font-size: small">(12:10:15)</span> <b>dweitzel:</b></span> You can query the cache for the contents, probably, using the same xrdfs, just using the cache's address rather than the stash origin address.<br/>
<span style="color: #235e5b"><span style="font-size: small">(12:11:46)</span> <b>dweitzel:</b></span> in Syracuse's case, something like:<br/><pre><br/>xrdfs <a href="root://its-condor-xrootd1.syr.edu">root://its-condor-xrootd1.syr.edu</a> ls /user/daues/public<br/></pre><br/>
<span style="color: #2b6836"><span style="font-size: small">(12:12:16)</span> <b>daues:</b></span> I had trouble listing the caches themselves, and wondered if they only had access form redirectors.   I thought my attempts like that would just hang; I'll retry.<br/>
<span style="color: #2b6836"><span style="font-size: small">(12:14:08)</span> <b>daues:</b></span> Yes I see such an <tt>xrdfs</tt> to just hang ...<br/>
<span style="color: #2b6836"><span style="font-size: small">(12:31:46)</span> <b>daues:</b></span> I also see that I can list URL <tt><a href="http://stash.osgconnect.net/+daues/">http://stash.osgconnect.net/+daues/</a></tt> in a browser,<br/>but <tt><a href="http://its-condor-xrootd1.syr.edu/+daues/">http://its-condor-xrootd1.syr.edu/+daues/</a></tt> does not show analogous results.<br/>Is this how the download of a file directly from the Syracuse cache would work ?<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:08:08)</span> <b>dweitzel:</b></span> Hi @daues sorry for the delay.  Indeed, <tt><a href="http://stash.osgconnect.net">stash.osgconnect.net</a></tt> is a special machine. The "+" syntax won't work on caches.<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:09:17)</span> <b>dweitzel:</b></span> The <tt>xrdfs</tt> probably doesn't work due to lack of cmsd on the servers.  Maybe if you explicitly pointed to the port <tt>1094</tt> in the command, it may work.<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:09:59)</span> <b>dweitzel:</b></span> But, here's a sure way to download the file to the cache:<br/><pre><br/>curl <a href="http://its-condor-xrootd1.syr.edu:8000/user/daues/public/registry.sqlite3">http://its-condor-xrootd1.syr.edu:8000/user/daues/public/registry.sqlite3</a><br/></pre><br/>
<span style="color: #235e5b"><span style="font-size: small">(13:10:35)</span> <b>dweitzel:</b></span> I don't think it will provide a "list", xrootd doesn't generate a HTML page for the listing.<br/>
<span style="color: #2b6836"><span style="font-size: small">(13:46:47)</span> <b>daues:</b></span> This curl seems to be working fine;  I'll go forward with this approach; Thanks!<br/>The ability to list would be interesting, though I see that it looks like one can<br/>check for existence there with stat:<br/><pre><br/>[daues@login03 ~]$ xrdfs <a href="root://its-condor-xrootd1.syr.edu:1094">root://its-condor-xrootd1.syr.edu:1094</a> stat /user/daues/public/registry.sqlite3<br/>Path:   /user/daues/public/registry.sqlite3<br/>Id:     118224382186290434<br/>Size:   680001536<br/>MTime:  2018-10-30 18:39:24<br/>Flags:  48 (IsReadable|IsWritable)<br/></pre><br/>which may be the desired target anyway.<br/>
</body>
</html>
