<!DOCTYPE html>
<html>
<head>
<title>Wed May 11, 2016 : #xcache (osg)</title>
</head>
<body>
<h3>Wed May 11, 2016 : #xcache (osg)</h3>
<span style="color: #e7392d"><span style="font-size: small">(09:56:20)</span> <b>bala:</b></span> @ivukotic: here<br/>
<span style="color: #9e3997"><span style="font-size: small">(10:37:19)</span> <b>bbockelm:</b></span> @dweitzel @lincoln - I put in a PR a few days back to remove references to <tt>phiphi</tt>.  No one had removed it from the client.<br/>
<span style="color: #9e3997"><span style="font-size: small">(10:48:28)</span> <b>bbockelm:</b></span> could you guys merge it?  <a href="https://github.com/OSGConnect/StashCache/pull/16">https://github.com/OSGConnect/StashCache/pull/16</a><br/>
<span style="color: #9e3997"><span style="font-size: small">(10:49:05)</span> <b>bbockelm:</b></span> That should fix @bala’s issue except for Caltech — for some reason, Anna had hardcoded the URL for Caltech in <tt>stashcp</tt> itself.<br/>
<span style="color: #9e3997"><span style="font-size: small">(10:50:31)</span> <b>bbockelm:</b></span> @bala: could you redo the above graph of failure rate, comparing the relative failure rates of <tt>stashcp</tt> to <tt>wget</tt>?<br/>
<span style="color: #e7392d"><span style="font-size: small">(10:51:29)</span> <b>bala:</b></span> Sure, already I have the data. Wget failure is less than 5%<br/>
<span style="color: #e7392d"><span style="font-size: small">(10:51:33)</span> <b>bala:</b></span> I will prepare the plot<br/>
<span style="color: #9e3997"><span style="font-size: small">(10:51:39)</span> <b>bbockelm:</b></span> Ah, ok, nevermind then.<br/>
<span style="color: #9e3997"><span style="font-size: small">(10:52:44)</span> <b>bbockelm:</b></span> We’ve got good friends at the Syracuse site - I’d like to focus on that one to understand the BNL failure rate.<br/>
<span style="color: #9e3997"><span style="font-size: small">(10:52:56)</span> <b>bbockelm:</b></span> Could you repeat the test with setting the environment variable <tt>XRD_LOGLEVEL=Debug</tt> ?<br/>
<span style="color: #9e3997"><span style="font-size: small">(10:53:20)</span> <b>bbockelm:</b></span> I _think_ it’ll spit out more useful info<br/>
<span style="color: #e7392d"><span style="font-size: small">(10:53:46)</span> <b>bala:</b></span> ah, ok, will do<br/>
<span style="color: #e7392d"><span style="font-size: small">(10:53:56)</span> <b>bala:</b></span> Maybe after the stashcp update?<br/>
<span style="color: #e7392d"><span style="font-size: small">(10:54:53)</span> <b>bala:</b></span> @dweitzel: @lincoln Let me know when you update stashcp that removes phiphi from the list of cache<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:55:28)</span> <b>dweitzel:</b></span> That’s up to @lincoln and/or @rynge<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:55:46)</span> <b>dweitzel:</b></span> I can merge the request though.<br/>
<span style="color: #e7392d"><span style="font-size: small">(10:55:59)</span> <b>bala:</b></span> ah, okay, we need to install in the cvmfs I guess<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:56:17)</span> <b>dweitzel:</b></span> yeah, maybe @sthapa did it last time?<br/>
<span style="color: #e7392d"><span style="font-size: small">(10:56:27)</span> <b>bala:</b></span> sure, no problem, I will do it<br/>
<span style="color: #e7392d"><span style="font-size: small">(10:56:43)</span> <b>bala:</b></span> let me know after you merged the code<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:56:53)</span> <b>dweitzel:</b></span> merged<br/>
<span style="color: #e7392d"><span style="font-size: small">(10:57:08)</span> <b>bala:</b></span> great, thankyou<br/>
<span style="color: #9e3997"><span style="font-size: small">(10:58:48)</span> <b>bbockelm:</b></span> So, everywhere but Caltech should ignore <tt>phiphi</tt>: I’d appreciate if someone could edit the OASIS install of <tt>stashcp</tt>.<br/>
<span style="color: #5b89d5"><span style="font-size: small">(10:59:33)</span> <b>sthapa:</b></span> What do you need done?<br/>
<span style="color: #9e3997"><span style="font-size: small">(10:59:38)</span> <b>bbockelm:</b></span> <a href="https://github.com/opensciencegrid/StashCache/commit/a70af5f35e5b9dc8145d95597b08cd96084c5139">https://github.com/opensciencegrid/StashCache/commit/a70af5f35e5b9dc8145d95597b08cd96084c5139</a> looks like this commit<br/>
<span style="color: #5b89d5"><span style="font-size: small">(11:04:31)</span> <b>sthapa:</b></span> @Brian do I need to install a new version of stashcp or just edit the OASIS copy to change the STASHPREFIX?<br/>
<span style="color: #9e3997"><span style="font-size: small">(11:11:57)</span> <b>bbockelm:</b></span> I would just edit it right now - we’re talking about doing a pretty major overhaul anyway, not worth extending this line of work too far.<br/>
<span style="color: #5b89d5"><span style="font-size: small">(11:18:49)</span> <b>sthapa:</b></span> Okay, changed the STASHPREFIX and refreshed<br/>
<span style="color: #e7392d"><span style="font-size: small">(11:39:18)</span> <b>bala:</b></span> I will wait for  OASIS to be updated (may be give a day) and then submit the test jobs<br/>
<span style="color: #9e3997"><span style="font-size: small">(11:41:00)</span> <b>bbockelm:</b></span> nah, just go ahead.  If the Caltech results look screwy, we’ll ignore it.<br/>
<span style="color: #9e3997"><span style="font-size: small">(11:42:00)</span> <b>bbockelm:</b></span> Oh!  While I’m making you busy… can you do the same test, but reading via /cvmfs/stash.osgstorage.org?<br/>
<span style="color: #9e3997"><span style="font-size: small">(11:42:37)</span> <b>bbockelm:</b></span> (which files are you pulling?)<br/>
<span style="color: #9e3997"><span style="font-size: small">(11:46:44)</span> <b>bbockelm:</b></span> You’ll want to add into your requirements <tt>CVMFS_stash_osgstorage_org_REVISION &gt; 1</tt><br/>
<span style="color: #9e3997"><span style="font-size: small">(11:50:53)</span> <b>bbockelm:</b></span> I’ll start poking a few friendly sites to upgrade.<br/>
<span style="color: #e7392d"><span style="font-size: small">(11:52:07)</span> <b>bala:</b></span> Sure, do I just cp or use wget to get the data from cvmfs over stash.<br/>
<span style="color: #e7392d"><span style="font-size: small">(11:56:50)</span> <b>bala:</b></span> I guess cvmfs_stash should be very fast<br/>
<span style="color: #e7392d"><span style="font-size: small">(11:57:28)</span> <b>bala:</b></span> @dweitzel: do you know the syntax or command to copy data from cvmfs_stash<br/>
<span style="color: #235e5b"><span style="font-size: small">(12:01:40)</span> <b>dweitzel:</b></span> It's just a cp, just like normal cvmfs. <br/>
<span style="color: #e7392d"><span style="font-size: small">(12:06:03)</span> <b>bala:</b></span> thankyou<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:23:05)</span> <b>bbockelm:</b></span> @bala: John just did a forced <tt>pdsh</tt> update of the whole Nebraska cluster.  The number of pilots advertising stash is going up.<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:27:24)</span> <b>bbockelm:</b></span> Ha!  And I just crashed the new Xrootd code on <tt><a href="http://xrd-cache-1.t2.ucsd.edu">xrd-cache-1.t2.ucsd.edu</a></tt><br/>
<span style="color: #9e3997"><span style="font-size: small">(12:28:12)</span> <b>bbockelm:</b></span> :simple_smile: To make an omelet...<br/>
<span style="color: #e7392d"><span style="font-size: small">(12:28:12)</span> <b>bala:</b></span> Based on your earlier discussion on slack, I did this<br/>
<span style="color: #e7392d"><span style="font-size: small">(12:28:13)</span> <b>bala:</b></span> condor_status -pool <a href="http://osg-flock.grid.iu.edu">osg-flock.grid.iu.edu</a> -constraint 'CVMFS_stash_osgstorage_org_REVISION &gt; 1' -af GLIDEIN_Site | sort | uniq -c<br/>    237 MWT2<br/>    106 Nebraska<br/>     69 UChicago<br/>
<span style="color: #e7392d"><span style="font-size: small">(12:28:35)</span> <b>bala:</b></span> So we target only these sites to send jobs<br/>
<span style="color: #e7392d"><span style="font-size: small">(12:29:16)</span> <b>bala:</b></span> May be setting the requirement CVMFS_stash_osgstorage_org_REVISION &gt; 1 should be fine<br/>
<span style="color: #e7392d"><span style="font-size: small">(12:29:53)</span> <b>bala:</b></span> oh, the crash sounds like fun :simple_smile:<br/>
<span style="color: #9e3997"><span style="font-size: small">(13:15:14)</span> <b>bbockelm:</b></span> Seems that <tt>curl <a href="http://xrd-cache-1.t2.ucsd.edu/">http://xrd-cache-1.t2.ucsd.edu/</a></tt> triggers a crash while <tt><a href="http://xrd-cache-1.t2.ucsd.edu//user/bbockelm/public/0E0B8A4D-7A57-E111-B73A-00261894395F.root">http://xrd-cache-1.t2.ucsd.edu//user/bbockelm/public/0E0B8A4D-7A57-E111-B73A-00261894395F.root</a></tt> doesn’t.<br/>
<span style="color: #e7392d"><span style="font-size: small">(13:27:20)</span> <b>bala:</b></span> I tried $ curl <a href="http://xrd-cache-1.t2.ucsd.edu/">http://xrd-cache-1.t2.ucsd.edu/</a><br/>curl: (7) couldn't connect to host<br/>
<span style="color: #e7392d"><span style="font-size: small">(13:48:49)</span> <b>bala:</b></span> and ping returns packets: ping <a href="http://xrd-cache-1.t2.ucsd.edu">xrd-cache-1.t2.ucsd.edu</a><br/>
<span style="color: #e7392d"><span style="font-size: small">(13:49:46)</span> <b>bala:</b></span> Looks like xrd-cache is back online. May I go ahead  and submit the jobs with debug option on<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:54:13)</span> <b>bbockelm:</b></span> Yeah - try it, but I don’t have high hopes.<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:54:18)</span> <b>bbockelm:</b></span> <pre><br/>$ condor_status -pool <a href="http://osg-flock.grid.iu.edu">osg-flock.grid.iu.edu</a> -constraint 'CVMFS_stash_osgstorage_org_REVISION &gt; 1' -af GLIDEIN_Site | sort | uniq -c<br/>    127 MWT2<br/>    481 Nebraska<br/>     14 Omaha<br/>     68 UChicago<br/></pre><br/>
<span style="color: #9e3997"><span style="font-size: small">(15:56:09)</span> <b>bbockelm:</b></span> @marian: Here’s the list of sites we use for <tt><a href="http://stash.osgstorage.org">stash.osgstorage.org</a></tt>:<br/><pre><br/>CVMFS_EXTERNAL_URL="<a href="http://hcc-stash.unl.edu:8000/;http://stashcache.grid.uchicago.edu:8000/;http://xrd-cache-1.t2.ucsd.edu:8000/;http://mwt2-stashcache.campuscluster.illinois.edu:8000/">http://hcc-stash.unl.edu:8000/;http://stashcache.grid.uchicago.edu:8000/;http://xrd-cache-1.t2.ucsd.edu:8000/;http://mwt2-stashcache.campuscluster.illinois.edu:8000/</a>“<br/></pre><br/>
<span style="color: #9e3997"><span style="font-size: small">(15:56:13)</span> <b>bbockelm:</b></span> are there any missing?<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:56:40)</span> <b>bbockelm:</b></span> I guess the BNL one?<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:57:12)</span> <b>bbockelm:</b></span> Oh, BNL doesn’t export HTTP.<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:58:52)</span> <b>bbockelm:</b></span> Who has contact with the Prague site?  @boj, is that you?<br/>
<span style="color: #df3dc0"><span style="font-size: small">(15:59:47)</span> <b>boj:</b></span> Robert and Ken do but that would be via me if Robert isn't here<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:59:49)</span> <b>bbockelm:</b></span> I’d like to get them to install <tt><a href="http://nova.osgstorage.org">nova.osgstorage.org</a></tt> (and Ken to borrow the script from @rynge to advertise its presence).<br/>
<span style="color: #df3dc0"><span style="font-size: small">(16:01:20)</span> <b>boj:</b></span> what steps are needed?<br/>
<span style="color: #53b759"><span style="font-size: small">(16:01:41)</span> <b>marian:</b></span> BNL should be exporting http<br/>
<span style="color: #53b759"><span style="font-size: small">(16:01:58)</span> <b>marian:</b></span> I remember emails they said they did<br/>
<span style="color: #53b759"><span style="font-size: small">(16:02:28)</span> <b>marian:</b></span> Prague I asked Robert<br/>
<span style="color: #53b759"><span style="font-size: small">(16:02:33)</span> <b>marian:</b></span> in the email<br/>
<span style="color: #53b759"><span style="font-size: small">(16:02:38)</span> <b>marian:</b></span> should I ping him again?<br/>
<span style="color: #53b759"><span style="font-size: small">(16:02:47)</span> <b>marian:</b></span> and cc Bo?<br/>
<span style="color: #53b759"><span style="font-size: small">(16:02:57)</span> <b>marian:</b></span> (I think three weeks ago I did)<br/>
<span style="color: #9e3997"><span style="font-size: small">(16:04:13)</span> <b>bbockelm:</b></span> yup, let’s ping.<br/>
<span style="color: #9e3997"><span style="font-size: small">(16:04:19)</span> <b>bbockelm:</b></span> what port is BNL exporting on?<br/>
<span style="color: #df3dc0"><span style="font-size: small">(16:04:28)</span> <b>boj:</b></span> agreed- ping again<br/>
<span style="color: #53b759"><span style="font-size: small">(16:08:50)</span> <b>marian:</b></span> 8000 should be, let me check in email<br/>
<span style="color: #53b759"><span style="font-size: small">(16:13:11)</span> <b>marian:</b></span> yes, we asked 8000, everyone<br/>
<span style="color: #9e3997"><span style="font-size: small">(17:00:15)</span> <b>bbockelm:</b></span> alright, let’s ask them again.  Maybe they have the firewall closed?<br/>
</body>
</html>
