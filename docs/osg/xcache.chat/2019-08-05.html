<!DOCTYPE html>
<html>
<head>
<title>Mon Aug 5, 2019 : #xcache (osg)</title>
</head>
<body>
<h3>Mon Aug 5, 2019 : #xcache (osg)</h3>
<span style="color: #a63024"><span style="font-size: small">(11:40:37)</span> <b>efajardo:</b></span> Now that software meeting is over I want to understand how this is use<br/>
<span style="color: #a63024"><span style="font-size: small">(11:40:42)</span> <b>efajardo:</b></span> <b>@here</b><br/>
<span style="color: #a63024"><span style="font-size: small">(11:41:04)</span> <b>efajardo:</b></span> This is the script that gets called by timere<br/>
<span style="color: #a63024"><span style="font-size: small">(11:41:05)</span> <b>efajardo:</b></span> <a href="https://github.com/opensciencegrid/xcache/blob/master/src/renew-proxy">https://github.com/opensciencegrid/xcache/blob/master/src/renew-proxy</a><br/>
<span style="color: #a63024"><span style="font-size: small">(11:41:24)</span> <b>efajardo:</b></span> Here <a href="https://github.com/opensciencegrid/xcache/blob/master/configs/cms-xcache/overrides/xrootd/10-cms-xcache-overrides.conf">https://github.com/opensciencegrid/xcache/blob/master/configs/cms-xcache/overrides/xrootd/10-cms-xcache-overrides.conf</a><br/>
<span style="color: #a63024"><span style="font-size: small">(11:41:42)</span> <b>efajardo:</b></span> but it is expecting the argument to be <tt>cms</tt><br/>
<span style="color: #a63024"><span style="font-size: small">(11:42:02)</span> <b>efajardo:</b></span> how does that argument gets into the call of <a href="https://github.com/opensciencegrid/xcache/blob/master/src/renew-proxy">https://github.com/opensciencegrid/xcache/blob/master/src/renew-proxy</a><br/>
<span style="color: #a63024"><span style="font-size: small">(11:52:10)</span> <b>efajardo:</b></span> @blin :top: @matyas?<br/>
<span style="color: #43761b"><span style="font-size: small">(11:53:05)</span> <b>blin:</b></span> i think that means we'll have to ship an override to add the VO arg<br/>
<span style="color: #43761b"><span style="font-size: small">(11:53:12)</span> <b>blin:</b></span> they can do that manually for now<br/>
<span style="color: #a63024"><span style="font-size: small">(11:56:11)</span> <b>efajardo:</b></span> hmm can you expand or point me to some of this documentation on overides<br/>
<span style="color: #43761b"><span style="font-size: small">(11:58:36)</span> <b>blin:</b></span> one sec, writing up a report that's due in a few minutes<br/>
<span style="color: #a63024"><span style="font-size: small">(12:03:10)</span> <b>efajardo:</b></span> ahh I think I got it<br/>
<span style="color: #a63024"><span style="font-size: small">(12:03:14)</span> <b>efajardo:</b></span> thanks I will maake a PR<br/>
<span style="color: #a63024"><span style="font-size: small">(12:03:19)</span> <b>efajardo:</b></span> and see if you agree with it<br/>
<span style="color: #a63024"><span style="font-size: small">(12:37:13)</span> <b>efajardo:</b></span> <b>@here</b> I created a PR here<br/>
<span style="color: #a63024"><span style="font-size: small">(12:37:14)</span> <b>efajardo:</b></span> <a href="https://github.com/opensciencegrid/xcache/pull/69/files">https://github.com/opensciencegrid/xcache/pull/69/files</a><br/>
<span style="color: #a63024"><span style="font-size: small">(12:37:32)</span> <b>efajardo:</b></span> I am not sure I felt confident on what I was doing. So I would enjoy some suggestions or comments<br/>
<span style="color: #43761b"><span style="font-size: small">(12:48:44)</span> <b>blin:</b></span> @efajardo done<br/>
<span style="color: #a63024"><span style="font-size: small">(13:07:08)</span> <b>efajardo:</b></span> Thanks<br/>
<span style="color: #a63024"><span style="font-size: small">(13:07:18)</span> <b>efajardo:</b></span> I think I fixed most things<br/>
<span style="color: #a63024"><span style="font-size: small">(13:07:37)</span> <b>efajardo:</b></span> let me know if I should do the same for ATLAS<br/>
<span style="color: #43761b"><span style="font-size: small">(13:08:45)</span> <b>blin:</b></span> oh thanks for the reminder, i meant to ask for that<br/>
<span style="color: #a63024"><span style="font-size: small">(13:18:43)</span> <b>efajardo:</b></span> @blin Can I do this together with<br/>
<span style="color: #a63024"><span style="font-size: small">(13:18:44)</span> <b>efajardo:</b></span> <a href="https://opensciencegrid.atlassian.net/browse/SOFTWARE-3784">https://opensciencegrid.atlassian.net/browse/SOFTWARE-3784</a><br/>
<span style="color: #43761b"><span style="font-size: small">(13:19:25)</span> <b>blin:</b></span> like in a single PR? that's fine to me<br/>
<span style="color: #a63024"><span style="font-size: small">(13:22:07)</span> <b>efajardo:</b></span> yes<br/>
<span style="color: #43761b"><span style="font-size: small">(14:12:59)</span> <b>blin:</b></span> @dweitzel xrootd 4.9.0+ have TPC and macaroons plugins built-in, right?<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:27:37)</span> <b>dweitzel:</b></span> Yes<br/>
<span style="color: #43761b"><span style="font-size: small">(14:29:17)</span> <b>blin:</b></span> alright, looks like we forgot to untag those plugins from contrib<br/>
<span style="color: #c386df"><span style="font-size: small">(15:06:35)</span> <b>matyas:</b></span> @efajardo for CNAF, how about for now we just change their registration in topology to <a href="http://ds-914.cr.cnaf.infn.it">ds-914.cr.cnaf.infn.it</a> and we can change it back once we've added FQDNAliases support<br/>
<span style="color: #a63024"><span style="font-size: small">(15:06:54)</span> <b>efajardo:</b></span> ok<br/>
<span style="color: #a63024"><span style="font-size: small">(15:06:55)</span> <b>efajardo:</b></span> fine<br/>
<span style="color: #a63024"><span style="font-size: small">(15:06:58)</span> <b>efajardo:</b></span> I am fine with that<br/>
<span style="color: #a63024"><span style="font-size: small">(15:07:03)</span> <b>efajardo:</b></span> do we do it<br/>
<span style="color: #a63024"><span style="font-size: small">(15:07:06)</span> <b>efajardo:</b></span> or we ask them to do it?<br/>
<span style="color: #43761b"><span style="font-size: small">(15:07:34)</span> <b>blin:</b></span> did we not get to the bottom of the systemd override? it /should/ work<br/>
<span style="color: #c386df"><span style="font-size: small">(15:07:44)</span> <b>matyas:</b></span> it works when I do it<br/>
<span style="color: #43761b"><span style="font-size: small">(15:09:48)</span> <b>blin:</b></span> -.-<br/>
<span style="color: #c386df"><span style="font-size: small">(15:13:02)</span> <b>matyas:</b></span> because of the communication delay, trying to figure out why the workaround isn't working is just gonna take too long, and it's kind of a finicky workaround anyway<br/>
<span style="color: #43761b"><span style="font-size: small">(15:13:30)</span> <b>blin:</b></span> how's it finicky?<br/>
<span style="color: #c386df"><span style="font-size: small">(15:13:46)</span> <b>matyas:</b></span> apparently it's easy to get wrong?<br/>
<span style="color: #43761b"><span style="font-size: small">(15:15:55)</span> <b>blin:</b></span> i don't think that makes it finicky<br/>
<span style="color: #43761b"><span style="font-size: small">(15:16:51)</span> <b>blin:</b></span> i think changing their registration creates an unnecessary dependency on us in case they change their FQDN again<br/>
<span style="color: #43761b"><span style="font-size: small">(15:17:09)</span> <b>blin:</b></span> and i thought we decided during the xcache meeting to not go ahead with the FQDNAliases support<br/>
<span style="color: #c386df"><span style="font-size: small">(15:17:24)</span> <b>matyas:</b></span> uhhh what?<br/>
<span style="color: #c386df"><span style="font-size: small">(15:18:06)</span> <b>matyas:</b></span> no I don't believe we did<br/>
<span style="color: #43761b"><span style="font-size: small">(15:18:08)</span> <b>blin:</b></span> that's what @bbockelm requested<br/>
<span style="color: #c386df"><span style="font-size: small">(15:18:32)</span> <b>matyas:</b></span> it's not in the notes<br/>
<span style="color: #43761b"><span style="font-size: small">(15:18:37)</span> <b>blin:</b></span> iirc he said he would rather not see us move in that direction<br/>
<span style="color: #43761b"><span style="font-size: small">(15:19:09)</span> <b>blin:</b></span> and just use the override capability that we put in<br/>
<span style="color: #c386df"><span style="font-size: small">(15:22:48)</span> <b>matyas:</b></span> how about instead of making people do a systemd override, we just create an EnvironmentFile like <tt>/etc/sysconfig/stash-cache</tt> and put a CACHE_FQDN in in there<br/>
<span style="color: #c386df"><span style="font-size: small">(15:25:17)</span> <b>matyas:</b></span> I think that's a lot easier to explain and for people to understand<br/>
<span style="color: #43761b"><span style="font-size: small">(15:25:24)</span> <b>blin:</b></span> aren't systemd overrides the preferred method over sysconfig in systemd-based OSes?<br/>
<span style="color: #c386df"><span style="font-size: small">(15:26:21)</span> <b>matyas:</b></span> <pre><br/># ls /etc/sysconfig | wc -l<br/>47<br/></pre><br/>apparently not<br/>
<span style="color: #c386df"><span style="font-size: small">(15:26:34)</span> <b>matyas:</b></span> I mean, Lennart Poettering probably prefers it :slightly_smiling_face:<br/>
<span style="color: #43761b"><span style="font-size: small">(15:26:49)</span> <b>blin:</b></span> i was just about to link his blog post about it :stuck_out_tongue:<br/>
<span style="color: #c386df"><span style="font-size: small">(15:31:26)</span> <b>matyas:</b></span> that's the count on both SL7 and Fedora 30<br/>
<span style="color: #c386df"><span style="font-size: small">(15:32:10)</span> <b>matyas:</b></span> so I don't think they're going anywhere<br/>
<span style="color: #c386df"><span style="font-size: small">(15:46:24)</span> <b>matyas:</b></span> that's something we can toss into xcache 1.1.0 or so in the next couple of weeks. in the meantime, if we just want to get these folks up and running, we should change their registration.<br/>
<span style="color: #43761b"><span style="font-size: small">(15:48:47)</span> <b>blin:</b></span> changing their registration's brittle, i'm not a huge fan of it<br/>
<span style="color: #c386df"><span style="font-size: small">(15:51:54)</span> <b>matyas:</b></span> me neither but I don't think we want them waiting for a long time<br/>
<span style="color: #43761b"><span style="font-size: small">(15:52:51)</span> <b>blin:</b></span> i thought we were waiting on them, not the other way around<br/>
<span style="color: #c386df"><span style="font-size: small">(16:09:45)</span> <b>matyas:</b></span> well they're waiting on me to tell them how to get the authfile working<br/>
<span style="color: #43761b"><span style="font-size: small">(16:11:13)</span> <b>blin:</b></span> i thought we told them how to do the override and they said it's not working and we're waiting on them to give us some info for debugging?<br/>
<span style="color: #9e3997"><span style="font-size: small">(20:57:16)</span> <b>bbockelm:</b></span> Just catching up - yes, we decided that we would just do overrides for now (we are talking one line in one file, right?).<br/>
</body>
</html>
