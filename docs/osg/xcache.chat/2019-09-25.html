<!DOCTYPE html>
<html>
<head>
<title>Wed Sep 25, 2019 : #xcache (osg)</title>
</head>
<body>
<h3>Wed Sep 25, 2019 : #xcache (osg)</h3>
<span style="color: #a63024"><span style="font-size: small">(10:51:42)</span> <b>efajardo:</b></span> ok<br/>
<span style="color: #a63024"><span style="font-size: small">(10:51:48)</span> <b>efajardo:</b></span> I am running into another problem<br/>
<span style="color: #a63024"><span style="font-size: small">(10:51:50)</span> <b>efajardo:</b></span> <pre>-sh-4.2$ cat /usr/libexec/xcache/renew-proxy<br/>#!/bin/sh<br/><br/>HOSTCERT=/etc/grid-security/xrd/xrdcert.pem<br/>HOSTKEY=/etc/grid-security/xrd/xrdkey.pem<br/>PROXYFILE=/run/xcache-auth/x509_proxy<br/>/usr/bin/voms-proxy-init -cert "$HOSTCERT" \<br/>                     -key "$HOSTKEY" \<br/>                     -out "${PROXYFILE}.tmp" \<br/>                     -valid 48:00 \<br/>                     "$@" \<br/>  &amp;&amp;<br/>mv "${PROXYFILE}.tmp" "${PROXYFILE}"<br/>-sh-4.2$ /usr/libexec/xcache/renew-proxy cms<br/>Found non option element cms in command line</pre><br/>
<span style="color: #43761b"><span style="font-size: small">(10:52:44)</span> <b>blin:</b></span> you want <tt>/usr/libexec/xcache/renew-proxy -voms cms</tt><br/>
<span style="color: #43761b"><span style="font-size: small">(10:53:08)</span> <b>blin:</b></span> ^^ fixed<br/>
<span style="color: #a63024"><span style="font-size: small">(11:00:30)</span> <b>efajardo:</b></span> Thank you<br/>
<span style="color: #a63024"><span style="font-size: small">(12:40:44)</span> <b>efajardo:</b></span> The CMS xcache image is broken too is trying to use the osg redir<br/>
<span style="color: #a63024"><span style="font-size: small">(12:40:45)</span> <b>efajardo:</b></span> <pre>[2019-09-25 16:41:14.054514 +0000][Warning][XRootD            ] 	29. Retrying: <a href="root://redirector.osgstorage.org:1094/">root://redirector.osgstorage.org:1094/</a><br/>[2019-09-25 16:41:14.054514 +0000][Warning][XRootD            ] 	30. Redirected from: <a href="root://redirector.osgstorage.org:1094/">root://redirector.osgstorage.org:1094/</a> to: <a href="root://xrootd-local.unl.edu:1094/">root://xrootd-local.unl.edu:1094/</a><br/>[2019-09-25 16:41:14.054514 +0000][Warning][XRootD            ] 	31. Retrying: <a href="root://redirector.osgstorage.org:1094/">root://redirector.osgstorage.org:1094/</a><br/>[2019-09-25 16:41:16.856647 +0000][Warning][XRootD            ] [p6@redirector.osgstorage.org:1094] Redirect limit has been reached for message kXR_stat (path: /store/mc/RunIIFall17MiniAODv2/W1JetsToLNu_LHEWpT_250-400_TuneCP5_13TeV-amcnloFXFX-pythia8/MINIAODSIM/PU2017_12Apr2018_94X_mc2017_realistic_v14-v1/00000/08A948B2-C544-E811-91D3-0025905A60B8.root?oss.lcl=1&amp;pss.tid=unk.0:0@host&amp;tried=<a href="http://xrootd-local.unl.edu">xrootd-local.unl.edu</a>,<a href="http://xrootd-local.unl.edu">xrootd-local.unl.edu</a>,<a href="http://xrootd-local.unl.edu">xrootd-local.unl.edu</a>,<a href="http://xrootd-local.unl.edu">xrootd-local.unl.edu</a>,<a href="http://xrootd-local.unl.edu">xrootd-local.unl.edu</a>,<a href="http://xrootd-local.unl.edu">xrootd-local.unl.edu</a>,<a href="http://xrootd-local.unl.edu">xrootd-local.unl.edu</a>,<a href="http://xrootd-local.unl.edu">xrootd-local.unl.edu</a>,<a href="http://xrootd-local.unl.edu">xrootd-local.unl.edu</a>,<a href="http://xrootd-local.unl.edu">xrootd-local.unl.edu</a>,<a href="http://xrootd-local.unl.edu">xrootd-local.unl.edu</a>,<a href="http://xrootd-local.unl.edu">xrootd-local.unl.edu</a>,<a href="http://xrootd-local.unl.edu">xrootd-local.unl.edu</a>,<a href="http://xrootd-local.unl.edu">xrootd-local.unl.edu</a>,<a href="http://xrootd-local.unl.edu">xrootd-local.unl.edu</a>,<a href="http://xrootd-local.unl.edu">xrootd-local.unl.edu</a>, flags: none), the last known error is: [FATAL] Auth failed<br/>[2019-09-25 16:41:16.857094 +0000][Warning][XRootD            ] Redirect trace-back:<br/>[2019-09-25 16:41:16.857094 +0000][Warning][XRootD            ] 	0. Redirected from: <a href="root://redirector.osgstorage.org:1094/">root://redirector.osgstorage.org:1094/</a> to: <a href="root://xrootd-local.unl.edu:1094/">root://xrootd-local.unl.edu:1094/</a><br/>[2019-09-25 16:41:16.857094 +0000][Warning][XRootD            ] 	1. Retrying: <a href="root://redirector.osgstorage.org:1094/">root://redirector.osgstorage.org:1094/</a><br/>[2019-09-25 16:41:16.857094 +0000][Warning][XRootD            ] 	2. Redirected from: <a href="root://redirector.osgstorage.org:1094/">root://redirector.osgstorage.org:1094/</a> to: <a href="root://xrootd-local.unl.edu:1094/">root://xrootd-local.unl.edu:1094/</a></pre><br/>
<span style="color: #235e5b"><span style="font-size: small">(12:46:14)</span> <b>dweitzel:</b></span> huh, so it's tried xrootd-local a bunch of times?<br/>
<span style="color: #235e5b"><span style="font-size: small">(12:46:44)</span> <b>dweitzel:</b></span> also, you are using OSG redirector for a CMS data file?<br/>
<span style="color: #a63024"><span style="font-size: small">(12:57:46)</span> <b>efajardo:</b></span> no it was using<br/>
<span style="color: #a63024"><span style="font-size: small">(12:58:19)</span> <b>efajardo:</b></span> exactly<br/>
<span style="color: #a63024"><span style="font-size: small">(12:58:23)</span> <b>efajardo:</b></span> that was the default config<br/>
<span style="color: #a63024"><span style="font-size: small">(12:59:04)</span> <b>efajardo:</b></span> acoording to the xrootd config it was<br/>
<span style="color: #a63024"><span style="font-size: small">(12:59:08)</span> <b>efajardo:</b></span> but in practice it was not<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:08:25)</span> <b>dweitzel:</b></span> I'm confused.<br/>
<span style="color: #a63024"><span style="font-size: small">(13:09:06)</span> <b>efajardo:</b></span> ME too<br/>
<span style="color: #a63024"><span style="font-size: small">(13:16:22)</span> <b>efajardo:</b></span> I think this is the problem<br/>
<span style="color: #a63024"><span style="font-size: small">(13:16:26)</span> <b>efajardo:</b></span> <a href="https://github.com/opensciencegrid/xcache/blob/master/configs/stash-cache/config.d/40-stash-cache-plugin.cfg#L25">https://github.com/opensciencegrid/xcache/blob/master/configs/stash-cache/config.d/40-stash-cache-plugin.cfg#L25</a><br/>
<span style="color: #a63024"><span style="font-size: small">(13:16:35)</span> <b>efajardo:</b></span> it should be if named cms-xcache<br/>
<span style="color: #a63024"><span style="font-size: small">(13:16:38)</span> <b>efajardo:</b></span> for cmsd too<br/>
</body>
</html>
