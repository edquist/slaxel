<!DOCTYPE html>
<html>
<head>
<title>Mon Aug 23, 2021 : #uscms (osg)</title>
</head>
<body>
<h3>Mon Aug 23, 2021 : #uscms (osg)</h3>
<span style="color: #235e5b"><span style="font-size: small">(07:42:40)</span> <b>spiperov:</b></span> The revocation lists under <tt>/cvmfs/oasis.opensciencegrid.org/mis/osg-wn-client/3.5/3.5.45-2/el7-x86_64/etc/grid-security/certificates</tt> (where our <tt>$X509_CERT_DIR</tt> points) are from Aug.17, and we cannot get VOMS proxies as a result.<br/><br/>Some sort of CVMFS problem?<br/>
<span style="color: #235e5b"><span style="font-size: small">(07:54:32)</span> <b>spiperov:</b></span> (this is after executing our 'standard' routine of:<br/><pre>export VO_CMS_SW_DIR=/cvmfs/cms.cern.ch<br/>source $VO_CMS_SW_DIR/cmsset_default.sh<br/>source /cvmfs/oasis.opensciencegrid.org/osg-software/osg-wn-client/3.5/current/el7-x86_64/setup.sh</pre><br/>The revocation lists under <tt>/cvmfs/cms.cern.ch/grid/etc/grid-security/certificates</tt> seem OK)<br/>
<span style="color: #235e5b"><span style="font-size: small">(07:58:21)</span> <b>spiperov:</b></span> And the versions for OSG 3.6<br/><tt>/cvmfs/oasis.opensciencegrid.org/mis/osg-wn-client/3.6/current/el7-x86_64/etc/grid-security/certificates</tt><br/>as well as the 'current' under:<br/><tt>/cvmfs/oasis.opensciencegrid.org/mis/osg-wn-client/current/el7-x86_64/etc/grid-security/certificates</tt><br/>are in the same state.<br/>
<span style="color: #a72f79"><span style="font-size: small">(12:51:18)</span> <b>andrew.melo:</b></span> Are there docs about installing the condor 9 and xrootd 5.3 on OSG3.5 hosts?<br/>
<span style="color: #a72f79"><span style="font-size: small">(12:51:31)</span> <b>andrew.melo:</b></span> I know I've gotta enable some other repository temporarily to get the packages<br/>
<span style="color: #d1707d"><span style="font-size: small">(13:19:08)</span> <b>gattebury:</b></span> <tt>osg-upcoming</tt> has condor 9.x and xrood 5.3 so you can probably just get away with <tt>--enablerepo=osg-upcoming</tt><br/>
<span style="color: #d1707d"><span style="font-size: small">(13:19:24)</span> <b>gattebury:</b></span> (this is true for EL7 and OSG 3.5 at least)<br/>
<span style="color: #a72f79"><span style="font-size: small">(13:23:13)</span> <b>andrew.melo:</b></span> Do I remember right that I didn't want to just blindly do osg-upcoming and to instead enable it, upgrade condor/xrootd, then disable it?<br/>
<span style="color: #a72f79"><span style="font-size: small">(13:23:22)</span> <b>andrew.melo:</b></span> Are there any significant config changes?<br/>
<span style="color: #d1707d"><span style="font-size: small">(13:27:07)</span> <b>gattebury:</b></span> The only issue that we had with respect to the condor 9.x upgrade was having to set <tt>use security:host_based</tt> to allow the old GSI stuff to work. Default 9.x install gets you a <tt>00-htcondor-9.0.config</tt> file that has <tt>use security:recommended_v9_0</tt> which will most likely break everything.<br/><br/>We blindly keep the osg-upcoming repo enabled on our workers at least when we do updates and havenâ€™t had any _major_ issues in ages. Only enabling it for upgrades is probably more sane though and should work fine.<br/>
<span style="color: #de5f24"><span style="font-size: small">(14:42:54)</span> <b>justas.balcas:</b></span> <a href="https://opensciencegrid.org/docs/release/updating-to-osg-35/#updating-to-htcondor-ce-5">https://opensciencegrid.org/docs/release/updating-to-osg-35/#updating-to-htcondor-ce-5</a><br/><a href="https://opensciencegrid.org/docs/release/updating-to-osg-35/#updating-to-htcondor-900">https://opensciencegrid.org/docs/release/updating-to-osg-35/#updating-to-htcondor-900</a><br/>
<span style="color: #de5f24"><span style="font-size: small">(15:06:54)</span> <b>justas.balcas:</b></span> @andrew.melo Upgrade at least one CE per site to HTCondor-CE 4.x and HTCondor 9.X by *September 30th ?* <br/>*Or you meant HTCondor-CE 5.x?*<br/>
<span style="color: #a72f79"><span style="font-size: small">(15:07:26)</span> <b>andrew.melo:</b></span> sigh, yes<br/>
<span style="color: #a72f79"><span style="font-size: small">(15:07:31)</span> <b>andrew.melo:</b></span> busy morning...<br/>
<span style="color: #de5f24"><span style="font-size: small">(15:10:00)</span> <b>justas.balcas:</b></span> I change it in doc<br/>
<span style="color: #a72f79"><span style="font-size: small">(15:10:28)</span> <b>andrew.melo:</b></span> Thanks a lot<br/>
<span style="color: #a72f79"><span style="font-size: small">(15:44:27)</span> <b>andrew.melo:</b></span> Hmmmm. Do I need to set <tt>use security</tt> for /etc/condor if I don't have condor at my site? I thought it was independent, but I just updated a CE and there's some sort of something not being happy<br/>
<span style="color: #a72f79"><span style="font-size: small">(15:53:14)</span> <b>andrew.melo:</b></span> Also hm: I didn't get any rpmnew or rpmsave files:<br/><pre>[root@ce5-vanderbilt etc]# find /etc/condor-ce/ -name '*.rpmnew' -name '*.rpmsave'<br/>[root@ce5-vanderbilt etc]#</pre><br/>So I'm not really sure what I need to update <a href="https://htcondor.github.io/htcondor-ce/v5/releases/#updating-to-htcondor-ce-5">https://htcondor.github.io/htcondor-ce/v5/releases/#updating-to-htcondor-ce-5</a><br/>
<span style="color: #a72f79"><span style="font-size: small">(15:54:06)</span> <b>andrew.melo:</b></span> I suspect from the auth errors I need to update the condor_mapfile?'<br/>
<span style="color: #de5f24"><span style="font-size: small">(15:59:47)</span> <b>justas.balcas:</b></span> for any ce/condor update, first I dumped full config condor_config_val -dump or condor_ce_config_val -dump to file; removed all config files /etc/condor and /etc/condor-ce. Only few special config params I have is this (for CE):<br/><pre>JOB_ROUTER_SCHEDD2_POOL=<a href="http://condor-manager.ultralight.org:9618">condor-manager.ultralight.org:9618</a><br/><br/>JOB_ROUTER_SCHEDD2_SPOOL=/wntmp/condor/cit-gatekeeper/spool<br/><br/>NETWORK_HOSTNAME=<a href="http://cit-gatekeeper.ultralight.org">cit-gatekeeper.ultralight.org</a><br/><br/>NETWORK_INTERFACE=198.32.44.9<br/>MERGE_JOB_ROUTER_DEFAULT_ADS=True<br/>JOB_ROUTER_DEFAULTS = $(JOB_ROUTER_DEFAULTS) [set_RequestWalltime = 345600; set_RunAsOwner = True]<br/><br/>SUBMIT_ATTRS= $(SUBMIT_ATTRS), RunAsOwner<br/>RunAsOwner = True<br/>ENABLE_IPV6= False</pre><br/>
<span style="color: #a72f79"><span style="font-size: small">(16:00:29)</span> <b>andrew.melo:</b></span> shit, I should've done that before I upgraded<br/>
<span style="color: #de5f24"><span style="font-size: small">(16:01:02)</span> <b>justas.balcas:</b></span> you have multiple CEs, so the diff I guess is minimal (IPs, hostname) only<br/>
<span style="color: #de5f24"><span style="font-size: small">(16:01:21)</span> <b>justas.balcas:</b></span> unless you did for both same time :))<br/>
<span style="color: #a72f79"><span style="font-size: small">(16:01:25)</span> <b>andrew.melo:</b></span> good point. let me diff the old one against the new one and see what comes out<br/>
<span style="color: #a72f79"><span style="font-size: small">(16:01:31)</span> <b>andrew.melo:</b></span> I'm not that crazy! :slightly_smiling_face:<br/>
<span style="color: #a72f79"><span style="font-size: small">(21:54:36)</span> <b>andrew.melo:</b></span> It is a very big diff :disappointed:<br/>
</body>
</html>
