<!DOCTYPE html>
<html>
<head>
<title>Wed Feb 26, 2020 : #uscms (osg)</title>
</head>
<body>
<h3>Wed Feb 26, 2020 : #uscms (osg)</h3>
<span style="color: #a72f79"><span style="font-size: small">(12:03:53)</span> <b>andrew.melo:</b></span> I"m trying to sort it out, but not making any progress<br/><pre>3860314.0   cmspilot        2/26 11:55 HTCondor-CE held job due to missing user proxy.<br/>3860315.0   cmspilot        2/26 11:55 HTCondor-CE held job due to missing user proxy.<br/>3860317.0   cmspilot        2/26 11:55 HTCondor-CE held job due to missing user proxy.<br/>3860318.0   cmspilot        2/26 11:55 HTCondor-CE held job due to missing user proxy.<br/>3860675.0   uscmslocal      2/26 11:33 Failed to get expiration time of proxy: unable to read proxy file<br/>3860676.0   uscmslocal      2/26 11:33 Failed to get expiration time of proxy: unable to read proxy file<br/>3860870.0   cmslocal        2/26 11:37 Spooling input data files<br/>3860871.0   cmslocal        2/26 11:37 Spooling input data files<br/>3860872.0   cmslocal        2/26 11:37 Spooling input data files<br/>3860873.0   cmslocal        2/26 11:37 Spooling input data files<br/>3860874.0   cmslocal        2/26 11:37 Spooling input data files<br/>3860875.0   cmslocal        2/26 11:37 Spooling input data files<br/>3860876.0   cmslocal        2/26 11:37 Spooling input data files<br/>3860879.0   cmspilot        2/26 11:41 Failed to get expiration time of proxy: unable to read proxy file<br/>3860880.0   cmspilot        2/26 11:41 Failed to get expiration time of proxy: unable to read proxy file<br/>3860881.0   cmspilot        2/26 11:41 Failed to get expiration time of proxy: unable to read proxy file<br/>3860882.0   cmspilot        2/26 11:41 Failed to get expiration time of proxy: unable to read proxy file<br/>3860931.0   meloam          2/26 11:46 submission command failed (exit code = 1) (stdout:) (stderr:sbatch: error: spank: /usr/lib64/slurm/x11.so: Plugin file not found-sbatch: error: Batch job submission failed: Invalid account or account/partition combination specified-Error from sbatch: -)<br/>3860932.0   meloam          2/26 11:46 submission command failed (exit code = 1) (stdout:) (stderr:sbatch: error: spank: /usr/lib64/slurm/x11.so: Plugin file not found-sbatch: error: Batch job submission failed: Invalid account or account/partition combination specified-Error from sbatch: -)<br/>3860936.0   meloam          2/26 11:48 Failed to get expiration time of proxy: unable to read proxy file<br/>3860937.0   meloam          2/26 11:47 Failed to get expiration time of proxy: unable to read proxy file<br/>3861054.0   meloam          2/26 11:51 Failed to get expiration time of proxy: unable to read proxy file<br/>3861055.0   meloam          2/26 11:51 Failed to get expiration time of proxy: unable to read proxy file<br/>3861076.0   cmspilot        2/26 11:37 Spooling input data files<br/>3861077.0   cmspilot        2/26 11:37 Spooling input data files<br/>3861078.0   cmspilot        2/26 11:37 Spooling input data files<br/>3861079.0   cmspilot        2/26 11:37 Spooling input data files<br/>3861080.0   cmspilot        2/26 11:37 Spooling input data files<br/>3861081.0   cmspilot        2/26 11:37 Spooling input data files<br/>3861082.0   cmspilot        2/26 11:37 Spooling input data files<br/>3861083.0   cmspilot        2/26 11:55 HTCondor-CE held job due to missing user proxy.<br/>3861084.0   cmspilot        2/26 11:55 HTCondor-CE held job due to missing user proxy.<br/>3861085.0   cmspilot        2/26 11:55 HTCondor-CE held job due to missing user proxy.<br/>3861086.0   cmspilot        2/26 11:55 HTCondor-CE held job due to missing user proxy.</pre><br/>
<blockquote>
<span style="color: #43761b"><span style="font-size: small">(14:50:51)</span> <b>blin:</b></span> Can you open a ggus ticket? I'm afraid this'll get lost in slack with our NSF review this week<br/>
<span style="color: #a72f79"><span style="font-size: small">(14:53:25)</span> <b>andrew.melo:</b></span> against whom<br/>
<span style="color: #43761b"><span style="font-size: small">(15:03:34)</span> <b>blin:</b></span> Mention OSG software and it'll get assigned to us<br/>
<span style="color: #a72f79"><span style="font-size: small">(15:06:55)</span> <b>andrew.melo:</b></span> CMS ticket or regular one? (sorry, I"m usually the recipient of tickets, not the sender :))<br/>
<span style="color: #43761b"><span style="font-size: small">(15:08:34)</span> <b>blin:</b></span> Oh uhhh, I don't know the difference<br/>
<span style="color: #43761b"><span style="font-size: small">(15:09:01)</span> <b>blin:</b></span> Either way I imagine it'd find its way to us<br/>
</blockquote>
<span style="color: #e06b56"><span style="font-size: small">(13:34:26)</span> <b>jthiltges:</b></span> @justas.balcas Regarding checksum data into HDFS xattrs, one issue is the size. I believe xattr data would go into the fsimage, which would add a significant bump to namenode memory usage.<br/>
<span style="color: #de5f24"><span style="font-size: small">(13:35:14)</span> <b>justas.balcas:</b></span> do we know how much mem it would require per file?<br/>
<span style="color: #a72f79"><span style="font-size: small">(13:37:39)</span> <b>andrew.melo:</b></span> max xattr sized is configurable, but the default max is 16k per inode for all xattrs<br/>
<span style="color: #e06b56"><span style="font-size: small">(13:42:50)</span> <b>jthiltges:</b></span> The CVMFS checksums grow with the data file size. Been a while since I'd added things up. I'll check.<br/>
<span style="color: #a72f79"><span style="font-size: small">(13:44:05)</span> <b>andrew.melo:</b></span> Is that for pushing into xcache/stashcache?<br/>
<span style="color: #e06b56"><span style="font-size: small">(13:45:22)</span> <b>jthiltges:</b></span> Our largest checksum file is 179k, from an 80GB root file<br/>
<span style="color: #a72f79"><span style="font-size: small">(13:46:01)</span> <b>andrew.melo:</b></span> CMS, at least, only cares about the adler32 of the entire file<br/>
<span style="color: #de5f24"><span style="font-size: small">(13:48:12)</span> <b>justas.balcas:</b></span> If I understand this correctly, e.g. storing 15mln very small cksum files with rep 2 also keeping their state in hdfs namenode, where each block (it will be 1block and 1 file) and it will consume 300bytes (?) of memory.<br/>the checksum file is ~17bytes (only adler32), now how much memory it would take on hdfs if using xattr?<br/>
<span style="color: #e06b56"><span style="font-size: small">(13:49:41)</span> <b>jthiltges:</b></span> My hazy understanding is that the xattr data goes into memory, so up to 179k each in our case.<br/>
<span style="color: #e06b56"><span style="font-size: small">(13:51:34)</span> <b>jthiltges:</b></span> If the cvmfs checksums are left off, I think it would be workable.<br/>
<span style="color: #de5f24"><span style="font-size: small">(13:54:56)</span> <b>justas.balcas:</b></span> so we would have more memory than using files, no? lost a bit :slightly_smiling_face: p.s. memory is not concern in my case as node has plenty of it, but having so many small files and many of them just left-overs not cleaned<br/>
<span style="color: #e06b56"><span style="font-size: small">(13:59:47)</span> <b>jthiltges:</b></span> It looks like the non-CVMFS checksum data is ~90 bytes. I guess you're right that it would take less memory as an xattr vs a file.<br/>
</body>
</html>
