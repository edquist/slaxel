<!DOCTYPE html>
<html>
<head>
<title>Tue Feb 18, 2020 : #uscms (osg)</title>
</head>
<body>
<h3>Tue Feb 18, 2020 : #uscms (osg)</h3>
<span style="color: #e06b56"><span style="font-size: small">(14:19:25)</span> <b>jthiltges:</b></span> @andrew.melo Towards retrieving SAM results via API, here's a bit of sample code from a nagios check that I'd not gotten around to finishing.<br/>
<span style="color: #a72f79"><span style="font-size: small">(14:29:36)</span> <b>andrew.melo:</b></span> @eric.appelt ^^^ hows this look<br/>
<span style="color: #a72f79"><span style="font-size: small">(15:19:17)</span> <b>andrew.melo:</b></span> Thanks, @jthiltges!<br/>
<span style="color: #a72f79"><span style="font-size: small">(15:20:34)</span> <b>andrew.melo:</b></span> I'm seeing a shedload of these errors on our site redirector ... Is this bad?<br/><pre>200218 15:20:02 46435 cmslocal.370:35@[::129.59.197.8] XrootdProtocol: endsess 16928:584.1007<br/>200218 15:20:02 46435 cmslocal.370:35@[::129.59.197.8] XrootdResponse: sending err 3011: Too many attempts to gain dfs read access to the file</pre><br/>
<span style="color: #a72f79"><span style="font-size: small">(15:41:01)</span> <b>andrew.melo:</b></span> Or, a more complete log<br/><pre>200218 15:39:57 55415 cmsprod.377:<a href="mailto:86@red-c5613.unl.edu">86@red-c5613.unl.edu</a> XrootdProtocol: more auth requested; sz=2858<br/>200218 15:39:57 55415 secgsi_ServerDoCert: no signed DH parameters from client:cmsprod.377:86@red-c5613.unl.edu : will not delegate x509 proxy to it<br/>200218 15:39:57 55415 XrootdXeq: cmsprod.377:<a href="mailto:86@red-c5613.unl.edu">86@red-c5613.unl.edu</a> pub IPv4 login as cmsglidein<br/>200218 15:39:57 55415 cmsprod.377:<a href="mailto:86@red-c5613.unl.edu">86@red-c5613.unl.edu</a> XrootdProtocol: endsess 51372:334.329<br/>200218 15:39:57 55415 cmsprod.377:<a href="mailto:86@red-c5613.unl.edu">86@red-c5613.unl.edu</a> XrootdResponse: sending err 3011: Too many attempts to gain dfs read access to the file</pre><br/>
<span style="color: #e06b56"><span style="font-size: small">(15:51:20)</span> <b>jthiltges:</b></span> If I correctly remember the last time I went down this rabbit hole, "Too many attempts" was just an attempt to access a file that doesn't exist.<br/><br/>For unknown reasons, xrootd seemed to have issues with logging, where "Too many attempts" messages stop being logged. Then you restart the service, logging goes back to normal, and you worry about what's now broken.<br/>
<span style="color: #a72f79"><span style="font-size: small">(15:52:23)</span> <b>andrew.melo:</b></span> :neutral_face: So, uh, don't worry about it?<br/>
<span style="color: #385a86"><span style="font-size: small">(15:53:49)</span> <b>goughes:</b></span> <a href="https://listserv.slac.stanford.edu/cgi-bin/wa?A2=ind1701&amp;L=XROOTD-L&amp;P=4024">https://listserv.slac.stanford.edu/cgi-bin/wa?A2=ind1701&amp;L=XROOTD-L&amp;P=4024</a><br/>
<span style="color: #385a86"><span style="font-size: small">(15:53:56)</span> <b>goughes:</b></span> My experience with this error message<br/>
<span style="color: #a72f79"><span style="font-size: small">(15:54:46)</span> <b>andrew.melo:</b></span> That's the only thing I found, but I don't get a redirect, just a connection and theen an instant respnse saying "too many attempts"<br/>
<span style="color: #385a86"><span style="font-size: small">(15:54:55)</span> <b>goughes:</b></span> Hmm<br/>
<span style="color: #a72f79"><span style="font-size: small">(15:55:09)</span> <b>andrew.melo:</b></span> I guess the Q is "why are the clients being sent to our site redirector"<br/>
<span style="color: #e06b56"><span style="font-size: small">(15:59:25)</span> <b>jthiltges:</b></span> Higher log levels should hopefully give you filenames<br/><pre>200218 15:56:29 26861 Decode xrootd-local gave nobody.293:<a href="mailto:774@calnat-8.ultralight.org">774@calnat-8.ultralight.org</a> err -2 'Too many attempts to gain dfs read access to the file' /store/mc/RunIIFall18GS/MinBias_TuneCP5_13TeV-pythia8/GEN-SIM/102X_upgrade2018_realistic_v9-v1/90009/F00C4CD1-C792-E811-8FB<br/>200218 15:56:29 30889 nobody.293:<a href="mailto:774@calnat-8.ultralight.org">774@calnat-8.ultralight.org</a> XrootdResponse: sending err 3011: Too many attempts to gain dfs read access to the file</pre><br/>
<span style="color: #a72f79"><span style="font-size: small">(16:02:42)</span> <b>andrew.melo:</b></span> I've got <tt>cmsd.trace all</tt> ... ah, but I guess it's xrootd.trace I want to crank<br/>
<span style="color: #e06b56"><span style="font-size: small">(16:04:29)</span> <b>jthiltges:</b></span> On the local redirector, we're using the following at the moment:<br/><pre>xrootd.trace emsg login stall redirect<br/>ofs.trace none<br/>xrd.trace conn<br/>cms.trace all</pre><br/>
<span style="color: #a72f79"><span style="font-size: small">(16:12:38)</span> <b>andrew.melo:</b></span> well, of course, whatever I did by bouncing it made the errors go away for now...<br/>
<span style="color: #d1707d"><span style="font-size: small">(16:18:10)</span> <b>gattebury:</b></span> “All xrootd problems are solved by a restart.” — ordering tshirts now<br/>
<span style="color: #a2a5dc"><span style="font-size: small">(16:20:34)</span> <b>didavila:</b></span> hello <b>@here</b><br/>
<span style="color: #a2a5dc"><span style="font-size: small">(16:20:46)</span> <b>didavila:</b></span> have anybody seen this issue at FTS:<br/><pre>Non recoverable error: [13] [gfalt_copy_file][perform_copy][gfal_http_copy] DESTINATION MAKE_PARENT [gfal_http_copy_make_parent]   [gfal_http_exists][gfal_http_access][davix2gliberr] Result Authentication error, reached maximum number of attempts after 1 attempts</pre><br/>
<span style="color: #a2a5dc"><span style="font-size: small">(16:21:14)</span> <b>didavila:</b></span> I’m looking at transfers between UCSD and Caltech and some of them fails with this error<br/>
<span style="color: #a72f79"><span style="font-size: small">(16:27:49)</span> <b>andrew.melo:</b></span> Have a link to the log?<br/>
<span style="color: #a2a5dc"><span style="font-size: small">(16:30:45)</span> <b>didavila:</b></span> here: <a href="https://fts3devel03.cern.ch:8449/var/log/fts3/transfers/2020-02-18/xrootd-local.unl.edu__redirector.t2.ucsd.edu/2020-02-18-2139__xrootd-local.unl.edu__redirector.t2.ucsd.edu__8803963676__1bd16974-5297-11ea-ba3b-02163e00a077">https://fts3devel03.cern.ch:8449/var/log/fts3/transfers/2020-02-18/xrootd-local.unl.edu__redirector.t2.ucsd.edu/2020-02-18-2139__xrootd-local.unl.edu__redirector.t2.ucsd.edu__8803963676__1bd16974-5297-11ea-ba3b-02163e00a077</a><br/>
<span style="color: #e06b56"><span style="font-size: small">(16:39:30)</span> <b>jthiltges:</b></span> Auth is broken on <a href="http://gftp-2.t2.ucsd.edu">gftp-2.t2.ucsd.edu</a> ?<br/>
<span style="color: #e06b56"><span style="font-size: small">(16:40:37)</span> <b>jthiltges:</b></span> <pre>$ xrdfs <a href="http://redirector.t2.ucsd.edu:1094">redirector.t2.ucsd.edu:1094</a> ls /store/PhEDEx_LoadTest07/LoadTest07_Debug_US_Nebraska//US_UCSD<br/>[!] Some of the requests failed. The result may be incomplete.<br/>/store/PhEDEx_LoadTest07/LoadTest07_Debug_US_Nebraska//US_UCSD//2394<br/>...</pre><br/><pre>$ xrdfs <a href="http://gftp-2.t2.ucsd.edu:1094">gftp-2.t2.ucsd.edu:1094</a> ls /store/PhEDEx_LoadTest07/LoadTest07_Debug_US_Nebraska//US_UCSD<br/>[FATAL] Auth failed</pre><br/>
<span style="color: #619a4f"><span style="font-size: small">(16:42:45)</span> <b>clundstedt:</b></span> I get the same Auth failed from FNAL using a different cert<br/>
<span style="color: #e06b56"><span style="font-size: small">(16:43:16)</span> <b>jthiltges:</b></span> Other servers seem OK:<br/><pre>$ xrdfs <a href="http://gftp-7.t2.ucsd.edu:1094">gftp-7.t2.ucsd.edu:1094</a> ls /store/PhEDEx_LoadTest07/LoadTest07_Debug_US_Nebraska//US_UCSD<br/>/store/PhEDEx_LoadTest07/LoadTest07_Debug_US_Nebraska//US_UCSD//2394<br/>/store/PhEDEx_LoadTest07/LoadTest07_Debug_US_Nebraska//US_UCSD//2395<br/>...</pre><br/>
<span style="color: #a2a5dc"><span style="font-size: small">(16:49:42)</span> <b>didavila:</b></span> I’ll check that, thanks<br/>
<span style="color: #a72f79"><span style="font-size: small">(17:38:14)</span> <b>andrew.melo:</b></span> Ahh, another condor update, another completely different condor_ce_q format<br/>
<span style="color: #a72f79"><span style="font-size: small">(17:38:25)</span> <b>andrew.melo:</b></span> like clockwork<br/>
</body>
</html>
