<!DOCTYPE html>
<html>
<head>
<title>Thu Apr 16, 2020 : #uscms (osg)</title>
</head>
<body>
<h3>Thu Apr 16, 2020 : #uscms (osg)</h3>
<span style="color: #7d414c"><span style="font-size: small">(10:39:37)</span> <b>bockjoo:</b></span> Files disappear while they are being downloaded.<br/>
<span style="color: #7d414c"><span style="font-size: small">(10:40:16)</span> <b>bockjoo:</b></span> I am currently seeing this for transfers from MIT to Florida and from RAL to Florida.<br/>
<span style="color: #a72f79"><span style="font-size: small">(10:43:20)</span> <b>andrew.melo:</b></span> disappear?<br/>
<span style="color: #7d414c"><span style="font-size: small">(11:15:49)</span> <b>bockjoo:</b></span> When I start globus-url-copy, the file appears (ls command shows the file), but then some seconds later, the file disappears.<br/>
<span style="color: #7d414c"><span style="font-size: small">(11:16:37)</span> <b>bockjoo:</b></span> -bash-4.2$ date<br/>Thu Apr 16 11:33:37 EDT 2020<br/>-bash-4.2$ time globus-url-copy -vb gsi<a href="ftp://se01.cmsaf.mit.edu:2811/cms/store/mc/Phase2HLTTDRWinter20DIGI/SingleMuon_PT0to200_eta1p4To3p1/GEN-SIM-DIGI-RAW/PU200_110X_mcRun4_realistic_v3-v2/20000/7536871C-3CBD-EF48-ABAE-B52FD3093B04.root">ftp://se01.cmsaf.mit.edu:2811/cms/store/mc/Phase2HLTTDRWinter20DIGI/SingleMuon_PT0to200_eta1p4To3p1/GEN-SIM-DIGI-RAW/PU200_110X_mcRun4_realistic_v3-v2/20000/7536871C-3CBD-EF48-ABAE-B52FD3093B04.root</a> gsi<a href="ftp://cmsio.rc.ufl.edu//cmsuf/data/store/mc/Phase2HLTTDRWinter20DIGI/SingleMuon_PT0to200_eta1p4To3p1/GEN-SIM-DIGI-RAW/PU200_110X_mcRun4_realistic_v3-v2/20000/7536871C-3CBD-EF48-ABAE-B52FD3093B04.root">ftp://cmsio.rc.ufl.edu//cmsuf/data/store/mc/Phase2HLTTDRWinter20DIGI/SingleMuon_PT0to200_eta1p4To3p1/GEN-SIM-DIGI-RAW/PU200_110X_mcRun4_realistic_v3-v2/20000/7536871C-3CBD-EF48-ABAE-B52FD3093B04.root</a><br/>Source: gsi<a href="ftp://se01.cmsaf.mit.edu:2811/cms/store/mc/Phase2HLTTDRWinter20DIGI/SingleMuon_PT0to200_eta1p4To3p1/GEN-SIM-DIGI-RAW/PU200_110X_mcRun4_realistic_v3-v2/20000/">ftp://se01.cmsaf.mit.edu:2811/cms/store/mc/Phase2HLTTDRWinter20DIGI/SingleMuon_PT0to200_eta1p4To3p1/GEN-SIM-DIGI-RAW/PU200_110X_mcRun4_realistic_v3-v2/20000/</a><br/>Dest:   gsi<a href="ftp://cmsio.rc.ufl.edu//cmsuf/data/store/mc/Phase2HLTTDRWinter20DIGI/SingleMuon_PT0to200_eta1p4To3p1/GEN-SIM-DIGI-RAW/PU200_110X_mcRun4_realistic_v3-v2/20000/">ftp://cmsio.rc.ufl.edu//cmsuf/data/store/mc/Phase2HLTTDRWinter20DIGI/SingleMuon_PT0to200_eta1p4To3p1/GEN-SIM-DIGI-RAW/PU200_110X_mcRun4_realistic_v3-v2/20000/</a><br/>  7536871C-3CBD-EF48-ABAE-B52FD3093B04.root<br/><br/>   3972792320 bytes         1.48 MB/sec avg         1.45 MB/sec inst<br/>
<span style="color: #7d414c"><span style="font-size: small">(11:16:49)</span> <b>bockjoo:</b></span> [root@cms ~]# date<br/>Thu Apr 16 11:34:00 EDT 2020<br/>[root@cms ~]# ls -al /cmsuf/data/store/mc/Phase2HLTTDRWinter20DIGI/SingleMuon_PT0to200_eta1p4To3p1/GEN-SIM-DIGI-RAW/PU200_110X_mcRun4_realistic_v3-v2/20000/7536871C-3CBD-EF48-ABAE-B52FD3093B04.root<br/>-rw-r--r-- 1 cmsprod cmsdata 119013376 Apr 16 11:34 /cmsuf/data/store/mc/Phase2HLTTDRWinter20DIGI/SingleMuon_PT0to200_eta1p4To3p1/GEN-SIM-DIGI-RAW/PU200_110X_mcRun4_realistic_v3-v2/20000/7536871C-3CBD-EF48-ABAE-B52FD3093B04.root<br/>[root@cms ~]# sleep 180 ; date ; ls -al /cmsuf/data/store/mc/Phase2HLTTDRWinter20DIGI/SingleMuon_PT0to200_eta1p4To3p1/GEN-SIM-DIGI-RAW/PU200_110X_mcRun4_realistic_v3-v2/20000/7536871C-3CBD-EF48-ABAE-B52FD3093B04.root<br/>Thu Apr 16 11:37:48 EDT 2020<br/>ls: cannot access /cmsuf/data/store/mc/Phase2HLTTDRWinter20DIGI/SingleMuon_PT0to200_eta1p4To3p1/GEN-SIM-DIGI-RAW/PU200_110X_mcRun4_realistic_v3-v2/20000/7536871C-3CBD-EF48-ABAE-B52FD3093B04.root: No such file or directory<br/>
<span style="color: #7d414c"><span style="font-size: small">(11:21:18)</span> <b>bockjoo:</b></span> I am not sure if it's a lustre issue or something else.<br/>
<span style="color: #7d414c"><span style="font-size: small">(11:22:04)</span> <b>bockjoo:</b></span> PhEDEx error page shows something like this: <a href="https://cmsweb.cern.ch/phedex/prod/Activity::ErrorInfo?fromfilter=T2_US_MIT&amp;tofilter=Florida&amp;to_pfn=.*&amp;from_pfn=.*&amp;log_detail=.*&amp;log_validate=.*">https://cmsweb.cern.ch/phedex/prod/Activity::ErrorInfo?fromfilter=T2_US_MIT&amp;tofilter=Florida&amp;to_pfn=.*&amp;from_pfn=.*&amp;log_detail=.*&amp;log_validate=.*</a><br/>
<span style="color: #a72f79"><span style="font-size: small">(11:22:26)</span> <b>andrew.melo:</b></span> that sounds bad if you put a file into a filesystem and it disappears 180 secs later<br/>
<span style="color: #a72f79"><span style="font-size: small">(11:24:16)</span> <b>andrew.melo:</b></span> Do you see the same thing if you copy the file into a temp location? Could your phedex pre-validation scripts be removing them?<br/>
<span style="color: #bc3663"><span style="font-size: small">(11:32:44)</span> <b>dmason:</b></span> youâ€™re seeing the file there while the copy is in progress, but then not when its done?  Deleting the remnants from a failure?<br/>
<span style="color: #a72f79"><span style="font-size: small">(11:39:23)</span> <b>andrew.melo:</b></span> the log he pasted here makes itlook like the xfer completed proberly<br/>
<span style="color: #7d414c"><span style="font-size: small">(11:42:59)</span> <b>bockjoo:</b></span> That's my next test, but I am pretty sure it will work with the two step transfer.<br/>
<span style="color: #7d414c"><span style="font-size: small">(11:45:54)</span> <b>bockjoo:</b></span> The files that are in question are ~30GB.<br/>
<span style="color: #7d414c"><span style="font-size: small">(11:46:53)</span> <b>bockjoo:</b></span> I will check if the two step transfer (instead of 3rd party transfer) can contain the issue.<br/>
<span style="color: #a72f79"><span style="font-size: small">(12:13:32)</span> <b>andrew.melo:</b></span> Do you have a lustre gridftp plugin or do you just write to a POSIX mount?<br/>
<span style="color: #7d414c"><span style="font-size: small">(12:23:35)</span> <b>bockjoo:</b></span> POSIX<br/>
<span style="color: #7d414c"><span style="font-size: small">(12:29:41)</span> <b>bockjoo:</b></span> Posted it to the HN.<br/>
</body>
</html>
