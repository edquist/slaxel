<!DOCTYPE html>
<html>
<head>
<title>Tue Jun 2, 2020 : #uscms (osg)</title>
</head>
<body>
<h3>Tue Jun 2, 2020 : #uscms (osg)</h3>
<span style="color: #a72f79"><span style="font-size: small">(15:16:25)</span> <b>andrew.melo:</b></span> I'm looping back to upgrading the CE from 3.4 to 3.5, and now I'm stuck at this in my lcmaps log:<br/><pre>lcmaps[2894129]   LOG_DEBUG: 2020-06-02.19:58:20Z: lcmaps_gridmapfile: Using mapfile /etc/grid-security/grid-mapfile<br/>lcmaps[2894129]  LOG_NOTICE: 2020-06-02.19:58:20Z: lcmaps_localaccount-plugin_run(): No match for a localaccount for user "/DC=org/DC=incommon/C=US/ST=Nebraska/L=Lincoln/O=University of Nebraska-Lincoln/OU=Holland Computing Center/CN=<a href="http://collector.opensciencegrid.org">collector.opensciencegrid.org</a>", in /etc/grid-security/grid-mapfile<br/>lcmaps[2894129]    LOG_INFO: 2020-06-02.19:58:20Z: lcmaps_localaccount-plugin_run(): localaccount plugin failed<br/>lcmaps[2894129]   LOG_DEBUG: 2020-06-02.19:58:20Z: Execution of plugin "lcmaps_localaccount.mod". Result: Failed.<br/>lcmaps[2894129]   LOG_DEBUG: 2020-06-02.19:58:20Z: evaluationmanager: found plugin: lcmaps_voms_localaccount.mod<br/>lcmaps[2894129]   LOG_DEBUG: 2020-06-02.19:58:20Z: lcmaps.mod-lcmaps_runPlugin(): found plugin /usr/lib64/lcmaps/lcmaps_voms_localaccount.mod<br/>lcmaps[2894129]   LOG_DEBUG: 2020-06-02.19:58:20Z: lcmaps.mod-lcmaps_runPlugin(): running plugin /usr/lib64/lcmaps/lcmaps_voms_localaccount.mod<br/>lcmaps[2894129]   LOG_DEBUG: 2020-06-02.19:58:20Z: lcmaps_voms_localaccount-plugin_run(): lcmaps_is_set_to_verify_voms_attributes() returned 1<br/>lcmaps[2894129]   LOG_DEBUG: 2020-06-02.19:58:20Z: lcmaps_voms_localaccount-plugin_run(): no FQANs registered by other plugins, trying run/introspect args<br/>lcmaps[2894129]    LOG_INFO: 2020-06-02.19:58:20Z: lcmaps_voms_localaccount-plugin_run(): no (valid) VOMS groups found --&gt; no mapping<br/>lcmaps[2894129]    LOG_INFO: 2020-06-02.19:58:20Z: lcmaps_voms_localaccount-plugin_run(): voms_localaccount plugin failed<br/>lcmaps[2894129]   LOG_DEBUG: 2020-06-02.19:58:20Z: Execution of plugin "lcmaps_voms_localaccount.mod". Result: Failed.<br/>lcmaps[2894129]   LOG_DEBUG: 2020-06-02.19:58:20Z: evaluationmanager: found plugin: lcmaps_voms_localaccount2.mod<br/>lcmaps[2894129]   LOG_DEBUG: 2020-06-02.19:58:20Z: lcmaps.mod-lcmaps_runPlugin(): found plugin /usr/lib64/lcmaps/lcmaps_voms_localaccount2.mod<br/>lcmaps[2894129]   LOG_DEBUG: 2020-06-02.19:58:20Z: lcmaps.mod-lcmaps_runPlugin(): running plugin /usr/lib64/lcmaps/lcmaps_voms_localaccount2.mod<br/>lcmaps[2894129]   LOG_DEBUG: 2020-06-02.19:58:20Z: lcmaps_voms_localaccount-plugin_run(): lcmaps_is_set_to_verify_voms_attributes() returned 1<br/>lcmaps[2894129]   LOG_DEBUG: 2020-06-02.19:58:20Z: lcmaps_voms_localaccount-plugin_run(): no FQANs registered by other plugins, trying run/introspect args<br/>lcmaps[2894129]    LOG_INFO: 2020-06-02.19:58:20Z: lcmaps_voms_localaccount-plugin_run(): no (valid) VOMS groups found --&gt; no mapping<br/>lcmaps[2894129]    LOG_INFO: 2020-06-02.19:58:20Z: lcmaps_voms_localaccount-plugin_run(): voms_localaccount plugin failed<br/>lcmaps[2894129]   LOG_DEBUG: 2020-06-02.19:58:20Z: Execution of plugin "lcmaps_voms_localaccount2.mod". Result: Failed.</pre><br/>
<span style="color: #a72f79"><span style="font-size: small">(15:18:32)</span> <b>andrew.melo:</b></span> Can someone dump their voms-mapfile? I presume I'm missing something that would map?<br/>
<span style="color: #e06b56"><span style="font-size: small">(15:34:10)</span> <b>jthiltges:</b></span> Hmm. There's no VOMS things happening on the collector side, to my knowledge. Do you have the hostname handy?<br/>
<span style="color: #a72f79"><span style="font-size: small">(15:34:36)</span> <b>andrew.melo:</b></span> <a href="http://ce5.accre.vanderbilt.edu">ce5.accre.vanderbilt.edu</a><br/>
<span style="color: #e06b56"><span style="font-size: small">(15:37:57)</span> <b>jthiltges:</b></span> At least from the collector side, things look fine:<br/><pre>06/02/20 15:36:50 PERMISSION GRANTED to <a href="mailto:ce5.accre.vanderbilt.edu@unmapped.htcondor.org">ce5.accre.vanderbilt.edu@unmapped.htcondor.org</a> from host 129.59.197.77 for command 1 (UPDATE_SCHEDD_AD), access level ADVERTISE_SCHEDD: reason: cached result for ADVERTISE_SCHEDD; see first case for the full reason</pre><br/>
<span style="color: #a72f79"><span style="font-size: small">(15:40:46)</span> <b>andrew.melo:</b></span> I changed some config settings and did a reconfig initially, but I tried to do an actual restart of the daemon<br/>
<span style="color: #e06b56"><span style="font-size: small">(15:58:04)</span> <b>jthiltges:</b></span> I still need to try this on a 3.5 server, but the 3.4 one immediately at hand doesn't show any lcmaps log entries when reporting to a collector. Something is breaking ahead of lcmaps, and it's falling through?<br/>(I gotta ask the obvious one of CRL expiration, that always seems to bite me.)<br/>
<span style="color: #a72f79"><span style="font-size: small">(15:58:46)</span> <b>andrew.melo:</b></span> Sorry, should've been more clear -- the restart seems to have unstuck it<br/>
<span style="color: #a72f79"><span style="font-size: small">(15:58:53)</span> <b>andrew.melo:</b></span> I've got idle pilot jobs in the queue<br/>
<span style="color: #e06b56"><span style="font-size: small">(15:58:55)</span> <b>jthiltges:</b></span> Yay!<br/>
<span style="color: #a72f79"><span style="font-size: small">(15:59:26)</span> <b>andrew.melo:</b></span> !(*@?#)!#(*!@)#!3 I don't remember what I did, and now I don't have a way to stick it in config management<br/>
<span style="color: #a72f79"><span style="font-size: small">(15:59:56)</span> <b>andrew.melo:</b></span> I think I'm just going to have to start the most boring Twitch stream possible just so I can rewind what I did<br/>
</body>
</html>
