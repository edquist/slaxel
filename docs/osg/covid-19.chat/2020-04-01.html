<!DOCTYPE html>
<html>
<head>
<title>Wed Apr 1, 2020 : #covid-19 (osg)</title>
</head>
<body>
<h3>Wed Apr 1, 2020 : #covid-19 (osg)</h3>
<span style="color: #43761b"><span style="font-size: small">(11:26:48)</span> <b>blin:</b></span> hey @lmichael we need to register WeNMR as a project. What should we name it since they're not limited to COVID-19 research?<br/>
<span style="color: #5a4592"><span style="font-size: small">(11:46:54)</span> <b>lmichael:</b></span> They need two different projects. One as their default, and one for labeling COVID-19 research. @rynge can make sure you have the right flags in place, but the COVID-19 projet should follow “COVID19_SomethingMeaningful”. If it’s not a clear single-research group situation, and/or the organization has a uniquely-identifying brand, already (WeNMR), then that could be the ‘SomethingMeaningful’. With single-PI research groups that have no significant and persistent identifying name (or situations approximating that), we go with something like “Mizzou_Johnson” or “COVID19_Mizzou_Johnson”. Make sense?<br/>
<span style="color: #43761b"><span style="font-size: small">(11:51:39)</span> <b>blin:</b></span> @matyas can you take point on registering the WeNMR projects? the PI can be Alexandre Bonvin from <a href="https://support.opensciencegrid.org/a/tickets/64569">https://support.opensciencegrid.org/a/tickets/64569</a><br/>
<span style="color: #c386df"><span style="font-size: small">(11:53:31)</span> <b>matyas:</b></span> ok<br/>
<span style="color: #5a4592"><span style="font-size: small">(11:54:25)</span> <b>lmichael:</b></span> Is Alexandre the actual PI-type person, or the one executing the work (or both)?<br/>
<span style="color: #5a4592"><span style="font-size: small">(11:54:49)</span> <b>lmichael:</b></span> for stuff like WeNMR, we want the director, etc.<br/>
<span style="color: #5a4592"><span style="font-size: small">(11:55:10)</span> <b>lmichael:</b></span> like Francis Halzen is the topology-listed PI for IceCube<br/>
<span style="color: #5a4592"><span style="font-size: small">(11:55:26)</span> <b>lmichael:</b></span> the project contact can be someone else<br/>
<span style="color: #43761b"><span style="font-size: small">(11:56:24)</span> <b>blin:</b></span> his titles from his signature are<br/>&gt; Professor of Computational Structural Biology <br/>&gt;  Scientific Director Bijvoet Centre for Biomolecular Research<br/>
<span style="color: #c386df"><span style="font-size: small">(12:00:05)</span> <b>matyas:</b></span> <pre>Name: COVID19_WeNMR<br/>Description: COVID-19-related research from WeNMR<br/>Department: N/A<br/>FieldOfScience: Biological Sciences<br/>Organization: WeNMR<br/>PIName: Alexandre Bonvin<br/><br/>ID: 660<br/><br/>Sponsor:<br/> VirtualOrganization:<br/>   Name: ENMR</pre><br/>?<br/>
<span style="color: #43761b"><span style="font-size: small">(12:01:41)</span> <b>blin:</b></span> i think we can fill in some of that info from here: <a href="https://operations-portal.egi.eu/vo/view/voname/enmr.eu">https://operations-portal.egi.eu/vo/view/voname/enmr.eu</a><br/>
<span style="color: #c386df"><span style="font-size: small">(12:05:04)</span> <b>matyas:</b></span> The only thing that needs filling in is 'Department', and I'm not sure that field makes sense for a multi-institution collaboration in the first place<br/>
<span style="color: #c386df"><span style="font-size: small">(12:05:17)</span> <b>matyas:</b></span> otherwise that's a complete project entry<br/>
<span style="color: #c386df"><span style="font-size: small">(12:05:30)</span> <b>matyas:</b></span> (for topology anyway)<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:10:48)</span> <b>bbockelm:</b></span> For sponsor -- what do we do with OSG Connect users that don't have an obvious VO/<br/>
<span style="color: #c386df"><span style="font-size: small">(12:12:09)</span> <b>matyas:</b></span> we use a CampusGrid instead of a VirtualOrganization<br/>
<span style="color: #c386df"><span style="font-size: small">(12:12:41)</span> <b>matyas:</b></span> and we use "OSG Connect" for the CampusGrid<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:16:26)</span> <b>bbockelm:</b></span> ok, sounds good.<br/>
<blockquote>
<span style="color: #c386df"><span style="font-size: small">(12:29:52)</span> <b>matyas:</b></span> so should I change the sponsor to OSG Connect or leave it as ENMR?<br/>
</blockquote>
<span style="color: #c386df"><span style="font-size: small">(12:17:22)</span> <b>matyas:</b></span> so do that?<br/>
<span style="color: #43761b"><span style="font-size: small">(12:21:28)</span> <b>blin:</b></span> @lmichael should we use <tt>COVID19_WeNMR.yaml</tt> or <tt>COVID19_&lt;institution&gt;_WeNMR.yaml</tt>?<br/>
<span style="color: #5a4592"><span style="font-size: small">(12:22:25)</span> <b>lmichael:</b></span> By my description above, it’s the first/former.<br/>
<span style="color: #5a4592"><span style="font-size: small">(12:25:40)</span> <b>lmichael:</b></span> Institution is relevant for single-PI, single-institution research groups, which is why the institution is necessary to help distinguish groups. WeNMR is more service/collaboration.<br/>
<span style="color: #43761b"><span style="font-size: small">(12:50:14)</span> <b>blin:</b></span> @rynge could you take a look at <a href="https://github.com/opensciencegrid/topology/pull/1083">https://github.com/opensciencegrid/topology/pull/1083</a>?<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:51:31)</span> <b>rynge:</b></span> Ok, so just so I understand - they will submit two different kinds of pilots, one non-covid19 and one covid19, and project names set accordingly?<br/>
<span style="color: #43761b"><span style="font-size: small">(12:53:06)</span> <b>blin:</b></span> that's what we're looking to do<br/>
<span style="color: #43761b"><span style="font-size: small">(12:53:17)</span> <b>blin:</b></span> an alternative is that they /only/ submit COVID pilots<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:56:25)</span> <b>rynge:</b></span> Ok, the project name is fine<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:57:03)</span> <b>rynge:</b></span> I suspect we have to do more work to get them the env they expect, such as setting requirements and maybe a base singularity image<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:57:08)</span> <b>rynge:</b></span> But we will have to see<br/>
<span style="color: #5a4592"><span style="font-size: small">(13:03:13)</span> <b>lmichael:</b></span> @blin you could ask him who he thinks the PI of WeNMR should be. We might as well get it right first time, especially since the ‘PI’ field will be very visible in GRACC and may have political implications for an org like WeNMR.<br/>
<span style="color: #43761b"><span style="font-size: small">(13:04:25)</span> <b>blin:</b></span> can we just get this registered this way right now? we won't be getting jobs straightaway anyway<br/>
<span style="color: #43761b"><span style="font-size: small">(13:04:28)</span> <b>blin:</b></span> i will follow up with the PI though<br/>
<span style="color: #a2a5dc"><span style="font-size: small">(13:24:45)</span> <b>james.clark:</b></span> Hi <b>@here</b> , just stumbled across this channel.  I started a wee side project last week to get Folding@home running on our local HTCondor pool (with a view to scaling up on the OSG at some point).   I'll be happy to share more when it's a little more mature but does anyone know of any other efforts to do this?<br/>
<span style="color: #43761b"><span style="font-size: small">(13:25:34)</span> <b>blin:</b></span> i believe @lincoln and @jlstephen are doing this at MWT2?<br/>
<span style="color: #9e3997"><span style="font-size: small">(13:26:09)</span> <b>bbockelm:</b></span> We did this a long, long time ago with Einstein@Home.  We submitted the BOINC client as a condor job.<br/>
<span style="color: #e96699"><span style="font-size: small">(13:26:58)</span> <b>lincoln:</b></span> ATLAS is submitting folding@home containers to our site thru the PanDA job system<br/>
<span style="color: #e96699"><span style="font-size: small">(13:28:05)</span> <b>lincoln:</b></span> <a href="https://github.com/lukasheinrich/folding-at-home-docker">https://github.com/lukasheinrich/folding-at-home-docker</a> AFAIK this is basically what's getting submitted to the site<br/>
<span style="color: #a2a5dc"><span style="font-size: small">(13:28:06)</span> <b>james.clark:</b></span> cool, is that your own container?  i've cobbled something together but it's probably not particularly optimal<br/>
<span style="color: #a2a5dc"><span style="font-size: small">(13:28:33)</span> <b>james.clark:</b></span> ah yep, that's pretty similar<br/>
<span style="color: #a2a5dc"><span style="font-size: small">(13:28:35)</span> <b>james.clark:</b></span> thanks!<br/>
<span style="color: #e96699"><span style="font-size: small">(13:28:41)</span> <b>lincoln:</b></span> looks pretty straightforward- install the client and dependencies, set the appropriate team and flags<br/>
<span style="color: #e96699"><span style="font-size: small">(13:29:18)</span> <b>lincoln:</b></span> seems worth sharing though if you have an easy-to-use invocation folks can throw at their pools :slightly_smiling_face:<br/>
<span style="color: #a2a5dc"><span style="font-size: small">(13:30:16)</span> <b>james.clark:</b></span> yep, the thing i'd like to explore a bit more is getting it to run as batch jobs (rather than continuously), possibly with some way to pre-stage the work unit data so it doesn't sit on a slot waiting for work (seems there's a lot more demand all of a sudden :wink: )<br/>
<span style="color: #a2a5dc"><span style="font-size: small">(13:30:38)</span> <b>james.clark:</b></span> just a case of sitting down and experimenting further with the options, i think<br/>
<span style="color: #ea2977"><span style="font-size: small">(13:44:03)</span> <b>jlstephen:</b></span> @blin are there appropriate job router settings for RequestCpus, RequestMemory, and RequestVirtualMemory in the job router entry?<br/>
<span style="color: #ea2977"><span style="font-size: small">(13:44:46)</span> <b>jlstephen:</b></span> the <a href="https://opensciencegrid.org/docs/compute-element/covid-19/">https://opensciencegrid.org/docs/compute-element/covid-19/</a> doc only seems to have name, TargetUniverse, set_AcctGroup, and Requirements<br/>
<span style="color: #43761b"><span style="font-size: small">(13:44:57)</span> <b>blin:</b></span> that's generally up to you from a site perspective<br/>
<span style="color: #ea2977"><span style="font-size: small">(13:45:32)</span> <b>jlstephen:</b></span> ok so there isn't anything specific upstream?<br/>
<span style="color: #43761b"><span style="font-size: small">(13:45:34)</span> <b>blin:</b></span> if you don't specify anything, the router defaults will set RequestCpus=1 and RequestMemory=2GB iirc<br/>
<span style="color: #43761b"><span style="font-size: small">(13:45:57)</span> <b>blin:</b></span> and barring that, the pilot itself can request specific resource requests<br/>
<span style="color: #43761b"><span style="font-size: small">(13:46:12)</span> <b>blin:</b></span> so yeah, don't worry about it<br/>
<span style="color: #ea2977"><span style="font-size: small">(13:46:35)</span> <b>jlstephen:</b></span> ok thanks<br/>
<span style="color: #5a4592"><span style="font-size: small">(14:00:53)</span> <b>lmichael:</b></span> @james.clark We are helping to accelerate Folding@home in other ways, and OSG Executive Director is working directly with Vincent Voelz and Greg Bowman, who lead Folding@home.<br/>
<span style="color: #5a4592"><span style="font-size: small">(14:01:48)</span> <b>lmichael:</b></span> Let me know if you’d like to be looped in. So far, my understanding is that Folding@home is getting enough computing, but is limited by their ability to store and manage data, where we’ve looped in some other OSG partners (PRP, etc) who can help.<br/>
<span style="color: #5a4592"><span style="font-size: small">(14:02:47)</span> <b>lmichael:</b></span> Once they’ve got the storage bottleneck removed, maybe they’ll have a new compute bottleneck? (here’s hoping)<br/>
<span style="color: #43761b"><span style="font-size: small">(14:06:42)</span> <b>blin:</b></span> @jdost321 @marco.mascheroni @bbockelm do site requests for covid jobs go to factory ops?<br/>
<span style="color: #5a4592"><span style="font-size: small">(14:10:49)</span> <b>lmichael:</b></span> <b>@channel</b>, Frank/Miron/@rynge/@gthain/@cat/@lmichael want to know about all COVID-19 relevant research, to make sure it’s legit, to ensure adequate reporting (even qualitative, non-graphed), and to inform relative priority decisions (given the interests of sites in supporting COVID-19 research, among other factors). @rynge and @bbockelm are authority on technical implementations, and I can speak to proper accounting of jobs (in terms of ProjectNames, so can @rynge). If you notify one of myself or Mats, we’ll make sure to email the others on a <a href="mailto:covid-19@opensciencegrid.org">covid-19@opensciencegrid.org</a> list.<br/>
<span style="color: #bc3663"><span style="font-size: small">(14:26:39)</span> <b>dmason:</b></span> There is some parallel effort with Folding@home with the scienceresponds group trying to understand these things (they have a channel on their slack dedicated to this).  WLCG has also discussed.  Seems a lot of us are duplicating effort?  Not saying shouldn’t be pursued, but how do we all get on the same thread?  I know today in their daily call some of them will also be talking to the Folding@home PI’s about where help is needed (though I think more on the project mgmt end of things)<br/>
<blockquote>
<span style="color: #43761b"><span style="font-size: small">(14:44:19)</span> <b>blin:</b></span> @lmichael is this something on FKW/Miron's radar?<br/>
<span style="color: #5a4592"><span style="font-size: small">(14:46:10)</span> <b>lmichael:</b></span> I’ve been pasting the slack thread into email to him. :slightly_smiling_face:<br/>
<span style="color: #43761b"><span style="font-size: small">(14:48:05)</span> <b>blin:</b></span> hahaha, perfect<br/>
<span style="color: #bc3663"><span style="font-size: small">(14:54:38)</span> <b>dmason:</b></span> Basically for things like Folding @ Home in particular I’m seeing the same kinds of conversations progress in WLCG, in the scienceresponds slack, and here.  just wanting to make sure everybody is not chasing off and beating their heads on the same walls without talking to each other.<br/>
</blockquote>
<span style="color: #5a4592"><span style="font-size: small">(14:40:39)</span> <b>lmichael:</b></span> @dweitzel Can we get the “Who is performing…” graphs to list by project name? <a href="https://gracc.opensciencegrid.org/dashboard/db/covid-19-research?orgId=1">https://gracc.opensciencegrid.org/dashboard/db/covid-19-research?orgId=1</a><br/>(Wahoo!, btw)<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:42:44)</span> <b>dweitzel:</b></span> Updated to project name<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:43:30)</span> <b>dweitzel:</b></span> BTW, you can click on the project name in the table it will take you to the github description of the project.<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:43:49)</span> <b>dweitzel:</b></span> (trying to make that more obvious, blue, underlined...)<br/>
<span style="color: #5a4592"><span style="font-size: small">(14:45:46)</span> <b>lmichael:</b></span> That’s great. Should we have the projects above the providers? (or did<br/>
<span style="color: #5a4592"><span style="font-size: small">(14:45:52)</span> <b>lmichael:</b></span> Frank already get specific?)<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:46:36)</span> <b>dweitzel:</b></span> Nope, nothing from Frank.  I can move it for sure.<br/>
<span style="color: #674b1b"><span style="font-size: small">(15:05:17)</span> <b>rynge:</b></span> Looks like one of the COVID19 workloads wants to run on 8 cores. If sites are joining, we might want to point that out<br/>
<span style="color: #5a4592"><span style="font-size: small">(15:35:17)</span> <b>lmichael:</b></span> which workload?<br/>
<span style="color: #5a4592"><span style="font-size: small">(15:35:28)</span> <b>lmichael:</b></span> Can it run on fewer or be broken up? i.e. what’s the reasoning for 8 cores?<br/>
<span style="color: #5a4592"><span style="font-size: small">(15:35:51)</span> <b>lmichael:</b></span> @dweitzel what are the vert axis units?<br/>
<blockquote>
<span style="color: #235e5b"><span style="font-size: small">(18:19:27)</span> <b>dweitzel:</b></span> Vertical axis is Core Hours.  I just labeled them.<br/>
<span style="color: #5a4592"><span style="font-size: small">(2020-04-02 07:49:34)</span> <b>lmichael:</b></span> not showing up for me?<br/>
<span style="color: #235e5b"><span style="font-size: small">(2020-04-02 08:18:43)</span> <b>dweitzel:</b></span> Sorry, forgot to hit the save button<br/>
</blockquote>
<span style="color: #674b1b"><span style="font-size: small">(15:36:12)</span> <b>rynge:</b></span> The Illinois one. They don't know yet, but they think each job will take 6-8 hours on 8 cores<br/>
<span style="color: #bc3663"><span style="font-size: small">(15:37:28)</span> <b>dmason:</b></span> Ah — I think thats the one I was wondering about<br/>
<span style="color: #bc3663"><span style="font-size: small">(15:37:58)</span> <b>dmason:</b></span> Because FNAL is in Illinois<br/>
<span style="color: #5a4592"><span style="font-size: small">(15:38:58)</span> <b>lmichael:</b></span> it’s trivially/naturally parallel, though.<br/>
<span style="color: #5a4592"><span style="font-size: small">(15:39:33)</span> <b>lmichael:</b></span> They should run fewer sims per job, more jobs that each use 1 core. They’ll get, like WAY more resources that way, regardless of what sites do. This is a time for important facilitation.<br/>
<span style="color: #5a4592"><span style="font-size: small">(15:41:07)</span> <b>lmichael:</b></span> like “trust me, it’s worth the code change, by at least an order of magnitude”<br/>
<span style="color: #674b1b"><span style="font-size: small">(15:50:27)</span> <b>rynge:</b></span> I'm working with them, and it might work out. But because of the rush order, I'm trying to manage the expectations on both the user and site sides.<br/>
<span style="color: #bc3663"><span style="font-size: small">(15:50:51)</span> <b>dmason:</b></span> Is this CPU based then?<br/>
<span style="color: #674b1b"><span style="font-size: small">(15:51:50)</span> <b>rynge:</b></span> Yes, we have not had any gpu requests uet<br/>
<span style="color: #bc3663"><span style="font-size: small">(15:55:26)</span> <b>dmason:</b></span> what kind of scale and ETA might we be looking at?<br/>
<span style="color: #674b1b"><span style="font-size: small">(15:57:17)</span> <b>rynge:</b></span> The group is doing initial testing now, so hopefully really soon. Back of the envelope calculations are putting them between 20k-200k core hours / day<br/>
<span style="color: #bc3663"><span style="font-size: small">(16:12:25)</span> <b>dmason:</b></span> OK — thanks!<br/>
<span style="color: #674b1b"><span style="font-size: small">(16:15:20)</span> <b>rynge:</b></span> @lmichael New covid19 user request. I assigned it to you as I think we said you want to see them all first<br/>
<span style="color: #5a4592"><span style="font-size: small">(16:16:07)</span> <b>lmichael:</b></span> thx<br/>
<span style="color: #5a4592"><span style="font-size: small">(16:17:22)</span> <b>lmichael:</b></span> Owned back to you to run with it. See if you can get the PI to join the convo (check that the user’s not acting as a lone wolf), though we need at least an email sign-off from the PI to create the project, anyway.<br/>
<span style="color: #674b1b"><span style="font-size: small">(16:18:16)</span> <b>rynge:</b></span> Ok<br/>
</body>
</html>
