<!DOCTYPE html>
<html>
<head>
<title>Thu Oct 22, 2020 : #gracc (osg)</title>
</head>
<body>
<h3>Thu Oct 22, 2020 : #gracc (osg)</h3>
<span style="color: #902d59"><span style="font-size: small">(09:53:57)</span> <b>tanya:</b></span> Hi @dweitzel - could you please remind me how HS06 conversion happens now?<br/>
<span style="color: #235e5b"><span style="font-size: small">(09:54:12)</span> <b>dweitzel:</b></span> Sure.<br/>
<span style="color: #235e5b"><span style="font-size: small">(09:56:23)</span> <b>dweitzel:</b></span> Every ~8 hours the gracc-apel uploader runs.  Queries all of the CoreHours from a list of VO's (cms, atlas, lhcb, belle...).  Multiplies the HS06 number by the CoreHours, then uploads to APEL.<br/>
<span style="color: #902d59"><span style="font-size: small">(09:56:42)</span> <b>tanya:</b></span> :slightly_smiling_face:<br/>
<span style="color: #902d59"><span style="font-size: small">(09:56:55)</span> <b>tanya:</b></span> where do you store HS06 - node/site mapping<br/>
<span style="color: #235e5b"><span style="font-size: small">(09:58:56)</span> <b>dweitzel:</b></span> HS06 is in the job records.  Added during the summarization process from the numbers in OSG Topology.<br/>
<span style="color: #902d59"><span style="font-size: small">(10:00:06)</span> <b>tanya:</b></span> could you please remind url to GRACC ES? i want to see HS06 numbers<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:00:32)</span> <b>dweitzel:</b></span> Here's an example of nebraska: <a href="https://gracc.opensciencegrid.org/kibana/app/kibana#/discover/doc/585106d0-20eb-11ea-a256-c94cd65423ab/gracc.osg.summary3-2020?id=fbfa9567c48ae82d01dda0742c35655f">https://gracc.opensciencegrid.org/kibana/app/kibana#/discover/doc/585106d0-20eb-11ea-a256-c94cd65423ab/gracc.osg.summary3-2020?id=fbfa9567c48ae82d01dda0742c35655f</a><br/>
<span style="color: #235e5b"><span style="font-size: small">(10:00:45)</span> <b>dweitzel:</b></span> What do you want to see, I could throw together a quick kibana visualization.<br/>
<span style="color: #902d59"><span style="font-size: small">(10:02:06)</span> <b>tanya:</b></span> i am trying to figure out how we could add to HPC resources but the only thing i remembered that we have Jon Weigand’s script with hardcoded hs06<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:02:48)</span> <b>dweitzel:</b></span> Here's Nebraska's: <a href="https://github.com/opensciencegrid/topology/blob/master/topology/University%20of%20Nebraska/Nebraska-CMS/Nebraska.yaml#L48">https://github.com/opensciencegrid/topology/blob/master/topology/University%20of%20Nebraska/Nebraska-CMS/Nebraska.yaml#L48</a><br/>
<span style="color: #902d59"><span style="font-size: small">(10:03:17)</span> <b>tanya:</b></span> oh - OIM_WLCGAPELNormalFactor<br/>10.62<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:03:20)</span> <b>dweitzel:</b></span> Adding HPC resource would just be adding the registration with the APEL factor there.<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:03:32)</span> <b>dweitzel:</b></span> Ah, yes, that's the attribute in the DB.<br/>
<span style="color: #902d59"><span style="font-size: small">(10:03:35)</span> <b>tanya:</b></span> so it is still “hardcoded”<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:04:34)</span> <b>dweitzel:</b></span> Define "hardcoded".  It's in topology, and that attribute is populated from topology.<br/>
<span style="color: #902d59"><span style="font-size: small">(10:05:53)</span> <b>tanya:</b></span> do you know if there is process how site comes up with this number? What will happen when there is a mix of hardware? Basically, is there the instruction how to determine HS06 per site?<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:08:01)</span> <b>dweitzel:</b></span> I think the experiments have instructions.  Someone from CMS or ATLAS will have a more authoritative answer.  I believe it's a weighted average of the site.  Test all the hardware, then weight by how much of each type of hardware is at the site.<br/>
<span style="color: #902d59"><span style="font-size: small">(10:08:28)</span> <b>tanya:</b></span> thanks a lot!<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:08:44)</span> <b>dweitzel:</b></span> sure<br/>
</body>
</html>
