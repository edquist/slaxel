<!DOCTYPE html>
<html>
<head>
<title>Wed May 17, 2017 : #gracc (osg)</title>
</head>
<body>
<h3>Wed May 17, 2017 : #gracc (osg)</h3>
<span style="color: #9e3997"><span style="font-size: small">(08:26:21)</span> <b>bbockelm:</b></span> @kretzke - I was able to get the <tt>docker-compose</tt> in the <tt>gracc-collector</tt> repo working!  I assume that would be the basis of a Travis-CI-based test?<br/>
<span style="color: #3c8c69"><span style="font-size: small">(08:29:19)</span> <b>kretzke:</b></span> that’s probably the way to go, yeah. Right now it runs the <tt>make with-docker</tt> command, that has some hardcoded docker commands and tests which are kinda ugly.<br/>
<span style="color: #3c8c69"><span style="font-size: small">(08:30:46)</span> <b>kretzke:</b></span> I also wanted to add the test probes from the <tt>gracc-docker</tt> repo to the integration tests<br/>
<span style="color: #9e3997"><span style="font-size: small">(08:32:08)</span> <b>bbockelm:</b></span> ah - I failed to notice that <tt>with-docker</tt> included some simple tests.<br/>
<span style="color: #3c8c69"><span style="font-size: small">(08:32:14)</span> <b>kretzke:</b></span> It’s just been a manual step for me - run <tt>make with-docker</tt>, if those tests pass, use a modified version of the <tt>dev</tt> docker-compose to run the new <tt>gracc-collector</tt> container in the stack, then run the test probes<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:50:31)</span> <b>bbockelm:</b></span> @kretzke - just saw <a href="http://opensciencegrid.github.io/gracc/ops/services/">http://opensciencegrid.github.io/gracc/ops/services/</a>.  The markdown parser used by <tt>mkdocs</tt> has some quirks compared to the GitHub one.  You might want to do a quick review of the rendering.<br/>
<span style="color: #3c8c69"><span style="font-size: small">(09:51:53)</span> <b>kretzke:</b></span> anything in particular? I previewed it locally with mkdocs, didn’t see anything<br/>
<span style="color: #3c8c69"><span style="font-size: small">(09:52:17)</span> <b>kretzke:</b></span> ah, some sub-bullets might be off<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:52:24)</span> <b>bbockelm:</b></span> Looks like <tt>!!</tt> isn't rendering and a few quirky sub-bullets.<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:52:41)</span> <b>bbockelm:</b></span> mkdocs is really strict about having an extra empty line, I think.<br/>
<span style="color: #3c8c69"><span style="font-size: small">(09:52:42)</span> <b>kretzke:</b></span> !! and ?? aren’t markdown, just flags<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:53:20)</span> <b>bbockelm:</b></span> ah, ok.  That wasn't clear.<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:53:42)</span> <b>bbockelm:</b></span> Ah - I see you've noted a cronjob still running under your account.  Can you open a corresponding JIRA for that?<br/>
<span style="color: #3c8c69"><span style="font-size: small">(09:54:25)</span> <b>kretzke:</b></span> think there is, let me check<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:55:32)</span> <b>bbockelm:</b></span> actually, @marian - it might be useful to go through the above document and make sure all the !! items noted by Kevin are "on your mental list" (in addition to JIRA).<br/>
<span style="color: #53b759"><span style="font-size: small">(09:57:02)</span> <b>marian:</b></span> yeah, we discussed it once (I have Kevin's responses in email) and since then I didn't get to it. in my plan to follow up, just a big pile, sorry...<br/>
<span style="color: #53b759"><span style="font-size: small">(09:58:09)</span> <b>marian:</b></span> I mean <tt>!!</tt> and <tt>??</tt> marks in doc ... will go through and file JIRAs for what's worth...<br/>
<span style="color: #53b759"><span style="font-size: small">(09:58:38)</span> <b>marian:</b></span> part of my deploy drill on -itb<br/>
<span style="color: #9e3997"><span style="font-size: small">(10:02:44)</span> <b>bbockelm:</b></span> In fact, it might be a worthwhile exercise to send a PR to augment that document with links to the corresponding JIRA tickets.  Or maybe link it from a master ticket?  I'll let you organize the best way to suite you.<br/>
<span style="color: #53b759"><span style="font-size: small">(10:03:20)</span> <b>marian:</b></span> ok, thanks for idea, sounds good to me<br/>
<span style="color: #53b759"><span style="font-size: small">(10:55:57)</span> <b>marian:</b></span> @marian uploaded a file: <a href="https://opensciencegrid.slack.com/files/marian/F5FFFB1D5/-.txt">Untitled</a><br/>
<span style="color: #3c8c69"><span style="font-size: small">(10:58:55)</span> <b>kretzke:</b></span> that runs under docker now<br/>
<span style="color: #53b759"><span style="font-size: small">(12:04:58)</span> <b>marian:</b></span> need a kick I guess?<br/>
<span style="color: #3c8c69"><span style="font-size: small">(12:06:23)</span> <b>kretzke:</b></span> no, the systemd service should be removed<br/>
<span style="color: #53b759"><span style="font-size: small">(12:18:28)</span> <b>marian:</b></span> gotcha, ok<br/>
<span style="color: #3c8c69"><span style="font-size: small">(14:02:49)</span> <b>kretzke:</b></span> @marian @dweitzel archiver appears to be down<br/>
<span style="color: #53b759"><span style="font-size: small">(14:08:24)</span> <b>marian:</b></span> @marian uploaded a file: <a href="https://opensciencegrid.slack.com/files/marian/F5FJGANMV/-.txt">Untitled</a><br/>
<span style="color: #53b759"><span style="font-size: small">(14:08:39)</span> <b>marian:</b></span> <tt>Restart=on-failure</tt><br/>
<span style="color: #235e5b"><span style="font-size: small">(14:08:50)</span> <b>dweitzel:</b></span> is it restarting?<br/>
<span style="color: #53b759"><span style="font-size: small">(14:08:55)</span> <b>marian:</b></span> seems not<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:13:21)</span> <b>dweitzel:</b></span> it claims it's running.<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:13:34)</span> <b>dweitzel:</b></span> Probably 1 process died, the other one hasn't died yet.<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:13:39)</span> <b>dweitzel:</b></span> Another thing to add to my list.<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:13:44)</span> <b>dweitzel:</b></span> restarting<br/>
<span style="color: #53b759"><span style="font-size: small">(14:14:15)</span> <b>marian:</b></span> yes, it was <tt>active</tt> when I checked status with trailing log I posted<br/>
<span style="color: #9e3997"><span style="font-size: small">(17:47:48)</span> <b>bbockelm:</b></span> @dweitzel - you might need to change a systemd setting. You can probably have it clear out all processes when the top one dies.<br/>
<span style="color: #235e5b"><span style="font-size: small">(18:16:05)</span> <b>dweitzel:</b></span> Yeah. Can you bump the graccarchive raw instance I'm away from my computer. <br/>
<span style="color: #9e3997"><span style="font-size: small">(18:43:42)</span> <b>bbockelm:</b></span> (So am I - @marian ?)<br/>
<span style="color: #235e5b"><span style="font-size: small">(18:45:18)</span> <b>dweitzel:</b></span> I bumped it just now.<br/>
<span style="color: #235e5b"><span style="font-size: small">(18:45:28)</span> <b>dweitzel:</b></span> I also have a build that should fix the issue.<br/>
<span style="color: #235e5b"><span style="font-size: small">(18:45:39)</span> <b>dweitzel:</b></span> for some reason, the connection keeps closing.  It's a new thing, just today.<br/>
<span style="color: #53b759"><span style="font-size: small">(18:47:49)</span> <b>marian:</b></span> Sorry I saw it just now, left few mins before ping<br/>
<span style="color: #53b759"><span style="font-size: small">(18:50:55)</span> <b>marian:</b></span> Ah it was just now, I left one hour ago but I guess Derek did restart<br/>
<span style="color: #9e3997"><span style="font-size: small">(19:10:59)</span> <b>bbockelm:</b></span> TCP connection closing?  Or something at the protocol layer?<br/>
<span style="color: #235e5b"><span style="font-size: small">(19:52:37)</span> <b>dweitzel:</b></span> don't know.<br/>
<span style="color: #235e5b"><span style="font-size: small">(19:53:46)</span> <b>dweitzel:</b></span> @dweitzel uploaded a file: <a href="https://opensciencegrid.slack.com/files/dweitzel/F5FMEGPFY/-.txt">Untitled</a><br/>
<span style="color: #9e3997"><span style="font-size: small">(20:46:09)</span> <b>bbockelm:</b></span> Really suggestive of a TCP connection issue.  Maybe open a GOC ticket to see if something is up on their side?<br/>
<span style="color: #235e5b"><span style="font-size: small">(20:57:47)</span> <b>dweitzel:</b></span> Sure. It's making the other agents fail too. Tomorrow I'm gonna look at the collector, see if it's having the same problem. <br/>
<span style="color: #9e3997"><span style="font-size: small">(21:29:51)</span> <b>bbockelm:</b></span> what's the management web interface for event-itb again?  Anyone recall?<br/>
<span style="color: #9e3997"><span style="font-size: small">(21:31:46)</span> <b>bbockelm:</b></span> ah-ha!  It's in the operator docs!<br/>
</body>
</html>
