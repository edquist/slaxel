<!DOCTYPE html>
<html>
<head>
<title>Thu Apr 26, 2018 : #gracc (osg)</title>
</head>
<body>
<h3>Thu Apr 26, 2018 : #gracc (osg)</h3>
<span style="color: #9e3997"><span style="font-size: small">(09:20:12)</span> <b>bbockelm:</b></span> <b>@edquist</b> - can you take a look at <a href="https://display.opensciencegrid.org/">https://display.opensciencegrid.org/</a> ?  The hourly numbers look incorrect (basically they say zero).<br/>
<span style="color: #43761b"><span style="font-size: small">(09:22:23)</span> <b>blin:</b></span> man...display<br/>
<span style="color: #43761b"><span style="font-size: small">(09:22:37)</span> <b>blin:</b></span> if you don't include the https:<br/><pre><br/>This is the default index.html page that is distributed with nginx on Fedora. It is located in /usr/share/nginx/html.<br/></pre><br/>
<span style="color: #9e3997"><span style="font-size: small">(09:24:12)</span> <b>bbockelm:</b></span> interesting... I'm sure we can fix, hold on.<br/>
<span style="color: #9e3997"><span style="font-size: small">(09:27:03)</span> <b>bbockelm:</b></span> fixed.<br/>
<span style="color: #43761b"><span style="font-size: small">(09:27:30)</span> <b>blin:</b></span> perfect<br/>
<span style="color: #43761b"><span style="font-size: small">(09:27:36)</span> <b>blin:</b></span> i'll make sure to flag carl down when he gets in<br/>
<span style="color: #16569E"><span style="font-size: small">(10:07:07)</span> <b>edquist:</b></span> Hmm!<br/>
<span style="color: #16569E"><span style="font-size: small">(10:25:36)</span> <b>edquist:</b></span> Hey @bbockelm / @dweitzel , as for the issue on display, there is a familiar (to me) looking Traceback in the osg_display log; I think we ran into this before when some upstream package got updated.  There's an error in the upstream software (it's not encoding unicode properly, i think).<br/>
<span style="color: #16569E"><span style="font-size: small">(10:25:38)</span> <b>edquist:</b></span> Anyway, before we fixed it by locking the version.  I suppose with this new instance of display, the latest version of the package got installed, and so the issue came back.<br/>
<span style="color: #16569E"><span style="font-size: small">(10:25:53)</span> <b>edquist:</b></span> What package?  I think maybe <tt>matplotlib</tt>, but i'm not 100% sure<br/>
<span style="color: #16569E"><span style="font-size: small">(10:26:27)</span> <b>edquist:</b></span> <tt>python-matplotlib</tt><br/>
<span style="color: #16569E"><span style="font-size: small">(10:26:30)</span> <b>edquist:</b></span> OR<br/>
<span style="color: #16569E"><span style="font-size: small">(10:26:46)</span> <b>edquist:</b></span> it could have been that we fixed it by disabling the SVG graph outputs<br/>
<span style="color: #9e3997"><span style="font-size: small">(10:27:09)</span> <b>bbockelm:</b></span> That's causing the graph to have bad data in it?<br/>
<span style="color: #c386df"><span style="font-size: small">(10:27:22)</span> <b>matyas:</b></span> can you paste the traceback somewhere?<br/>
<span style="color: #16569E"><span style="font-size: small">(10:28:15)</span> <b>edquist:</b></span> @bbockelm, i'm not sure exactly, i just remember seeing the traceback before.  We can probably find the issue an old goc and/or JIRA ticket to see how we handled it<br/>
<span style="color: #16569E"><span style="font-size: small">(10:28:37)</span> <b>edquist:</b></span> <pre><br/>2018-04-26 10:15:07,124 - INFO - Starting new HTTPS connection (1): <a href="http://gracc.opensciencegrid.org">gracc.opensciencegrid.org</a><br/>2018-04-26 10:15:07,168 - INFO - GET <a href="http://gracc.opensciencegrid.org:443/q/gracc.osg.raw-*/_search">http://gracc.opensciencegrid.org:443/q/gracc.osg.raw-*/_search</a> [status:200 request:0.044s]<br/>2018-04-26 10:15:07,170 - INFO - GRACC returned 37 results for jobs<br/>2018-04-26 10:15:07,327 - ERROR - 'ascii' codec can't encode character u'\u2212' in position 5: ordinal not in range(128)<br/>2018-04-26 10:15:07,327 - ERROR - 'ascii' codec can't encode character u'\u2212' in position 5: ordinal not in range(128)<br/>Traceback (most recent call last):<br/>  File "/usr/lib/python2.7/site-packages/osg_display/osg_display.py", line 230, in main<br/>    main_unwrapped()<br/>  File "/usr/lib/python2.7/site-packages/osg_display/osg_display.py", line 89, in main<br/>    dg.run("jobs_hourly")<br/>  File "/usr/lib/python2.7/site-packages/osg_display/display_graph.py", line 190, in run<br/>    self.write_graph(format=format)<br/>  File "/usr/lib/python2.7/site-packages/osg_display/display_graph.py", line 116, in write_graph<br/>    self.canvas.figure.draw(renderer)<br/>  File "/usr/lib64/python2.7/site-packages/matplotlib/artist.py", line 54, in draw_wrapper<br/>    draw(artist, renderer, *args, **kwargs)<br/>  File "/usr/lib64/python2.7/site-packages/matplotlib/figure.py", line 999, in draw<br/>    func(*args)<br/>  File "/usr/lib64/python2.7/site-packages/matplotlib/artist.py", line 54, in draw_wrapper<br/>    draw(artist, renderer, *args, **kwargs)<br/>  File "/usr/lib64/python2.7/site-packages/matplotlib/axes.py", line 2086, in draw<br/>    a.draw(renderer)<br/>  File "/usr/lib64/python2.7/site-packages/matplotlib/artist.py", line 54, in draw_wrapper<br/>    draw(artist, renderer, *args, **kwargs)<br/>  File "/usr/lib64/python2.7/site-packages/matplotlib/axis.py", line 1053, in draw<br/>    tick.draw(renderer)<br/>  File "/usr/lib64/python2.7/site-packages/matplotlib/artist.py", line 54, in draw_wrapper<br/>    draw(artist, renderer, *args, **kwargs)<br/>  File "/usr/lib64/python2.7/site-packages/matplotlib/axis.py", line 240, in draw<br/>    self.label1.draw(renderer)<br/>  File "/usr/lib64/python2.7/site-packages/matplotlib/artist.py", line 54, in draw_wrapper<br/>    draw(artist, renderer, *args, **kwargs)<br/>  File "/usr/lib64/python2.7/site-packages/matplotlib/text.py", line 596, in draw<br/>    ismath=ismath)<br/>  File "/usr/lib64/python2.7/site-packages/matplotlib/backends/backend_svg.py", line 1068, in draw_text<br/>    self._draw_text_as_path(gc, x, y, s, prop, angle, ismath)<br/>  File "/usr/lib64/python2.7/site-packages/matplotlib/backends/backend_svg.py", line 836, in _draw_text_as_path<br/>    writer.comment(s)<br/>  File "/usr/lib64/python2.7/site-packages/matplotlib/backends/backend_svg.py", line 149, in comment<br/>    self.__write(u"&lt;!-- %s --&gt;\n" % escape_cdata(comment))<br/>UnicodeEncodeError: 'ascii' codec can't encode character u'\u2212' in position 5: ordinal not in range(128)<br/>ERROR: OSG Display updater exited with code 1<br/></pre><br/>
<span style="color: #16569E"><span style="font-size: small">(10:31:48)</span> <b>edquist:</b></span> <a href="https://jira.opensciencegrid.org/browse/SOFTWARE-2675">https://jira.opensciencegrid.org/browse/SOFTWARE-2675</a><br/>
<span style="color: #16569E"><span style="font-size: small">(10:31:56)</span> <b>edquist:</b></span> has the details<br/>
<span style="color: #16569E"><span style="font-size: small">(10:33:07)</span> <b>edquist:</b></span> can we get a copy of the <tt>/etc/osg_display/osg_display.conf</tt> from the old display1/2 to compare to the new one? in case there are any other weirdnesses<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:33:58)</span> <b>dweitzel:</b></span> Have to ask goc for that.<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:34:08)</span> <b>dweitzel:</b></span> for now, should I disable SVG output?<br/>
<span style="color: #16569E"><span style="font-size: small">(10:35:27)</span> <b>edquist:</b></span> yes<br/>
<span style="color: #16569E"><span style="font-size: small">(10:35:36)</span> <b>edquist:</b></span> i think that ought to do it<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:37:57)</span> <b>dweitzel:</b></span> ok, done.  It looks like it ran.<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:38:11)</span> <b>dweitzel:</b></span> there is a bunch of caching, so it may take a bit for the new graphs to show up.<br/>
<span style="color: #16569E"><span style="font-size: small">(10:39:04)</span> <b>edquist:</b></span> ok<br/>
<span style="color: #16569E"><span style="font-size: small">(10:39:06)</span> <b>edquist:</b></span> cool<br/>
<span style="color: #16569E"><span style="font-size: small">(10:39:22)</span> <b>edquist:</b></span> i'm asking marina if she can get me a copy of the old config<br/>
<span style="color: #16569E"><span style="font-size: small">(10:39:57)</span> <b>edquist:</b></span> apparently the sysadmin that can grant access is no longer at osg ops<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:40:27)</span> <b>dweitzel:</b></span> sounds about right.<br/>
<span style="color: #16569E"><span style="font-size: small">(10:44:06)</span> <b>edquist:</b></span> i got a copy of the conf from marina,<br/>
<span style="color: #16569E"><span style="font-size: small">(10:44:23)</span> <b>edquist:</b></span> the only other thing that looks different is the directory<br/>
<span style="color: #16569E"><span style="font-size: small">(10:44:37)</span> <b>edquist:</b></span> <pre><br/>-directory = /usr/local/display/osg_display<br/>+directory = /usr/local/osg-display/osg-display/osg_display<br/></pre><br/>
<span style="color: #16569E"><span style="font-size: small">(10:44:44)</span> <b>edquist:</b></span> i suppose that's intentional though<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:45:32)</span> <b>dweitzel:</b></span> yup, intentional.<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:45:39)</span> <b>dweitzel:</b></span> (all the directories!)<br/>
<span style="color: #16569E"><span style="font-size: small">(10:50:40)</span> <b>edquist:</b></span> that's an interesting dir structure :smile:<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:58:17)</span> <b>dweitzel:</b></span> yeah, and now it's codified in puppet, so it's here to stay!<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:09:05)</span> <b>dweitzel:</b></span> <b>@edquist</b> well... that doesn't look any better: <a href="https://hcc-osg-display.unl.edu/">https://hcc-osg-display.unl.edu/</a> (other URL to get around caching)<br/>
<span style="color: #16569E"><span style="font-size: small">(11:14:04)</span> <b>edquist:</b></span> mmm<br/>
<span style="color: #aba727"><span style="font-size: small">(11:46:16)</span> <b>sbhat:</b></span> hi <b>@channel</b> - is there an issue with GRACC receiving records?  If I look at the summary records for the last month or so we see a sharp dropoff on 4/25.  The same pattern is true in the raw records.<br/>
<span style="color: #aba727"><span style="font-size: small">(11:46:51)</span> <b>sbhat:</b></span> e.g. look at the graph at the top of the screen here.  4/25 and 4/26 summarization have very few records: <a href="https://gracc.opensciencegrid.org/kibana/app/kibana#/discover?_g=(refreshInterval:(display:Off,pause:!f,value:0),time:(from:now-30d,mode:quick,to:now))&amp;_a=(columns:!(_source),filters:!(),index:gracc.osg.summary,interval:auto,query:(match_all:()),sort:!(EndTime,desc))">https://gracc.opensciencegrid.org/kibana/app/kibana#/discover?_g=(refreshInterval:(display:Off,pause:!f,value:0),time:(from:now-30d,mode:quick,to:now))&amp;_a=(columns:!(_source),filters:!(),index:gracc.osg.summary,interval:auto,query:(match_all:()),sort:!(EndTime,desc))</a><br/>
<span style="color: #235e5b"><span style="font-size: small">(11:53:43)</span> <b>dweitzel:</b></span> Ah, DNS issue.<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:54:02)</span> <b>dweitzel:</b></span> it had the old, <a href="http://hcc-grace.unl.edu">hcc-grace.unl.edu</a> CNAME.  It's <a href="http://hcc-gracc.unl.edu">hcc-gracc.unl.edu</a> now, right @marian?<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:57:25)</span> <b>dweitzel:</b></span> changed in DNS.<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:57:51)</span> <b>dweitzel:</b></span> GRACC is about to get overloaded when DNS TTL's expire.<br/>
<span style="color: #53b759"><span style="font-size: small">(12:02:45)</span> <b>marian:</b></span> oO ... yes, it is <a href="http://hcc-gracc.unl.edu">hcc-gracc.unl.edu</a>!<br/>
<span style="color: #aba727"><span style="font-size: small">(12:29:26)</span> <b>sbhat:</b></span> ah - got it<br/>
</body>
</html>
