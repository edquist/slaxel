<!DOCTYPE html>
<html>
<head>
<title>Mon Jun 14, 2021 : #gracc (osg)</title>
</head>
<body>
<h3>Mon Jun 14, 2021 : #gracc (osg)</h3>
<span style="color: #a63024"><span style="font-size: small">(14:26:45)</span> <b>paschos:</b></span> @dweitzel something is seriously messed up here<br/><a href="https://gracc.opensciencegrid.org/d/000000037/payload-jobs-summary?orgId=1&amp;from=now-90d&amp;to=now&amp;var-ReportableVOName=ligo&amp;var-Project=LIGO&amp;var-Project=ligo&amp;var-Facility=All&amp;var-User=All&amp;var-ExitCode=All&amp;var-Probe=All&amp;var-interval=1d">https://gracc.opensciencegrid.org/d/000000037/payload-jobs-summary?orgId=1&amp;from=now-90d&amp;t[…]-User=All&amp;var-ExitCode=All&amp;var-Probe=All&amp;var-interval=1d</a><br/>georgia tech can not have 2 million sus for ligo past 90 days… something is seriously misreported here --- 99% of the usage there should go to LIGO-CIT-CE --- @james.clark, right?<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:30:23)</span> <b>dweitzel:</b></span> looking<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:34:02)</span> <b>dweitzel:</b></span> Picking a few of the higher days out, things look ok.<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:34:23)</span> <b>dweitzel:</b></span> Usage is coming from 2 submit hosts, "condor:<a href="http://ldas-osg.ligo.caltech.edu">ldas-osg.ligo.caltech.edu</a>" and "condor:<a href="http://osg-login2.pace.gatech.edu">osg-login2.pace.gatech.edu</a>".<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:34:43)</span> <b>dweitzel:</b></span> A lot from the <a href="http://gatech.edu">gatech.edu</a> site.<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:40:39)</span> <b>dweitzel:</b></span> Is there anything in particular?  The way this is being displayed, it is showing where the job was run, not from where it was submitted.<br/>
<span style="color: #a63024"><span style="font-size: small">(15:01:43)</span> <b>paschos:</b></span> can you let me know if this makes sense ---<br/><a href="https://gracc.opensciencegrid.org/d/000000037/payload-jobs-summary?orgId=1&amp;var-ReportableVOName=ligo&amp;var-Project=All&amp;var-Facility=All&amp;var-User=All&amp;var-ExitCode=All&amp;var-Probe=All&amp;var-interval=1d">https://gracc.opensciencegrid.org/d/000000037/payload-jobs-summary?orgId=1&amp;var-Reportable[…]-User=All&amp;var-ExitCode=All&amp;var-Probe=All&amp;var-interval=1d</a><br/>this is the 30 days core hours for the LIGO VO, reporting 368 K core hours at gatech …<br/>same time period from the factory side for the ligo VO there<br/><a href="http://gfactory-2.opensciencegrid.org/factory/monitor/factoryStatus.html?entry=OSG_US_GATech_osg-sched2&amp;frontend=LIGO_frontend&amp;infoGroup=running&amp;elements=StatusRunningCores,ClientCoresTotal,ClientCoresRunning,ClientCoresIdle,&amp;rra=3&amp;window_min=0&amp;window_max=0&amp;timezone=-5">http://gfactory-2.opensciencegrid.org/factory/monitor/factoryStatus.html?entry=OSG_US_GATec[…]oresIdle,&amp;rra=3&amp;window_min=0&amp;window_max=0&amp;timezone=-5</a><br/>these numbers don’t match --- am i reading this right?<br/>
<span style="color: #235e5b"><span style="font-size: small">(15:03:34)</span> <b>dweitzel:</b></span> Is it possible that georgia tech jobs that are submitted at georgia tech and are running at georgia tech bypass the factory?<br/>
<span style="color: #43761b"><span style="font-size: small">(15:03:35)</span> <b>blin:</b></span> you probably want to compare pilot vs payload hours:<br/>• <a href="https://gracc.opensciencegrid.org/d/000000043/pilot-jobs-summary?orgId=1&amp;var-VOName=ligo&amp;var-Facility=Georgia%20Tech&amp;var-ExitCode=All&amp;var-Probe=All&amp;var-interval=1d">https://gracc.opensciencegrid.org/d/000000043/pilot-jobs-summary?orgId=1&amp;var-VOName=ligo&amp;[…]ia%20Tech&amp;var-ExitCode=All&amp;var-Probe=All&amp;var-interval=1d</a><br/>• <a href="https://gracc.opensciencegrid.org/d/000000037/payload-jobs-summary?orgId=1&amp;var-ReportableVOName=ligo&amp;var-Project=All&amp;var-Facility=Georgia%20Tech&amp;var-User=All&amp;var-ExitCode=All&amp;var-Probe=All&amp;var-interval=1d">https://gracc.opensciencegrid.org/d/000000037/payload-jobs-summary?orgId=1&amp;var-Reportable[…]-User=All&amp;var-ExitCode=All&amp;var-Probe=All&amp;var-interval=1d</a><br/>
<span style="color: #16569E"><span style="font-size: small">(15:07:12)</span> <b>edquist:</b></span> So @dweitzel, it appears that lehigh sent us records for all their local users _except_ osg<br/><br/><a href="https://support.opensciencegrid.org/a/tickets/67278">https://support.opensciencegrid.org/a/tickets/67278</a><br/>
<span style="color: #16569E"><span style="font-size: small">(15:08:12)</span> <b>edquist:</b></span> can you remind me if we/you have the ability to 'delete' bad/unwanted records from gracc, or if we need to make some kind of exception filter for them?<br/>
<span style="color: #a63024"><span style="font-size: small">(15:09:46)</span> <b>paschos:</b></span> @blin yeah i can see it now --- i was confused by the binning<br/>
<span style="color: #a63024"><span style="font-size: small">(15:10:00)</span> <b>paschos:</b></span> 4 hr bin vs 1 day bin<br/>
<span style="color: #a63024"><span style="font-size: small">(15:10:27)</span> <b>paschos:</b></span> and yes on the pilots vs. payload …<br/>
<span style="color: #16569E"><span style="font-size: small">(15:10:39)</span> <b>edquist:</b></span> i will probably need to ask Steve to re-run things, but in the end i imagine that all records that are not LocalUserId == "osg" are unwanted<br/>
<span style="color: #43761b"><span style="font-size: small">(15:10:54)</span> <b>blin:</b></span> still, the total hours look quite off. the sum of the payloads shouldn't exceed the pilots<br/>
<span style="color: #a63024"><span style="font-size: small">(15:12:58)</span> <b>paschos:</b></span> right --- ok so pilots in gracc vs. factory makes sense to me --- but yeah those payload numbers --- idk…<br/>
<span style="color: #43761b"><span style="font-size: small">(15:14:27)</span> <b>blin:</b></span> what version of gratia-probe do they have installed on their schedds?<br/>
<span style="color: #a63024"><span style="font-size: small">(15:18:56)</span> <b>paschos:</b></span> i dont have that info readily available --- we can ask ruben on tthe collab channel<br/>
<span style="color: #235e5b"><span style="font-size: small">(15:28:25)</span> <b>dweitzel:</b></span> I think I remember this.  Georgia wanted to send all usage from their schedd that ran on local resources to the OSG as "LIGO" usage.  That would explain why it doesn't match the pilot records, they are not running in pilots, just in HTCondor on the local resources.<br/>
<span style="color: #235e5b"><span style="font-size: small">(15:30:30)</span> <b>dweitzel:</b></span> <b>@edquist</b> We have oneoff scripts that can handle deletion of records.  It's not pretty, and it won't stick around if we have to replay from tape (pray we never have to do that!)<br/>
<span style="color: #16569E"><span style="font-size: small">(15:32:09)</span> <b>edquist:</b></span> i see, yeah i thought i remembered seeing one-off delete scripts before<br/>
<span style="color: #16569E"><span style="font-size: small">(15:32:50)</span> <b>edquist:</b></span> i see what you mean about recovery/replayability<br/>
<span style="color: #e06b56"><span style="font-size: small">(15:34:21)</span> <b>jthiltges:</b></span> I still like the idea of "correcting entries", like in accounting. You've incorrectly got +10 hours? Add an entry for -10 hours, and it's all good, even if you replay later.<br/>
<span style="color: #16569E"><span style="font-size: small">(15:35:15)</span> <b>edquist:</b></span> fascinating <br/>
<span style="color: #235e5b"><span style="font-size: small">(15:35:56)</span> <b>dweitzel:</b></span> Exactly, that -10 would count as another job...<br/>
<span style="color: #16569E"><span style="font-size: small">(15:37:40)</span> <b>edquist:</b></span> can that be done to effectively eliminate summary records for bad jobs, or will it still result in summary records with 0 hours?<br/>
<span style="color: #235e5b"><span style="font-size: small">(15:41:04)</span> <b>dweitzel:</b></span> It will end up with a summary record of 2 jobs.<br/>
<span style="color: #e06b56"><span style="font-size: small">(15:44:30)</span> <b>jthiltges:</b></span> You could conceivably add a "correction" type record into the summarizer logic? It could include the number of jobs to subtract, along with the hours. And hopefully you'd only need one correction record per day. ¯\_(ツ)_/¯<br/>
<span style="color: #235e5b"><span style="font-size: small">(16:03:26)</span> <b>dweitzel:</b></span> <b>@edquist</b> let me know when they submit the OSG hours and I'll remove the non-osg hours.  And I will need to know their probe name.<br/>
<span style="color: #a63024"><span style="font-size: small">(16:15:03)</span> <b>paschos:</b></span> @dweitzel indeed that’s the case for georgia tech (that they wanted this) — however, @james.clark please confirm this - there aren’t 3 times as many ligo jobs being submitted and run locally. In fact, I am not sure if there are any local ligo jobs being submitted at this point.<br/>
<span style="color: #16569E"><span style="font-size: small">(16:22:20)</span> <b>edquist:</b></span> thanks @dweitzel - i will try to make sure everything is set with them and i'll let you know<br/>
</body>
</html>
