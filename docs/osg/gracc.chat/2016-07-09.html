<!DOCTYPE html>
<html>
<head>
<title>Sat Jul 9, 2016 : #gracc (osg)</title>
</head>
<body>
<h3>Sat Jul 9, 2016 : #gracc (osg)</h3>
<span style="color: #3c8c69"><span style="font-size: small">(12:14:31)</span> <b>kretzke:</b></span> -4 crashed again<br/>
<span style="color: #3c8c69"><span style="font-size: small">(12:19:26)</span> <b>kretzke:</b></span> and -2 is on the verge<br/>
<span style="color: #3c8c69"><span style="font-size: small">(12:24:11)</span> <b>kretzke:</b></span> @bbockelm or @dweitzel can you give them a kick?<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:24:50)</span> <b>bbockelm:</b></span> Not right now, but probably can within the hour<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:11:34)</span> <b>dweitzel:</b></span> I'm also away from home and my computer. Brian got it?<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:52:03)</span> <b>bbockelm:</b></span> Just got to it now<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:52:53)</span> <b>bbockelm:</b></span> Looks like <tt>-4</tt> had some sort of XFS issue:<br/><pre><br/>[722641.229330] INFO: task java:11544 blocked for more than 120 seconds.<br/>[722641.230780] "echo 0 &gt; /proc/sys/kernel/hung_task_timeout_secs" disables this message.<br/>[722641.232362] java            D ffff8805b1144e10     0 11544      1 0x00000180<br/>[722641.233817]  ffff880749b17b58 0000000000000086 ffff88075c9cf300 ffff880749b17fd8<br/>[722641.235439]  ffff880749b17fd8 ffff880749b17fd8 ffff88075c9cf300 ffff88075c9cf300<br/>[722641.237039]  ffff88072e32f350 fffffffeffffffff ffff88072e32f358 ffff8805b1144e10<br/>[722641.238664] Call Trace:<br/>[722641.239697]  [&lt;ffffffff8163a909&gt;] schedule+0x29/0x70<br/>[722641.241060]  [&lt;ffffffff8163c2c5&gt;] rwsem_down_read_failed+0xf5/0x170<br/>[722641.242520]  [&lt;ffffffff8128abef&gt;] ? selinux_inode_permission+0xaf/0x170<br/>[722641.244062]  [&lt;ffffffffa01b3a30&gt;] ? xfs_ilock_data_map_shared+0x30/0x40 [xfs]<br/>[722641.245596]  [&lt;ffffffff813017e4&gt;] call_rwsem_down_read_failed+0x14/0x30<br/>[722641.247147]  [&lt;ffffffff81639b20&gt;] ? down_read+0x20/0x30<br/>[722641.248544]  [&lt;ffffffffa01b39bc&gt;] xfs_ilock+0xdc/0x120 [xfs]<br/>[722641.250029]  [&lt;ffffffffa01b3a30&gt;] xfs_ilock_data_map_shared+0x30/0x40 [xfs]<br/>[722641.251565]  [&lt;ffffffffa01a72a7&gt;] xfs_dir_open+0x37/0x70 [xfs]<br/>[722641.253052]  [&lt;ffffffff811dc0e7&gt;] do_dentry_open+0x1a7/0x2e0<br/>[722641.254498]  [&lt;ffffffffa01a7270&gt;] ? xfs_file_mmap+0x40/0x40 [xfs]<br/>[722641.255971]  [&lt;ffffffff811dc319&gt;] vfs_open+0x39/0x70<br/>[722641.257339]  [&lt;ffffffff811eb90d&gt;] do_last+0x1ed/0x1270<br/>[722641.258738]  [&lt;ffffffff811c11ce&gt;] ? kmem_cache_alloc_trace+0x1ce/0x1f0<br/>[722641.260189]  [&lt;ffffffff811ee672&gt;] path_openat+0xc2/0x490<br/>[722641.261535]  [&lt;ffffffff811efe3b&gt;] do_filp_open+0x4b/0xb0<br/>[722641.262944]  [&lt;ffffffff811fc9c7&gt;] ? __alloc_fd+0xa7/0x130<br/>[722641.264307]  [&lt;ffffffff811dd7e3&gt;] do_sys_open+0xf3/0x1f0<br/>[722641.265618]  [&lt;ffffffff810222f3&gt;] ? syscall_trace_enter+0x173/0x220<br/>[722641.267057]  [&lt;ffffffff811dd8fe&gt;] SyS_open+0x1e/0x20<br/>[722641.268358]  [&lt;ffffffff81645b12&gt;] tracesys+0xdd/0xe2<br/></pre><br/>
<span style="color: #9e3997"><span style="font-size: small">(14:55:11)</span> <b>bbockelm:</b></span> Same for <tt>-2</tt>:<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:55:15)</span> <b>bbockelm:</b></span> <pre><br/>[11660131.654592] Call Trace:<br/>[11660131.655846]  [&lt;ffffffff8163a909&gt;] schedule+0x29/0x70<br/>[11660131.657378]  [&lt;ffffffffa015dcb0&gt;] _xfs_log_force_lsn+0x2a0/0x2f0 [xfs]<br/>[11660131.659028]  [&lt;ffffffff810b8c10&gt;] ? wake_up_state+0x20/0x20<br/>[11660131.660604]  [&lt;ffffffffa01404d0&gt;] xfs_file_fsync+0x1b0/0x200 [xfs]<br/>[11660131.662210]  [&lt;ffffffff8120f975&gt;] do_fsync+0x65/0xa0<br/>[11660131.663679]  [&lt;ffffffff8120fc63&gt;] SyS_fdatasync+0x13/0x20<br/>[11660131.665179]  [&lt;ffffffff81645b12&gt;] tracesys+0xdd/0xe2<br/></pre><br/>
<span style="color: #9e3997"><span style="font-size: small">(14:55:28)</span> <b>bbockelm:</b></span> Actually, both look like XFS _deadlocks_, not a disk failure.<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:56:03)</span> <b>bbockelm:</b></span> Ok, other than mourning the dead, there’s not much to do here but reboot.<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:02:35)</span> <b>bbockelm:</b></span> going to try a kernel update on <tt>-4</tt>; we’ll see if that makes a difference.<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:05:30)</span> <b>bbockelm:</b></span> I’m _not_ going to upgrade <tt>-2</tt> so we can have somewhat of a controlled experiment.<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:29:06)</span> <b>bbockelm:</b></span> @kretzke: is it possible to add <tt>gratiav2-1</tt> as a datanode also?<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:34:02)</span> <b>kretzke:</b></span> Sure, but I'm not sure we really want to. <br/>
</body>
</html>
