<!DOCTYPE html>
<html>
<head>
<title>Tue Jan 24, 2017 : #gracc (osg)</title>
</head>
<body>
<h3>Tue Jan 24, 2017 : #gracc (osg)</h3>
<span style="color: #5b89d5"><span style="font-size: small">(10:32:41)</span> <b>sthapa:</b></span> Yeah, ES can track date ranges in a index so it can skip non-relevant indices in a query.  Makes rollover indices ( <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-rollover-index.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-rollover-index.html</a> )  really useful since you can use a single alias and then have queries hit the relevant indices in the background<br/>
<span style="color: #3c8c69"><span style="font-size: small">(11:42:16)</span> <b>kretzke:</b></span> @sthapa I know Kibana uses the field stats to figure out what indices in a pattern to query, but I think a direct query to Elasticseach will still hit every matching index<br/>
<span style="color: #3c8c69"><span style="font-size: small">(11:46:05)</span> <b>kretzke:</b></span> depending on how the query is structured it might be a very quick “nope, nothing here” result though, I’m not sure<br/>
<span style="color: #5b89d5"><span style="font-size: small">(12:27:15)</span> <b>sthapa:</b></span> Yeah, looks like the field stats api is still experimental, thought that ES would have made it production by now<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:35:04)</span> <b>rynge:</b></span> @sbhat gave me his solution, which uses the specific index when it can, and wildcard when the query spans indices<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:35:07)</span> <b>rynge:</b></span> <a href="https://github.com/opensciencegrid/gracc-reporting/blob/master/IndexPattern.py">https://github.com/opensciencegrid/gracc-reporting/blob/master/IndexPattern.py</a><br/>
<span style="color: #aba727"><span style="font-size: small">(12:36:06)</span> <b>sbhat:</b></span> @rynge I just realized - there's one line that's incorrect in IndexPattern.py (I've since corrected it, but haven't merged the changes into the OSG repo)<br/>
<span style="color: #aba727"><span style="font-size: small">(12:36:27)</span> <b>sbhat:</b></span> line 12 shouldn't have the * after gracc.osg.summary<br/>
<span style="color: #674b1b"><span style="font-size: small">(12:36:34)</span> <b>rynge:</b></span> Ok, thanks<br/>
</body>
</html>
