<!DOCTYPE html>
<html>
<head>
<title>Mon Apr 10, 2017 : #gracc (osg)</title>
</head>
<body>
<h3>Mon Apr 10, 2017 : #gracc (osg)</h3>
<span style="color: #3c8c69"><span style="font-size: small">(09:29:46)</span> <b>kretzke:</b></span> @dweitzel @efajardo please stop sending network records to rabbitmq and drain the queue until a consumer is up, so accounting records can move. ITB probes will be reporting straight to gracc today<br/>
<span style="color: #a63024"><span style="font-size: small">(11:08:18)</span> <b>efajardo:</b></span> OK i stoped it<br/>
<blockquote>
<span style="color: #3c8c69"><span style="font-size: small">(12:47:16)</span> <b>kretzke:</b></span> efajardo: thanks. Can you log into the web interface and purge the records from the queue? <a href="https://event-itb.grid.iu.edu:15671/#/">https://event-itb.grid.iu.edu:15671/#/</a><br/>
<span style="color: #a63024"><span style="font-size: small">(16:06:55)</span> <b>efajardo:</b></span> I will try to clean it today<br/>
<span style="color: #3c8c69"><span style="font-size: small">(16:10:27)</span> <b>kretzke:</b></span> Marina restarted the server, it’s done, thanks<br/>
</blockquote>
<span style="color: #9e3997"><span style="font-size: small">(12:09:05)</span> <b>bbockelm:</b></span> Thanks!<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:09:58)</span> <b>bbockelm:</b></span> @kretzke @tanya - do you know the change process at FNAL sufficiently well?  Should we put in a change request now for turning off the production collectors at the end of the month?<br/>
<span style="color: #902d59"><span style="font-size: small">(12:10:16)</span> <b>tanya:</b></span> yes<br/>
<span style="color: #3c8c69"><span style="font-size: small">(12:10:18)</span> <b>kretzke:</b></span> hah no… we kinda forgot to notify GCO<br/>
<span style="color: #902d59"><span style="font-size: small">(12:10:33)</span> <b>tanya:</b></span> we need to make them aware of it<br/>
<span style="color: #3c8c69"><span style="font-size: small">(12:10:42)</span> <b>kretzke:</b></span> and no, I think we need to keep the gratia collectors running for a while still<br/>
<span style="color: #902d59"><span style="font-size: small">(12:10:44)</span> <b>tanya:</b></span> though I have talked with steve timm<br/>
<span style="color: #902d59"><span style="font-size: small">(12:11:06)</span> <b>tanya:</b></span> but we need to make all the requests though SNOW<br/>
<span style="color: #902d59"><span style="font-size: small">(12:11:13)</span> <b>tanya:</b></span> @kretzke - why?<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:11:22)</span> <b>bbockelm:</b></span> Meh.  That's the point of doing the pathfinding with the ITB ... shake out things before we try the production cutover.<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:11:40)</span> <b>bbockelm:</b></span> did the GratiaWeb decommissioning announcement go out at all last week?<br/>
<span style="color: #3c8c69"><span style="font-size: small">(12:12:09)</span> <b>kretzke:</b></span> make sure we’re 100% happy and have all the data we need. Just saying don’t rush<br/>
<span style="color: #902d59"><span style="font-size: small">(12:12:16)</span> <b>tanya:</b></span> “GratiaWeb ” is GOC responsibility<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:12:27)</span> <b>bbockelm:</b></span> Correct - that was a separate topic :slightly_smiling_face:<br/>
<span style="color: #53b759"><span style="font-size: small">(12:14:29)</span> <b>marian:</b></span> @bbockelm re gratiaweb - didn't finish analyzing logs yet, we can do decomission then perphaphs? also have ticket to redirect links from twikis etc, from gratiaweb to gracc monitor ...<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:16:19)</span> <b>bbockelm:</b></span> Getting the announcement out can probably happen in parallel to the technical work.<br/>
<span style="color: #53b759"><span style="font-size: small">(12:17:51)</span> <b>marian:</b></span> ok, that's new item put on the list then ... is there any user list?<br/>
<span style="color: #53b759"><span style="font-size: small">(12:18:57)</span> <b>marian:</b></span> it wasn't clear to me - thought i'm trying to see active users from gratia web log ... which we will contact then<br/>
<span style="color: #53b759"><span style="font-size: small">(12:19:32)</span> <b>marian:</b></span> but general announce should go out regardless, agreed<br/>
<span style="color: #53b759"><span style="font-size: small">(12:44:35)</span> <b>marian:</b></span> just got announce message ... just curious ... who managed send announce out about "GratiaWeb to GRACC transition"?<br/>
<span style="color: #53b759"><span style="font-size: small">(13:15:55)</span> <b>marian:</b></span> was there anybody from Gratia Ops attending Monday's GOC Ops meetings reagularly?<br/>
<span style="color: #53b759"><span style="font-size: small">(13:18:42)</span> <b>marian:</b></span> should we switch it for GRACC? in the transition I'd love to know who did reports for Gratia previously... that I get some sense what's usually being reported... and, if it should be me connecting to GOC Ops meetings from now on...<br/>
<span style="color: #9e3997"><span style="font-size: small">(13:51:04)</span> <b>bbockelm:</b></span> I poked Kyle about it... we had an ongoing thread last week that stalled on an unrelated topic.<br/>
<span style="color: #9e3997"><span style="font-size: small">(13:52:41)</span> <b>bbockelm:</b></span> @marian - yup, I think you'll get to start attending Ops meetings for GRACC.  I don't know _what_ you'll want to report long-term, but I suspect for the near-term it'll be on transition progress.<br/>
<span style="color: #53b759"><span style="font-size: small">(13:55:49)</span> <b>marian:</b></span> ok, thanks for info<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:02:01)</span> <b>bbockelm:</b></span> @marian - can you update <a href="https://jira.opensciencegrid.org/browse/GRACC-69">https://jira.opensciencegrid.org/browse/GRACC-69</a> to reflect current status?<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:02:56)</span> <b>bbockelm:</b></span> In fact, it looks like all the child tickets of GRACC-68 could use a review.<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:21:18)</span> <b>bbockelm:</b></span> <b>@edquist</b> @tanya @kretzke @marian - looking at the calendar, I'd like to start a thread on cutting over the Gratia production alias.<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:21:38)</span> <b>bbockelm:</b></span> How does 25 April sound to everyone?<br/>
<span style="color: #3c8c69"><span style="font-size: small">(14:27:21)</span> <b>kretzke:</b></span> I thought we were aiming for week of May 1?<br/>
<span style="color: #3c8c69"><span style="font-size: small">(14:28:45)</span> <b>kretzke:</b></span> oh, May 1 is gratia collector and database ready to shutdown?<br/>
<span style="color: #902d59"><span style="font-size: small">(14:33:22)</span> <b>tanya:</b></span> not database<br/>
<span style="color: #902d59"><span style="font-size: small">(14:33:41)</span> <b>tanya:</b></span> we could disable access from outside<br/>
<span style="color: #3c8c69"><span style="font-size: small">(14:34:30)</span> <b>kretzke:</b></span> right, I mean from OSG perspective<br/>
<span style="color: #902d59"><span style="font-size: small">(14:35:28)</span> <b>tanya:</b></span> @bbockelm &amp; @kretzke  do we need an official sign off from ET?<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:37:16)</span> <b>bbockelm:</b></span> I was starting an email thread along those lines.<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:37:33)</span> <b>bbockelm:</b></span> I just wanted to make sure it was at least worthwhile to write the email.<br/>
<span style="color: #902d59"><span style="font-size: small">(14:38:17)</span> <b>tanya:</b></span> we need to set some criteria - what does it mean that GRACC is ready?<br/>
<span style="color: #902d59"><span style="font-size: small">(14:38:48)</span> <b>tanya:</b></span> obviously without WLCG/APEL report and OSG Display it is not ready<br/>
<span style="color: #902d59"><span style="font-size: small">(14:39:05)</span> <b>tanya:</b></span> but what about missing dashboards<br/>
<span style="color: #902d59"><span style="font-size: small">(14:39:08)</span> <b>tanya:</b></span> is it ok?<br/>
<span style="color: #902d59"><span style="font-size: small">(14:39:37)</span> <b>tanya:</b></span> without project and site name correction?<br/>
<span style="color: #902d59"><span style="font-size: small">(14:39:49)</span> <b>tanya:</b></span> XSEDE sync?<br/>
<span style="color: #902d59"><span style="font-size: small">(14:40:30)</span> <b>tanya:</b></span> well defined support<br/>
<span style="color: #3c8c69"><span style="font-size: small">(14:40:40)</span> <b>kretzke:</b></span> we had a big meeting about that… yes, APEL (GRACC-19), Display (GRACC-18), and XSEDE (GRACC-20) were on the list<br/>
<span style="color: #902d59"><span style="font-size: small">(14:40:42)</span> <b>tanya:</b></span> GOC tickets assignment<br/>
<span style="color: #3c8c69"><span style="font-size: small">(14:40:46)</span> <b>kretzke:</b></span> what missing dashboards?<br/>
<span style="color: #902d59"><span style="font-size: small">(14:41:34)</span> <b>tanya:</b></span> i don’t have a concrete example; but let assume somebody in ET will miss their favorite dashboard<br/>
<span style="color: #3c8c69"><span style="font-size: small">(14:44:54)</span> <b>kretzke:</b></span> Derek, Mats, and Suchandra are registered and know or can learn how to make dashboards.<br/>
<span style="color: #902d59"><span style="font-size: small">(14:45:43)</span> <b>tanya:</b></span> so, they will provide support/create requested dashboards<br/>
<span style="color: #3c8c69"><span style="font-size: small">(14:46:10)</span> <b>kretzke:</b></span> that’s up to them and their bosses.<br/>
<span style="color: #902d59"><span style="font-size: small">(14:47:05)</span> <b>tanya:</b></span> ET will need to define the changes in support: probe issues, ES issues, Grafana issues, Grafana dashboards, RabbitMQ issues ….<br/>
<span style="color: #3c8c69"><span style="font-size: small">(14:47:14)</span> <b>kretzke:</b></span> otherwise, someone can learn to make graphs in Kibana, it’s learning curve is less steep than gratiaweb<br/>
<span style="color: #902d59"><span style="font-size: small">(14:47:16)</span> <b>tanya:</b></span> new teams<br/>
<span style="color: #902d59"><span style="font-size: small">(14:47:46)</span> <b>tanya:</b></span> yes, but this is ET problem<br/>
<span style="color: #902d59"><span style="font-size: small">(14:48:01)</span> <b>tanya:</b></span> and I want them to acknowledge it<br/>
<span style="color: #9e3997"><span style="font-size: small">(14:59:34)</span> <b>bbockelm:</b></span> alright, I see work items here, but nothing that makes 25 April an unrealistic date.<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:00:11)</span> <b>bbockelm:</b></span> So, sent the email.  We'll gather responses and evaluate.<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:02:07)</span> <b>bbockelm:</b></span> already talked to RobQ and made him aware of the fact we won't have a SLA with Nebraska in place before the cutover.  Probe issues are independent of the Gratia collector cutover.  RabbitMQ should already be covered by Ops.  I'd focus on ES, Grafana, and Kibana of the items listed above.<br/>
<span style="color: #902d59"><span style="font-size: small">(15:13:57)</span> <b>tanya:</b></span> see Tim’s email; I thought we verified that summarized records matched with gratia; so if new APPEL report is  different from the one that Scott creates; Carl and Scott should debug that<br/>
<span style="color: #902d59"><span style="font-size: small">(15:14:08)</span> <b>tanya:</b></span> how it is related to “bad” data<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:15:32)</span> <b>bbockelm:</b></span> Yup.  I would also point out that we shouldn't set a higher bar for the replacement system than the current one.  (After all, the current one  got rewritten and deployed with no oversight and crosschecks)<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:18:14)</span> <b>kretzke:</b></span> hm @marian we have a little problem, ITB records are going to the main collector :confused:<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:23:30)</span> <b>kretzke:</b></span> ok fixed… apparently nginx config wasn’t reloaded<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:24:17)</span> <b>kretzke:</b></span> not sure how we’re going to clean the ITB records out of prod<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:30:13)</span> <b>kretzke:</b></span> probes are going to the right collector, but being rejected since rabbitmq is still blocked. @dweitzel @efajardo help please, we need to purge that queue that’s blocking it<br/>
<span style="color: #235e5b"><span style="font-size: small">(15:32:33)</span> <b>dweitzel:</b></span> I'm not sure what queue those messages are even sitting on.<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:37:35)</span> <b>kretzke:</b></span> do we need to get Marina to restart the server?<br/>
<span style="color: #235e5b"><span style="font-size: small">(15:37:49)</span> <b>dweitzel:</b></span> probably.<br/>
<span style="color: #53b759"><span style="font-size: small">(15:40:01)</span> <b>marian:</b></span> what would be right procedure for that? open GOC?<br/>
<span style="color: #53b759"><span style="font-size: small">(15:40:09)</span> <b>marian:</b></span> (from Ops view)<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:40:47)</span> <b>kretzke:</b></span> I just messaged her here in slack. it is ITB after all<br/>
<span style="color: #53b759"><span style="font-size: small">(15:41:01)</span> <b>marian:</b></span> ok ... for production?<br/>
<span style="color: #53b759"><span style="font-size: small">(15:41:09)</span> <b>marian:</b></span> slack again?<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:41:54)</span> <b>kretzke:</b></span> not sure I can generalize that.<br/>
<span style="color: #53b759"><span style="font-size: small">(15:42:16)</span> <b>marian:</b></span> now I'm thinking of yet another support unit in GOC system ... like "GRACC (Infrastructure)" and get people like Marina receive such tickets<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:43:13)</span> <b>kretzke:</b></span> rabbitmq is an independent unit<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:44:37)</span> <b>kretzke:</b></span> or should be, anyways. I’ve opened an “others” ticket for it before<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:45:27)</span> <b>kretzke:</b></span> Marina restarted the server, ~the spice~ itb records are flowing again.<br/>
<span style="color: #53b759"><span style="font-size: small">(15:46:11)</span> <b>marian:</b></span> what support unit did you use for it? any other independent units besides rabitmq for gracc at goc infrastructure?<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:48:15)</span> <b>kretzke:</b></span> @kretzke uploaded a file: <a href="https://opensciencegrid.slack.com/files/kretzke/F4WGZS7GQ/pasted_image_at_2017_04_10_03_47_pm.png">Pasted image at 2017-04-10, 3:47 PM</a> and commented: and then I'd put event[-itb].<a href="http://grid.iu.edu">grid.iu.edu</a> as the url<br/>
<span style="color: #3c8c69"><span style="font-size: small">(15:48:26)</span> <b>kretzke:</b></span> no, that’s it<br/>
<span style="color: #9e3997"><span style="font-size: small">(15:56:43)</span> <b>bbockelm:</b></span> @dweitzel - can you hunt down this 3 core job with Josh; <a href="https://gracc.opensciencegrid.org/kibana/app/kibana#/doc/gracc.osg.summary/gracc.osg.summary3-2017/JobUsageRecordSummary?id=a7772aeedba3105cb5ef625c56f873fa&amp;_g=(refreshInterval:(display:Off,pause:!f,value:0),time:(from:now-60d,mode:quick,to:now))">https://gracc.opensciencegrid.org/kibana/app/kibana#/doc/gracc.osg.summary/gracc.osg.summary3-2017/JobUsageRecordSummary?id=a7772aeedba3105cb5ef625c56f873fa&amp;_g=(refreshInterval:(display:Off,pause:!f,value:0),time:(from:now-60d,mode:quick,to:now))</a>  I just want to make sure it is "real".<br/>
<span style="color: #9e3997"><span style="font-size: small">(16:01:14)</span> <b>bbockelm:</b></span> (I mean, looks legit)<br/>
<span style="color: #235e5b"><span style="font-size: small">(16:08:43)</span> <b>dweitzel:</b></span> The slurm record looks ok.  Slurm says it allocated 4 cores to it, but Slurm only allocates cores in 2's.<br/>
<span style="color: #235e5b"><span style="font-size: small">(16:09:40)</span> <b>dweitzel:</b></span> Odd thing in slurm, the job appears to have asked for 1 core, but it was allocated 4.<br/>
<span style="color: #235e5b"><span style="font-size: small">(16:09:44)</span> <b>dweitzel:</b></span> who knows.<br/>
</body>
</html>
