<!DOCTYPE html>
<html>
<head>
<title>Tue Aug 13, 2019 : #gracc (osg)</title>
</head>
<body>
<h3>Tue Aug 13, 2019 : #gracc (osg)</h3>
<span style="color: #a63024"><span style="font-size: small">(11:38:03)</span> <b>efajardo:</b></span> Hi <b>@here</b> gracc experts<br/>
<span style="color: #a63024"><span style="font-size: small">(11:38:20)</span> <b>efajardo:</b></span> I am trying to udnerstand why I do nto see anything here<br/>
<span style="color: #a63024"><span style="font-size: small">(11:38:26)</span> <b>efajardo:</b></span> <a href="https://129.93.175.60/dashboard/db/payload-jobs-summary?orgId=1&amp;from=now-30d&amp;to=now&amp;var-ReportableVOName=All&amp;var-Project=osg.Ceser&amp;var-Facility=All&amp;var-User=All&amp;var-ExitCode=All&amp;var-Probe=All&amp;var-interval=1d&amp;var-Organization=All">https://129.93.175.60/dashboard/db/payload-jobs-summary?orgId=1&amp;from=now-30d&amp;to=now&amp;var-ReportableVOName=All&amp;var-Project=osg.Ceser&amp;var-Facility=All&amp;var-User=All&amp;var-ExitCode=All&amp;var-Probe=All&amp;var-interval=1d&amp;var-Organization=All</a><br/>
<span style="color: #a63024"><span style="font-size: small">(11:38:31)</span> <b>efajardo:</b></span> for projectName<br/>
<span style="color: #a63024"><span style="font-size: small">(11:38:33)</span> <b>efajardo:</b></span> osg.ceser<br/>
<span style="color: #a63024"><span style="font-size: small">(11:38:49)</span> <b>efajardo:</b></span> However I am submitting several jobs with it<br/>
<span style="color: #a63024"><span style="font-size: small">(11:38:56)</span> <b>efajardo:</b></span> and the gratia probe is working and claiming<br/>
<span style="color: #a63024"><span style="font-size: small">(11:38:57)</span> <b>efajardo:</b></span> that<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:39:22)</span> <b>dweitzel:</b></span> (I'll ignore the IP address issue for now)<br/>
<span style="color: #a63024"><span style="font-size: small">(11:39:23)</span> <b>efajardo:</b></span> the probe is<br/>
<span style="color: #a63024"><span style="font-size: small">(11:39:33)</span> <b>efajardo:</b></span> yea I think that is a problem with my ISP DNS<br/>
<span style="color: #a63024"><span style="font-size: small">(11:40:00)</span> <b>efajardo:</b></span> the ProbeName is<br/>
<span style="color: #a63024"><span style="font-size: small">(11:40:02)</span> <b>efajardo:</b></span> <tt>ProbeName="condor:<a href="http://cabinet-10-10-4.t2.ucsd.edu">cabinet-10-10-4.t2.ucsd.edu</a>"</tt><br/>
<span style="color: #235e5b"><span style="font-size: small">(11:43:43)</span> <b>dweitzel:</b></span> debugging<br/>
<span style="color: #a63024"><span style="font-size: small">(11:44:15)</span> <b>efajardo:</b></span> thank you<br/>
<span style="color: #a63024"><span style="font-size: small">(11:44:21)</span> <b>efajardo:</b></span> This is a special<br/>
<span style="color: #a63024"><span style="font-size: small">(11:44:33)</span> <b>efajardo:</b></span> setup in the sense the jobs are submitted by rsv and not by a human<br/>
<span style="color: #a63024"><span style="font-size: small">(11:44:36)</span> <b>efajardo:</b></span> but other than that<br/>
<span style="color: #a63024"><span style="font-size: small">(11:44:46)</span> <b>efajardo:</b></span> these are vanilla universe<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:47:35)</span> <b>dweitzel:</b></span> is osg.Cesar in the projects?<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:47:49)</span> <b>dweitzel:</b></span> sorry, not clear<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:47:52)</span> <b>dweitzel:</b></span> is it in topology.<br/>
<span style="color: #43761b"><span style="font-size: small">(11:48:01)</span> <b>blin:</b></span> it is not<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:48:35)</span> <b>dweitzel:</b></span> ok, so it's failing partly because it doesn't have the <tt>OIM_Organization</tt> field in the record, because osg.Cesar is not in topology.<br/>
<span style="color: #a63024"><span style="font-size: small">(11:49:06)</span> <b>efajardo:</b></span> I thought @paschos had registered it<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:49:08)</span> <b>dweitzel:</b></span> But... it should still show the usage, so grafana is throwing away the records if that field doesn't exist.<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:49:19)</span> <b>dweitzel:</b></span> which is wrong.<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:49:31)</span> <b>dweitzel:</b></span> the throwing away the records if that field doesn't exist.<br/>
<span style="color: #a63024"><span style="font-size: small">(11:50:01)</span> <b>efajardo:</b></span> Just to be clear<br/>
<span style="color: #a63024"><span style="font-size: small">(11:50:06)</span> <b>efajardo:</b></span> it should be <tt>osg.Ceser</tt><br/>
<span style="color: #a63024"><span style="font-size: small">(11:50:07)</span> <b>efajardo:</b></span> right?<br/>
<span style="color: #a63024"><span style="font-size: small">(11:50:12)</span> <b>efajardo:</b></span> no Cesar<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:50:42)</span> <b>dweitzel:</b></span> Right, Ceser<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:50:55)</span> <b>dweitzel:</b></span> (sorry, I know a guy named Cesar)<br/>
<span style="color: #a63024"><span style="font-size: small">(11:50:58)</span> <b>efajardo:</b></span> @paschos can you register the <tt>osg.Ceser</tt> project<br/>
<span style="color: #a63024"><span style="font-size: small">(11:51:07)</span> <b>efajardo:</b></span> in topology?<br/>
<span style="color: #a63024"><span style="font-size: small">(11:51:18)</span> <b>efajardo:</b></span> Thanks for debugging @dweitzel<br/>
<span style="color: #a63024"><span style="font-size: small">(12:09:34)</span> <b>paschos:</b></span> it wasnt registered?<br/>
<span style="color: #a63024"><span style="font-size: small">(12:09:55)</span> <b>paschos:</b></span> I had a pull request done for that<br/>
<span style="color: #a63024"><span style="font-size: small">(12:10:02)</span> <b>paschos:</b></span> let me check<br/>
<span style="color: #a63024"><span style="font-size: small">(12:35:33)</span> <b>paschos:</b></span> @dweitzel @efajardo i made a pull request for the ceser.yaml in the topology/projects<br/>
<span style="color: #a63024"><span style="font-size: small">(12:35:40)</span> <b>paschos:</b></span> i don't know who approves those<br/>
<span style="color: #a63024"><span style="font-size: small">(12:35:50)</span> <b>efajardo:</b></span> What is the PR?<br/>
<span style="color: #a63024"><span style="font-size: small">(12:35:58)</span> <b>efajardo:</b></span> link?<br/>
<span style="color: #43761b"><span style="font-size: small">(12:36:36)</span> <b>blin:</b></span> <a href="https://github.com/opensciencegrid/topology/pull/800">https://github.com/opensciencegrid/topology/pull/800</a><br/>
<span style="color: #a63024"><span style="font-size: small">(12:36:38)</span> <b>paschos:</b></span> <a href="https://github.com/opensciencegrid/topology/pull/800">https://github.com/opensciencegrid/topology/pull/800</a><br/>
<span style="color: #43761b"><span style="font-size: small">(12:39:00)</span> <b>blin:</b></span> edgar, you're going to need to fixup the organization to match the canonical UCSD name in the other projects<br/>
<span style="color: #43761b"><span style="font-size: small">(12:39:13)</span> <b>blin:</b></span> oh, mat's got it<br/>
<span style="color: #43761b"><span style="font-size: small">(12:39:34)</span> <b>blin:</b></span> also should the file be named osg.Ceser or just Ceser?<br/>
<blockquote>
<span style="color: #43761b"><span style="font-size: small">(12:42:34)</span> <b>blin:</b></span> @dweitzel ^^<br/>
<span style="color: #235e5b"><span style="font-size: small">(12:43:24)</span> <b>dweitzel:</b></span> has to be osg.Ceser I believe.  Because of how the xml is generated.<br/>
</blockquote>
<span style="color: #a63024"><span style="font-size: small">(12:39:43)</span> <b>paschos:</b></span> does it matter?<br/>
<span style="color: #43761b"><span style="font-size: small">(12:39:43)</span> <b>blin:</b></span> i imagine the capitalization is important at the very least<br/>
<span style="color: #a63024"><span style="font-size: small">(12:40:09)</span> <b>paschos:</b></span> Name: OSG-CESER<br/>Description: Infrastructure Testing<br/>Department: Physics<br/>FieldOfScience: Multidisciplinary<br/>Organization: UC San Diego<br/>PIName: Frank Wuerthwein<br/>ID: '541'<br/>Sponsor:<br/>  CampusGrid:<br/>    ID: '14'<br/>    ame: OSG Connect<br/>
<span style="color: #43761b"><span style="font-size: small">(12:40:09)</span> <b>blin:</b></span> yeah, registered names are important<br/>
<span style="color: #a63024"><span style="font-size: small">(12:40:11)</span> <b>efajardo:</b></span> why is the organization UCSD<br/>
<span style="color: #a63024"><span style="font-size: small">(12:40:17)</span> <b>paschos:</b></span> because Frank<br/>
<span style="color: #a63024"><span style="font-size: small">(12:40:19)</span> <b>paschos:</b></span> is the PI<br/>
<span style="color: #a63024"><span style="font-size: small">(12:40:29)</span> <b>efajardo:</b></span> CESER is a multi instituion PI<br/>
<span style="color: #a63024"><span style="font-size: small">(12:40:41)</span> <b>paschos:</b></span> i was told to put Frank as the PI<br/>
<span style="color: #a63024"><span style="font-size: small">(12:40:44)</span> <b>efajardo:</b></span> ok<br/>
<span style="color: #a63024"><span style="font-size: small">(12:41:33)</span> <b>paschos:</b></span> I generated the ID: 541 some time ago -- @blin can someone check if that ID is used by any other proejct?<br/>
<span style="color: #c386df"><span style="font-size: small">(12:42:02)</span> <b>matyas:</b></span> ah. it is<br/>
<span style="color: #c386df"><span style="font-size: small">(12:42:16)</span> <b>matyas:</b></span> thanks for mentioning<br/>
<span style="color: #a63024"><span style="font-size: small">(12:42:39)</span> <b>paschos:</b></span> so--- it *is* used by another project<br/>
<span style="color: #a63024"><span style="font-size: small">(12:42:40)</span> <b>paschos:</b></span> ?<br/>
<span style="color: #c386df"><span style="font-size: small">(12:42:54)</span> <b>matyas:</b></span> yeah<br/>
<span style="color: #c386df"><span style="font-size: small">(12:43:00)</span> <b>matyas:</b></span> I made suggestions in the PR<br/>
<span style="color: #c386df"><span style="font-size: small">(12:43:07)</span> <b>matyas:</b></span> you don't need to put the ID for CampusGrid anymore either<br/>
<span style="color: #a63024"><span style="font-size: small">(12:43:40)</span> <b>paschos:</b></span> yeah i see ---<br/>
<span style="color: #a63024"><span style="font-size: small">(12:44:05)</span> <b>paschos:</b></span> 587--- so I don't need to rerun the 'next project id'<br/>
<span style="color: #c386df"><span style="font-size: small">(12:44:13)</span> <b>matyas:</b></span> yeah I ran it for you<br/>
<span style="color: #a63024"><span style="font-size: small">(12:44:20)</span> <b>paschos:</b></span> thanks<br/>
<span style="color: #235e5b"><span style="font-size: small">(12:46:25)</span> <b>dweitzel:</b></span> I think the file will need to be osg.Ceser.yaml<br/>
<span style="color: #235e5b"><span style="font-size: small">(12:46:38)</span> <b>dweitzel:</b></span> Due to how the xml is generated.<br/>
<span style="color: #c386df"><span style="font-size: small">(12:48:38)</span> <b>matyas:</b></span> the file name should match the Name in the file<br/>
<span style="color: #c386df"><span style="font-size: small">(12:48:58)</span> <b>matyas:</b></span> so OSG-CESER.yaml<br/>
<span style="color: #43761b"><span style="font-size: small">(12:49:50)</span> <b>blin:</b></span> other way around, mat<br/>
<span style="color: #43761b"><span style="font-size: small">(12:50:09)</span> <b>blin:</b></span> the Name should be osg.Ceser<br/>
<span style="color: #43761b"><span style="font-size: small">(12:50:19)</span> <b>blin:</b></span> since that's what users have been submitting jobs with<br/>
<span style="color: #c386df"><span style="font-size: small">(12:51:09)</span> <b>matyas:</b></span> I thought we removed the Name from projects and just used the file name but apparently not<br/>
<span style="color: #a63024"><span style="font-size: small">(14:09:54)</span> <b>paschos:</b></span> there is an old ticket about this... i will close it... @matyas this is resolved now, yes?<br/>
<span style="color: #c386df"><span style="font-size: small">(14:10:06)</span> <b>matyas:</b></span> I merged it<br/>
<span style="color: #a63024"><span style="font-size: small">(14:40:42)</span> <b>efajardo:</b></span> <b>@here</b> I asked  @nhaas  to compile a list of all projectNames that have records in gracc (for last 30 days) but are not registered in topology<br/>
<span style="color: #a63024"><span style="font-size: small">(14:41:04)</span> <b>efajardo:</b></span> should we track them down and tell the users to register<br/>
<span style="color: #53b759"><span style="font-size: small">(14:41:59)</span> <b>marian:</b></span> how many cases like that do we have?<br/>
<span style="color: #A82F2F"><span style="font-size: small">(14:42:57)</span> <b>nhaas:</b></span> In the last 60 days there's about 35 cases<br/>
<span style="color: #A82F2F"><span style="font-size: small">(14:43:36)</span> <b>nhaas:</b></span> By 35 cases I mean 35 unique names not registered<br/>
<span style="color: #53b759"><span style="font-size: small">(14:45:57)</span> <b>marian:</b></span> so this seems like something repeating whenever new project is introduced or so? I'd love we start to track and discuss here... as an idea, we would need to come up with some process than that automates checks for this...<br/>
<span style="color: #53b759"><span style="font-size: small">(14:46:20)</span> <b>marian:</b></span> @nhaas, what's your JIRA account, do you have one?<br/>
<span style="color: #A82F2F"><span style="font-size: small">(14:47:14)</span> <b>nhaas:</b></span> No I don't think I have one<br/>
<span style="color: #53b759"><span style="font-size: small">(14:50:23)</span> <b>marian:</b></span> I created this ticket: <a href="https://opensciencegrid.atlassian.net/browse/SOFTWARE-3791">https://opensciencegrid.atlassian.net/browse/SOFTWARE-3791</a><br/>
<span style="color: #53b759"><span style="font-size: small">(14:50:58)</span> <b>marian:</b></span> I'd like to update the list there as attachment and we can go from there to contact managers of those projects...<br/>
<span style="color: #53b759"><span style="font-size: small">(14:51:46)</span> <b>marian:</b></span> or other thoughts? (seeing Mat is typing loooong :))<br/>
<span style="color: #c386df"><span style="font-size: small">(14:52:10)</span> <b>matyas:</b></span> @blin do we have room in JIRA for Nina, or can we bump someone?<br/>
<span style="color: #c386df"><span style="font-size: small">(14:52:33)</span> <b>matyas:</b></span> (we get a limited number of users)<br/>
<span style="color: #c386df"><span style="font-size: small">(14:52:46)</span> <b>matyas:</b></span> maybe a google spreadsheet would be better<br/>
<span style="color: #c386df"><span style="font-size: small">(14:53:10)</span> <b>matyas:</b></span> we can bump Zhenzhou since he no longer works here<br/>
<span style="color: #A82F2F"><span style="font-size: small">(14:53:37)</span> <b>nhaas:</b></span> Whatever works best. So do you guys just want the project names? Or Edgar was suggesting I also find the probes and usernames?<br/>
<span style="color: #53b759"><span style="font-size: small">(14:54:10)</span> <b>marian:</b></span> if we can get Nina JIRA account she can own that ticket and update, I'd prefer that if possible<br/>
<span style="color: #53b759"><span style="font-size: small">(14:58:29)</span> <b>marian:</b></span> what you mean by probes and usernames? like another data input for those projects names not in topology? I think in topology we don't register probes or usernames, though...<br/>
<span style="color: #A82F2F"><span style="font-size: small">(14:58:49)</span> <b>nhaas:</b></span> no no I think to track down who's submitting the project names<br/>
<span style="color: #A82F2F"><span style="font-size: small">(14:59:25)</span> <b>nhaas:</b></span> Although I don't know if there is a proper username field in GRACC<br/>
<span style="color: #53b759"><span style="font-size: small">(15:01:09)</span> <b>marian:</b></span> ah, I'd say, get what you can that is associated which project name records that are in gracc but not in topology ...<br/>
<span style="color: #A82F2F"><span style="font-size: small">(15:05:36)</span> <b>nhaas:</b></span> okay!<br/>
<span style="color: #235e5b"><span style="font-size: small">(15:08:34)</span> <b>dweitzel:</b></span> we get weekly reports for projects that have recent usage, but not registered.<br/>
<span style="color: #235e5b"><span style="font-size: small">(15:08:57)</span> <b>dweitzel:</b></span> if we are getting that many projects that that are not registered, then the report needs to be fixed.<br/>
<span style="color: #53b759"><span style="font-size: small">(15:13:10)</span> <b>marian:</b></span> that's right, I was curious about that list that Nina has, though<br/>
<span style="color: #A82F2F"><span style="font-size: small">(15:13:28)</span> <b>nhaas:</b></span> I can send it in here?<br/>
<span style="color: #53b759"><span style="font-size: small">(15:13:44)</span> <b>marian:</b></span> or email, I'll upload it to JIRA ticket then<br/>
<span style="color: #A82F2F"><span style="font-size: small">(15:15:55)</span> <b>nhaas:</b></span> Do you want it in a file or as plain text?<br/>
<span style="color: #53b759"><span style="font-size: small">(15:16:19)</span> <b>marian:</b></span> doesn't matter ... also, perhaps how you generate it<br/>
<span style="color: #53b759"><span style="font-size: small">(15:17:13)</span> <b>marian:</b></span> I do it text file in the end anyway for the JIRA, for the record ...<br/>
<span style="color: #53b759"><span style="font-size: small">(15:19:41)</span> <b>marian:</b></span> for the usage reports Derek mentioned we see if the probe has run recently and report if not, we may enhance it to check also existence of that project in the topology, too<br/>
<span style="color: #235e5b"><span style="font-size: small">(15:20:03)</span> <b>dweitzel:</b></span> no marian, I'm speaking of another report.<br/>
<span style="color: #53b759"><span style="font-size: small">(15:20:30)</span> <b>marian:</b></span> what's email subject line do you recall?<br/>
<span style="color: #235e5b"><span style="font-size: small">(15:20:40)</span> <b>dweitzel:</b></span> "Records with no Project or Projects not registered in OIM"<br/>
<span style="color: #53b759"><span style="font-size: small">(15:21:28)</span> <b>marian:</b></span> ah, good, so the ticket in JIRA should do a review of that code, I'll make a note of it<br/>
<span style="color: #53b759"><span style="font-size: small">(15:21:40)</span> <b>marian:</b></span> thanks!<br/>
<span style="color: #53b759"><span style="font-size: small">(15:22:29)</span> <b>marian:</b></span> @nhaas... can you confirm your email to @blin? is it <a href="mailto:nhaas@ucsc.edu">nhaas@ucsc.edu</a>?<br/>
<span style="color: #53b759"><span style="font-size: small">(15:22:44)</span> <b>marian:</b></span> (not <a href="http://ucsd.edu?">ucsd.edu?</a>)<br/>
<span style="color: #A82F2F"><span style="font-size: small">(15:22:59)</span> <b>nhaas:</b></span> both go to the same email<br/>
<span style="color: #53b759"><span style="font-size: small">(15:23:11)</span> <b>marian:</b></span> ok, thanks<br/>
<span style="color: #a63024"><span style="font-size: small">(16:07:44)</span> <b>efajardo:</b></span> I believe that some cases are just folks<br/>
<span style="color: #a63024"><span style="font-size: small">(16:07:51)</span> <b>efajardo:</b></span> using the wrong project name<br/>
<span style="color: #a63024"><span style="font-size: small">(16:07:58)</span> <b>efajardo:</b></span> but I wonder how can it be tracker<br/>
<span style="color: #a63024"><span style="font-size: small">(16:07:59)</span> <b>efajardo:</b></span> for example<br/>
<span style="color: #a63024"><span style="font-size: small">(16:08:09)</span> <b>efajardo:</b></span> <tt>PCFGOSGUCSD</tt><br/>
<span style="color: #a63024"><span style="font-size: small">(16:08:11)</span> <b>efajardo:</b></span> that should be<br/>
<span style="color: #a63024"><span style="font-size: small">(16:08:17)</span> <b>efajardo:</b></span> <tt>PCFOSGUCSD</tt><br/>
<span style="color: #a63024"><span style="font-size: small">(16:08:33)</span> <b>efajardo:</b></span> that is why I asked @nhaas if the user name or something could be tracker<br/>
<span style="color: #235e5b"><span style="font-size: small">(16:22:37)</span> <b>dweitzel:</b></span> Yeah. We have usernames in gracc. <br/>
<span style="color: #235e5b"><span style="font-size: small">(16:22:49)</span> <b>dweitzel:</b></span> Not in summarized data, but in the raw. <br/>
<span style="color: #A82F2F"><span style="font-size: small">(16:24:56)</span> <b>nhaas:</b></span> LocalUserId?<br/>
<span style="color: #235e5b"><span style="font-size: small">(16:28:28)</span> <b>dweitzel:</b></span> Yes<br/>
<span style="color: #43761b"><span style="font-size: small">(16:30:22)</span> <b>blin:</b></span> i thought we enforced correct project names...or is that only on OSG Connect?<br/>
<span style="color: #a63024"><span style="font-size: small">(16:32:44)</span> <b>efajardo:</b></span> Probably only on OSG Connect<br/>
<span style="color: #a63024"><span style="font-size: small">(16:32:56)</span> <b>efajardo:</b></span> But if it is not a globus specific<br/>
<span style="color: #235e5b"><span style="font-size: small">(16:40:02)</span> <b>dweitzel:</b></span> osgconnect wraps the <tt>condor_submit</tt> command and enforces a project name to be specified, or provides a default.<br/>
<span style="color: #A82F2F"><span style="font-size: small">(17:18:09)</span> <b>nhaas:</b></span> Oh, I should have remembered this but in raw data most records don't have ProjectNames<br/>
<span style="color: #A82F2F"><span style="font-size: small">(17:21:52)</span> <b>nhaas:</b></span> Is there another field that is identical to that of summary records I could use to find these people's usernames?<br/>
<span style="color: #235e5b"><span style="font-size: small">(20:02:30)</span> <b>dweitzel:</b></span> nope, given the nature of summarized records.  Multiple records into one summarized record.<br/>
<span style="color: #235e5b"><span style="font-size: small">(20:06:28)</span> <b>dweitzel:</b></span> @nhaas if the raw record doesn't have a projectname, then it was probably added in the summarization step here: <a href="https://github.com/opensciencegrid/gracc-request/blob/master/src/graccreq/summary_replayer.py#L107">https://github.com/opensciencegrid/gracc-request/blob/master/src/graccreq/summary_replayer.py#L107</a><br/>
<span style="color: #235e5b"><span style="font-size: small">(20:07:23)</span> <b>dweitzel:</b></span> If the summarized record doesn't have a projectname defined, it will be set to <tt>VOName</tt>.  Which now, should probably be <tt>ReportableVOName</tt><br/>
<span style="color: #A82F2F"><span style="font-size: small">(21:00:48)</span> <b>nhaas:</b></span> Oh really. Thatâ€™s interesting<br/>
<span style="color: #A82F2F"><span style="font-size: small">(21:01:53)</span> <b>nhaas:</b></span> I will check that out. Thank you!<br/>
</body>
</html>
