<!DOCTYPE html>
<html>
<head>
<title>Fri Oct 6, 2017 : #gracc (osg)</title>
</head>
<body>
<h3>Fri Oct 6, 2017 : #gracc (osg)</h3>
<span style="color: #e96699"><span style="font-size: small">(09:32:08)</span> <b>ian_cancercomputer:</b></span> Hey all -- is there a way to create project-summary graphs of CPU-Hours rather than wallhours in gracc?  Or is that something the admins would need to do?<br/>
<span style="color: #235e5b"><span style="font-size: small">(09:44:50)</span> <b>dweitzel:</b></span> Hi @ian_cancercomputer yes, it is certainly possible.<br/>
<span style="color: #3c8c69"><span style="font-size: small">(09:45:38)</span> <b>kretzke:</b></span> @ian_cancercomputer you can graph pretty much anything you want in Kibana <a href="https://gracc.opensciencegrid.org/kibana/app/kibana?#/visualize/create?type=histogram&amp;indexPattern=gracc.osg.summary&amp;_g=(refreshInterval:(display:Off,pause:!f,value:0),time:(from:now-30d,mode:quick,to:now))&amp;_a=(filters:!(),linked:!f,query:(query_string:(analyze_wildcard:!f,query:'ResourceType:Payload')),uiState:(spy:(mode:(fill:!f,name:!n))),vis:(aggs:!((enabled:!t,id:'1',params:(field:CpuDuration_user),schema:metric,type:sum),(enabled:!t,id:'2',params:(customInterval:'2h',extended_bounds:(),field:EndTime,interval:auto,min_doc_count:1),schema:segment,type:date_histogram),(enabled:!t,id:'3',params:(field:ProjectName,order:desc,orderBy:'1',size:10),schema:group,type:terms)),listeners:(),params:(addLegend:!t,addTimeMarker:!f,addTooltip:!t,defaultYExtents:!f,legendPosition:right,mode:stacked,scale:linear,setYExtents:!f,shareYAxis:!t,times:!(),yAxis:()),title:'New+Visualization',type:histogram))">https://gracc.opensciencegrid.org/kibana/app/kibana?#/visualize/create?type=histogram&amp;indexPattern=gracc.osg.summary&amp;_g=(refreshInterval:(display:Off,pause:!f,value:0),time:(from:now-30d,mode:quick,to:now))&amp;_a=(filters:!(),linked:!f,query:(query_string:(analyze_wildcard:!f,query:'ResourceType:Payload')),uiState:(spy:(mode:(fill:!f,name:!n))),vis:(aggs:!((enabled:!t,id:'1',params:(field:CpuDuration_user),schema:metric,type:sum),(enabled:!t,id:'2',params:(customInterval:'2h',extended_bounds:(),field:EndTime,interval:auto,min_doc_count:1),schema:segment,type:date_histogram),(enabled:!t,id:'3',params:(field:ProjectName,order:desc,orderBy:'1',size:10),schema:group,type:terms)),listeners:(),params:(addLegend:!t,addTimeMarker:!f,addTooltip:!t,defaultYExtents:!f,legendPosition:right,mode:stacked,scale:linear,setYExtents:!f,shareYAxis:!t,times:!(),yAxis:()),title:'New+Visualization',type:histogram))</a><br/>
<span style="color: #235e5b"><span style="font-size: small">(09:45:48)</span> <b>dweitzel:</b></span> But... I would use caution when looking at CPU-Hours.  They can often be misleading.  Some Batch systems report it funny (PBS doesn't split cpu time and system time)<br/>
<span style="color: #235e5b"><span style="font-size: small">(09:46:27)</span> <b>dweitzel:</b></span> But by Project (implying Payload jobs), it should be somewhat accurate.<br/>
<span style="color: #e96699"><span style="font-size: small">(09:46:58)</span> <b>ian_cancercomputer:</b></span> yeah its payload jobs i'm looking at getting the info for.  Thx for the pointer to Kibana!<br/>
<span style="color: #e96699"><span style="font-size: small">(09:50:15)</span> <b>ian_cancercomputer:</b></span> So is Sum of CpuDuration_user the same metric that's used to calculate the "Total CPU-Hours" widget on gracc's "project summary" page?<br/>
<span style="color: #235e5b"><span style="font-size: small">(09:51:08)</span> <b>dweitzel:</b></span> Yes<br/>
<span style="color: #e96699"><span style="font-size: small">(10:00:57)</span> <b>ian_cancercomputer:</b></span> Crud...  so this looks to be exactly what i want to see, except it's showing a project that's not on my cluster's whitelist having been run..  I don't suppose there's an easy way to go from the graph in kibana to the exit state or logs of the payload jobs themselves, is there?<br/>
<span style="color: #e96699"><span style="font-size: small">(10:02:21)</span> <b>ian_cancercomputer:</b></span> Or should I just enquire with osg-gfactory directly on this?<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:05:52)</span> <b>dweitzel:</b></span> I would start the conversation with the osg-gfactory.  And probably the osg-user support.  I think the osg user-support maintains the frontend which configures the whitelist for the cluster.<br/>
<span style="color: #235e5b"><span style="font-size: small">(10:05:54)</span> <b>dweitzel:</b></span> I think.<br/>
<span style="color: #e96699"><span style="font-size: small">(10:35:29)</span> <b>ian_cancercomputer:</b></span> Thx!<br/>
</body>
</html>
