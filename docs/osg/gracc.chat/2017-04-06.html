<!DOCTYPE html>
<html>
<head>
<title>Thu Apr 6, 2017 : #gracc (osg)</title>
</head>
<body>
<h3>Thu Apr 6, 2017 : #gracc (osg)</h3>
<span style="color: #16569E"><span style="font-size: small">(10:45:47)</span> <b>edquist:</b></span> Final <tt>v1.1.0</tt> is cut and koji build is ready<br/><a href="https://koji.chtc.wisc.edu/koji/buildinfo?buildID=10239">https://koji.chtc.wisc.edu/koji/buildinfo?buildID=10239</a><br/><br/>I tested the new build and everything seems to be working &amp; graphs (still) look good.<br/><br/>Next steps are: @blin approves tagging the build into contrib, and we work with Scott to get it onto display-itb<br/>
<span style="color: #43761b"><span style="font-size: small">(10:46:31)</span> <b>blin:</b></span> could you throw a request into the gracc ticket so we've got a record of it?<br/>
<span style="color: #16569E"><span style="font-size: small">(10:46:39)</span> <b>edquist:</b></span> it's in there!  :slightly_smiling_face:<br/>
<span style="color: #16569E"><span style="font-size: small">(10:46:55)</span> <b>edquist:</b></span> <a href="https://jira.opensciencegrid.org/browse/GRACC-18?focusedCommentId=343181">https://jira.opensciencegrid.org/browse/GRACC-18?focusedCommentId=343181</a><br/>
<span style="color: #43761b"><span style="font-size: small">(10:47:20)</span> <b>blin:</b></span> ah, i was in the zone, didn't see it come across my e-mail<br/>
<span style="color: #43761b"><span style="font-size: small">(10:47:22)</span> <b>blin:</b></span> thanks<br/>
<span style="color: #16569E"><span style="font-size: small">(10:47:54)</span> <b>edquist:</b></span> np thank you<br/>
<span style="color: #902d59"><span style="font-size: small">(10:47:56)</span> <b>tanya:</b></span> Great!<br/>
<span style="color: #902d59"><span style="font-size: small">(10:48:00)</span> <b>tanya:</b></span> now APEL?<br/>
<span style="color: #16569E"><span style="font-size: small">(10:48:06)</span> <b>edquist:</b></span> yes<br/>
<span style="color: #16569E"><span style="font-size: small">(10:48:12)</span> <b>edquist:</b></span> or<br/>
<span style="color: #16569E"><span style="font-size: small">(10:48:23)</span> <b>edquist:</b></span> as soon as this is handed off to Scott<br/>
<span style="color: #902d59"><span style="font-size: small">(10:48:52)</span> <b>tanya:</b></span> so, he will start itb-dispaly connected to GRACC?<br/>
<span style="color: #16569E"><span style="font-size: small">(10:49:28)</span> <b>edquist:</b></span> he made a comment about what he wants here<br/><a href="https://jira.opensciencegrid.org/browse/GRACC-18?focusedCommentId=343172">https://jira.opensciencegrid.org/browse/GRACC-18?focusedCommentId=343172</a><br/>
<span style="color: #16569E"><span style="font-size: small">(10:49:49)</span> <b>edquist:</b></span> and there's also<br/><a href="https://ticket.grid.iu.edu/33354">https://ticket.grid.iu.edu/33354</a><br/>
<span style="color: #902d59"><span style="font-size: small">(10:54:12)</span> <b>tanya:</b></span> have you asked to "spin a machine" :wink:?<br/>
<span style="color: #16569E"><span style="font-size: small">(10:56:29)</span> <b>edquist:</b></span> i will just as soon as i get the build into contrib...<br/>
<span style="color: #9e3997"><span style="font-size: small">(11:22:17)</span> <b>bbockelm:</b></span> @kretzke - how dumb am I to consider putting GRÅCC into Kubernetes?<br/>
<span style="color: #9e3997"><span style="font-size: small">(11:23:04)</span> <b>bbockelm:</b></span> I'm beginning to think that, with GRACC, we now run enough services locally to invest in orchestration.<br/>
<span style="color: #3c8c69"><span style="font-size: small">(11:23:19)</span> <b>kretzke:</b></span> brilliant, I had the same idea<br/>
<span style="color: #3c8c69"><span style="font-size: small">(11:23:52)</span> <b>kretzke:</b></span> worth looking into docker swarm as well. I like kubernetes, have a little cluster running in fermicloud<br/>
<span style="color: #9e3997"><span style="font-size: small">(11:25:09)</span> <b>bbockelm:</b></span> aren't there a few GRACC services that already use Docker Compose?<br/>
<span style="color: #3c8c69"><span style="font-size: small">(11:25:47)</span> <b>kretzke:</b></span> yep, my goal was to have everything dockerized. the collector and stash agents are all under a single docker-compose<br/>
<span style="color: #3c8c69"><span style="font-size: small">(11:25:57)</span> <b>kretzke:</b></span> then it would be trivial to move to kubernetes<br/>
<span style="color: #3c8c69"><span style="font-size: small">(11:26:41)</span> <b>kretzke:</b></span> I also have a docker-compose that starts up all dependancies for development <a href="https://github.com/retzkek/gracc-dev">https://github.com/retzkek/gracc-dev</a><br/>
<span style="color: #9e3997"><span style="font-size: small">(11:26:46)</span> <b>bbockelm:</b></span> @dweitzel - what are your thoughts fro the replay and archiver agents?<br/>
<span style="color: #16569E"><span style="font-size: small">(11:27:27)</span> <b>edquist:</b></span> @tanya: in GRACC-18 i've asked Scott to spin up a machine and i've recommended the (minor) changes to his ansible setup script.  I'm hoping he can take it from there<br/>
<span style="color: #902d59"><span style="font-size: small">(11:35:02)</span> <b>tanya:</b></span> <b>@edquist</b> - thank you!<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:40:39)</span> <b>dweitzel:</b></span> Replay would be easy.  Archiver needs a certificate, but that's not too hard.<br/>
<span style="color: #9e3997"><span style="font-size: small">(11:47:19)</span> <b>bbockelm:</b></span> Put that on your TODO list, but at middling-priority.  I really like the idea, but can't honestly say it's the next thing in line.<br/>
<span style="color: #3c8c69"><span style="font-size: small">(12:13:09)</span> <b>kretzke:</b></span> @dweitzel what’s going on with the stuff you’re working with Edgar on, that keeps tying up the ITB RabbitMQ server?<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:22:45)</span> <b>bbockelm:</b></span> That's the networking data, right?<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:23:00)</span> <b>bbockelm:</b></span> nom nom nom network data.<br/>
<span style="color: #3c8c69"><span style="font-size: small">(12:25:56)</span> <b>kretzke:</b></span> whatever it is, it keeps filling up the disk on the rabbitmq server and blocking gracc. Talking to Marina sounds like it’s crashing the server too.<br/>
<span style="color: #3c8c69"><span style="font-size: small">(12:27:03)</span> <b>kretzke:</b></span> I wonder if you can setup vhost-specific limits, so one vhost can’t block the whole server<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:27:33)</span> <b>bbockelm:</b></span> um, isn't RabbitMQ setup to be able to handle such an event?<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:28:21)</span> <b>bbockelm:</b></span> the upstream thing pushing into RabbitMQ has tons of room in its buffer.<br/>
<span style="color: #3c8c69"><span style="font-size: small">(12:28:21)</span> <b>kretzke:</b></span> yeah, it blocks all publishers until something draws down on the offending queue(s)<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:29:10)</span> <b>bbockelm:</b></span> so the backoff is physical server wide?<br/>
<span style="color: #3c8c69"><span style="font-size: small">(12:30:05)</span> <b>kretzke:</b></span> yep. GRACC can handle it fine, but when it’s blocked 90% of the time, we get a backlog upstream.<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:31:01)</span> <b>bbockelm:</b></span> <a href="https://www.rabbitmq.com/maxlength.html">https://www.rabbitmq.com/maxlength.html</a> ?<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:31:18)</span> <b>bbockelm:</b></span> Looks like someone can put a max limit on a single queue, no?<br/>
<span style="color: #3c8c69"><span style="font-size: small">(12:33:01)</span> <b>kretzke:</b></span> yep<br/>
<span style="color: #3c8c69"><span style="font-size: small">(12:34:20)</span> <b>kretzke:</b></span> messages are dropped though, rather than it blocking anything trying to publish<br/>
<span style="color: #3c8c69"><span style="font-size: small">(12:35:40)</span> <b>kretzke:</b></span> suppose you can set the dead letter exchange &amp; routing key so dropped messages will go back to the queue… that may cause a singularity though<br/>
<span style="color: #9e3997"><span style="font-size: small">(12:41:24)</span> <b>bbockelm:</b></span> But if they are dropped, does the queue ack the message?<br/>
<span style="color: #3c8c69"><span style="font-size: small">(12:43:23)</span> <b>kretzke:</b></span> I would hope not.<br/>
<span style="color: #3c8c69"><span style="font-size: small">(12:45:02)</span> <b>kretzke:</b></span> only matters if you’re publishing with confirms though.<br/>
<span style="color: #9e3997"><span style="font-size: small">(13:06:19)</span> <b>bbockelm:</b></span> If Edgar isn't publishing with confirms, then I have a development item for him....<br/>
<span style="color: #9e3997"><span style="font-size: small">(13:06:24)</span> <b>bbockelm:</b></span> @efajardo ^^^ thoughts?<br/>
<span style="color: #235e5b"><span style="font-size: small">(13:39:25)</span> <b>dweitzel:</b></span> @kretzke I would like to get notifications that backups are happening.  Do you have any thoughts on how we could implement that?<br/>
<blockquote>
<span style="color: #3c8c69"><span style="font-size: small">(2017-04-07 09:07:44)</span> <b>kretzke:</b></span> dweitzel: first step is to monitor the queue, which actually should already have been picked up<br/>
<span style="color: #3c8c69"><span style="font-size: small">(2017-04-07 09:08:22)</span> <b>kretzke:</b></span> yep, gracc.osg.archive is here <a href="https://gracc.opensciencegrid.org/dashboard/db/rabbitmq-queues?refresh=1m&amp;orgId=1">https://gracc.opensciencegrid.org/dashboard/db/rabbitmq-queues?refresh=1m&amp;orgId=1</a><br/>
<span style="color: #3c8c69"><span style="font-size: small">(2017-04-07 09:11:26)</span> <b>kretzke:</b></span> I’ve added it to the alerts here <a href="https://gracc.opensciencegrid.org/dashboard/db/gracc-monitor-alerts">https://gracc.opensciencegrid.org/dashboard/db/gracc-monitor-alerts</a><br/>
<span style="color: #3c8c69"><span style="font-size: small">(2017-04-07 09:12:20)</span> <b>kretzke:</b></span> so that will at least send a notification if the archiver stops pulling down records<br/>
<span style="color: #235e5b"><span style="font-size: small">(2017-04-07 09:48:41)</span> <b>dweitzel:</b></span> That's good.  I would also like to get emails or something every day of the new files being transferred to FNAL backup.<br/>
<span style="color: #3c8c69"><span style="font-size: small">(2017-04-07 09:52:28)</span> <b>kretzke:</b></span> first thought is just uberftp -ls… I’ll see if there’s anything on the enstore side<br/>
</blockquote>
<span style="color: #53b759"><span style="font-size: small">(14:01:04)</span> <b>marian:</b></span> do we have meeting today?<br/>
<span style="color: #53b759"><span style="font-size: small">(14:01:10)</span> <b>marian:</b></span> I'm alone in the room...<br/>
<span style="color: #53b759"><span style="font-size: small">(14:02:05)</span> <b>marian:</b></span> @kretzke @dweitzel<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:05:33)</span> <b>dweitzel:</b></span> We met last week.<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:05:37)</span> <b>dweitzel:</b></span> I assumed not this week.<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:05:49)</span> <b>dweitzel:</b></span> right?<br/>
<span style="color: #53b759"><span style="font-size: small">(14:06:31)</span> <b>marian:</b></span> I thought Kevin said that we'll be meeting now every week while transitioning to production<br/>
<blockquote>
<span style="color: #3c8c69"><span style="font-size: small">(2017-04-07 09:14:39)</span> <b>kretzke:</b></span> marian: I don’t think I said that, I just meant regular meetings will continue. sorry for the confusion.<br/>
<span style="color: #53b759"><span style="font-size: small">(2017-04-07 09:56:52)</span> <b>marian:</b></span> sorry, then I probably misunderstood ... though it sounds like not bad idea however I already have full agenda of meetings anyway :slightly_smiling_face:<br/>
<span style="color: #3c8c69"><span style="font-size: small">(2017-04-07 10:14:46)</span> <b>kretzke:</b></span> yep, me too<br/>
</blockquote>
<span style="color: #53b759"><span style="font-size: small">(14:06:55)</span> <b>marian:</b></span> fine with me, just wanted to know whether we meet today or not<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:08:46)</span> <b>dweitzel:</b></span> oh, I didn't know that.<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:08:52)</span> <b>dweitzel:</b></span> I'm open to meeting.<br/>
<span style="color: #53b759"><span style="font-size: small">(14:10:55)</span> <b>marian:</b></span> I'm there<br/>
<span style="color: #53b759"><span style="font-size: small">(14:12:08)</span> <b>marian:</b></span> @kretzke, joining? can follow up with some questions to group here as well...<br/>
<span style="color: #53b759"><span style="font-size: small">(14:13:51)</span> <b>marian:</b></span> we've established (well, Kyle did, I just talked to him couple days ago) in GOC ticketing system support group "GRACC (Operations)" ... I have edit access in there ... we need to figure sounding email list address of supporters who should receive tickets in the future<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:17:08)</span> <b>dweitzel:</b></span> I have backups working for GRACC.  Going to FNAL.<br/>
<span style="color: #53b759"><span style="font-size: small">(14:17:17)</span> <b>marian:</b></span> @marian uploaded a file: <a href="https://opensciencegrid.slack.com/files/marian/F4WC93ESJ/goc-gracc-group.png">GRACC support unit in GOC</a> and commented: need to replace primary field with some mailinglist address where we'd manage supporters. Once we have mailinglist Kyle will enable this support unit in the GOC sytem. Thoughts?<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:27:44)</span> <b>dweitzel:</b></span> I guess we don't have a good GRACC Operators mailing list.<br/>
<span style="color: #53b759"><span style="font-size: small">(14:39:26)</span> <b>marian:</b></span> yeah, we need to create one ... that's what I was trying to propose<br/>
<span style="color: #53b759"><span style="font-size: small">(14:40:02)</span> <b>marian:</b></span> didn't want to use <a href="mailto:gracc-project@opensciencegrid.org">gracc-project@opensciencegrid.org</a> for that for sure<br/>
<span style="color: #53b759"><span style="font-size: small">(14:40:23)</span> <b>marian:</b></span> maybe have something like <a href="mailto:gracc-support@opensciencegrid.org">gracc-support@opensciencegrid.org</a>?<br/>
<blockquote>
<span style="color: #3c8c69"><span style="font-size: small">(2017-04-07 09:16:02)</span> <b>kretzke:</b></span> marian: <a href="http://opensciencegrid.org">opensciencegrid.org</a> email lists are managed through the fnal listserv. <a href="https://listserv.fnal.gov/">https://listserv.fnal.gov/</a><br/>
<span style="color: #3c8c69"><span style="font-size: small">(2017-04-07 09:16:24)</span> <b>kretzke:</b></span> I can set it up if you like<br/>
<span style="color: #3c8c69"><span style="font-size: small">(2017-04-07 09:17:02)</span> <b>kretzke:</b></span> Just a matter of filling out this form <a href="https://listserv.fnal.gov/request-list.asp">https://listserv.fnal.gov/request-list.asp</a><br/>
<span style="color: #53b759"><span style="font-size: small">(2017-04-07 09:59:03)</span> <b>marian:</b></span> yeah, I just talked with @dweitzel about it ... we just do it then at UNL's listserv ... mailing list won't be open to end-users just assigned in the goc system somewhere in the config so will do <a href="mailto:gracc-support@listserv.unl.edu">gracc-support@listserv.unl.edu</a> and we can also easily manage that from here ...<br/>
<span style="color: #3c8c69"><span style="font-size: small">(2017-04-07 10:14:15)</span> <b>kretzke:</b></span> sure, ok<br/>
</blockquote>
<span style="color: #53b759"><span style="font-size: small">(14:44:51)</span> <b>marian:</b></span> but for ticketing system it can be any mailing list we can manage easily, because that mailing list won't be provided nor visible to users ... just something to associate with goc system ...<br/>
<span style="color: #235e5b"><span style="font-size: small">(14:55:36)</span> <b>dweitzel:</b></span> ok, yeah, gracc-support sounds good.<br/>
<span style="color: #9e3997"><span style="font-size: small">(18:07:27)</span> <b>bbockelm:</b></span> Ok channel - here's one thing I can't figure out browsing from my phone:<br/>
<span style="color: #9e3997"><span style="font-size: small">(18:07:50)</span> <b>bbockelm:</b></span> What's the CPU efficiency of LIGO payload jobs running at NIKHEF?<br/>
<blockquote>
<span style="color: #3c8c69"><span style="font-size: small">(2017-04-07 09:21:15)</span> <b>kretzke:</b></span> bbockelm: how good are you with kibana? :wink:<br/>
<span style="color: #9e3997"><span style="font-size: small">(2017-04-07 11:00:58)</span> <b>bbockelm:</b></span> :slightly_smiling_face: on my phone?  Really crappy.  I eventually got the info via Kibana once I got back to my desktop...<br/>
<span style="color: #3c8c69"><span style="font-size: small">(2017-04-07 11:09:44)</span> <b>kretzke:</b></span> ugh, yeah kibana on the phone sounds like a punishment. calculating efficiency is kinda tricky, probably should add it as a derived field<br/>
<span style="color: #9e3997"><span style="font-size: small">(2017-04-07 11:51:28)</span> <b>bbockelm:</b></span> nah - I just put the sums into a data table, then export to Excel.<br/>
</blockquote>
<span style="color: #9e3997"><span style="font-size: small">(18:09:59)</span> <b>bbockelm:</b></span> @kretzke @efajardo ^^^^<br/>
<span style="color: #9e3997"><span style="font-size: small">(18:12:06)</span> <b>bbockelm:</b></span> Edgar, also see above for questions about the network monitoring<br/>
<span style="color: #a63024"><span style="font-size: small">(18:33:24)</span> <b>efajardo:</b></span> @bbockelm the question is if the code should not push anything else to the queue if it does not get an ack from the last message pushed?<br/>
<span style="color: #9e3997"><span style="font-size: small">(19:10:45)</span> <b>bbockelm:</b></span> Well, no. You can always ACK in bulk in order to get better throughput. The code should stop pushing if it's not getting any ACKs...<br/>
</body>
</html>
