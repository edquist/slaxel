<!DOCTYPE html>
<html>
<head>
<title>Fri Feb 26, 2021 : #gracc (osg)</title>
</head>
<body>
<h3>Fri Feb 26, 2021 : #gracc (osg)</h3>
<span style="color: #235e5b"><span style="font-size: small">(08:55:16)</span> <b>dweitzel:</b></span> Just to close the loop on this.  It has been fixed through a change in how GRACC performs duplicate detection.  I looked through most of the largest sites (including the CMS Tier 2's) and did not see any site affected as significantly as Wisconsin.<br/>
<span style="color: #e475df"><span style="font-size: small">(09:46:34)</span> <b>ajit:</b></span> Thanks Derek for finding the source and the fix. Do you have an understanding of why Wisconsin was affected so significantly ?<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:05:21)</span> <b>dweitzel:</b></span> That's a good question Ajit.  The issue was that a normal non-gpu summarized record was being overwritten by a gpu=1 record.  Since you only have ~1 node with GPU, and it's not running a ton of jobs, 1 GPU node is not going to be a lot of usage.<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:06:10)</span> <b>dweitzel:</b></span> I think a lot of sites are either GPU only, or no GPU.  We don't have a ton of sites that are both within the same CE, though we certainly have some.<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:06:40)</span> <b>dweitzel:</b></span> As far as big sites go, Wisconsin may be the biggest site that has GPU and non GPU resources behind the same CE.<br/>
<blockquote>
<span style="color: #a72f79"><span style="font-size: small">(11:34:16)</span> <b>andrew.melo:</b></span> Hm, this is surprising to hear. The USCMS Tier-2s all received GPUs in late 2020 which should be connected to the global pool. I wouldn't expect it to be 100% yet, but the number should be &gt;1<br/>
</blockquote>
<span style="color: #235e5b"><span style="font-size: small">(11:07:07)</span> <b>dweitzel:</b></span> Though, we were bound to hit this problem eventually.<br/>
<span style="color: #e475df"><span style="font-size: small">(11:16:25)</span> <b>ajit:</b></span> Would it help to setup a separate CE to feed the GPU only nodes for accounting purpose ?<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:17:14)</span> <b>dweitzel:</b></span> Not anymore.<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:17:34)</span> <b>dweitzel:</b></span> Now it should all be fixed and mixed CEs should be fine.<br/>
<span style="color: #e475df"><span style="font-size: small">(11:20:32)</span> <b>ajit:</b></span> Ok, great ! (One less bug for other sites with mixed CEs to deal with in the future) :smile:<br/>
<span style="color: #235e5b"><span style="font-size: small">(11:21:39)</span> <b>dweitzel:</b></span> Indeed, thank you Ajit for noticing this issue.<br/>
<span style="color: #e475df"><span style="font-size: small">(11:22:34)</span> <b>ajit:</b></span> Thanks for the quick debugging, Derek !<br/>
<span style="color: #a63024"><span style="font-size: small">(12:06:30)</span> <b>efajardo:</b></span> @efajardo has left the channel<br/>
</body>
</html>
